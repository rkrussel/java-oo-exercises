if (self.CavalryLogger) { CavalryLogger.start_js(["TzlVI"]); }

__d("VideoPlayerStreamSwitchReasons",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={BANDWIDTH:"bandwidth",FORCED:"forced",PREFER_QUALITY_CLASS:"prefer_quality_class",USER:"user"};}),null);
__d('VideoPlayerShakaPerformanceTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('vpsp_proxy:VideoPlayerShakaPerformanceLoggerConfig',this.$VideoPlayerShakaPerformanceTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('vpsp_proxy:VideoPlayerShakaPerformanceLoggerConfig',this.$VideoPlayerShakaPerformanceTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$VideoPlayerShakaPerformanceTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1=babelHelpers['extends']({},this.$VideoPlayerShakaPerformanceTypedLogger1,j);return this;};h.prototype.setAccessToken=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.access_token=j;return this;};h.prototype.setClientTimeBegin=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.client_time_begin=j;return this;};h.prototype.setClientTimeEnd=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.client_time_end=j;return this;};h.prototype.setCode=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.code=j;return this;};h.prototype.setError=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.error=j;return this;};h.prototype.setEvent=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.event=j;return this;};h.prototype.setIsLive=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.is_live=j;return this;};h.prototype.setLength=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.length=j;return this;};h.prototype.setResource=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.resource=j;return this;};h.prototype.setResult=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.result=j;return this;};h.prototype.setSession=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.session=j;return this;};h.prototype.setState=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.state=j;return this;};h.prototype.setVC=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.vc=j;return this;};h.prototype.setVideoID=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.video_id=j;return this;};var i={access_token:true,client_time_begin:true,client_time_end:true,code:true,error:true,event:true,is_live:true,length:true,resource:true,result:true,session:true,state:true,vc:true,video_id:true};f.exports=h;}),null);
__d('TaggedTimeRanges',['sprintf'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){'use strict';this.$TaggedTimeRanges1=[];this.$TaggedTimeRanges2=0;this.$TaggedTimeRanges3=0;this.$TaggedTimeRanges4=i?i:function(j,k){return j===k;};}h.prototype.add=function(i,j,k){'use strict';if(j<i)return;if(j===i)return;if(this.$TaggedTimeRanges1.length===0){this.$TaggedTimeRanges1.push({start:i,end:j,tag:k});return;}var l=0,m=0;for(var n=0;n<this.$TaggedTimeRanges1.length;n++){if(i>=this.$TaggedTimeRanges1[n].start)l=n+1;if(j<=this.$TaggedTimeRanges1[n].end)m=n;if(j<this.$TaggedTimeRanges1[n].start)break;}this.$TaggedTimeRanges1.splice(l,m-l,{start:i,end:j,tag:k});this.$TaggedTimeRanges5(l);};h.prototype.$TaggedTimeRanges5=function(i){'use strict';var j=this.$TaggedTimeRanges1[i],k=null;if(i!==0)k=this.$TaggedTimeRanges1[i-1];if(k!==null)if(this.$TaggedTimeRanges4(k.tag,j.tag)){if(k.end>=j.start){this.$TaggedTimeRanges1.splice(i-1,2,{start:k.start,end:Math.max(j.end,k.end),tag:j.tag});i--;}}else{if(k.end>=j.start)this.$TaggedTimeRanges1.splice(i-1,1,{start:k.start,end:j.start,tag:k.tag});if(k.end>j.end)this.$TaggedTimeRanges1.splice(i+1,0,{start:j.end,end:k.end,tag:k.tag});}var l=null;if(i!==this.$TaggedTimeRanges1.length-1)l=this.$TaggedTimeRanges1[i+1];if(l)if(this.$TaggedTimeRanges4(l.tag,j.tag)){if(l.start<=j.end)this.$TaggedTimeRanges1.splice(i,2,{start:j.start,end:Math.max(l.end,j.end),tag:j.tag});}else if(l.start<=j.end)if(l.end<j.end){this.$TaggedTimeRanges1.splice(i,1,{start:j.start,end:l.start,tag:j.tag});this.$TaggedTimeRanges1.push({start:l.end,end:j.end,tag:j.tag});}else this.$TaggedTimeRanges1.splice(i+1,1,{start:j.end,end:l.end,tag:l.tag});};h.prototype.get=function(i){'use strict';var j=i>=this.$TaggedTimeRanges3?this.$TaggedTimeRanges2:0,k=null;for(var l=j;l<this.$TaggedTimeRanges1.length;l++)if(this.$TaggedTimeRanges1[l].start<=i&&i<this.$TaggedTimeRanges1[l].end){k=l;break;}this.$TaggedTimeRanges2=k===null?0:k;this.$TaggedTimeRanges3=i;return k===null?null:this.$TaggedTimeRanges1[k].tag;};h.prototype.getLength=function(){'use strict';return this.$TaggedTimeRanges1.length;};f.exports=h;}),null);
/**
 * @providesModule Shaka
 * @preserve-whitespace
 * @generated
 */
__d("Shaka",["Promise"],(function $module_Shaka(global,require,requireDynamic,requireLazy,module,exports){require.__markCompiled && require.__markCompiled();

var Promise = require('Promise');

var g = {};

(function(window){var m,aa=this;function p(a,b){var c=a.split("."),d=aa;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var f;c.length&&(f=c.shift());)c.length||void 0===b?d[f]?d=d[f]:d=d[f]={}:d[f]=b}function q(a,b){function c(){}c.prototype=b.prototype;a.nc=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.lc=function(a,c,e){return b.prototype[c].apply(a,Array.prototype.slice.call(arguments,2))}};/*

 Copyright 2015 Google Inc.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function ba(){};function ca(a){var b=console[a];b?b.bind||(console[a]=function(){b.apply(console,arguments)}):console[a]=function(){}}ca("error");ca("warn");ca("info");ca("log");ca("debug");function da(a){ea[a]={ka:fa(),end:NaN}}function ga(a){if(a=ea[a])a.end=fa()}function ia(a){return(a=ea[a])&&a.end?a.end-a.ka:NaN}var fa=window.performance&&window.performance.now?window.performance.now.bind(window.performance):Date.now,ea={};function ja(a,b,c,d){this.id=a;this.bandwidth=b||0;this.lang=c||"unknown";this.streamInfoID=d;this.active=!1}p("shaka.player.AudioTrack.compare",function(a,b){return a.lang<b.lang?-1:a.lang>b.lang?1:a.bandwidth<b.bandwidth?-1:a.bandwidth>b.bandwidth?1:0});function ka(){this.minBandwidth=this.maxBandwidth=this.maxWidth=this.minHeight=this.maxHeight=null}ka.prototype.clone=function(){var a=new ka;a.maxHeight=this.maxHeight;a.minHeight=this.minHeight;a.maxWidth=this.maxWidth;a.maxBandwidth=this.maxBandwidth;a.minBandwidth=this.minBandwidth;return a};function la(){this.fontSize="100%";this.fontColor=ma;this.fontOpacity=na;this.backgroundColor=oa;this.backgroundOpacity=na;this.fontEdge=pa}p("shaka.player.TextStyle",la);
function qa(a){var b=[];b.push("font-size: "+a.fontSize);b.push("color: "+ra(a.fontColor,a.fontOpacity));b.push("background-color: "+ra(a.backgroundColor,a.backgroundOpacity));for(var c=[],d=0;d<a.fontEdge.length;++d){var f=a.fontEdge[d].slice(3,6);c.push(ra(a.fontEdge[d].slice(0,3),a.fontOpacity)+" "+f.join("px ")+"px")}b.push("text-shadow: "+c.join(","));return b.join("; ")}function ra(a,b){return"rgba("+a.concat(b).join(",")+")"}var ma=[255,255,255],oa=[0,0,0];
la.StandardColors={WHITE:ma,BLACK:oa,RED:[255,0,0],GREEN:[0,255,0],BLUE:[0,0,255],YELLOW:[255,255,0],MAGENTA:[255,0,255],CYAN:[0,255,255]};var na=1;la.StandardOpacities={OPAQUE:na,SEMI_HIGH:.75,SEMI_LOW:.25,TRANSPARENT:0};var pa=[];
la.EdgeStyles={NONE:pa,RAISED:[[34,34,34,1,1,0],[34,34,34,2,2,0],[34,34,34,3,3,0]],DEPRESSED:[[204,204,204,1,1,0],[204,204,204,0,1,0],[34,34,34,-1,-1,0],[34,34,34,0,-1,0]],UNIFORM:[[34,34,34,0,0,4],[34,34,34,0,0,4],[34,34,34,0,0,4],[34,34,34,0,0,4]],DROP:[[34,34,34,2,2,3],[34,34,34,2,2,4],[34,34,34,2,2,5]]};function sa(a,b){this.id=a;this.lang=b||"unknown";this.enabled=this.active=!1}p("shaka.player.TextTrack.compare",function(a,b){return a.lang<b.lang?-1:a.lang>b.lang?1:0});function ta(a,b,c,d,f,e,g){this.id=a;this.bandwidth=b||0;this.width=c||0;this.height=d||0;this.streamInfoID=f;this.fbQualityLabel=e;this.fbQualityClass=g;this.active=!1}function ua(a,b){var c=a.width*a.height,d=b.width*b.height;return c<d?-1:c>d?1:a.bandwidth<b.bandwidth?-1:a.bandwidth>b.bandwidth?1:0}p("shaka.player.VideoTrack.compare",ua);function va(){var a="CustomEvent"in window;if(a)try{new CustomEvent("")}catch(b){a=!1}a||(window.CustomEvent=wa)}p("shaka.polyfill.CustomEvent.install",va);function wa(a,b){var c=document.createEvent("CustomEvent"),d=b||{bubbles:!1,cancelable:!1,detail:null};c.initCustomEvent(a,!!d.bubbles,!!d.cancelable,d.detail);return c};function xa(){var a=Element.prototype;a.requestFullscreen=a.requestFullscreen||a.mozRequestFullScreen||a.msRequestFullscreen||a.webkitRequestFullscreen;a=Document.prototype;a.exitFullscreen=a.exitFullscreen||a.mozCancelFullScreen||a.msExitFullscreen||a.webkitExitFullscreen;"fullscreenElement"in document||Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement}});document.addEventListener("webkitfullscreenchange",
ya);document.addEventListener("webkitfullscreenerror",ya);document.addEventListener("mozfullscreenchange",ya);document.addEventListener("mozfullscreenerror",ya);document.addEventListener("MSFullscreenChange",ya);document.addEventListener("MSFullscreenError",ya)}p("shaka.polyfill.Fullscreen.install",xa);function ya(a){var b=a.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),b=new Event(b,a);a.target.dispatchEvent(b)};function za(){return Promise.reject(Error("The key system specified is not supported."))}function Aa(a){return null==a?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}function Ba(){throw new TypeError("Illegal constructor.");}Ba.prototype.createSession=function(){};Ba.prototype.setServerCertificate=function(){};function Ca(){throw new TypeError("Illegal constructor.");}Ca.prototype.getConfiguration=function(){};Ca.prototype.createMediaKeys=function(){};function r(a){this.c=[];this.b=[];this.ga=Da;if(a)try{a(this.da.bind(this),this.a.bind(this))}catch(b){this.a(b)}}var Da=0;function Fa(){window.Promise||(window.Promise=r,window.Promise.resolve=Ga,window.Promise.reject=Ha,window.Promise.all=Ia,window.Promise.race=Ja,window.setImmediate?(Ka=function(a){return window.setImmediate(a)},La=function(a){return window.clearImmediate(a)}):(Ka=function(a){return window.setTimeout(a,0)},La=function(a){return window.clearTimeout(a)}))}
p("shaka.polyfill.Promise.install",Fa);function Ga(a){var b=new r;b.da(a);return b}function Ha(a){var b=new r;b.a(a);return b}function Ia(a){function b(a,b,c){a.ga==Da&&(f[b]=c,d++,d==f.length&&a.da(f))}var c=new r;if(!a.length)return c.da([]),c;for(var d=0,f=Array(a.length),e=c.a.bind(c),g=0;g<a.length;++g)a[g]&&a[g].then?a[g].then(b.bind(null,c,g),e):b(c,g,a[g]);return c}
function Ja(a){for(var b=new r,c=b.da.bind(b),d=b.a.bind(b),f=0;f<a.length;++f)a[f]&&a[f].then?a[f].then(c,d):c(a[f]);return b}r.prototype.then=function(a,b){var c=new r;switch(this.ga){case 1:Ma(this,c,a);break;case 2:Ma(this,c,b);break;case Da:this.c.push({Ra:c,Ja:a}),this.b.push({Ra:c,Ja:b})}return c};r.prototype.then=r.prototype.then;r.prototype.catch=function(a){return this.then(void 0,a)};r.prototype["catch"]=r.prototype.catch;
r.prototype.da=function(a){if(this.ga==Da){this.Ea=a;this.ga=1;for(a=0;a<this.c.length;++a)Ma(this,this.c[a].Ra,this.c[a].Ja);this.c=[];this.b=[]}};r.prototype.a=function(a){if(this.ga==Da){this.Ea=a;this.ga=2;for(a=0;a<this.b.length;++a)Ma(this,this.b[a].Ra,this.b[a].Ja);this.c=[];this.b=[]}};
function Ma(a,b,c){Na.push(function(){if(c&&"function"==typeof c){try{var a=c(this.Ea)}catch(f){b.a(f);return}a instanceof r?a==b?b.a(new TypeError("Chaining cycle detected")):a.then(b.da.bind(b),b.a.bind(b)):b.da(a)}else 1==this.ga?b.da(this.Ea):b.a(this.Ea)}.bind(a));null==Oa&&(Oa=Ka(Pa))}function Pa(){for(;Na.length;){null!=Oa&&(La(Oa),Oa=null);var a=Na;Na=[];for(var b=0;b<a.length;++b)a[b]()}}function Ka(){return 0}function La(){}var Oa=null,Na=[];function Qa(){var a=HTMLVideoElement.prototype;!a.getVideoPlaybackQuality&&"webkitDroppedFrameCount"in a&&(a.getVideoPlaybackQuality=Ra)}p("shaka.polyfill.VideoPlaybackQuality.install",Qa);function Ra(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}};function Sa(a,b){for(var c=[],d=0;d<a.length;++d){for(var f=!1,e=0;e<c.length&&!(f=b?b(a[d],c[e]):a[d]===c[e]);++e);f||c.push(a[d])}return c};function t(){return Date.now()+Ta}var Ta=0;function Ua(a){this.b=a;this.c=0==Va;this.a=0}var Va=1;function Wa(a){return a.a<a.b.byteLength}function Xa(a){var b=a.b.getUint8(a.a);a.a+=1;return b}function v(a){var b=a.b.getUint32(a.a,a.c);a.a+=4;return b}function Ya(a){var b,c;a.c?(b=a.b.getUint32(a.a,!0),c=a.b.getUint32(a.a+4,!0)):(c=a.b.getUint32(a.a,!1),b=a.b.getUint32(a.a+4,!1));if(2097151<c)throw new RangeError("DataViewReader: Overflow reading 64-bit value.");a.a+=8;return c*Math.pow(2,32)+b}
function Za(a){if(a.a+16>a.b.byteLength)throw new RangeError("DataViewReader: Read past end of DataView.");var b=new Uint8Array(a.b.buffer,a.a,16);a.a+=16;return b}function ab(a,b){if(a.a+b>a.b.byteLength)throw new RangeError("DataViewReader: Skip past end of DataView.");a.a+=b};function bb(a){this.b=a;this.a=new Ua(a);cb||(cb=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])])}var cb;
function db(a){var b;b=eb(a);if(7<b.length)throw new RangeError("EbmlParser: EBML ID must be at most 7 bytes.");for(var c=0,d=0;d<b.length;d++)c=256*c+b[d];b=c;c=eb(a);a:{for(d=0;d<cb.length;d++)if(fb(c,cb[d])){d=!0;break a}d=!1}if(d)c=a.b.byteLength-a.a.a;else{if(8==c.length&&c[1]&224)throw new RangeError("EbmlParser: Variable sized integer value must be at most 53 bits.");for(var d=c[0]&(1<<8-c.length)-1,f=1;f<c.length;f++)d=256*d+c[f];c=d}c=a.a.a+c<=a.b.byteLength?c:a.b.byteLength-a.a.a;d=new DataView(a.b.buffer,
a.b.byteOffset+a.a.a,c);ab(a.a,c);return new gb(b,d)}function eb(a){var b=Xa(a.a),c;for(c=1;8>=c&&!(b&1<<8-c);c++);if(8<c)throw new RangeError("EbmlParser: Variable sized integer must fit within 8 bytes.");var d=new Uint8Array(c);d[0]=b;for(b=1;b<c;b++)d[b]=Xa(a.a);return d}function gb(a,b){this.id=a;this.a=b}
function hb(a){if(8<a.a.byteLength)throw new RangeError("EbmlElement: Unsigned integer has too many bytes.");if(8==a.a.byteLength&&a.a.getUint8(0)&224)throw new RangeError("EbmlParser: Unsigned integer must be at most 53 bits.");for(var b=0,c=0;c<a.a.byteLength;c++)var d=a.a.getUint8(c),b=256*b+d;return b};var ib={"output-restricted":"The required output protection is not available.","output-not-allowed":"The required output protection is not available.",expired:"The decryption key has expired.","internal-error":"The key system has encountered an unspecified error."};function jb(a){this.c=Math.exp(Math.log(.5)/a);this.a=this.b=0}jb.prototype.sample=function(a,b){var c=Math.pow(this.c,a);this.b=b*(1-c)+c*this.b;this.a+=a};function kb(a){return a.b/(1-Math.pow(a.c,a.a))};function x(a){var b=new CustomEvent(a.type,{detail:a.detail,bubbles:!!a.bubbles}),c;for(c in a)c in b||(b[c]=a[c]);return b}function y(a){return new CustomEvent("error",{detail:a,bubbles:!0})};function lb(a,b,c){mb(b);mb(c);return c==b||a>=nb&&c==b.split("-")[0]||a>=ob&&c.split("-")[0]==b.split("-")[0]?!0:!1}var nb=1,ob=2;function mb(a){a=a.toLowerCase().split("-");var b=pb[a[0]];b&&(a[0]=b);return a.join("-")}
var pb={aar:"aa",abk:"ab",afr:"af",aka:"ak",alb:"sq",amh:"am",ara:"ar",arg:"an",arm:"hy",asm:"as",ava:"av",ave:"ae",aym:"ay",aze:"az",bak:"ba",bam:"bm",baq:"eu",bel:"be",ben:"bn",bih:"bh",bis:"bi",bod:"bo",bos:"bs",bre:"br",bul:"bg",bur:"my",cat:"ca",ces:"cs",cha:"ch",che:"ce",chi:"zh",chu:"cu",chv:"cv",cor:"kw",cos:"co",cre:"cr",cym:"cy",cze:"cs",dan:"da",deu:"de",div:"dv",dut:"nl",dzo:"dz",ell:"el",eng:"en",epo:"eo",est:"et",eus:"eu",ewe:"ee",fao:"fo",fas:"fa",fij:"fj",fin:"fi",fra:"fr",fre:"fr",
fry:"fy",ful:"ff",geo:"ka",ger:"de",gla:"gd",gle:"ga",glg:"gl",glv:"gv",gre:"el",grn:"gn",guj:"gu",hat:"ht",hau:"ha",heb:"he",her:"hz",hin:"hi",hmo:"ho",hrv:"hr",hun:"hu",hye:"hy",ibo:"ig",ice:"is",ido:"io",iii:"ii",iku:"iu",ile:"ie",ina:"ia",ind:"id",ipk:"ik",isl:"is",ita:"it",jav:"jv",jpn:"ja",kal:"kl",kan:"kn",kas:"ks",kat:"ka",kau:"kr",kaz:"kk",khm:"km",kik:"ki",kin:"rw",kir:"ky",kom:"kv",kon:"kg",kor:"ko",kua:"kj",kur:"ku",lao:"lo",lat:"la",lav:"lv",lim:"li",lin:"ln",lit:"lt",ltz:"lb",lub:"lu",
lug:"lg",mac:"mk",mah:"mh",mal:"ml",mao:"mi",mar:"mr",may:"ms",mkd:"mk",mlg:"mg",mlt:"mt",mon:"mn",mri:"mi",msa:"ms",mya:"my",nau:"na",nav:"nv",nbl:"nr",nde:"nd",ndo:"ng",nep:"ne",nld:"nl",nno:"nn",nob:"nb",nor:"no",nya:"ny",oci:"oc",oji:"oj",ori:"or",orm:"om",oss:"os",pan:"pa",per:"fa",pli:"pi",pol:"pl",por:"pt",pus:"ps",que:"qu",roh:"rm",ron:"ro",rum:"ro",run:"rn",rus:"ru",sag:"sg",san:"sa",sin:"si",slk:"sk",slo:"sk",slv:"sl",sme:"se",smo:"sm",sna:"sn",snd:"sd",som:"so",sot:"st",spa:"es",sqi:"sq",
srd:"sc",srp:"sr",ssw:"ss",sun:"su",swa:"sw",swe:"sv",tah:"ty",tam:"ta",tat:"tt",tel:"te",tgk:"tg",tgl:"tl",tha:"th",tib:"bo",tir:"ti",ton:"to",tsn:"tn",tso:"ts",tuk:"tk",tur:"tr",twi:"tw",uig:"ug",ukr:"uk",urd:"ur",uzb:"uz",ven:"ve",vie:"vi",vol:"vo",wel:"cy",wln:"wa",wol:"wo",xho:"xh",yid:"yi",yor:"yo",zha:"za",zho:"zh",zul:"zu"};function qb(a){return Object.keys(a).map(function(b){return a[b]})}function z(a,b){return rb(a,b,"boolean")}function A(a,b,c){a=rb(a,b,"number");if(null==a)return null;if(isNaN(a)||a==Number.NEGATIVE_INFINITY||a==Number.POSITIVE_INFINITY)throw new RangeError("'"+b+"' must be finite.");if(null!=c&&a<c)throw new RangeError("'"+b+"' must be >= "+c);return a}function sb(a,b){return rb(a,b,"string")}
function rb(a,b,c){a=a[b];if(null==a)return null;if(typeof a!=c)throw new TypeError("'"+b+"' must be a "+c+".");return a}function tb(a,b,c){a=a[b];if(null==a)return null;if(!(a instanceof c))throw new TypeError("'"+b+"' must be an instance of "+c.name+".");return a};function B(){this.a={}}B.prototype.push=function(a,b){this.a.hasOwnProperty(a)?this.a[a].push(b):this.a[a]=[b]};B.prototype.set=function(a,b){this.a[a]=b};B.prototype.get=function(a){return(a=this.a[a])?a.slice():null};function ub(a){var b=[],c;for(c in a.a)b.push.apply(b,a.a[c]);return b}function vb(a,b,c){if(a=a.a[b])for(b=0;b<a.length;++b)a[b]==c&&(a.splice(b,1),--b)}function wb(a){var b=[],c;for(c in a.a)b.push(c);return b};function C(){this.a=new B}C.prototype.destroy=function(){xb(this);this.a=null};function D(a,b,c,d){b=new yb(b,c,d);a.a.push(c,b)}C.prototype.za=function(a,b){for(var c=this.a.get(b)||[],d=0;d<c.length;++d){var f=c[d];f.target==a&&(f.za(),vb(this.a,b,f))}};function xb(a){for(var b=ub(a.a),c=0;c<b.length;++c)b[c].za();a.a.a={}}function yb(a,b,c){this.target=a;this.type=b;this.a=c;this.target.addEventListener(b,c,!1)}
yb.prototype.za=function(){this.target&&(this.target.removeEventListener(this.type,this.a,!1),this.a=this.target=null)};function E(a){this.Ga=new B;this.W=a}p("shaka.util.FakeEventTarget",E);m=E.prototype;m.addEventListener=function(a,b,c){c||this.Ga.push(a,b)};m.removeEventListener=function(a,b,c){c||vb(this.Ga,a,b)};
m.dispatchEvent=function(a){a.hasOwnProperty("srcElement")||(delete a.srcElement,Object.defineProperty(a,"srcElement",{get:function(){return null}}));if(a.hasOwnProperty("target"))a.target=this;else{delete a.target;var b=this;Object.defineProperty(a,"target",{get:function(){return b},set:function(a){b=a}})}if(a.hasOwnProperty("currentTarget"))a.currentTarget=null;else{delete a.currentTarget;var c=null;Object.defineProperty(a,"currentTarget",{get:function(){return c},set:function(a){c=a}})}return zb(this,
a)};m.Xa=!1;m.la=function(a,b){return this.dispatchEvent(x({type:"debug/shakaEvent",bubbles:!0,detail:{type:a,event:b}}))};function zb(a,b){b.currentTarget=a;for(var c=a.Ga.get(b.type)||[],d=0;d<c.length;++d){var f=c[d];try{f.handleEvent?f.handleEvent(b):f.call(a,b)}catch(e){}}a.W&&b.bubbles&&zb(a.W,b);return b.defaultPrevented};function F(a){E.call(this,null);this.a=new jb(3);this.g=new jb(10);this.h=a||5E5;this.f=0}q(F,E);p("shaka.util.EWMABandwidthEstimator",F);F.prototype.sample=function(a,b){if(!(65536>b)){a=Math.max(a,50);var c=8E3*b/a,d=a/1E3;this.a.sample(d,c);this.g.sample(d,c);this.dispatchEvent(x({type:"bandwidth"}));this.f=Date.now()}};F.prototype.getBandwidth=function(){return.5>this.a.a?this.h:Math.min(kb(this.a),kb(this.g))};F.prototype.getDataAge=function(){return(Date.now()-this.f)/1E3};
F.prototype.supportsCaching=function(){return!1};/*

 Copyright 2015 Facebook Inc.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Ab(a,b,c){F.call(this,c);this.c=a||0;this.b=void 0===b?Infinity:b}q(Ab,F);p("shaka.util.EWMACacheBandwidthEstimator",Ab);Ab.prototype.sample=function(a,b){a<=this.c&&8E3*b/a>this.b||F.prototype.sample.call(this,a,b)};Ab.prototype.supportsCaching=function(){return Infinity!==this.b&&!!this.c};function Bb(){F.call(this)}q(Bb,F);p("shaka.util.EWMASignedURLBandwidthEstimator",Bb);Bb.prototype.supportsCaching=function(){return!0};function G(){var a,b,c=new Promise(function(c,f){a=c;b=f});c.resolve=a;c.reject=b;c.destroy=G.prototype.destroy;return c}G.prototype.destroy=function(){this.catch(function(){});var a=Error("Destroyed!");a.type="destroy";this.reject(a)};function Cb(a){a.split("").reduce(function(a,c,d){return a+(d&&0==d%4?" "+c:c)})};function Db(){this.Da=new G;this.c=!1;this.ba=null;this.a=[];this.b=null}function Eb(a,b){if(a.c)throw Error("Cannot append to a running task!");a.a.push(b)}Db.prototype.start=function(){if(this.c)throw Error("Task already started!");this.c=!0;this.a.unshift(function(){});Fb(this,void 0)};Db.prototype.end=function(){this.a.splice(1)};
function Fb(a,b){var c=a.a[0](b),d;c?(d=c[0],a.b=c[1]):(d=Promise.resolve(),a.b=null);d.then(H(a,function(a){this.ba?(this.a=[],this.b=null,Gb(this)):(this.a.shift(),this.a.length?Fb(this,a):(this.Da.resolve(a),this.b=null))})).catch(H(a,function(a){this.a=[];this.b=null;this.ba?Gb(this):this.Da.reject(a)}))}
function Gb(a){function b(){var a=Error("Task aborted.");a.type="aborted";this.Da.reject(a);window.setTimeout(function(){this.ba.resolve();this.ba=null}.bind(this),5)}a.f?a.f.then(function(){this.f=null;b.call(this)}.bind(a)):b.call(a)};function H(a,b){return b.bind(a)};function Hb(a,b,c,d){MediaSource.isTypeSupported(b);E.call(this,d);d=a.addSourceBuffer(b);this.l=a;this.c=d;this.B=c;this.v=new C;this.g=this.F=null;this.A=!1;this.s=null;this.m=!1;this.b=[];this.D=0;this.j=this.f=this.a=null;this.C=0;this.h=b&&b.charAt(0);D(this.v,this.c,"updateend",this.G.bind(this))}q(Hb,E);Hb.prototype.ca=function(){return{SourceBuffer:this.c}};function Ib(a,b,c){a.Xa&&a.la(b,{type:a.h.charAt(0),segment:c,sourceBuffer:a.c})}var Jb=1/60;
Hb.prototype.destroy=function(){Mb(this).catch(function(){});this.f&&this.f.destroy();this.b=this.a=this.f=null;this.v.destroy();this.l=this.c=this.v=null};function Nb(a,b){for(var c=a.c.buffered,d=0;d<c.length;++d){var f=c.start(d)-Jb,e=c.end(d)+Jb;if(b>=f&&b<=e)return c.end(d)-b}return 0}function Ob(a,b,c){b=b.endTime?b.endTime-b.startTime:1;var d=new Pb;d.a=3;d.i=1E3*b;d.c=1E3*a.C;d.m=a.F;d.j=c;return d}
function Qb(a,b,c,d,f){var e;a.g&&(e=a.g.getOperationLogger("fetch").setResource(b.url.toString()).setLength(Math.round(1E3*(b.endTime-b.startTime))));if(a.a)return a=Error("Cannot fetch ("+a.h+"): previous operation not complete."),a.type="stream",e&&e.setError(a).log(),Promise.reject(a);a.a=new Db;c!=a.c.timestampOffset&&(a.c.timestampOffset=c);c=Ob(a,b,f);var g=Rb(b.url,c,a.B,a.g);Ib(a,"SegmentFetching",b);var h=I.prototype.g.bind(b.url);a.s&&a.m&&(d=a.s);var k=0;d&&(a.s=d,a.m=!1,Eb(a.a,function(){return[d.then(function(a){a.na>
k&&(k=a.na);return Sb(this,a,null)}.bind(this)),this.i.bind(this)]}.bind(a)));Eb(a.a,H(a,function(){return[g.then(function(a){Ib(this,"SegmentFetched",b);a.na>k&&(k=a.na);this.B.getBandwidth();return Sb(this,a,b)}.bind(this)),function(){Ib(this,"SegmentFailed",b);h();return this.i()}.bind(this)]}));var l=0==a.c.buffered.length&&0==a.b.length,n=null;Eb(a.a,function(){if(0==this.c.buffered.length){var a=Error("Failed to buffer segment ("+this.h+").");a.type="stream";return[Promise.reject(a)]}l&&(a=
b.startTime,n=this.c.buffered.start(0)-a);a=Tb(this.b,b.startTime);0<=a?this.b.splice(a+1,0,b):this.b.push(b)}.bind(a));return Ub(a).then(function(){e&&e.log();return Promise.resolve({aa:n,Eb:k})}.bind(a),function(a){e&&e.setError(a).log();return Promise.reject(a)})}
function Vb(a){if(a.a)return a=Error("Cannot clear ("+a.h+"): previous operation not complete."),a.type="stream",Promise.reject(a);a.a=new Db;Eb(a.a,function(){var a;a:if(0==this.c.buffered.length)a=Promise.resolve();else{try{this.c.remove(0,this.l.duration)}catch(c){a=Promise.reject(c);break a}this.b=[];a=this.f=new G}return[a,this.i.bind(this)]}.bind(a));return Ub(a)}
function Wb(a,b){if(a.a){var c=Error("Cannot clearAfter ("+a.h+"): previous operation not complete.");c.type="stream";return Promise.reject(c)}a.a=new Db;Eb(a.a,function(){return[Xb(this,b),this.i.bind(this)]}.bind(a));return Ub(a)}function Mb(a){a.a?(a=a.a,a.ba?a=a.ba:a.c?(a.b&&(a.f=a.b()),a.ba=new G,a=a.ba):(a.c=!0,a=Promise.resolve())):a=Promise.resolve();return a}
function Yb(a){for(var b=a.currentTime,c=b,d=0;d<a.buffered.length;d++)if(b<=a.buffered.start(d)){c=a.buffered.start(d);break}return c}function Zb(a){for(var b=a.currentTime,c=0;c<a.buffered.length;c++)if(b>=a.buffered.start(c)&&b<=a.buffered.end(c)-.05)return!1;return!0}function Ub(a){a.a.start();return a.a.Da.then(H(a,function(){this.a=null})).catch(H(a,function(a){this.a=null;return Promise.reject(a)}))}
function Sb(a,b,c){var d;if(a.g){var f=c?c.url.toString():"init";d=a.g.getOperationLogger("append").setResource(f).setLength(b.byteLength)}try{a.c.appendBuffer(b)}catch(e){return d&&d.setError(e).log(),Promise.reject(e)}a.f=new G;a.j=c;return a.f.then(function(){d&&d.log()},function(a){d&&d.setError(a).log();return Promise.reject(a)})}
function Xb(a,b){if(0==a.c.buffered.length)return Promise.resolve();var c=Tb(a.b,b);if(-1==c||c==a.b.length-1)return Promise.resolve();try{a.c.remove(a.b[c+1].startTime,a.l.duration)}catch(d){return Promise.reject(d)}a.b=a.b.slice(0,c+1);a.f=new G;return a.f}Hb.prototype.i=function(){if(this.f){if("open"==this.l.readyState){var a=Error("Previous operation aborted.");a.type="abort";this.f.reject(a);this.c.abort();this.A&&(this.m=!0);this.f=new G}return this.f}return Promise.resolve()};
Hb.prototype.G=function(){this.f&&(this.j&&(Ib(this,"SegmentAppended",this.j),this.j=null),this.f.resolve(),this.f=null)};function $b(a){return String.fromCharCode.apply(null,a)}p("shaka.util.Uint8ArrayUtils.toString",$b);function ac(a){for(var b=new Uint8Array(a.length),c=0;c<a.length;++c)b[c]=a.charCodeAt(c);return b}p("shaka.util.Uint8ArrayUtils.fromString",ac);p("shaka.util.Uint8ArrayUtils.toBase64",function(a,b){var c=void 0==b?!0:b,d=window.btoa($b(a)).replace(/\+/g,"-").replace(/\//g,"_");return c?d:d.replace(/=*$/,"")});function bc(a){return ac(window.atob(a.replace(/-/g,"+").replace(/_/g,"/")))}
p("shaka.util.Uint8ArrayUtils.fromBase64",bc);p("shaka.util.Uint8ArrayUtils.fromHex",function(a){for(var b=new Uint8Array(a.length/2),c=0;c<a.length;c+=2)b[c/2]=window.parseInt(a.substr(c,2),16);return b});function cc(a){for(var b="",c=0;c<a.length;++c){var d=a[c].toString(16);1==d.length&&(d="0"+d);b+=d}return b}p("shaka.util.Uint8ArrayUtils.toHex",cc);function fb(a,b){if(!a&&!b)return!0;if(!a||!b||a.length!=b.length)return!1;for(var c=0;c<a.length;++c)if(a[c]!=b[c])return!1;return!0};function dc(){this.h=this.a="";this.l=!1;this.s=this.m=null;this.i=this.g=!1;this.j=this.f="";this.c=null;this.b=[]}function ec(a,b){var c=new dc;c.a=a.a;c.h=a.h;c.l=a.l;c.m=a.m;c.s=a.s;c.g=a.g;c.i=a.i;c.f=a.f;c.j=a.j;c.c=a.c?new Uint8Array(a.c.buffer):null;fc(c,a.b);fc(c,b.b);return c}function fc(a,b){var c=a.b.concat(b.map(function(a){return{initData:new Uint8Array(a.initData.buffer),initDataType:a.initDataType}}));a.b=Sa(c,gc)}
function gc(a,b){return a.initDataType==b.initDataType&&fb(a.initData,b.initData)};function hc(a,b,c,d){this.a=[];d&&this.a.push(d)}p("shaka.player.DrmSchemeInfo",hc);hc.DistinctiveIdentifier={OPTIONAL:0,REQUIRED:1};hc.PersistentState={OPTIONAL:0,REQUIRED:1};hc.createUnencrypted=function(){return new hc(0,0,0,null)};function ic(a,b){try{var c=new jc(a,b);return Promise.resolve(c)}catch(d){return Promise.reject(d)}}function kc(a){var b=this.mediaKeys;b&&b!=a&&lc(b,null);delete this.mediaKeys;(this.mediaKeys=a)&&lc(a,this);return Promise.resolve()}
function jc(a,b){this.a=this.keySystem=a;var c=!0;"org.w3.clearkey"==a&&(this.a="webkit-org.w3.clearkey",c=!1);var d=!1,f;f=document.getElementsByTagName("video");f=f.length?f[0]:document.createElement("video");for(var e=0;e<b.length;++e){var g=b[e],h={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:g.initDataTypes,sessionTypes:["temporary"]},k=!1;if(g.audioCapabilities)for(var l=0;l<g.audioCapabilities.length;++l){var n=g.audioCapabilities[l];
n.contentType&&(k=!0,f.canPlayType(n.contentType.split(";")[0],this.a)&&(h.audioCapabilities.push(n),d=!0))}if(g.videoCapabilities)for(l=0;l<g.videoCapabilities.length;++l)n=g.videoCapabilities[l],n.contentType&&(k=!0,f.canPlayType(n.contentType,this.a)&&(h.videoCapabilities.push(n),d=!0));k||(d=f.canPlayType("video/mp4",this.a)||f.canPlayType("video/webm",this.a));"required"==g.persistentState&&(c?(h.persistentState="required",h.sessionTypes=["persistent-license"]):d=!1);if(d){this.b=h;return}}c=
"Unsupported keySystem";if("org.w3.clearkey"==a||"com.widevine.alpha"==a)c="None of the requested configurations were supported.";c=Error(c);c.name="NotSupportedError";c.code=DOMException.NOT_SUPPORTED_ERR;throw c;}jc.prototype.createMediaKeys=function(){var a=new mc(this.a);return Promise.resolve(a)};jc.prototype.getConfiguration=function(){return this.b};function mc(a){this.g=a;this.b=null;this.a=new C;this.c=[];this.f={}}
function lc(a,b){a.b=b;xb(a.a);b&&(D(a.a,b,"webkitneedkey",a.Yb.bind(a)),D(a.a,b,"webkitkeymessage",a.Xb.bind(a)),D(a.a,b,"webkitkeyadded",a.Vb.bind(a)),D(a.a,b,"webkitkeyerror",a.Wb.bind(a)))}m=mc.prototype;m.createSession=function(a){var b=a||"temporary";if("temporary"!=b&&"persistent-license"!=b)throw new TypeError("Session type "+a+" is unsupported on this platform.");a=this.b||document.createElement("video");a.src||(a.src="about:blank");b=new nc(a,this.g,b);this.c.push(b);return b};
m.setServerCertificate=function(){return Promise.reject(Error("setServerCertificate not supported on this platform."))};m.Yb=function(a){a=x({type:"encrypted",initDataType:"webm",initData:a.initData});this.b.dispatchEvent(a)};m.Xb=function(a){var b=oc(this,a.sessionId);b&&(a=x({type:"message",messageType:void 0==b.keyStatuses.Oa()?"licenserequest":"licenserenewal",message:a.message}),b.b&&(b.b.resolve(),b.b=null),b.dispatchEvent(a))};
m.Vb=function(a){if(a=oc(this,a.sessionId))pc(a,"usable"),a.a&&a.a.resolve(),a.a=null};
m.Wb=function(a){var b=oc(this,a.sessionId);if(b){var c=Error("EME v0.1b key error");c.errorCode=a.errorCode;c.errorCode.systemCode=a.systemCode;!a.sessionId&&b.b?(c.method="generateRequest",45==a.systemCode&&(c.message="Unsupported session type."),b.b.reject(c),b.b=null):a.sessionId&&b.a?(c.method="update",b.a.reject(c),b.a=null):(c=a.systemCode,a.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?pc(b,"output-restricted"):1==c?pc(b,"expired"):pc(b,"internal-error"))}};
function oc(a,b){var c=a.f[b];return c?c:(c=a.c.shift())?(c.sessionId=b,a.f[b]=c):null}function nc(a,b,c){E.call(this,null);this.f=a;this.h=!1;this.a=this.b=null;this.c=b;this.g=c;this.sessionId="";this.expiration=NaN;this.closed=new G;this.keyStatuses=new qc}q(nc,E);
function rc(a,b,c){if(a.h)return Promise.reject(Error("The session is already initialized."));a.h=!0;var d;try{if("persistent-license"==a.g)if(c)d=ac("LOAD_SESSION|"+c);else{var f=new Uint8Array(b);d=ac("PERSISTENT|"+$b(f))}else d=new Uint8Array(b)}catch(e){return Promise.reject(e)}a.b=new G;try{a.f.webkitGenerateKeyRequest(a.c,d)}catch(g){if("InvalidStateError"!=g.name)return a.b=null,Promise.reject(g);setTimeout(function(){try{this.f.webkitGenerateKeyRequest(this.c,d)}catch(a){this.b.reject(a),
this.b=null}}.bind(a),10)}return a.b}m=nc.prototype;m.Va=function(a,b){if(this.a)this.a.then(this.Va.bind(this,a,b)).catch(this.Va.bind(this,a,b));else{this.a=a;var c,d;"webkit-org.w3.clearkey"==this.c?(c=$b(new Uint8Array(b)),d=JSON.parse(c),"oct"!=d.keys[0].kty&&(this.a.reject(Error("Response is not a valid JSON Web Key Set.")),this.a=null),c=bc(d.keys[0].k),d=bc(d.keys[0].kid)):(c=new Uint8Array(b),d=null);try{this.f.webkitAddKey(this.c,c,d,this.sessionId)}catch(f){this.a.reject(f),this.a=null}}};
function pc(a,b){a.keyStatuses.Ta(b);var c=x({type:"keystatuseschange"});a.dispatchEvent(c)}m.generateRequest=function(a,b){return rc(this,b,null)};m.load=function(a){return"persistent-license"==this.g?rc(this,null,a):Promise.reject(Error("Not a persistent session."))};m.update=function(a){var b=new G;this.Va(b,a);return b};
m.close=function(){if("persistent-license"!=this.g){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;this.f.webkitCancelKeyRequest(this.c,this.sessionId)}this.closed.resolve();return this.closed};m.remove=function(){return"persistent-license"!=this.g?Promise.reject(Error("Not a persistent session.")):this.close()};function qc(){this.size=0;this.a=void 0}var sc;m=qc.prototype;m.Ta=function(a){this.size=void 0==a?0:1;this.a=a};m.Oa=function(){return this.a};
m.forEach=function(a){this.a&&a(sc,this.a)};m.get=function(a){if(this.has(a))return this.a};m.has=function(a){var b=sc;return this.a&&fb(new Uint8Array(a),new Uint8Array(b))?!0:!1};function tc(a){this.systemIds=[];this.cencKeyIds=[];this.a=[];a=new Ua(new DataView(a.buffer));try{for(;Wa(a);){var b=a.a,c=v(a),d=v(a);1==c?c=Ya(a):0==c&&(c=a.b.byteLength-b);if(1886614376!=d)ab(a,c-(a.a-b));else{var f=Xa(a);if(1<f)ab(a,c-(a.a-b));else{ab(a,3);var e=cc(Za(a)),g=[];if(0<f)for(var h=v(a),k=0;k<h;++k){var l=cc(Za(a));g.push(l)}var n=v(a);ab(a,n);this.cencKeyIds.push.apply(this.cencKeyIds,g);this.systemIds.push(e);this.a.push({start:b,end:a.a-1});a.a!=b+c&&ab(a,c-(a.a-b))}}}}catch(u){}}
;function uc(a,b){try{var c=new vc(a,b);return Promise.resolve(c)}catch(d){return Promise.reject(d)}}
function vc(a,b){this.keySystem=a;for(var c=!1,d=0;d<b.length;++d){var f=b[d],e={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:f.initDataTypes,sessionTypes:["temporary"]},g=!1;if(f.audioCapabilities)for(var h=0;h<f.audioCapabilities.length;++h){var k=f.audioCapabilities[h];if(k.contentType){var g=!0,l=k.contentType.split(";")[0];MSMediaKeys.isTypeSupported(this.keySystem,l)&&(e.audioCapabilities.push(k),c=!0)}}if(f.videoCapabilities)for(h=
0;h<f.videoCapabilities.length;++h)k=f.videoCapabilities[h],k.contentType&&(g=!0,l=k.contentType.split(";")[0],MSMediaKeys.isTypeSupported(this.keySystem,l)&&(e.videoCapabilities.push(k),c=!0));g||(c=MSMediaKeys.isTypeSupported(this.keySystem,"video/mp4"));"required"==f.persistentState&&(e.persistentState="required",e.sessionTypes=["persistent-license"]);if(c){this.a=e;return}}c=Error("Unsupported keySystem");c.name="NotSupportedError";c.code=DOMException.NOT_SUPPORTED_ERR;throw c;}
vc.prototype.createMediaKeys=function(){var a=new wc(this.keySystem);return Promise.resolve(a)};vc.prototype.getConfiguration=function(){return this.a};function xc(a){var b=this.mediaKeys;b&&b!=a&&yc(b,null);delete this.mediaKeys;return(this.mediaKeys=a)?yc(a,this):Promise.resolve()}function wc(a){this.a=new MSMediaKeys(a);this.b=new C}wc.prototype.createSession=function(a){if("temporary"!=(a||"temporary"))throw new TypeError("Session type "+a+" is unsupported on this platform.");return new zc(this.a)};
wc.prototype.setServerCertificate=function(){return Promise.reject(Error("setServerCertificate not supported on this platform."))};function yc(a,b){function c(){b.msSetMediaKeys(d.a);b.removeEventListener("loadedmetadata",c)}xb(a.b);if(!b)return Promise.resolve();D(a.b,b,"msneedkey",Ac);var d=a;try{return 1<=b.readyState?b.msSetMediaKeys(a.a):b.addEventListener("loadedmetadata",c),Promise.resolve()}catch(f){return Promise.reject(f)}}
function zc(a){E.call(this,null);this.c=null;this.g=a;this.b=this.a=null;this.f=new C;this.sessionId="";this.expiration=NaN;this.closed=new G;this.keyStatuses=new Bc}q(zc,E);m=zc.prototype;m.generateRequest=function(a,b){this.a=new G;try{this.c=this.g.createSession("video/mp4",new Uint8Array(b),null),D(this.f,this.c,"mskeymessage",this.Nb.bind(this)),D(this.f,this.c,"mskeyadded",this.Lb.bind(this)),D(this.f,this.c,"mskeyerror",this.Mb.bind(this)),Cc(this,"status-pending")}catch(c){this.a.reject(c)}return this.a};
m.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))};m.update=function(a){this.b=new G;try{this.c.update(new Uint8Array(a))}catch(b){this.b.reject(b)}return this.b};m.close=function(){try{this.c.close(),this.closed.resolve(),xb(this.f)}catch(a){this.closed.reject(a)}return this.closed};m.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))};
function Ac(a){var b=a.initData;if(b){var c=new tc(b);if(1>=c.a.length)a=b;else{var d=[];for(a=0;a<c.a.length;a++)d.push(b.subarray(c.a[a].start,c.a[a].end+1));b=Sa(d,Dc);for(a=c=0;a<b.length;a++)c+=b[a].length;c=new Uint8Array(c);for(a=d=0;a<b.length;a++)c.set(b[a],d),d+=b[a].length;a=c}}else a=b;a=x({type:"encrypted",initDataType:"cenc",initData:a});this.dispatchEvent(a)}function Dc(a,b){return fb(a,b)}
m.Nb=function(a){this.a&&(this.a.resolve(),this.a=null);a=x({type:"message",messageType:void 0==this.keyStatuses.Oa()?"licenserequest":"licenserenewal",message:a.message.buffer});this.dispatchEvent(a)};m.Lb=function(){this.a?(this.a.resolve(),this.a=null):this.b&&(Cc(this,"usable"),this.b.resolve(),this.b=null)};
m.Mb=function(){var a=Error("EME v20140218 key error");a.errorCode=this.c.error;if(null!=this.a)this.a.reject(a),this.a=null;else if(null!=this.b)this.b.reject(a),this.b=null;else switch(this.c.error.code){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:Cc(this,"output-not-allowed");default:Cc(this,"internal-error")}};function Cc(a,b){a.keyStatuses.Ta(b);var c=x({type:"keystatuseschange"});a.dispatchEvent(c)}function Bc(){this.size=0;this.a=void 0}var Ec;
m=Bc.prototype;m.Ta=function(a){this.size=void 0==a?0:1;this.a=a};m.Oa=function(){return this.a};m.forEach=function(a){this.a&&a(Ec,this.a)};m.get=function(a){if(this.has(a))return this.a};m.has=function(a){var b=Ec;return this.a&&fb(new Uint8Array(a),new Uint8Array(b))?!0:!1};function Fc(){Navigator.prototype.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(HTMLMediaElement.prototype.webkitGenerateKeyRequest?(sc=(new Uint8Array([0])).buffer,Navigator.prototype.requestMediaKeySystemAccess=ic,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=kc,window.MediaKeys=mc,window.MediaKeySystemAccess=jc):window.MSMediaKeys?(Ec=(new Uint8Array([0])).buffer,delete HTMLMediaElement.prototype.mediaKeys,
HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=xc,window.MediaKeys=wc,window.MediaKeySystemAccess=vc,Navigator.prototype.requestMediaKeySystemAccess=uc):(Navigator.prototype.requestMediaKeySystemAccess=za,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Aa,window.MediaKeys=Ba,window.MediaKeySystemAccess=Ca))}p("shaka.polyfill.MediaKeys.install",Fc);p("shaka.polyfill.installAll",function(){va();xa();Qa();Fa();Fc()});var Gc=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function J(a){var b;a instanceof J?(Hc(this,a.$),this.ha=a.ha,this.R=a.R,Ic(this,a.ma),this.V=a.V,Jc(this,a.a.clone()),this.ea=a.ea):a&&(b=String(a).match(Gc))?(Hc(this,b[1]||"",!0),this.ha=Lc(b[2]||""),this.R=Lc(b[3]||"",!0),Ic(this,b[4]),this.V=Lc(b[5]||"",!0),Jc(this,b[6]||"",!0),this.ea=Lc(b[7]||"")):this.a=new Mc(null)}m=J.prototype;m.$="";m.ha="";m.R="";m.ma=null;m.V="";m.ea="";
m.toString=function(){var a=[],b=this.$;b&&a.push(Nc(b,Oc,!0),":");if(b=this.R){a.push("//");var c=this.ha;c&&a.push(Nc(c,Oc,!0),"@");a.push(encodeURIComponent(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1"));b=this.ma;null!=b&&a.push(":",String(b))}if(b=this.V)this.R&&"/"!=b.charAt(0)&&a.push("/"),a.push(Nc(b,"/"==b.charAt(0)?Pc:Qc,!0));(b=this.a.toString())&&a.push("?",b);(b=this.ea)&&a.push("#",Nc(b,Rc));return a.join("")};
m.resolve=function(a){var b=this.clone();"data"===b.$&&(b=new J);var c=!!a.$;c?Hc(b,a.$):c=!!a.ha;c?b.ha=a.ha:c=!!a.R;c?b.R=a.R:c=null!=a.ma;var d=a.V;if(c)Ic(b,a.ma);else if(c=!!a.V){if("/"!=d.charAt(0))if(this.R&&!this.V)d="/"+d;else{var f=b.V.lastIndexOf("/");-1!=f&&(d=b.V.substr(0,f+1)+d)}if(".."==d||"."==d)d="";else if(-1!=d.indexOf("./")||-1!=d.indexOf("/.")){for(var f=0==d.lastIndexOf("/",0),d=d.split("/"),e=[],g=0;g<d.length;){var h=d[g++];"."==h?f&&g==d.length&&e.push(""):".."==h?((1<e.length||
1==e.length&&""!=e[0])&&e.pop(),f&&g==d.length&&e.push("")):(e.push(h),f=!0)}d=e.join("/")}}c?b.V=d:c=""!==a.a.toString();c?Jc(b,a.a.clone()):c=!!a.ea;c&&(b.ea=a.ea);return b};m.clone=function(){return new J(this)};function Hc(a,b,c){a.$=c?Lc(b,!0):b;a.$&&(a.$=a.$.replace(/:$/,""))}function Ic(a,b){if(b){b=Number(b);if(isNaN(b)||0>b)throw Error("Bad port number "+b);a.ma=b}else a.ma=null}function Jc(a,b,c){b instanceof Mc?a.a=b:(c||(b=Nc(b,Sc)),a.a=new Mc(b))}
function Lc(a,b){return a?b?decodeURI(a):decodeURIComponent(a):""}function Nc(a,b,c){return"string"==typeof a?(a=encodeURI(a).replace(b,Tc),c&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Tc(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Oc=/[#\/\?@]/g,Qc=/[\#\?:]/g,Pc=/[\#\?]/g,Sc=/[\#\?@]/g,Rc=/#/g;function Mc(a){this.b=a||null}Mc.prototype.a=null;Mc.prototype.c=null;
function Uc(a,b,c){if(!a.a&&(a.a={},a.c=0,a.b))for(var d=a.b.split("&"),f=0;f<d.length;f++){var e=d[f].indexOf("="),g=null,h=null;0<=e?(g=d[f].substring(0,e),h=d[f].substring(e+1)):g=d[f];g=decodeURIComponent(g.replace(/\+/g," "));h=h||"";Uc(a,g,decodeURIComponent(h.replace(/\+/g," ")))}a.b=null;(d=a.a.hasOwnProperty(b)&&a.a[b])||(a.a[b]=d=[]);d.push(c);a.c++}
Mc.prototype.toString=function(){if(this.b)return this.b;if(!this.a)return"";var a=[],b;for(b in this.a)for(var c=encodeURIComponent(b),d=this.a[b],f=0;f<d.length;f++){var e=c;""!==d[f]&&(e+="="+encodeURIComponent(d[f]));a.push(e)}return this.b=a.join("&")};Mc.prototype.clone=function(){var a=new Mc;a.b=this.b;if(this.a){var b={},c;for(c in this.a)b[c]=this.a[c].concat();a.a=b;a.c=this.c}return a};function Vc(a,b,c){a=(new DOMParser).parseFromString(a,"text/xml");if(!a)return null;"string"===typeof b&&(b=[new J(b)]);b=b||[new J("")];c=c||[new J("")];return L({tb:b,u:c},a,Wc)}p("shaka.dash.mpd.parseMpd",Vc);function Wc(){this.id=this.url=null;this.type="static";this.b=this.j=this.u=this.tb=null;this.h=5;this.f=this.c=this.g=null;this.i=1;this.a=[]}function Xc(){this.g=this.f=this.c=this.u=this.a=this.start=this.id=null;this.b=[]}
function Yc(){this.i=this.b=this.height=this.width=this.contentType=this.lang=this.group=this.id=null;this.c=!1;this.h=this.g=this.f=this.u=null;this.j=[];this.a=[]}function Zc(){this.value=null}function $c(){this.contentType=this.lang=this.id=null}function ad(){this.a=this.b=this.g=this.u=this.fbQualityClass=this.fbQualityLabel=this.h=this.f=this.height=this.width=this.bandwidth=this.lang=this.id=null;this.c=[]}function bd(){this.b=this.a=this.c=this.f=null}
function cd(){this.parsedPssh=this.psshBox=null}function dd(){this.url=null}function ed(){this.url=null}function fd(){this.u=null;this.h=1;this.c=this.b=this.f=this.a=this.g=null}fd.prototype.clone=function(){var a=new fd;a.u=gd(this.u);a.h=this.h;a.g=this.g;a.a=M(this.a);a.f=M(this.f);a.b=M(this.b);a.c=M(this.c);return a};function hd(){this.a=this.url=null}hd.prototype.clone=function(){var a=new hd;a.url=gd(this.url);a.a=M(this.a);return a};function id(){this.a=this.url=null}
id.prototype.clone=function(){var a=new id;a.url=gd(this.url);a.a=M(this.a);return a};function jd(){this.u=null;this.a=1;this.c=this.g=null;this.i=0;this.h=null;this.b=[];this.f=null}jd.prototype.clone=function(){var a=new jd;a.u=gd(this.u);a.a=this.a;a.g=this.g;a.c=this.c;a.i=this.i;a.h=M(this.h);a.b=gd(this.b)||[];a.f=M(this.f);return a};function kd(){this.a=this.b=null}kd.prototype.clone=function(){var a=new kd;a.b=gd(this.b);a.a=M(this.a);return a};
function ld(){this.a=1;this.b=this.i=null;this.j=0;this.c=this.g=this.f=this.h=null}ld.prototype.clone=function(){var a=new ld;a.a=this.a;a.i=this.i;a.b=this.b;a.j=this.j;a.h=this.h;a.f=this.f;a.g=this.g;a.c=M(this.c);return a};function md(){this.a=[]}md.prototype.clone=function(){var a=new md;a.a=gd(this.a)||[];return a};function nd(){this.b=this.a=this.startTime=null}nd.prototype.clone=function(){var a=new nd;a.startTime=this.startTime;a.a=this.a;a.b=this.b;return a};
function od(a,b){this.ka=a;this.end=b}od.prototype.clone=function(){return new od(this.ka,this.end)};Wc.TAG_NAME="MPD";Xc.TAG_NAME="Period";Yc.TAG_NAME="AdaptationSet";Zc.TAG_NAME="Role";$c.TAG_NAME="ContentComponent";ad.TAG_NAME="Representation";bd.TAG_NAME="ContentProtection";cd.TAG_NAME="cenc:pssh";dd.TAG_NAME="BaseURL";ed.TAG_NAME="Location";fd.TAG_NAME="SegmentBase";hd.TAG_NAME="RepresentationIndex";id.TAG_NAME="Initialization";jd.TAG_NAME="SegmentList";kd.TAG_NAME="SegmentURL";ld.TAG_NAME="SegmentTemplate";
md.TAG_NAME="SegmentTimeline";nd.TAG_NAME="S";
Wc.prototype.parse=function(a,b){this.url=a.tb;this.id=N(b,"id",O);this.type=N(b,"type",O)||"static";this.b=N(b,"mediaPresentationDuration",pd);this.h=N(b,"minBufferTime",pd,this.h);this.g=N(b,"minimumUpdatePeriod",pd,this.g);this.c=N(b,"availabilityStartTime",qd,this.c);this.f=N(b,"timeShiftBufferDepth",pd,this.f);this.f=null;this.i=N(b,"suggestedPresentationDelay",pd,this.i);var c=a.u,d=Q(this,b,dd);this.u=rd(c,d);if(d=L(this,b,ed))this.j=sd(c,d.url);this.a=Q(this,b,Xc)};
function td(a,b,c,d){if(0!==a.a.length){var f=new Yc;f.contentType="text";f.lang=c||"en";f.c=!0;c=new ad;c.bandwidth=0;c.f=d||"text/vtt";c.u=[new J(b)];f.a.push(c);a.a[0].b.push(f);ud(a.a[0])}}Xc.prototype.parse=function(a,b){this.id=N(b,"id",O);this.start=N(b,"start",pd);this.a=N(b,"duration",pd);var c=Q(this,b,dd);this.u=rd(a.u,c);this.c=L(this,b,fd);this.f=L(this,b,jd);this.g=L(this,b,ld);this.b=Q(this,b,Yc);ud(this)};
function ud(a){for(var b=[],c=0;c<a.b.length;++c){var d=a.b[c];null!=d.group&&(b[d.group]=!0)}for(c=0;c<a.b.length;++c)if(d=a.b[c],null==d.group){for(var f=1;1==b[f];)++f;b[f]=!0;d.group=f}}
Yc.prototype.parse=function(a,b){var c=L(this,b,$c)||{},d=L(this,b,Zc);this.id=N(b,"id",O);this.group=N(b,"group",R);this.lang=N(b,"lang",O,c.lang);this.contentType=N(b,"contentType",O,c.contentType);this.width=N(b,"width",S);this.height=N(b,"height",S);this.b=N(b,"mimeType",O);this.i=N(b,"codecs",O);this.c=d&&"main"==d.value;this.lang&&(this.lang=mb(this.lang));c=Q(this,b,dd);this.u=rd(a.u,c);this.j=Q(this,b,bd);!this.contentType&&this.b&&(this.contentType=this.b.split("/")[0]);this.f=a.c?vd(this,
b,a.c):L(this,b,fd);this.g=a.f?vd(this,b,a.f):L(this,b,jd);this.h=a.g?vd(this,b,a.g):L(this,b,ld);this.a=Q(this,b,ad);!this.b&&this.a.length&&(this.b=this.a[0].f,!this.contentType&&this.b&&(this.contentType=this.b.split("/")[0]))};Zc.prototype.parse=function(a,b){this.value=N(b,"value",O)};$c.prototype.parse=function(a,b){this.id=N(b,"id",O);this.lang=N(b,"lang",O);this.contentType=N(b,"contentType",O);this.lang&&(this.lang=mb(this.lang))};
ad.prototype.parse=function(a,b){this.id=N(b,"id",O);this.bandwidth=N(b,"bandwidth",S);this.width=N(b,"width",S,a.width);this.height=N(b,"height",S,a.height);this.f=N(b,"mimeType",O,a.b);this.h=N(b,"codecs",O,a.i);this.fbQualityLabel=N(b,"FBQualityLabel",O);this.fbQualityClass=N(b,"FBQualityClass",O);this.lang=a.lang;var c=Q(this,b,dd);this.u=rd(a.u,c);this.c=Q(this,b,bd);this.g=a.f?vd(this,b,a.f):L(this,b,fd);this.b=a.g?vd(this,b,a.g):L(this,b,jd);this.a=a.h?vd(this,b,a.h):L(this,b,ld);this.c=this.c.concat(a.j)};
bd.prototype.parse=function(a,b){this.f=b;this.c=N(b,"schemeIdUri",O);var c=N(b,"cenc:default_KID",O);c&&(this.b=c.replace(/[-]/g,""));this.a=L(this,b,cd)};cd.prototype.parse=function(a,b){var c=wd(b);if(c){this.psshBox=bc(c);try{this.parsedPssh=new tc(this.psshBox)}catch(d){if(!(d instanceof RangeError))throw d;}}};dd.prototype.parse=function(a,b){this.url=wd(b)};ed.prototype.parse=function(a,b){this.url=wd(b)};
fd.prototype.parse=function(a,b){this.u=a.u||this.u;this.h=N(b,"timescale",S,this.h);this.g=N(b,"presentationTimeOffset",R,this.g);this.a=N(b,"indexRange",xd,this.a);this.f=N(b,"FBFirstSegmentRange",xd,this.f);this.b=L(this,b,hd)||this.b;this.c=L(this,b,id)||this.c};hd.prototype.parse=function(a,b){var c=N(b,"sourceURL",O);this.url=sd(a.u,c);this.a=N(b,"range",xd,M(a.a))};id.prototype.parse=function(a,b){var c=N(b,"sourceURL",O);this.url=sd(a.u,c);this.a=N(b,"range",xd)};
jd.prototype.parse=function(a,b){this.u=a.u||this.u;this.a=N(b,"timescale",S,this.a);this.g=N(b,"presentationTimeOffset",R,this.g);this.c=N(b,"duration",S,this.c);var c=N(b,"startNumber",S);null!=c&&(this.i=c);this.h=L(this,b,id)||this.h;this.b=(c=Q(this,b,kd))&&0<c.length?c:this.b;this.f=L(this,b,md)||this.f};kd.prototype.parse=function(a,b){var c=N(b,"media",O);this.b=sd(a.u,c);this.a=N(b,"mediaRange",xd)};
ld.prototype.parse=function(a,b){this.a=N(b,"timescale",S,this.a);this.i=N(b,"presentationTimeOffset",R,this.i);this.b=N(b,"duration",S,this.b);var c=N(b,"startNumber",R);null!=c&&(this.j=c);this.h=N(b,"media",O,this.h);this.f=N(b,"index",O,this.f);this.g=N(b,"initialization",O,this.g);this.c=L(this,b,md)||this.c};md.prototype.parse=function(a,b){this.a=Q(this,b,nd)};nd.prototype.parse=function(a,b){this.startTime=N(b,"t",R);this.a=N(b,"d",R);this.b=N(b,"r",yd)};
function rd(a,b){if(!b||0===b.length)return a;for(var c=[],d=0;d<b.length;d++){var f=b[d].url;null==a||0===a.length?c.push(new J(f)):(f=sd(a.slice(0,1),f),c.push(f[0]))}return c}function sd(a,b){if(!b)return a;var c=new J(b);return a?a.map(function(a){return a.resolve(c)}):[c]}function vd(a,b,c){var d=M(c);(b=zd(b,c.constructor.TAG_NAME))&&d.parse(a,b);return d}function L(a,b,c){var d=null;if(b=zd(b,c.TAG_NAME))d=new c,d.parse(a,b);return d}
function zd(a,b){for(var c=null,d=0;d<a.childNodes.length;d++)if(a.childNodes[d].tagName==b){if(c)return null;c=a.childNodes[d]}return c}function Q(a,b,c){for(var d=[],f=0;f<b.childNodes.length;f++)if(b.childNodes[f].tagName==c.TAG_NAME){var e=new c;e.parse.call(e,a,b.childNodes[f]);d.push(e)}return d}function wd(a){a=a.firstChild;return a.nodeType!=Node.TEXT_NODE?null:a.nodeValue}function gd(a){return a?a.map(function(a){return a.clone()}):null}function M(a){return a?a.clone():null}
function N(a,b,c,d){a=c(a.getAttribute(b));return null!=a?a:void 0!==d?d:null}function qd(a){if(!a)return null;a=Date.parse(a);return isNaN(a)?null:Math.floor(a/1E3)}
function pd(a){if(!a)return null;var b=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(a);if(!b)return null;a=0;var c=R(b[1]);c&&(a+=31536E3*c);(c=R(b[2]))&&(a+=2592E3*c);(c=R(b[3]))&&(a+=86400*c);(c=R(b[4]))&&(a+=3600*c);(c=R(b[5]))&&(a+=60*c);b=window.parseFloat(b[6]);(b=isNaN(b)?null:b)&&(a+=b);return a}
function xd(a){var b=/([0-9]+)-([0-9]+)/.exec(a);if(!b)return null;a=R(b[1]);if(null==a)return null;b=R(b[2]);return null==b?null:new od(a,b)}function yd(a){a=window.parseInt(a,10);return isNaN(a)?null:a}function S(a){a=window.parseInt(a,10);return 0<a?a:null}function R(a){a=window.parseInt(a,10);return 0<=a?a:null}function O(a){return a};function Ad(a,b){this.url=a;this.b=b||new Pb;this.g=this.j=this.h=0;this.a=null;this.c=new G;this.f=null}p("shaka.util.AjaxRequest",Ad);function Pb(){this.body=null;this.a=1;this.i=1E3;this.c=0;this.method="GET";this.g="arraybuffer";this.b={};this.h=this.l=!1;this.f=this.m=null;this.j=!1}var Bd=!0;function Cd(a){Dd(a);a.b.body=null;a.c.destroy();a.c=null;a.f=null}function Dd(a){a.a&&(a.a.onload=null,a.a.onreadystatechange=null,a.a.onerror=null,a.a.ontimeout=null);a.a=null}
var Ed=/(.*)\.(xx|fna)\.fbcdn\.net/,Fd=/livestream-lookaside\.facebook\.com$/;
Ad.prototype.i=function(){if(this.a)return this.c;if(0==this.url.lastIndexOf("data:",0)){var a=this.url.split(":")[1].split(";").pop().split(","),b=a.pop(),b="base64"==a.pop()?window.atob(b.replace(/-/g,"+").replace(/_/g,"/")):window.decodeURIComponent(b);"arraybuffer"==this.b.g&&(b=ac(b).buffer);a=JSON.parse(JSON.stringify(new XMLHttpRequest));a.response=b;a.responseText=b.toString();b=this.c;b.resolve(a);Cd(this);return b}if(0==this.url.lastIndexOf("idb:",0))return this.A();this.h++;this.j=Date.now();
this.g||(this.g=this.b.i);this.a=new XMLHttpRequest;var c=this.url,a=new J(c);Bd&&(this.f&&!this.f.supportsCaching()||this.b.h)&&Uc(a.a,"_",Date.now());c=Ed.test(c);if(null!=this.b.f&&c){var d=this.b.f,f=a.a;Uc(f,"_nc_p_n",d.f);null!=d.c?Uc(f,"_nc_p_ts",d.c):null!=d.b&&Uc(f,"_nc_p_o",d.b);null!=d.a&&Uc(f,"_nc_p_rid",d.a)}1==this.b.j&&c&&Uc(a.a,"_nc_playing",1);c=a.toString();a=Fd.test(a.R);this.a.open(this.b.method,c,!0);this.a.responseType=this.b.g;this.a.timeout=this.b.c;this.a.withCredentials=
this.b.l||a;this.a.onload=this.l.bind(this);this.a.onreadystatechange=this.m.bind(this);this.a.onerror=this.v.bind(this);this.a.ontimeout=this.s.bind(this);for(b in this.b.b)this.a.setRequestHeader(b,this.b.b[b]);this.a.send(this.b.body);return this.c};Ad.prototype.send=Ad.prototype.i;function Gd(a,b,c){b=Error(b);b.type=c;b.status=a.a.status;b.url=a.url;b.method=a.b.method;b.body=a.b.body;b.kc=a.a;return b}
Ad.prototype.l=function(a){this.f&&this.f.sample(Date.now()-this.j,a.loaded);a=[403];200<=this.a.status&&299>=this.a.status?(this.c.resolve(this.a),Cd(this)):this.h<this.b.a&&-1===a.indexOf(this.a.status)?Hd(this):(a=Gd(this,"HTTP error.","net"),this.c.reject(a),Cd(this))};Ad.prototype.m=function(){if(this.a.readyState==XMLHttpRequest.HEADERS_RECEIVED&&(this.a.na=Date.now()-this.j,this.b.h)){var a=Date.parse(this.a.getResponseHeader("Date"));a&&(Ta=a-Date.now())}};
Ad.prototype.v=function(){var a=Gd(this,"Network failure.","net");this.c.reject(a);Cd(this)};Ad.prototype.s=function(){if(this.h<this.b.a)Hd(this);else{var a=Gd(this,"Request timed out.","net");this.c.reject(a);Cd(this)}};function Hd(a){Dd(a);window.setTimeout(a.i.bind(a),a.g*(1+.5*(2*Math.random()-1)));a.g*=2};function I(a,b,c,d){this.b=b;this.h=c||0;this.f=null!=d?d:null;this.c=this.a=null;this.j=a;this.i=null}var Id;p("shaka.util.FailoverUri",I);function Jd(a,b){return a&&0!==a.length?a.map(function(a){return a.resolve(b)}):[b]}I.setPrefetchCacheValueGetter=function(a){Id=a};function Rb(a,b,c,d){if(a.a)return a.a;a.a=Kd(a,0,b||new Pb,c,d);return a.a}
I.prototype.g=function(){if(this.c){this.a=null;var a=this.c;if(a.a&&a.a.readyState!=XMLHttpRequest.DONE){a.a.abort();var b=Gd(a,"Request aborted.","aborted");a.c.reject(b);Cd(a)}this.i=this.c=null}};
function Kd(a,b,c,d,f){var e=a.b[b].toString(),g;f&&(g=f.getOperationLogger("request").setResource(e));if(a.h||a.f)f=a.b[b].R,!f.endsWith("fbcdn.net")||f.startsWith("interncache")||f.endsWith("ak.fbcdn.net")?c.b.Range="bytes="+(a.h+"-"+(null!=a.f?a.f:"")):(e+="&bytestart="+a.h,e+=null!==a.f?"&byteend="+a.f:"");a.j&&(e=a.j(e,c.b)||e);f=null;Id&&(f=Id(e));f||(a.c=new Ad(e,c),d&&(a.c.f=d),f=a.c.i());e=f.then(H(a,function(a){this.i=this.c=this.a=null;this.i=a.a?new J(a.a):this.b[b];a.response.na=a.na;
g&&g.setLength(a.response.byteLength||a.response.length).log();return Promise.resolve(a.response)}));return e=e.catch(H(a,function(a){if(this.a&&b+1<this.b.length)return this.a=Kd(this,b+1,c,d);this.a=this.c=null;g&&g.setError(a).log();return Promise.reject(a)}))}I.prototype.clone=function(){return new I(this.j,this.b.map(function(a){return a.clone()}),this.h,this.f)};I.prototype.toString=function(){return this.b[0].toString()};function Ld(a,b,c){this.a=new Pb;this.a.g="text";this.a.a=3;this.a.c=1E3*(null!=b?b:0);c&&(this.a.f=c);this.a.h=!0;this.b=a}function Md(a,b){var c=a.b;return Rb(c,a.a,null,b).then(function(a){a instanceof ArrayBuffer&&(a=String.fromCharCode.apply(null,new Uint8Array(a)));if(a=Vc(a,c.b,[c.i]))return Promise.resolve(a);a=Error("MPD parse failure.");a.type="dash";return Promise.reject(a)})}function Nd(a){this.f=a;this.a=this.b=this.c=null};function Od(a,b,c,d){for(var f=b.a,e=[],g=0;g<d;++g){var h=g+c,k=(h-1)*f.b,l=k/f.a,n=(k+f.b)/f.a,h=Pd(a,b,f.j+h-1,k);if(!h)return null;e.push(new Qd(l,n,h,k))}return e}function Pd(a,b,c,d){if(!b.a)return null;var f=b.a.h;if(!f)return b.u?new I(a,b.u,0,null):null;c=Rd(f,b.id,c,b.bandwidth,d);if(!c)return null;b=Jd(b.u,c);return new I(a,b,0,null)}
function Rd(a,b,c,d,f){var e={RepresentationID:b,Number:c,Bandwidth:d,Time:f};a=a.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)d)?\$/g,function(a,b,c){if("$$"==a)return"$";var d=e[b];if(null==d)return a;"RepresentationID"==b&&c&&(c=void 0);a=d.toString();c=window.parseInt(c,10)||1;c=Math.max(0,c-a.length);return Array(c+1).join("0")+a});try{return new J(a)}catch(g){if(g instanceof URIError)return null;throw g;}}
function Sd(a,b,c){var d=0;c*=b;a=a.a;for(var f=[],e=0;e<a.length&&a[e].a;++e){var g=a[e].startTime,g=null!=g?g:d,h=a[e].b||0;if(0>h)if(h=a[e].a,e+1===a.length)var k=a[0].startTime+c-g,h=Math.ceil(k/h)-1;else h=Math.ceil((a[e+1].startTime-g)/h)-1;if(0<f.length&&g!=d){var k=g-d,l=f[f.length-1];l.debugInfo={endTime:d/b,delta:k/b};l.end=g}for(k=0;k<=h;++k)d=g+a[e].a,f.push({start:g,end:d}),g=d}return f};function Td(a,b){this.a=a;this.b=b||null}Td.prototype.destroy=function(){this.a&&(this.a.g(),this.a=null);this.b=null};Td.prototype.create=function(a){return this.a?Rb(this.a,null,null,a):Promise.resolve(this.b)};function Qd(a,b,c,d,f){this.startTime=a;this.endTime=b;this.url=c;this.a=null!=d?d:null;this.debugInfo=f||null}function Ud(a,b,c){return new Qd(b,c,a.url,null!=a.a?a.a:void 0)}function Tb(a,b){for(var c=a.length-1;0<=c;--c){var d=a[c];if(b>=d.startTime&&(null==d.endTime||b<d.endTime))return c}return-1}function Vd(a,b){return a.map(function(a){return Ud(a,a.startTime+b,null!=a.endTime?a.endTime+b:null)})};function de(){}
de.prototype.parse=function(a,b,c,d,f){var e=null;try{a:{var g=[],h=new Ua(a),k=v(h);if(1936286840!=v(h))e=null;else{1==k&&(k=Ya(h));var l=Xa(h);ab(h,3);ab(h,4);var n=v(h);if(0==n)e=null;else{var u,w;0==l?(u=v(h),w=v(h)):(u=Ya(h),w=Ya(h));ab(h,2);var P=h.b.getUint16(h.a,h.c);h.a+=2;a=u;b=b+k+w;for(w=k=0;w<P;w++){var K=v(h);u=(K&2147483648)>>>31;var l=K&2147483647,ha=v(h);v(h);if(1==u){e=null;break a}var Kb;Kb=0==w&&f?f:new I(d,c,b,b+l-1);u=a/n;var Lb=(a+ha)/n;0===w&&(k=u);g.push(new Qd(u-k,Lb-k,Kb));
a+=ha;b+=l}e=g}}}}catch($a){if(!($a instanceof RangeError))throw $a;}return e};function T(a){this.a=a;this.aa=0;this.g=[];this.Wa=!1}T.prototype.G=function(){return!!this.g[this.g.length-1]};T.prototype.lastPollHadChanges=T.prototype.G;T.prototype.D=function(){var a=this.g,b=a.lastIndexOf(!0);if(1>b)return 0;a=a.lastIndexOf(!0,b-1);return 0>a?0:b-a-1};T.prototype.getFetchesBetweenRecentChanges=T.prototype.D;T.prototype.C=function(){return Math.floor((this.g.length-1-this.g.lastIndexOf(!0))/2)};T.prototype.getConsecutiveUpdatesWithoutChanges=T.prototype.C;
T.prototype.B=function(){return this.g.length-1-this.g.lastIndexOf(!1)};T.prototype.getConsecutiveUpdatesWithChanges=T.prototype.B;T.prototype.destroy=function(){this.a=null};T.prototype.length=function(){return this.a.length};T.prototype.F=function(){return(this.a||[]).slice()};T.prototype.getSegments=T.prototype.F;function U(a){if(0==a.a.length)throw new RangeError("SegmentIndex: There is no first SegmentReference.");return a.a[0]}
T.prototype.w=function(){if(0==this.a.length)throw new RangeError("SegmentIndex: There is no last SegmentReference.");return this.a[this.a.length-1]};T.prototype.last=T.prototype.w;m=T.prototype;m.get=function(a){if(0>a||a>=this.a.length)throw new RangeError("SegmentIndex: The specified index is out of range.");return this.a[a]};m.pa=function(a){a=Tb(this.a,a);return 0<=a?this.a[a]:null};m.Qa=function(a){ee(this,a);return!0};
function ee(a,b){a.aa!=b.aa&&(b=new T(Vd(b.a,a.aa-b.aa)));if(0==a.length())a.a=b.a.slice(0);else if(0!=b.length()&&null!=a.w().endTime)if(null!=b.w().endTime&&b.w().endTime<a.w().endTime)a.Wa=!0;else{a.Wa=!1;if(a.w().endTime<=U(b).startTime)var c=Ud(a.w(),a.w().startTime,U(b).startTime),c=a.a.slice(0,-1).concat([c]);else{var d;for(d=0;d<a.a.length&&!(a.a[d].endTime>=U(b).startTime);++d);a.a[d].startTime<U(b).startTime?(c=Ud(a.a[d],a.a[d].startTime,U(b).startTime),c=a.a.slice(0,d).concat([c])):(U(a).startTime>
U(b).startTime||U(b),c=a.a.slice(0,d))}a.a=c.concat(b.a)}}m.oa=function(a){var b=a-this.aa;if(0==b)return 0;this.a=Vd(this.a,b);this.aa=a;return b};m.Ma=function(){return 0<this.length()?{start:U(this).startTime,end:this.w().endTime}:{start:0,end:0}};function V(a,b,c,d){T.call(this,a);this.i=b;this.A=c;this.h=d;this.j=this.i.b||this.i.a.reduce(function(a,b){return null==b.a?NaN:a+b.a},0)||0;this.b=this.s=this.f=null;fe(this)}q(V,T);V.prototype.destroy=function(){this.A=this.i=null;T.prototype.destroy.call(this)};V.prototype.pa=function(a){ge(this,t()/1E3);return T.prototype.pa.call(this,a)};V.prototype.Qa=function(a){if(!(a instanceof V))return!1;ee(this,a);this.j=Math.max(this.j,a.j);null==this.f?(this.h=a.h,fe(this)):he(this);return!0};
function fe(a){he(a);if(0!=a.length()){a.length();var b=null!=a.w().endTime?a.w().endTime:a.w().startTime;if(a.i.c>a.h)a.f=b;else{var c=a.h-(a.i.c+a.A.start);0>c?a.f=b:c<Math.max(a.w().startTime,a.w().endTime||0)?(a.w(),a.f=b):a.f=c}a.s=a.w().startTime;a.b=U(a).startTime}}V.prototype.oa=function(a){a=T.prototype.oa.call(this,a);Math.min.apply(null,this.a.filter(function(a){return null!=a.endTime}).map(function(a){return a.endTime-a.startTime}));null!=this.f&&(this.s+=a,this.b+=a,this.f+=a);return a};
V.prototype.Ma=function(){return ie(this,t()/1E3)};function ie(a,b){ge(a,b);if(null==a.f||null==a.s||null==a.b)return{start:0,end:0};var c=Number.POSITIVE_INFINITY;a.j&&(c=a.j);var d=b-a.h,f=a.f+d;null!=a.i.f&&(f=f-a.b-a.i.f,0<f&&(a.b+=f));a.b=Math.min(a.b,c);d=a.s+d;if(d<a.b)return{start:a.b,end:a.b};d=0<a.length()?null!=a.w().endTime?Math.min(d,a.w().endTime):d:a.b;d=Math.max(d,a.b);d=Math.min(d,c);return{start:a.b,end:d}}
function ge(a,b){he(a);if(null!=a.i.f)if(null==a.f)a.length();else{for(var c=a.f+(b-a.h),d=0,f=0;f<a.a.length;++f){var e=null;f<a.a.length-1?e=a.a[f+1].endTime:(e=a.a[f],e=null!=e.endTime?e.endTime+(e.endTime-e.startTime):null);if(null!=e&&e<c-a.i.f)++d;else break}0<d&&a.a.splice(0,d)}}function he(a){if(a.j){for(var b=0,c=a.a.length-1;0<=c;--c)if(a.a[c].startTime>a.j)++b;else break;0<b&&a.a.splice(-b)}};function je(a,b,c,d,f){var e=1,g=0,h;if(a.c>d)h=null;else{var k=a.i||0,l=a.f||0;h=c.a;h=h.b/h.a;var n=d-(a.c+b.start);0>n?h=null:(l=n-2*h-l,0>l&&(l=0),l=Math.ceil(l/h)*h,n-=h,0>n?h=null:(k=Math.floor(n/h)*h-k,0>k&&(k=0),k=Math.floor(k/h)*h,h={eb:l/h+1,current:(k>=l?k:l)/h+1}))}h&&(e=h.eb,g=h.current-h.eb+1);e=Od(f,c,e,g);if(null==e)throw a=Error("Failed to generate SegmentReferences."),a.type="stream",a;V.call(this,e,a,b,d);this.v=c;this.m=this.c=0<this.length()?a.c+b.start+this.w().endTime:null;
this.l=h?h.current+1:null;this.W=f}q(je,V);je.prototype.destroy=function(){this.W=this.v=null;V.prototype.destroy.call(this)};je.prototype.pa=function(a){var b=t()/1E3;ke(this,b);ge(this,b);return T.prototype.pa.call(this,a)};je.prototype.Qa=function(a){if(null!=this.c||!(a instanceof je)||null==a.c)return!1;this.c=a.c;this.m=a.m;this.l=a.l;this.h=a.h;this.j=a.j;ee(this,a);ke(this,t()/1E3);fe(this);return!0};
je.prototype.oa=function(a){a=V.prototype.oa.call(this,a);null!=this.c&&(this.c+=a,this.m+=a);return a};je.prototype.Ma=function(){var a=t()/1E3;ke(this,a);return ie(this,a)};function ke(a,b){if(null!=a.c&&null!=a.m&&null!=a.l){var c=a.v.a,c=c.b/c.a,d=Math.floor((a.m+(b-a.h)-a.c)/c);if(0!=d){var f=Od(a.W,a.v,a.l,d);Array.prototype.push.apply(a.a,Vd(f,a.aa));a.c+=d*c;a.l+=d}}};function le(a,b,c,d,f){this.f=a;this.b=b;this.c=c;this.h=d;this.a=null;this.g=f}le.prototype.destroy=function(){this.g=this.c=this.b=this.f=null;this.a&&(this.a.destroy(),this.a=null)};
le.prototype.create=function(){if(this.a)return Promise.resolve(this.a);if("dynamic"==this.f.type)try{this.a=new je(this.f,this.b,this.c,this.h,this.g)}catch(a){return Promise.reject(a)}else{var b;b=this.c.a;if(b=Od(this.g,this.c,1,Math.ceil(this.b.a/(b.b/b.a)))){if(0<b.length){var c=b[b.length-1];b[b.length-1]=Ud(c,c.startTime,this.b.a)}b=new T(b)}else b=null;this.a=b;if(!this.a)return b=Error("Failed to generate SegmentReferences"),b.type="stream",Promise.reject(b)}return Promise.resolve(this.a)};function me(a,b,c,d,f){this.c=a;this.b=b;this.g=c;this.a=null;this.h=d;this.f=f}me.prototype.destroy=function(){this.f=this.g=this.b=this.c=null;this.a&&(this.a.destroy(),this.a=null)};
me.prototype.create=function(){if(this.a)return Promise.resolve(this.a);var a=this.g.b,b=[];a.f&&(b=Sd(a.f,a.a||1,this.b.a||0));var c=0;a.c&&a.i?c=(a.i-1)*a.c:0<b.length&&(c=b[0].start-(a.g||0));var d=c,f=a.b.length;0<b.length&&b.length!=a.b.length&&(f=Math.min(b.length,a.b.length));for(var e=[],g=0;g<f;++g){var h=a.b[g],k=c/a.a,l=null,n=null,u;a.c?(l=c+a.c,n=l/a.a):0<b.length?(u=b[g].debugInfo,l=b[g].end-(a.g||0),n=l/a.a):(n=k+this.b.a,l=n*a.a);var c=l,l=0,w=null;h.a&&(l=h.a.ka,w=h.a.end);n=Math.min(this.b.a+
d/a.a,n);e.push(new Qd(k,n,new I(this.f,h.b,l,w),null,u||null))}"dynamic"==this.c.type?this.a=new V(e,this.c,this.b,this.h):this.a=new T(e);return Promise.resolve(this.a)};function ne(a,b,c,d,f){this.b=a;this.c=b;this.f=c;this.h=d;this.a=null;this.g=f}ne.prototype.destroy=function(){this.g=this.f=this.c=this.b=null;this.a&&(this.a.destroy(),this.a=null)};
ne.prototype.create=function(){if(this.a)return Promise.resolve(this.a);for(var a=this.f.a,b=Sd(a.c,a.a||1,this.c.a||0),c=[],d=0;d<b.length;++d){var f=b[d].start,e=b[d].debugInfo,g=f/a.a,h=b[d].end/a.a,k=Pd(this.g,this.f,d+a.j,f);if(!k)return a=Error("Failed to generate media URL."),a.type="dash",Promise.reject(a);var l=(a.i||0)/a.a;c.push(new Qd(g-l,h-l,k,f,e||null))}"dynamic"==this.b.type?this.a=new V(c,this.b,this.c,this.h):this.a=new T(c);return Promise.resolve(this.a)};function oe(){this.H=pe++;this.id=this.O=this.L=null;this.b=0;this.height=this.width=this.bandwidth=null;this.c=this.a="";this.switchReason=this.fbQualityClass=this.fbQualityLabel=null;this.f=[];this.U=!1;this.K=!0}var pe=0;oe.prototype.destroy=function(){this.L&&(this.L.destroy(),this.L=null);this.O&&(this.O.destroy(),this.O=null)};function qe(a){var b=a.a||"";a.c&&(b+='; codecs="'+a.c+'"');return b}
function re(){this.H=se++;this.id=null;this.contentType=this.lang="";this.b=!1;this.o=[];this.a=[]}var se=0;re.prototype.destroy=function(){for(var a=0;a<this.o.length;++a)this.o[a].destroy();this.a=this.o=null};function te(a){for(var b=[],c=0;c<a.a.length;++c){var d=new ue;d.id=a.H;d.a=a.a[c];d.contentType=a.contentType;d.b=a.o.length?qe(a.o[0]):"";b.push(d)}return b}function ve(){this.id=null;this.start=0;this.b=null;this.a=[]}
ve.prototype.destroy=function(){for(var a=0;a<this.a.length;++a)this.a[a].destroy();this.a=null};function we(){this.b=!1;this.h=this.g=this.f=null;this.c=0;this.a=[];this.i=!1}we.prototype.destroy=function(){for(var a=0;a<this.a.length;++a)this.a[a].destroy();this.a=null};function ue(){this.id=0;this.a=null;this.b=this.contentType=""};function xe(a,b,c,d,f,e){E.call(this,a);this.b=b;this.a=new Hb(c,d,f,this);this.I={};this.T=0;this.F=this.v=this.c=null;this.M=!1;this.g=this.A=null;this.m=!1;this.C=0;this.D=!1;this.j=null;this.i=!1;this.h=new G;this.l=this.f=!1;this.s=0;this.B=15;this.Z=this.P=!1;this.Y=e;this.S=!1;this.X=null;this.G=!1}q(xe,E);xe.prototype.ca=function(){return{SourceBufferManager:this.a}};xe.prototype.getDebug=xe.prototype.ca;
xe.prototype.J=function(a){null!=a.initialStreamBufferSize&&(this.s=Number(a.initialStreamBufferSize));null!=a.dynamicStreamBufferSize&&(this.C=Number(a.dynamicStreamBufferSize));null!=a.streamBufferSize&&(this.B=Number(a.streamBufferSize));null!=a.addCdnDebugQueryParameters&&(this.P=Boolean(a.addCdnDebugQueryParameters));null!=a.useInitialBufferSizeWhenPaused&&(this.Z=Boolean(a.useInitialBufferSizeWhenPaused));null!=a.segmentRequestTimeout&&(this.a.C=Number(a.segmentRequestTimeout));null!=a.resolveVideoTimeUpdateOnFragmentedTimeRanges&&
(this.S=Boolean(a.resolveVideoTimeUpdateOnFragmentedTimeRanges));null!=a.performanceLogger&&(this.X=this.I.performanceLogger=a.performanceLogger);null!=a.reappendInitSegmentAfterAbort&&(this.I.reappendInitSegmentAfterAbort=Boolean(a.reappendInitSegmentAfterAbort));a=this.a;var b=this.I;null!=b.reappendInitSegmentAfterAbort&&(a.A=Boolean(b.reappendInitSegmentAfterAbort));null!=b.performanceLogger&&(a.g=b.performanceLogger)};
xe.prototype.destroy=function(){ye(this);this.h.destroy();this.c=this.h=null;this.a.destroy();this.W=this.b=this.a=null};m=xe.prototype;m.xa=function(){return this.c};m.Na=function(){return this.v};m.Cb=function(a){this.f||a.then(function(){this.f=!0;this.g||ze(this,0)}.bind(this)).catch(function(){});return this.h};m.Pa=function(){return this.l};
m.ya=function(a,b,c,d){a!=this.c&&(this.F=a.O.create(this.X),a.L.create().then(H(this,function(f){if(this.b){var e=this.c;this.c=a;this.v=f;this.M=!0;this.A=d?d:null;this.m||(e?b&&Ae(this,!0,c):ze(this,0))}})).catch(H(this,function(a){"aborted"!=a.type&&(this.f?(a=y(a),this.dispatchEvent(a)):this.h.reject(a))})))};m.xb=function(){return Ae(this,!1)};m.zb=function(){this.D=!0};
function Ae(a,b,c){a.c&&!a.m&&(a.m=!0,ye(a),Mb(a.a).then(H(a,function(){var a=this.b.currentTime;if(!b&&0<Nb(this.a,a)&&0<=Tb(this.a.b,a))return Promise.resolve();if(c)return Wb(this.a,this.b.currentTime+c);this.G=!0;return Vb(this.a)})).then(H(a,function(){this.m=!1;ze(this,0)})).catch(H(a,function(a){this.m=!1;this.f?(a=y(a),this.dispatchEvent(a)):this.h.reject(a)})))}m.Ab=function(a){return 0<Nb(this.a,a)&&0<=Tb(this.a.b,a)};m.Ba=function(){};m.Ka=function(){return!0};
function Be(a){var b=a.Z&&a.b.paused?a.s:a.B;a.C&&!a.b.paused&&(b=Math.max(Math.min(a.v.w().endTime-a.b.currentTime,a.C),a.B));return a.i?Math.max(a.s,b):a.s}
m.Ub=function(){if(this.i&&!this.f)this.g=null;else{var a;if(a=this.f&&!this.l)a=1<this.a.c.buffered.length?!0:!1;if(a&&(this.D||Zb(this.b)))this.S&&(this.b.currentTime=Yb(this.b)),this.D=!1,Ae(this,!0);else{this.g=null;a=this.c;var b=this.v,c=this.b.currentTime;if(Nb(this.a,this.i?c:c+(this.j||0))>=Be(this))Ce(this),ze(this,1E3/(5*(Math.abs(this.b.playbackRate)||1)));else{var d=De(this,c,b);d?(b=Qb(this.a,d,a.b,this.F,this.P&&!this.b.paused),this.Y&&"video"===a.a.split("/")[0]&&this.Y(d.startTime,
d.endTime,{id:a.id,reason:this.A}),this.F=null,this.M&&(this.M=!1,d=this.A,this.A=null,Ee(this,a,d)),this.l=!1,b.then(H(this,function(a){var b=a.aa;a=a.Eb;this.i||(this.T=a);null==this.j&&(this.j=b);this.G&&0<Nb(this.a,c)&&(this.G=!1,this.b.currentTime+=.001);ze(this,0)})).catch(H(this,function(a){if("aborted"!=a.type){var b=[0,404,410,502,503,504];"net"==a.type&&-1!=b.indexOf(a.kc.status)&&this.c&&ze(this,1E3);a=y(a);this.dispatchEvent(a)}}))):(Ce(this),this.f&&!this.l&&(this.l=!0,Fe(this)),ze(this,
200))}}}};function De(a,b,c){a=a.a;var d=a.b.length;a=0<d?a.b[d-1]:null;return null!=a?null!=a.endTime?c.pa(a.endTime):null:c.pa(b)||(c.length()?c.w():null)}function Ce(a){if(!a.i&&null!=a.j){a.i=!0;var b=a.a,c=a.j,d=c-b.D;0!=d&&(b.b=Vd(b.b,d),b.D=c);a.h.resolve(a.j)}}function Ee(a,b,c){var d=b.a.split("/")[0];b=x({type:"adaptation",bubbles:!0,contentType:d,size:"video"!=d?null:{width:b.width,height:b.height},bandwidth:b.bandwidth,reason:c});a.dispatchEvent(b)}
function Fe(a){var b=x({type:"ended"});a.dispatchEvent(b)}function ze(a,b){a.g=window.setTimeout(a.Ub.bind(a),b)}function ye(a){null!=a.g&&(window.clearTimeout(a.g),a.g=null)}m.La=function(){return this.T};function Ge(a){this.b=a;this.a=null}Ge.prototype.destroy=function(){this.a&&(this.a.destroy(),this.a=null)};Ge.prototype.create=function(){if(this.a)return Promise.resolve(this.a);var a=new Qd(0,null,this.b);this.a=new T([a]);return Promise.resolve(this.a)};function He(a,b){E.call(this,a);this.b=b;this.g=!0;this.h=this.f=null;this.c=new G;this.a=null}q(He,E);He.prototype.J=function(){};He.prototype.destroy=function(){this.a&&this.b.removeChild(this.a);this.c.destroy();this.W=this.b=this.f=this.h=this.a=this.c=null};m=He.prototype;m.xa=function(){return this.f};m.Na=function(){return this.h};m.Cb=function(){return this.c};m.Pa=function(){return!0};
m.ya=function(a){a.L.create().then(H(this,function(b){if(this.b){if(0==b.length())return Promise.reject(Error("No subtitles URL available."));var c=this.f;this.f=a;this.h=b;b=U(b).url.b[0].toString();var d=this.Ka();this.a&&(this.Ba(!1),this.b.removeChild(this.a));this.a=document.createElement("track");this.b.appendChild(this.a);this.a.src=b;this.Ba(d);b=x({type:"adaptation",bubbles:!0,contentType:"text",size:null,bandwidth:a.bandwidth});this.dispatchEvent(b);c||this.c.resolve(0)}}))};m.xb=function(){};
m.zb=function(){};m.Ab=function(){return!0};m.Ba=function(a){this.g=a;this.a&&(this.a.track.mode=a?"showing":"disabled")};m.Ka=function(){this.a&&(this.g="showing"==this.a.track.mode);return this.g};function Ie(){}
Ie.prototype.parse=function(a,b,c,d){var f=null;try{var e;var g=new bb(b);if(440786851!=db(g).id)e=null;else{var h=db(g);if(408125543!=h.id)e=null;else{var k=h.a.byteOffset,l;var n=new bb(h.a);for(b=null;Wa(n.a);){var u=db(n);if(357149030==u.id){b=u;break}}if(b){for(var w=new bb(b.a),n=1E6;Wa(w.a);){var P=db(w);if(2807729==P.id){n=hb(P);break}}l=n/1E9}else l=null;e=l?{$b:k,ec:l}:null}}if(e){var K=db(new bb(a));if(475249515!=K.id)f=null;else{var ha=e.$b,Kb=e.ec;a=[];var Lb=new bb(K.a);for(e=K=-1;Wa(Lb.a);){var $a=
db(Lb);if(187==$a.id){var Ea;var Wd=new bb($a.a),Xd=db(Wd);if(179!=Xd.id)Ea=null;else{var yf=hb(Xd),Yd=db(Wd);if(183!=Yd.id)Ea=null;else{for(var Zd=new bb(Yd.a),k=0;Wa(Zd.a);){var $d=db(Zd);if(241==$d.id){k=hb($d);break}}Ea={gc:yf,Zb:k}}}if(Ea){var ae=Kb*Ea.gc,be=ha+Ea.Zb;if(0<=K){var Kc=new I(d,c,e,be-1);a.push(new Qd(K,ae,Kc))}K=ae;e=be}}}0<=K&&(Kc=new I(d,c,e,null),a.push(new Qd(K,null,Kc)));f=a}}else f=null}catch(ce){if(!(ce instanceof RangeError))throw ce;}return f};function Je(a,b,c,d,f,e,g,h){this.g=a;this.i=b;this.f=c;this.a=d;this.c=f;this.b=e;this.j=g;this.fa=null;this.h=h}Je.prototype.destroy=function(){this.h=this.i=this.g=null;this.a.g();this.a=null;this.b&&(this.b.g(),this.b=null);this.c&&(this.c.g(),this.c=null);this.fa=null};Je.prototype.Db=function(){return this.fa};
Je.prototype.create=function(){if(this.fa)return this.fa;var a=[Rb(this.a)];"webm"==this.f&&a.push(Rb(this.c));this.b&&Rb(this.b);return this.fa=Promise.all(a).then(H(this,function(a){var c=a[0];a=a[1]||null;var d=null;"mp4"==this.f?(d=new de,d=d.parse(new DataView(c),this.a.h,this.a.b,this.h,this.b)):"webm"==this.f&&(d=new Ie,d=d.parse(new DataView(c),new DataView(a),this.a.b,this.h));if(!d)return c=Error("Failed to parse SegmentReferences from "+this.a.toString()+" (or one of its fallbacks)."),
c.type="stream",Promise.reject(c);var f;"dynamic"==this.g.type?f=new V(d,this.g,this.i,this.j):f=new T(d);return Promise.resolve(f)}))};function Ke(a){this.a=a}
function Le(a,b,c){for(var d=t()/1E3,f=0;f<b.a.length;++f)for(var e=b.a[f],g=0;g<e.b.length;++g){var h=e.b[g];if("text"!=h.contentType)for(var k=0;k<h.a.length;++k){var l=h.a[k],n=0,n=n+(l.g?1:0),n=n+(l.b?1:0),n=n+(l.a?1:0);0==n?(h.a.splice(k,1),--k):1!=n&&(l.g?(l.b=null,l.a=null):l.b&&(l.a=null))}}Me(b);for(f=0;f<b.a.length;++f)for(e=b.a[f],g=0;g<e.b.length;++g){k=h=e.b[g];l=null;for(n=0;n<k.a.length;++n){var u=k.a[n].f||"";l?u!=l&&(k.a.splice(n,1),--n):l=u}0==h.a.length&&(e.b.splice(g,1),--g)}"dynamic"==
b.type&&null==b.c&&(b.c=d);f=new we;"dynamic"==b.type&&(f.b=!0,f.f=b.g,f.g=new I(c,b.j||b.url),f.h=b.c);f.c=b.h||5;for(e=0;e<b.a.length;++e){g=b.a[e];if(null==g.start)break;g=Ne(a,b,g,d,c);f.a.push(g)}return f}
function Me(a){if(a.a.length){null==a.a[0].start&&(a.a[0].start=0);var b=function(a){return 0==a||!!a};"dynamic"==a.type&&(a.b=null);b(a.b)&&1==a.a.length&&!b(a.a[0].a)&&(a.a[0].a=a.b);for(var c=0,d=!0,f=0;f<a.a.length;++f){var e=a.a[f-1],g=a.a[f],h=a.a[f+1]||{start:a.b};!b(g.start)&&e&&b(e.start)&&b(e.a)&&(g.start=e.start+e.a);!b(g.a)&&b(h.start)&&(g.a=h.start-g.start);null!=g.start&&null!=g.a?c+=g.a:d=!1}b(a.b)||(f=a.a[a.a.length-1],d?a.b=c:b(f.start)&&b(f.a)?a.b=f.start+f.a:"dynamic"!=a.type&&
(a.b=c))}}function Ne(a,b,c,d,f){var e=new ve;e.id=c.id;e.start=c.start;e.b=c.a;var g=new B;c.b.forEach(function(a){g.push(a.contentType||"",a)});for(var h=wb(g),k=0;k<h.length;++k){var l=new B;g.get(h[k]).forEach(function(a){l.push(a.group,a)});for(var n=wb(l),u=0;u<n.length;++u){var w=new B;l.get(n[u]).forEach(function(a){w.push(a.lang,a)});for(var P=wb(w),K=0;K<P.length;++K){var ha=w.get(P[K]),ha=Oe(a,b,c,ha,d,f);e.a.push(ha)}}}return e}
function Oe(a,b,c,d,f,e){ba(d.every(function(a){return a.group==d[0].group&&(a.lang||"")==(d[0].lang||"")&&(a.contentType||"")==(d[0].contentType||"")}));var g=new re,h=d.filter(function(a){return null!=a.id});h.length==d.length&&(g.id=h.map(function(a){return a.id}).sort().reduce(function(a,b){return a+","+b}));g.lang=d[0].lang||"";g.contentType=d[0].contentType||"";g.b=d.some(function(a){return a.c});for(var h={},k=0;k<d.length;++k)for(var l=d[k],n=0;n<l.a.length;++n){var u=l.a[n],w=Pe(a,u),P=g.a.slice(0);
Qe(w,P);0==P.length&&0<g.a.length||!(u=Re(b,c,u,f,e))||(g.o.push(u),g.a=P,h[u.H]=l)}if(g.a.some(function(a){return""==a.a}))return g.o.forEach(function(a){a.U=!0}),g;a=Se(d);for(k=0;k<g.o.length;++k)u=g.o[k],l=h[u.H],l==a&&(u.U=!0);return g}function Se(a){for(var b=null,c=null,d=0;d<a.length;++d)for(var f=a[d],e=0;e<f.a.length;++e){var g=f.a[e],g=(g.width||1)*(g.height||1)*(g.bandwidth||1);if(null==b||g<b)b=g,c=f}return c}
function Qe(a,b){if(0==b.length)Array.prototype.push.apply(b,a);else for(var c=0;c<b.length;++c){for(var d=!1,f=0;f<a.length;++f){var e=b[c],g=a[f];if(e.a==g.a&&e.h==g.h&&e.l==g.l&&e.g==g.g&&e.i==g.i&&e.f==g.f&&e.j==g.j&&fb(e.c,g.c)){d=!0;fc(b[c],a[f].b);break}}d||(b.splice(c,1),--c)}}function Pe(a,b){var c=[];if(0==b.c.length)c.push(new dc);else if(a.a)for(var d=0;d<b.c.length;++d)c.push.apply(c,Te(a,b.c[d]));return c}
function Te(a,b){var c=[];if(2!=a.a.length)return[];var d=a.a(b.c||"",b.f);if(!(d&&d instanceof Array))return[];for(var f=0;f<d.length;++f){var e;var g=d[f];e=new dc;if(g){var h=sb(g,"keySystem");if(null!=h)e.a=h;else throw Error("'keySystem' cannot be null.");var k=sb(g,"licenseServerUrl");if(null!=k)e.h=k;else if(h)throw Error("For encrypted streaming content, 'licenseServerUrl' cannot be null or empty.");h=z(g,"withCredentials");null!=h&&(e.l=h);h=tb(g,"licensePostProcessor",Function);null!=h&&
(e.m=h);h=tb(g,"licensePreProcessor",Function);null!=h&&(e.s=h);h=z(g,"distinctiveIdentifierRequired");null!=h&&(e.g=h);h=z(g,"persistentStateRequired");null!=h&&(e.i=h);h=sb(g,"audioRobustness");null!=h&&(e.f=h);h=sb(g,"videoRobustness");null!=h&&(e.j=h);h=tb(g,"serverCertificate",Uint8Array);null!=h&&(e.c=h);if(h=tb(g,"initData",Object)){g=tb(h,"initData",Uint8Array);if(null==g)throw Error("'initData.initData' cannot be null.");h=sb(h,"initDataType");if(null==h)throw Error("'initData.initDataType' cannot be null.");
e.b.push({initData:new Uint8Array(g.buffer),initDataType:h})}}0==e.b.length&&b.a&&b.a.psshBox&&fc(e,[{initData:b.a.psshBox,initDataType:"cenc"}]);c.push(e)}return c}
function Re(a,b,c,d,f){if(!c.u||0===c.u.length)return null;var e=null,g=1,h=0;if(c.g){e=c.f.split("/")[1];if("mp4"!=e&&"webm"!=e)e=null;else{var k=c.g;"webm"!=e||k.c?k.a||k.b&&k.b.a?(g=k.b,g||(g=new hd,g.url=c.u,g.a=k.a?k.a.clone():null),h=Ue(g,f),g=k.c?Ue(k.c,f):null,k.f?(k=k.f,k=new I(f,c.u,k.ka,k.end)):k=null,a=new Je(a,b,e,h,g,k,d,f),b=new Td(g),d=new oe,d.L=a,d.O=b,e=d):e=null:e=null}g=c.g.h;h=c.g.g}else if(c.b)e=c.b,!e.c&&!e.f&&1<e.b.length?e=null:e.c||b.a||e.f||1!=e.b.length?e.f&&0===e.f.a.length?
e=null:(e=e.h?Ue(e.h,f):null,a=new me(a,b,c,d,f),b=new Td(e),d=new oe,d.L=a,d.O=b,e=d):e=null,g=c.b.a,h=c.b.g;else if(c.a){a:if(e=c.a,g=0+(e.f?1:0),g+=e.c?1:0,g+=e.b?1:0,0==g?g=!1:(1!=g&&(e.f?(e.c=null,e.b=null):e.c&&(e.b=null)),g=!0),g){g=null;if(e.g&&(g=(e=c.a.g)?Ve(c,e,id):null,!g)){e=null;break a}e=g?Ue(g,f):null;g=c.a;g.f?(g=c.f.split("/")[1],"mp4"!=g&&"webm"!=g?a=null:"webm"!=g||e?Pd(f,c,1,0)?(h=(h=c.a.f)?Ve(c,h,hd):null)?(h=Ue(h,f),a=new Je(a,b,g,h,e,null,d,f)):a=null:a=null:a=null):a=g.h?
g.c?new ne(a,b,c,d,f):g.b?"dynamic"!=a.type&&null==b.a?null:new le(a,b,c,d,f):null:null;a?(b=new Td(e),d=new oe,d.L=a,d.O=b,e=d):e=null}else e=null;g=c.a.a;h=c.a.i}else"text"==c.f.split("/")[0]&&(e=new oe,e.L=new Ge(new I(f,c.u)));if(!e)return null;e.id=c.id;h&&(e.b=-1*h/g);e.bandwidth=c.bandwidth;e.width=c.width;e.height=c.height;e.a=c.f||"";e.c=c.h||"";e.fbQualityLabel=c.fbQualityLabel||null;e.fbQualityClass=c.fbQualityClass||null;for(a=0;a<c.c.length;++a)b=c.c[a],b.b&&e.f.push(b.b);return e}
function Ve(a,b,c){b=Rd(b,a.id,null,a.bandwidth,null);if(!b)return null;c=new c;c.url=Jd(a.u,b);return c}function Ue(a,b){var c=a.url,d=0,f=null;a.a&&(d=a.a.ka,f=a.a.end);return new I(b,c,d,f)};function We(){this.streamStats=null;this.droppedFrames=this.decodedFrames=NaN;this.bufferingTime=this.playTime=this.estimatedBandwidth=0;this.playbackLatency=NaN;this.bufferingHistory=[];this.bandwidthHistory=[];this.streamHistory=[]}function Xe(a,b){var c=new Ye(b);a.streamHistory.push(new Ze(c));if(c.videoHeight||!a.streamStats)a.streamStats=c}function Ye(a){this.videoWidth=a.width;this.videoHeight=a.height;this.videoMimeType=a.a;this.videoBandwidth=a.bandwidth}
function Ze(a){this.timestamp=t()/1E3;this.value=a};function $e(a,b,c,d,f){this.b=new I(null,[new J(a)]);this.a=new Pb;this.a.body=b;this.a.method=c;this.a.a=3;this.a.l=d;this.a.c=0;a=f||{};for(var e in a)this.a.b[e]=a[e]}function af(a){return Rb(a.b,a.a).then(function(a){return Promise.resolve(new Uint8Array(a))})};function bf(a,b,c){E.call(this,a);this.c=b;this.j=c;this.a=this.h=null;this.i=new C;this.b=[];this.f=[];this.m=0;this.g=new G;this.l=null}q(bf,E);bf.prototype.destroy=function(){this.W=null;for(var a=0;a<this.f.length;++a)this.f[a].close().catch(function(){});this.f=[];this.b=this.a=this.h=null;this.g.destroy();this.g=null;this.i.destroy();this.i=null;this.l&&(window.clearTimeout(this.l),this.l=null);this.c=this.j=null};
bf.prototype.initialize=function(){var a=new B,b;b=this.j;if(b.C){b=b.a.a[0];for(var c=[],d=0;d<b.a.length;++d)c.push.apply(c,te(b.a[d]));b=c}else b=[];for(c=0;c<b.length;++c)d=b[c],d.a.a||d.b&&!cf(d.b)||a.push(d.contentType,d);for(var c={},d=!1,f=0;f<b.length;++f){var e=b[f];if(e.a.a&&!a.a.hasOwnProperty(e.contentType)){var g=e.a.a,h=c[g];h||(h=e.a,h={audioCapabilities:void 0,videoCapabilities:void 0,initDataTypes:void 0,distinctiveIdentifier:h.g?"required":"optional",persistentState:h.i?"required":
"optional",sessionTypes:["temporary"]},c[g]=h);if(e.b&&(g=e.contentType+"Capabilities",g in h)){d=!0;h[g]||(h[g]=[]);var k;"audio"==e.contentType?k=e.a.f:"video"==e.contentType&&(k=e.a.j);h[g].push({contentType:e.b,robustness:k})}}}if(!d)if(b.length)this.a=b[0].a;else throw a=Error("No DrmInfo exists!"),a.type="drm",a;if(0==Object.keys(c).length)return df(this.j,a),this.g.resolve(),Promise.resolve();k=new G;c=ef(c,k);c=c.then(this.v.bind(this,b,a));k.reject(null);return c};
function ef(a,b){for(var c in a)b=b.catch(function(a,b){return navigator.requestMediaKeySystemAccess(a,[b])}.bind(null,c,a[c]));return b}
bf.prototype.v=function(a,b,c){if(!this.c)return ff();for(var d=c.keySystem,f=c.getConfiguration(),e=["audio","video"],g=0;g<e.length;++g){var h=e[g];if(!b.a.hasOwnProperty(h)){var k=f[h+"Capabilities"];if(k){for(var k=k[0],l=[],n={},u=0;u<a.length;++u){var w=a[u],P=k?w.b==k.contentType:w.contentType==h;w.a.a!=d||!P||w.id in n||(l.push(w),n[w.id]=!0,this.a=this.a?ec(this.a,w.a):w.a)}b.set(h,l)}}}df(this.j,b);return c.createMediaKeys().then(function(a){this.h=a}.bind(this))};
function gf(a){return a.c?a.h?a.c.setMediaKeys(a.h).then(H(a,function(){return this.c?this.a.c?this.h.setServerCertificate(this.a.c):Promise.resolve():ff()})).then(H(a,function(){if(!this.c)return ff();for(var a=0;a<this.a.b.length;++a){var c=this.a.b[a];this.s({type:"encrypted",initDataType:c.initDataType,initData:c.initData})}0==this.a.b.length&&D(this.i,this.c,"encrypted",this.s.bind(this))})):Promise.resolve():ff()}
function ff(){var a=Error("EmeManager destroyed");a.type="destroy";return Promise.reject(a)}
bf.prototype.s=function(a){for(var b=new Uint8Array(a.initData),c=0;c<this.b.length;++c)if(fb(b,this.b[c].data))return;try{var d=hf(this)}catch(f){b=y(f);this.dispatchEvent(b);this.g.reject(f);return}a=d.generateRequest(a.initDataType,a.initData);this.b.push({data:b,Sa:d});a.catch(H(this,function(a){if(this.c){for(var b=0;b<this.b.length;++b)if(this.b[b].Sa==d){this.b.splice(b,1);break}b=y(a);this.dispatchEvent(b);this.g.reject(a)}}));this.f.push(d)};
function hf(a){var b=null,b=a.h.createSession();D(a.i,b,"message",a.B.bind(a));D(a.i,b,"keystatuseschange",a.A.bind(a));return b}bf.prototype.B=function(a){jf(this,a.target,this.a,a.message)};
bf.prototype.A=function(a){a=a.target;var b={};a.keyStatuses.forEach(function(a,c){if("string"==typeof a){var e=a;a=c;c=e}if("com.microsoft.playready"==this.a.a&&16==a.byteLength){var e=new DataView(a),g=e.getUint32(0,!0),h=e.getUint16(4,!0),k=e.getUint16(6,!0);e.setUint32(0,g,!1);e.setUint16(4,h,!1);e.setUint16(6,k,!1)}e=cc(new Uint8Array(a));b[e]=c}.bind(this));if(a.expiration<Date.now()){for(var c=0;c<this.b.length;++c)if(this.b[c].Sa==a){this.b.splice(c,1);break}a.close();this.f.splice(this.f.indexOf(a),
1)}kf(this.j,b)};function jf(a,b,c,d){d=lf(c,d);af(new $e(d.url,d.body,d.method,c.l,d.headers)).then(H(a,function(a){c.m&&(a=c.m(a));return b.update(a)})).then(H(a,function(){var a=x({type:"sessionReady",detail:b});this.dispatchEvent(a);this.m++;this.m>=this.f.length&&this.g.resolve()})).catch(H(a,function(a){a.Sa=b;a=y(a);this.dispatchEvent(a)}))}
function lf(a,b){var c={url:a.h,body:b.slice(0),method:"POST",headers:{}};if("com.microsoft.playready"===a.a){for(var d=String.fromCharCode.apply(null,new Uint16Array(c.body)),d=(new DOMParser).parseFromString(d,"application/xml"),f=d.getElementsByTagName("name"),e=d.getElementsByTagName("value"),g=0;g<f.length;g++)c.headers[f[g].childNodes[0].nodeValue]=e[g].childNodes[0].nodeValue;c.body=window.atob(d.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue)}if(!a.s)return c;a.s(c);c.url=sb(c,
"url");if(null==c.url)throw Error("'url' cannot be null.");if(!(c.body instanceof ArrayBuffer||"string"==typeof c.body||null==c.body))throw new TypeError("'body' must be an ArrayBuffer, a string, or null.");c.method=sb(c,"method");if("GET"!=c.method&&"POST"!=c.method)throw Error("'method' must be either 'GET' or 'POST'.");c.headers=tb(c,"headers",Object);if(null==c.headers)throw Error("'headers' cannot be null.");return c};function W(a){E.call(this,null);this.a=a;this.b=null;this.g=new C;this.l=this.j=null;this.D=0;this.B=null;this.m=!1;this.M=!0;this.I=!1;this.J=!0;this.h=new We;this.i=!1;this.c={enableAdaptation:!0,streamBufferSize:15,liveStreamEndTimeout:15,licenseRequestTimeout:0,mpdRequestTimeout:0,segmentRequestTimeout:0,preferredLanguage:"en",restrictions:new ka};this.s=this.f=null;this.v=1;this.F=null;this.A=!1}q(W,E);p("shaka.player.Player",W);W.version="v1.6.4-fb";
W.isBrowserSupported=function(){return!!window.MediaSource&&!!Element.prototype.requestFullscreen&&!!document.exitFullscreen&&"fullscreenElement"in document&&!!window.Uint8Array};
W.prototype.ca=function(){var a={},b=this.b;if(b){var c=b.ib();a.BandwidthEstimator=c.BandwidthEstimator;var d=c.VideoSourceStream;d&&(a.VideoSourceStream=d,(d=a.VideoBufferManager=d.ca().SourceBufferManager)&&(a.VideoSourceBuffer=d.ca().SourceBuffer));(d=a.AudioSourceStream=c.AudioSourceStream)&&(d=a.AudioBufferManager=d.ca().SourceBufferManager)&&(a.AudioSourceBuffer=d.ca().SourceBuffer);a.TextSourceStream=c.TextSourceStream;a.getManifest=b.fb.bind(b)}else a.getManifest=function(){};a.mc=!0;return a};
W.prototype.getDebug=W.prototype.ca;W.prototype.Y=function(a){this.M=a};W.prototype.setResumeAfterBuffering=W.prototype.Y;function cf(a){return"text/vtt"==a?!!window.VTTCue:MediaSource.isTypeSupported(a)}W.isTypeSupported=cf;W.setTextStyle=function(a){var b=document.getElementById("ShakaPlayerTextStyle");b||(b=document.createElement("style"),b.id="ShakaPlayerTextStyle",document.head.appendChild(b));for(b=b.sheet;b.cssRules.length;)b.deleteRule(0);b.insertRule("::cue { "+qa(a)+" }",0)};
W.prototype.destroy=function(){return this.G().then(H(this,function(){this.g.destroy();this.a=this.g=null})).catch(function(){})};W.prototype.destroy=W.prototype.destroy;W.prototype.G=function(){this.i=!0;return mf(this)};W.prototype.unload=W.prototype.G;
function mf(a){var b;a.f&&(b=a.f.getOperationLogger("unload"));if(!a.b)return b&&b.log(),Promise.resolve();a.m&&nf(a);a.a.pause();xb(a.g);of(a);pf(a);a.j&&(a.j.destroy(),a.j=null);a.a.src="";var c=a.a.setMediaKeys(null).then(function(){b&&b.log()});a.b&&(a.b.destroy(),a.b=null);a.m=!1;a.h=new We;return c}W.prototype.ta=function(a){return qf(this,a)};W.prototype.load=W.prototype.ta;
function qf(a,b){var c;a.f&&(c=a.f.getOperationLogger("load").setState("loading"));rf(b,a.a);var d=null;a.i=!1;if(a.b||!a.I)d=mf(a).then(H(a,function(){return b.Ca()}));a.a.autoplay&&(da("load"),D(a.g,a.a,"timeupdate",a.Ib.bind(a)));b.pb(a.c);b.T=a.F;a.F=null;d||(d=b.Ca());d.catch(H(a,function(a){b.destroy();return Promise.reject(a)}));return d.then(H(a,function(){var a;this.f&&(a=this.f.getOperationLogger("eme_init"));if(!this.a||this.i)return sf();this.b=b;D(this.g,this.b,"seekrangechanged",this.Qb.bind(this));
this.j=new bf(this,this.a,this.b);return this.j.initialize().then(function(){a&&a.log()})})).then(H(a,function(){if(!this.a||this.i)return sf();D(this.g,this.a,"error",this.bc.bind(this));D(this.g,this.a,"playing",this.Pb.bind(this));D(this.g,this.a,"pause",this.Ob.bind(this));return tf(this.b,this,this.a)})).then(H(a,function(){var a;this.f&&(a=this.f.getOperationLogger("eme_attach"));return!this.a||this.i?sf():gf(this.j).then(function(){a&&a.log()})})).then(H(a,function(){if(!this.a||this.i)return sf();
uf(this);c&&c.log()})).catch(H(a,function(a){c&&c.setError(a).log();if(!this.a||this.i)return sf();if("destroy"!=a.type){var b=y(a);this.dispatchEvent(b)}return this.G().then(function(){return Promise.reject(a)})}))}function sf(){var a=Error("Player destroyed");a.type="destroy";return Promise.reject(a)}m=W.prototype;m.Ib=function(){ga("load");this.h.playbackLatency=ia("load")/1E3;this.g.za(this.a,"timeupdate")};
m.bc=function(){if(this.a.error){var a=this.a.error.code;a!=MediaError.MEDIA_ERR_ABORTED&&(a=Error(vf[a]||"Unknown playback error."),a.type="playback",a=y(a),this.dispatchEvent(a))}};m.Pb=function(){da("playing");this.f&&this.f.getEventLogger("playing").setState("playing").log();!this.l&&0>this.v&&(this.a.playbackRate=0,this.C(this.a.currentTime,Date.now(),this.v));this.m&&!this.J&&nf(this)};
m.Ob=function(){this.f&&this.f.getEventLogger("pause").setState("paused").log();ga("playing");var a=ia("playing");if(!isNaN(a)){var b=this.h;b.playTime+=a/1E3}pf(this)};m.Qb=function(a){this.D=a.start};m.Bb=function(){if(!this.a.paused){ga("playing");var a=ia("playing");if(!isNaN(a)){var b=this.h;b.playTime+=a/1E3;da("playing")}}a=this.h;b=this.a;b.getVideoPlaybackQuality&&(b=b.getVideoPlaybackQuality(),a.decodedFrames=b.totalVideoFrames,a.droppedFrames=b.droppedVideoFrames);return this.h};
W.prototype.getStats=W.prototype.Bb;W.prototype.sa=function(){return this.b?this.b.G():[]};W.prototype.getVideoTracks=W.prototype.sa;W.prototype.ja=function(){return this.b?this.b.Z():[]};W.prototype.getAudioTracks=W.prototype.ja;W.prototype.ra=function(){return this.b?this.b.ub():[]};W.prototype.getTextTracks=W.prototype.ra;W.prototype.selectVideoTrack=function(a,b){return this.b?this.b.selectVideoTrack(a,void 0==b?!0:b):!1};W.prototype.selectVideoTrack=W.prototype.selectVideoTrack;
W.prototype.ua=function(a,b,c){return this.b?wf(this.b,"audio",a,void 0==b?!0:b,c):!1};W.prototype.selectAudioTrack=W.prototype.ua;W.prototype.va=function(a){return this.b?wf(this.b,"text",a,!1):!1};W.prototype.selectTextTrack=W.prototype.va;W.prototype.ia=function(a){this.b&&xf(this.b,a)};W.prototype.enableTextTrack=W.prototype.ia;W.prototype.X=function(a){pf(this);0<=a?this.a.playbackRate=a:this.a.paused||(this.a.playbackRate=0,this.C(this.a.currentTime,Date.now(),a));this.v=a};
W.prototype.setPlaybackRate=W.prototype.X;W.prototype.S=function(){return this.v};W.prototype.getPlaybackRate=W.prototype.S;W.prototype.wa=function(a){this.F=a};W.prototype.setPlaybackStartTime=W.prototype.wa;W.prototype.P=function(){return this.b?this.b.vb():!1};W.prototype.isLive=W.prototype.P;
W.prototype.Z=function(a){if(a){var b=z(a,"enableAdaptation");null!=b&&(this.c.enableAdaptation=b);b=z(a,"allowSkipUnloading");null!=b&&(this.I=b);b=z(a,"endBufferingOnPlaying");null!=b&&(this.J=b);b=z(a,"usePlaybackRateForBuffering");null!=b&&(this.A=b);b=A(a,"streamBufferSize",0);null!=b&&(this.c.streamBufferSize=b);b=A(a,"dynamicStreamBufferSize",0);null!=b&&(this.c.dynamicStreamBufferSize=b);b=z(a,"addCdnDebugQueryParameters");null!=b&&(this.c.addCdnDebugQueryParameters=b);b=A(a,"initialStreamBufferSize",
0);null!=b&&(this.c.initialStreamBufferSize=b);b=z(a,"includeStreamBufferSizeInStartOffset");null!=b&&(this.c.includeStreamBufferSizeInStartOffset=b);b=A(a,"liveStreamEndTimeout",0);null!=b&&(this.c.liveStreamEndTimeout=b);b=A(a,"licenseRequestTimeout",0);null!=b&&(this.c.licenseRequestTimeout=b);b=A(a,"mpdRequestTimeout",0);null!=b&&(this.c.mpdRequestTimeout=b);b=A(a,"minMpdRefreshInterval",0);null!=b&&(this.c.minMpdRefreshInterval=b);b=z(a,"enableLiveInterruptionDetection");null!=b&&(this.c.enableLiveInterruptionDetection=
b);b=z(a,"enableManifestDebug");null!=b&&(this.c.enableManifestDebug=b,E.prototype.Xa=b,b||(E.prototype.la=function(){}));b=z(a,"resolveVideoTimeUpdateOnFragmentedTimeRanges");null!=b&&(this.c.resolveVideoTimeUpdateOnFragmentedTimeRanges=b);b=A(a,"liveInterruptionConsecutiveUpdatesWithoutChange");null!=b&&(this.c.liveInterruptionConsecutiveUpdatesWithoutChange=b);b=A(a,"liveInterruptionConsecutiveUpdatesWithChange");null!=b&&(this.c.liveInterruptionConsecutiveUpdatesWithChange=b);b=z(a,"reappendInitSegmentAfterAbort");
null!=b&&(this.c.reappendInitSegmentAfterAbort=b);b=z(a,"liveSendPushHeaders");null!=b&&(this.c.liveSendPushHeaders=b);b=A(a,"liveMaxManifestFetchesWithPush");null!=b&&(this.c.liveMaxManifestFetchesWithPush=b);b=A(a,"liveMaxSegmentsToPush");null!=b&&(this.c.liveMaxSegmentsToPush=b);b=A(a,"segmentRequestTimeout",0);null!=b&&(this.c.segmentRequestTimeout=b);b=sb(a,"preferredLanguage");null!=b&&(this.c.preferredLanguage=b);b=tb(a,"restrictions",ka);null!=b&&(this.c.restrictions=b.clone());b=a.performanceLogger;
null!=b&&(this.f=this.c.performanceLogger=b);b=a.useInlineInitSegment;null!=b&&(this.c.useInlineInitSegment=b);b=z(a,"disableCacheBustingEvenThoughItMayAffectBandwidthEstimation");null!=b&&(Bd=!b);a=z(a,"currentTimeDuringReadyStateZeroThrows");null!=a&&(this.c.currentTimeDuringReadyStateZeroThrows=a);this.b&&this.b.pb(this.c)}};W.prototype.configure=W.prototype.Z;W.prototype.qa=function(){return this.c};W.prototype.getConfiguration=W.prototype.qa;
function pf(a){a.l&&(window.clearTimeout(a.l),a.l=null)}function uf(a){of(a);a.B=window.setTimeout(a.T.bind(a),100)}function of(a){a.B&&(window.clearTimeout(a.B),a.B=null)}W.prototype.C=function(a,b,c){this.l=null;var d=(Date.now()-b)/1E3*c;this.a.currentTime<this.D+(this.P()?1:.05)?this.a.pause():(d=Math.max(this.D,a+d),this.a.currentTime=d,this.l=window.setTimeout(this.C.bind(this,a,b,c),250))};
function nf(a){ga("buffering");a.s&&(a.s.log(),a.s=null);var b=a.h;b.bufferingTime+=ia("buffering")/1E3;a.A&&(a.a.playbackRate=a.v);a.m=!1;a.dispatchEvent(x({type:"bufferingEnd"}))}
W.prototype.T=function(){uf(this);if(!this.a.ended&&!this.a.seeking){var a=this.a.buffered,b=a.length?a.end(a.length-1):0,a=Math.max(b-this.a.currentTime,0),c=this.a.currentTime,d=this.a.duration,d=isNaN(d)?0:Math.max(d-.05,0),b=b>=d||c>=d;if(!this.m)!this.a.paused&&!b&&.5>a&&(this.m=!0,this.A?this.a.playbackRate=0:this.a.pause(),this.h.bufferingHistory.push(t()/1E3),this.f&&!this.s&&(a=this.a.buffered,a=a.length?a.end(a.length-1):0,a=Math.max(a-this.a.currentTime,0),this.s=this.f.getOperationLogger("buffering").setLength(zf(this.b)-
a)),da("buffering"),this.dispatchEvent(x({type:"bufferingStart"}))),Af(this.b)&&nf(this);else if(a>zf(this.b)||Af(this.b))nf(this),this.M&&!this.A&&this.a.play()}};var vf={2:"A network failure occured while loading media content.",3:"The browser failed to decode the media content.",4:"The browser does not support the media content."};function Bf(a){for(var b=0;b<a.length;++b)for(var c=a[b],d=0;d<c.a.length;++d){for(var f=c.a[d],e=f,g=0;g<e.o.length;++g)cf(qe(e.o[g]))||(e.o.splice(g,1),--g);0==f.o.length&&(c.a.splice(d,1),--d)}for(b=0;b<a.length;++b)for(c=a[b],d=0;d<c.a.length;++d)c.a[d].o.sort(Cf)}function Cf(a,b){var c=a.bandwidth||Number.MAX_VALUE,d=b.bandwidth||Number.MAX_VALUE;return c<d?-1:c>d?1:0};function Df(a){this.a=a}Df.prototype.destroy=function(){this.a.destroy();this.a=null};Df.prototype.update=function(a){var b=Ef(a),c=Ef(this.a);return Promise.all([b,c]).then(H(this,function(b){var c=b[0];b=b[1];Bf(this.a.a);a.b&&!this.a.b&&(a.i=!0);a.f=this.a.f;a.g=this.a.g?this.a.g.clone():null;a.c=this.a.c;var e=[];Ff(a,this.a,c,b,e);Bf(a.a);return Promise.resolve(e)}))};
function Ef(a){function b(a,b){return a.concat(b)}var c=a.a.map(function(a){return a.a}).reduce(b,[]).map(function(a){return a.o}).reduce(b,[]);a=c.map(function(a){return a.L.create()});return Promise.all(a).then(function(a){for(var b={},e=0;e<c.length;++e)b[c[e].H]=a[e];return Promise.resolve(b)})}
function Ff(a,b,c,d,f){var e=new B;a.a.forEach(function(a,b){e.push(a.id||""+b,a)});var g=new B;b.a.forEach(function(a,b){g.push(a.id||""+b,a)});a=wb(e);for(b=0;b<a.length;++b){var h=a[b],k=e.get(h);1<k.length||(h=g.get(h))&&0!=h.length&&1==h.length&&(Gf(k[0],h[0],c,d,f),k[0].b=h[0].b)}}
function Gf(a,b,c,d,f){var e=new B;a.a.forEach(function(a,b){e.push(a.id||""+b,a)});var g=new B;b.a.forEach(function(a,b){g.push(a.id||""+b,a)});a=wb(e);for(b=0;b<a.length;++b){var h=a[b],k=e.get(h);1<k.length||(h=g.get(h))&&0!=h.length&&1==h.length&&Hf(k[0],h[0],c,d,f)}}
function Hf(a,b,c,d,f){var e=new B;a.o.forEach(function(a,b){e.push(a.id||""+b,a)});var g=new B;b.o.forEach(function(a,b){g.push(a.id||""+b,a)});b={};for(var h=wb(e),k=0;k<h.length;++k){var l=h[k];b[l]=l;var n=e.get(l);1<n.length||((l=g.get(l))&&0!=l.length?1==l.length&&(If(n[0],l[0],c,d),n[0].O=l[0].O,l[0].O=null,n[0].b=l[0].b):(f.push(n[0]),a.o.splice(a.o.indexOf(n[0]),1)))}h=wb(g);for(k=0;k<h.length;++k)l=h[k],b[l]||(b[l]=l,l=g.get(l),a.o.push(l[0]))}
function If(a,b,c,d){a=c[a.H];d=d[b.H];b=a.length();a.Qa(d)&&(d=a.length(),a.g.push(b!==d),50<a.g.length&&a.g.shift())};function X(){this.a=this.b=null;this.f=new C;this.c=Number.POSITIVE_INFINITY;this.i=!0;this.g=!1}p("shaka.media.SimpleAbrManager",X);X.prototype.destroy=function(){this.f.destroy();this.a=this.b=this.f=null};X.prototype.initialize=function(a,b){this.b||this.a||(this.b=a,this.a=b)};
X.prototype.start=function(){this.b&&this.a&&!this.g&&(this.c=Date.now()+4E3,D(this.f,this.b,"bandwidth",this.l.bind(this)),D(this.f,this.a,"adaptation",this.j.bind(this)),D(this.f,this.a,"trackschanged",this.h.bind(this)),this.g=!0)};X.prototype.enable=function(a){this.i=a};X.prototype.getInitialVideoTrackId=function(){if(!this.b||!this.a)return null;var a=Jf(this);return a?a.id:null};X.prototype.getInitialSwitchReason=function(){return null};X.prototype.getInitialAudioTrackId=function(){return null};
X.prototype.selectVideoTrack=function(a,b,c){this.g&&this.a.selectVideoTrack(a.id,b,c)};X.prototype.l=function(){Date.now()<this.c||this.h()};X.prototype.h=function(){if(this.i){var a=Jf(this);if(a){if(a.active){this.c=Date.now()+3E3;return}this.selectVideoTrack(a,!1)}this.c=Number.POSITIVE_INFINITY}};X.prototype.j=function(){this.c==Number.POSITIVE_INFINITY&&(this.c=Date.now()+3E4)};
function Jf(a){var b=a.a.G();if(0==b.length)return null;b.sort(ua);var c;a:{c=a.a.Z();for(var d=0;d<c.length;++d)if(c[d].active){c=c[d];break a}c=null}c=c?c.bandwidth:0;a=a.b.getBandwidth();for(var d=b[0],f=0;f<b.length;++f){var e=b[f],g=f+1<b.length?b[f+1]:{bandwidth:Number.POSITIVE_INFINITY};if(e.bandwidth&&(g=(g.bandwidth+c)/.85,a>=(e.bandwidth+c)/.95&&a<=g&&(d=e,d.active)))break}return d};function Y(a,b,c){E.call(this,null);this.a=a;this.S=b;this.j=new C;this.h=new MediaSource;this.D=this.f=null;this.Ia=0;this.jb=!1;this.Ha=0;this.N=null;this.wa=3;this.va=this.kb=!1;this.ta=0;this.nb=1;this.ua=Infinity;this.hb=this.cb=!1;this.c=new B;this.l=c;this.l.initialize(b,this);this.C=!1;this.B="en";this.ja=!1;this.I=null;this.v=new G;this.yb=new G;this.i=new ka;this.A=null;this.ob=1;this.b={};this.X=new G;this.sa=0;this.mb=15;this.s=null;this.Ya=this.lb=!1;this.m={};this.T=this.P=this.J=null;
this.g={};this.ia=!1;this.wb=null}q(Y,E);p("shaka.player.StreamVideoSource",Y);Y.prototype.ib=function(){return{VideoSourceStream:this.b.video,AudioSourceStream:this.b.audio,TextSourceStream:this.b.text,BandwidthEstimator:this.S}};Y.prototype.getStreamDebug=Y.prototype.ib;
Y.prototype.pb=function(a){null!=a.streamBufferSize&&(this.g.streamBufferSize=a.streamBufferSize);null!=a.initialStreamBufferSize&&(this.g.initialStreamBufferSize=a.initialStreamBufferSize);null!=a.dynamicStreamBufferSize&&(this.g.dynamicStreamBufferSize=a.dynamicStreamBufferSize);null!=a.addCdnDebugQueryParameters&&(this.g.addCdnDebugQueryParameters=a.addCdnDebugQueryParameters);null!=a.segmentRequestTimeout&&(this.g.segmentRequestTimeout=a.segmentRequestTimeout);null!=a.resolveVideoTimeUpdateOnFragmentedTimeRanges&&
(this.g.resolveVideoTimeUpdateOnFragmentedTimeRanges=a.resolveVideoTimeUpdateOnFragmentedTimeRanges);null!=a.reappendInitSegmentAfterAbort&&(this.g.reappendInitSegmentAfterAbort=a.reappendInitSegmentAfterAbort);Kf(this);null!=a.includeStreamBufferSizeInStartOffset&&(this.jb=Boolean(a.includeStreamBufferSizeInStartOffset));null!=a.enableAdaptation&&this.l.enable(Boolean(a.enableAdaptation));null!=a.mpdRequestTimeout&&(this.Ha=Number(a.mpdRequestTimeout));null!=a.minMpdRefreshInterval&&(this.wa=Number(a.minMpdRefreshInterval)/
1E3);null!=a.enableManifestDebug&&(this.hb=!!a.enableManifestDebug);null!=a.liveStreamEndTimeout&&(this.mb=Number(a.liveStreamEndTimeout));null!=a.preferredLanguage&&(this.B=mb(String(a.preferredLanguage)));null!=a.liveSendPushHeaders&&(this.va=Boolean(a.liveSendPushHeaders));null!=a.performanceLogger&&(this.N=this.g.performanceLogger=a.performanceLogger);null!=a.liveMaxManifestFetchesWithPush&&(this.ta=Number(a.liveMaxManifestFetchesWithPush));null!=a.currentTimeDuringReadyStateZeroThrows&&(this.cb=
Boolean(a.currentTimeDuringReadyStateZeroThrows));null!=a.liveMaxSegmentsToPush&&(this.ua=Number(a.liveMaxSegmentsToPush));null!=a.restrictions&&(this.i=a.restrictions,this.C&&Lf(this))};
Y.prototype.destroy=function(){this.v.destroy();this.X.destroy();this.X=this.v=null;this.P&&(window.clearTimeout(this.P),this.P=null);this.J&&(window.clearTimeout(this.J),this.J=null);this.m=null;this.j.destroy();this.j=null;qb(this.b).forEach(function(a){a.destroy()});this.c=this.b=null;this.a&&(this.a.destroy(),this.a=null);this.l.destroy();this.W=this.i=this.I=this.f=this.h=this.S=this.l=null};function rf(a,b){D(a.j,a.h,"sourceopen",a.Kb.bind(a));b.src=window.URL.createObjectURL(a.h)}m=Y.prototype;
m.gb=function(){};
function tf(a,b,c){var d;a.N&&(d=a.N.getOperationLogger("source_attach"));if(!a.C)return a=Error("Cannot call attach() right now."),a.type="app",d&&d.setError(a).log(),Promise.reject(a);a.W=b;a.f=c;a.I=b.Bb();a.D=null;D(a.j,a.f,"loadedmetadata",a.Jb.bind(a));D(a.j,a.S,"bandwidth",a.cc.bind(a));a.a.b&&(D(a.j,b,"bufferingStart",a.Hb.bind(a)),D(a.j,b,"bufferingEnd",a.Gb.bind(a)));b=a.f.setMediaKeys(a.f.mediaKeys);a.yb.then(H(a,function(){Mf(this).then(H(this,function(){this.v&&this.v.resolve();this.gb()})).catch(H(this,
function(a){this.v&&this.v.reject(a)}))}));return Promise.all([a.v,b]).then(function(){d&&d.log()})}
m.Ca=function(){if(this.C){var a=Error("Cannot call load() right now.");a.type="app";return Promise.reject(a)}if(!this.a||0==this.a.a.length)return a=Error("The manifest does not specify any content."),a.type="stream",Promise.reject(a);Bf(this.a.a);if(0==this.a.a.length||0==this.a.a[0].a.length||!this.a.a[0].a.some(function(a){return"video"===a.contentType}))return a=Error("The manifest specifies content that cannot be displayed on this browser/platform."),a.type="stream",Promise.reject(a);this.C=
!0;this.g.initialStreamBufferSize=Math.max(this.g.initialStreamBufferSize||0,this.a.c);Kf(this);Lf(this);return Promise.resolve()};function Nf(a){var b=x({type:"manifestwrapped",bubbles:!0});a.dispatchEvent(b)}
m.sb=function(a){var b;this.N&&(b=this.N.getOperationLogger("update_manifest"));var c=Date.now(),d=this.J=null,f,e;if(this.va&&(!this.ta||this.ta>this.nb)){f=Math.floor(Of(this))+1;f=Math.min(f,this.ua);var g=this.b.video;if(g=g?g.Na():null)g=g.w(),null!=g.a&&(e=g.a);if(this.f.paused||this.ia)f=0}f&&this.nb++;g=this.a.g;b&&b.setResource(g.toString());(a?this.qb():this.rb(g,f,e)).then(H(this,function(a){d=new Df(a);return d.update(this.a)})).then(H(this,function(a){d.destroy();d=null;var e=Pf(this);
this.la("SegmentIndexesUpdated",e);e.some(function(a){return a.Wa})&&Nf(this);(e=Qf(this,e))&&this.f.paused&&e.end>this.f.currentTime+10&&(this.f.currentTime=e.end);if(Af(this))return b&&b.log(),this.Aa();for(e=0;e<a.length;++e)Rf(this,a[e]);this.g.initialStreamBufferSize=Math.max(this.g.initialStreamBufferSize||0,this.a.c);this.g.useInitialBufferSizeWhenPaused=this.a.b;Kf(this);Lf(this);0==Object.keys(this.b).length?Mf(this):Sf(this,(Date.now()-c)/1E3);b&&b.log()})).catch(H(this,function(a){b&&b.setError(a).log();
d&&(d.destroy(),d=null);if("delay"==a.type)return Sf(this,0);"aborted"!=a.type&&(a=y(a),this.dispatchEvent(a),this.a&&Sf(this,0))}))};m.rb=function(){return Promise.reject("Cannot update manifest with this VideoSource implementation.")};m.qb=function(){return Promise.reject("Cannot update manifest with this VideoSource implementation.")};function Sf(a,b){if(null!=a.a.f){var c=Math.max(a.a.f,a.wa),c=Math.max(c-b,0);a.J=window.setTimeout(a.sb.bind(a,!1),1E3*c)}}
function Rf(a,b){var c=b.a.split("/")[0],d=a.b[c];if(d&&d.xa()==b){var f=a.c.get(b.a.split("/")[0]).map(function(a){return a.o}).reduce(function(a,b){return a.concat(b)},[]).filter(function(a){return a.U&&a.K});if(0==f.length){c=Error("All usable streams have been removed from the manifest.");c.type="app";c=y(c);a.dispatchEvent(c);return}a.m[c].Ua==b&&delete a.m[c];d.ya(f[0],!0);b.destroy()}b.destroy()}m.ac=function(a){this.wb=a};Y.prototype.setTaggedTimeRangesEntryAdder=Y.prototype.ac;
Y.prototype.G=function(){if(!this.c||!this.c.a.hasOwnProperty("video"))return[];for(var a=this.b.video,a=(a=a?a.xa():null)?a.H:0,b=[],c=this.c.get("video"),d=0;d<c.length;++d)for(var f=c[d],e=0;e<f.o.length;++e){var g=f.o[e];if(g.U&&g.K){var h=g.H,g=new ta(h,g.bandwidth,g.width,g.height,g.id,g.fbQualityLabel,g.fbQualityClass);h==a&&(g.active=!0);b.push(g)}}return b};Y.prototype.getVideoTracks=Y.prototype.G;function Tf(a){a=a.G();for(var b=0;b<a.length;b++)if(a[b].active)return a[b]}
Y.prototype.Z=function(){if(!this.c||!this.c.a.hasOwnProperty("audio"))return[];for(var a=this.b.audio,a=(a=a?a.xa():null)?a.H:0,b=[],c=this.c.get("audio"),d=0;d<c.length;++d)for(var f=c[d],e=f.lang,g=0;g<f.o.length;++g){var h=f.o[g];if(h.U&&h.K){var k=h.H,h=new ja(k,h.bandwidth,e,h.id);k==a&&(h.active=!0);b.push(h)}}return b};Y.prototype.getAudioTracks=Y.prototype.Z;
Y.prototype.ub=function(){if(!this.c||!this.c.a.hasOwnProperty("text"))return[];for(var a=this.b.text,b=a?a.xa():null,b=b?b.H:0,c=[],d=this.c.get("text"),f=0;f<d.length;++f)for(var e=d[f],g=e.lang,h=0;h<e.o.length;++h){var k=e.o[h].H,l=new sa(k,g);k==b&&(l.active=!0,l.enabled=a.Ka());c.push(l)}return c};Y.prototype.getTextTracks=Y.prototype.ub;function zf(a){return a.kb?Number(a.g.streamBufferSize):Number(a.g.initialStreamBufferSize)}
function df(a,b){if(a.C){for(var c={},d=a.a.a[0],f=0;f<d.a.length;++f){var e=d.a[f];c[e.H]=e}a.c.a={};d=wb(b);for(f=0;f<d.length;++f){var e=d[f],g=b.get(e);if("video"==e){var h=g[0].id;a.c.push(e,c[h])}else if("audio"==e)for(var h=g[0].b.split(";")[0],k=0;k<g.length;++k){var l=g[k];l.b.split(";")[0]==h&&a.c.push(e,c[l.id])}else for(k=0;k<g.length;++k)h=g[k].id,a.c.push(e,c[h])}a.ja=!0;if(c=a.c.get("audio"))Uf(a,c),a.c.set("audio",c),c=c[0].lang||a.B,lb(2,a.B,c)&&(a.ja=!1);if(c=a.c.get("text"))Uf(a,
c),a.c.set("text",c),c=c[0].lang||a.B,lb(2,a.B,c)||(a.ja=!1)}}Y.prototype.selectVideoTrack=function(a,b,c,d){return wf(this,"video",a,b,c,d)};function xf(a,b){var c=a.b.text;c&&c.Ba(b)}
function Lf(a){if(a.i){for(var b=!1,c=0;c<a.a.a.length;++c)for(var d=a.a.a[c],f=0;f<d.a.length;++f){var e=d.a[f];if("video"==e.contentType)for(var g=0;g<e.o.length;++g){var h=e.o[g],k=h.K;h.K=!0;a.i.maxWidth&&h.width>a.i.maxWidth&&(h.K=!1);a.i.maxHeight&&h.height>a.i.maxHeight&&(h.K=!1);a.i.minHeight&&h.height<a.i.minHeight&&(h.K=!1);a.i.maxBandwidth&&h.bandwidth>a.i.maxBandwidth&&(h.K=!1);a.i.minBandwidth&&h.bandwidth<a.i.minBandwidth&&(h.K=!1);k!=h.K&&(b=!0)}}0!=ub(a.c).length&&b&&(Vf(a),0<a.G().length||
(b=Error("The application has restricted all video tracks!"),b.type="app",b=y(b),a.dispatchEvent(b)))}}Y.prototype.vb=function(){return this.a?this.a.b:!1};Y.prototype.isLive=Y.prototype.vb;Y.prototype.fc=function(a){this.kb=a};Y.prototype.setIsLiveInterrupted=Y.prototype.fc;Y.prototype.jc=function(){for(var a in this.b)this.b[a].zb()};Y.prototype.forceResyncVideoBuffer=Y.prototype.jc;
function kf(a,b){for(var c,d=!1,f=new B,e=ub(a.c),g=0;g<e.length;++g)for(var h=e[g],k=0;k<h.o.length;++k){var l=h.o[k];l.f.forEach(function(a){f.push(a,l)})}for(c in b)if(e=ib[b[c]]||null,h=f.get(c))for(g=0;g<h.length;++g)l=h[g],k=l.U,l.U=!e,k!=l.U&&(d=!0);else Cb(c);d&&(Vf(a),d=a.Z(),c=a.G(),d=a.c.a.hasOwnProperty("audio")&&0==d.length,c=a.c.a.hasOwnProperty("video")&&0==c.length,d||c)&&(c=Error("The key system has restricted all "+(d&&c?"audio and video tracks.":d?"audio tracks.":"video tracks.")),
c.type="drm",c=y(c),a.dispatchEvent(c))}function Vf(a){var b=x({type:"trackschanged",bubbles:!0});a.dispatchEvent(b)}function wf(a,b,c,d,f,e){if(!a.c.a.hasOwnProperty(b)||!a.b[b])return!1;for(var g=a.c.get(b),h=0;h<g.length;++h)for(var k=g[h],l=0;l<k.o.length;++l){var n=k.o[l];if(n.H==c){if(!n.U||!n.K)return!1;if("text"!=b&&!a.Ya)return c=a.m[b],a.m[b]={Ua:n,$a:null!=c&&c.$a||d,ab:null!=c&&c.ab||f,switchReason:e},!0;Xe(a.I,n);a.b[b].ya(n,d,f,e);return!0}}return!1}
function Uf(a,b){for(var c=0;2>=c;++c)for(var d=0;d<b.length;++d){var f=b[d];if(lb(c,a.B,f.lang)){b.splice(d,1);b.splice(0,0,f);return}}for(d=0;d<b.length;++d)if(f=b[d],f.b){b.splice(d,1);b.splice(0,0,f);break}}m=Y.prototype;m.Kb=function(){this.j.za(this.h,"sourceopen");this.yb.resolve()};
function Mf(a){var b;a.N&&(b=a.N.getOperationLogger("start_streams"));for(var c=[],d=["audio","video","text"],f=0;f<d.length;++f){var e=d[f];a.c.a.hasOwnProperty(e)&&c.push(a.c.get(e)[0])}for(var g=Wf(a,c),f=0;f<d.length;++f)if(e=d[f],a.c.a.hasOwnProperty(e)&&!g[e])return a=Error("Unable to select an initial "+e+" stream: all "+e+" streams have been restricted (by the application or by the key system)."),a.type="stream",b&&b.setError(a).log(),Promise.reject(a);c=qb(g).map(function(a){return a.L.create()});
return Promise.all(c).then(H(a,function(a){if(!a.every(function(a){return a.length()}))return a=Error("Some streams are not available."),a.type="stream",Promise.reject(a);a=Qf(this,a);if(!a)return a=Error("Some streams are not available."),a.type="stream",Promise.reject(a);if(!Xf(this,g))return a=Error("Failed to create Stream objects."),a.type="stream",Promise.reject(a);this.l.start();Yf(this,g,a);return Promise.resolve()})).then(function(){b&&b.log()}).catch(H(a,function(a){if("aborted"==a.type)b&&
b.setError(a).log();else{Object.keys(this.b);if(this.a.b)return t()<this.a.h?(a=Math.max(this.a.h-Date.now()/1E3,this.wa),this.J=window.setTimeout(this.sb.bind(this,!0),1E3*a)):Sf(this,0),b&&b.log(),Promise.resolve();b&&b.setError(a).log();return Promise.reject(a)}}))}
function Wf(a,b){for(var c={},d=0;d<b.length;++d){var f=b[d],e=null;if("video"==f.contentType){var g=a.l.getInitialVideoTrackId();if(null==g)continue;e=f.o.filter(function(a){return a.H==g});if(0==e.length)continue;e=e[0]}else if("audio"==f.contentType)if(g=a.l.getInitialAudioTrackId(),e=f.o.filter(function(a){return a.H==g}),0==e.length){e=f.o.filter(function(a){return a.U&&a.K});if(0==e.length)continue;e=f.o[Math.floor(e.length/2)]}else e=e[0];else 0<f.o.length&&(e=f.o[0]);c[f.contentType]=e}return c}
function Xf(a,b){var c={},d;for(d in b){var f=b[d],f="text"==d?new He(a,a.f):Zf(a,f);if(!f)return qb(c).forEach(function(a){a.destroy()}),!1;c[d]=f}a.b=c;return!0}function Zf(a,b){var c=new xe(a,a.f,a.h,qe(b),a.S,a.wb);c.J(a.g);return c}function $f(a,b){a.f.currentTime=b;a.A=b}
function Yf(a,b,c){a.ob=a.f.playbackRate;a.f.playbackRate=0;ag(a,c);var d;a.T&&a.T<=c.end&&a.T>=c.start?d=a.T:a.a.b?(d=c.end,a.lb=!0):d=c.start;D(a.j,a.f,"seeking",a.Rb.bind(a));if(a.f.currentTime!=d)if(a.cb)0!==a.f.readyState?$f(a,d):a.D=d;else try{$f(a,d)}catch(f){a.D=d}bg(a,c.start,c.end);var e=[],g;for(g in a.b){c=a.b[g];H(a,function(a){e.push(a.Cb(this.X).then(H(this,function(b){var c=a.La();c>this.Ia&&(this.Ia=c);return b})))})(c);D(a.j,c,"ended",a.Sb.bind(a));d=b[g];Xe(a.I,d);var h=a.l.getInitialSwitchReason()||
void 0;c.ya(d,!1,void 0,h)}Promise.all(e).then(a.Fb.bind(a)).catch(H(a,function(a){"destroy"!=a.type&&(a=y(a),this.dispatchEvent(a))}));xf(a,a.ja)}
m.Fb=function(a){ba(a&&a.length==Object.keys(this.b).length);for(var b=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY,d=0;d<a.length;++d)var f=a[d],b=Math.min(b,f),c=Math.max(c,f);a=Pf(this);for(d=0;d<a.length;++d)a[d].oa(c);cg(this,a,c);d=ub(this.c).map(function(a){return a.o}).reduce(function(a,b){return a.concat(b)},[]).map(function(a){var b=[a.L.create()];a.O&&b.push(a.O.create(this.N));return Promise.all(b)});Promise.all(d).then(H(this,function(a){for(var b=0;b<a.length;++b)a[b][0].oa(c);
this.Ya=!0;for(var d in this.m)a=this.m[d],b=this.b[d],Xe(this.I,a.Ua),b.ya(a.Ua,a.$a,a.ab,a.switchReason);this.m={}})).catch(H(this,function(a){"aborted"!=a.type&&(a=y(a),this.dispatchEvent(a))}))};function cg(a,b,c){if(b=Qf(a,b))ag(a,b),bg(a,b.start,b.end);0!=c?(c=a.f.currentTime+c,a.f.currentTime=c,a.A=c):a.lb&&b&&(a.f.currentTime=b.end);a.f.playbackRate=a.ob;a.a.b&&null!=a.a.f&&Sf(a,0);dg(a);a.X.resolve()}
function ag(a,b){if(a.a.b)isNaN(a.h.duration)&&(a.h.duration=b.end+2592E3);else if(isNaN(a.h.duration)||b.end>a.h.duration){a.h.duration=b.end;for(var c=0;c<a.h.sourceBuffers.length;++c)a.h.sourceBuffers[c].appendWindowEnd=b.end}}m.Tb=function(){this.P=null;dg(this);var a=Qf(this,Pf(this));a&&(this.a.b&&this.sa!=a.w&&(this.sa=a.w,null!=this.s&&(window.clearTimeout(this.s),this.s=null)),bg(this,a.start,a.end),this.f.paused||eg(this,this.f.currentTime,a.start,a.end))};
function bg(a,b,c){b=x({type:"seekrangechanged",bubbles:!0,start:b,end:c});a.dispatchEvent(b)}m.Rb=function(){var a=this.f.currentTime;if(null!=this.A){if(a>=this.A-.01&&a<=this.A+.01){this.A=null;return}this.A=null}var b=Qf(this,Pf(this));if(b){var c=b.end;(b=eg(this,a,b.start,c))||(a<=c+.01?b=!1:(this.f.currentTime=c,b=!0));if(!b)for(var d in this.b)this.b[d].xb()}};
function eg(a,b,c,d){if(b>=c-.01)return!1;b=0;if(a.a.b){b=.5;for(var f in a.b)if(!a.b[f].Ab(c+b)){b=a.a.c;break}}a.f.currentTime=Math.min(c+b,d);return!0}m.Sb=function(){if(!this.a.b){for(var a in this.b)if(!this.b[a].Pa())return;this.Aa()}};function Af(a){return a.a.i&&a.f.currentTime+.5>a.sa?!0:!1}m.Hb=function(){this.ia=!0;if(Af(this))return this.Aa();qb(this.b).every(function(a){return a.Pa()})&&(this.s=window.setTimeout(this.Aa.bind(this),1E3*this.mb))};
m.Gb=function(){this.ia=!1;null!=this.s&&(window.clearTimeout(this.s),this.s=null)};m.Jb=function(){null!==this.D&&($f(this,this.D),this.D=null)};m.cc=function(){var a=this.I,b=this.S.getBandwidth();a.estimatedBandwidth=b;a.bandwidthHistory.push(new Ze(b))};m.Aa=function(){this.ia=!1;this.s=null;this.h.endOfStream()};function Pf(a){return qb(a.b).map(function(a){return a.Na()}).filter(function(a){return null!=a})}function Of(a){return Math.max(a.a?a.a.c:1,a.jb?a.g.streamBufferSize||0:0)}
function Qf(a,b){for(var c=0,d=Number.POSITIVE_INFINITY,f=Number.POSITIVE_INFINITY,e=0;e<b.length;++e){var g=b[e].Ma(),c=Math.max(c,g.start);null!=g.end&&(d=Math.min(d,g.end));b[e].length()&&(f=Math.min(f,b[e].w().endTime))}if(d==Number.POSITIVE_INFINITY)if(d=a.a.a[0],d.b)d=(d.start||0)+d.b;else return null;a.a.b&&(e=Of(a),d=Math.max(d-e,c));if(c>d)return null;d=Math.floor(1E5*d)/1E5;return{start:c,end:d,w:f}}function dg(a){a.a.b&&(a.P=window.setTimeout(a.Tb.bind(a),1E3))}
function Kf(a){for(var b in a.b)a.b[b].J(a.g)}m.La=function(){return this.Ia};Y.prototype.getLongestInitResponseTime=Y.prototype.La;function Z(a,b,c,d){c||(c=new F);d||(d=new X);Y.call(this,null,c,d);"string"===typeof a?this.dc=a:this.Fa=a;this.M=null;this.Y=b;this.qa=[];this.Za=[];this.bb=[];this.ra=0;this.F=null}q(Z,Y);p("shaka.player.DashVideoSource",Z);Z.prototype.fb=function(){return this.Fa||this.M};Z.prototype.debugGetManifest=Z.prototype.fb;Z.prototype.hc=function(a,b,c){this.qa.push(a);this.Za.push(b||"");this.bb.push(c||"")};Z.prototype.addExternalCaptions=Z.prototype.hc;Z.prototype.ic=function(a){this.F=a};
Z.prototype.setNetworkCallback=Z.prototype.ic;Z.prototype.destroy=function(){this.M=this.F=this.Y=null;Y.prototype.destroy.call(this)};
Z.prototype.Ca=function(){var a;this.N&&(a=this.N.getOperationLogger("source_load"));var b,c=H(this,function(c){this.la("MPDFetchDuration",(Date.now()-b)/1E3);this.M=c;for(var d=0;d<this.qa.length;d++)td(c,this.qa[d],this.Za[d],this.bb[d]);this.a=Le(new Ke(this.Y),c,this.F);return Y.prototype.Ca.call(this).then(function(){a&&a.log()})});if(this.Fa)return b=Date.now(),c(this.Fa);var d=[new J(this.dc)],f;if(this.va){f=Math.floor(Of(this))+1;var e=Tf(this);f=Math.min(f,this.ua);f=new Nd(f);f.b=Math.floor(Of(this)+
1);null!=e&&(f.a=e.streamInfoID)}d=new I(this.F,d);d=new Ld(d,this.Ha,f);b=Date.now();return Md(d,this.N).then(c)};Z.prototype.gb=function(){if(this.hb){var a=this.a;if(a=(a=a&&a.a)&&a[0])a=a.a.reduce(function(a,c){return a.concat(c.o)},[]),Promise.all(a.map(function(a){a=a.L;return a.Db?a.fa:a.create()})).then(function(a){a=a.filter(function(a){return null!=a});this.la("InitialSegmentIndexes",a)}.bind(this))}};
Z.prototype.rb=function(a,b,c){if(this.f.paused&&this.ra+1E4>Date.now()&&this.a)return Promise.reject({type:"delay"});var d;b&&void 0!=c&&(d=new Nd(b),d.c=c,b=Tf(this),null!=b&&(d.a=b.streamInfoID));a=new Ld(a,this.Ha,d);var f=Date.now();return Md(a,this.N).then(H(this,function(a){this.ra=Date.now();this.la("MPDFetchDuration",(this.ra-f)/1E3);this.M=a;a=Le(new Ke(this.Y),a,this.F);return Promise.resolve(a)}))};Z.prototype.qb=function(){var a=Le(new Ke(this.Y),this.M,this.F);return Promise.resolve(a)};}.bind(g, global))();

module.exports = g.shaka;


/* wRMj2tgT5EM */}),null);
__d('CustomAbrManager',['EventListener','SubscriptionsHandler','Shaka','VideoPlayerStreamSwitchReasons','VideoQualityClasses','VideoPlayerShakaExperiments'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('Shaka').player.VideoTrack;function i(j){'use strict';this.$CustomAbrManager1=null;this.$CustomAbrManager2=null;this.$CustomAbrManager3=new (c('SubscriptionsHandler'))();this.$CustomAbrManager4=Number.POSITIVE_INFINITY;this.$CustomAbrManager5=true;this.$CustomAbrManager6=false;this.$CustomAbrManager7=j.maxWidth;this.$CustomAbrManager8=j.maxHeight;this.$CustomAbrManager9=j.minPlayQuality;this.$CustomAbrManager10=j.maxPlayQuality;this.$CustomAbrManager11=j.initiallyForcedRepresentations;this.$CustomAbrManager12=null;this.$CustomAbrManager13=null;this.$CustomAbrManager14=null;if(j.enableAdaptation){this.$CustomAbrManager15=j.bandwidthDowngradeTarget;this.$CustomAbrManager16=j.bandwidthUpgradeTarget;}}i.prototype.destroy=function(){'use strict';this.$CustomAbrManager3.release();this.$CustomAbrManager3.engage();this.$CustomAbrManager1=null;this.$CustomAbrManager2=null;this.$CustomAbrManager5=false;};i.prototype.setResolutionConstraint=function(j,k){'use strict';this.$CustomAbrManager7=j;this.$CustomAbrManager8=k;this.$CustomAbrManager17();};i.prototype.initialize=function(j,k){'use strict';if(this.$CustomAbrManager1||this.$CustomAbrManager2)return;this.$CustomAbrManager1=j;this.$CustomAbrManager2=k;};i.prototype.start=function(){'use strict';if(!this.$CustomAbrManager1||!this.$CustomAbrManager2||this.$CustomAbrManager6)return;this.$CustomAbrManager4=Date.now()+i.FIRST_SWITCH_INTERVAL;this.$CustomAbrManager3.addSubscriptions(c('EventListener').listen(this.$CustomAbrManager1,'bandwidth',this.$CustomAbrManager18.bind(this)),c('EventListener').listen(this.$CustomAbrManager2,'adaptation',this.$CustomAbrManager19.bind(this)),c('EventListener').listen(this.$CustomAbrManager2,'trackschanged',this.$CustomAbrManager20.bind(this)));this.$CustomAbrManager6=true;};i.prototype.$CustomAbrManager20=function(){'use strict';this.$CustomAbrManager17();};i.prototype.setPreferredVideoTrack=function(j){'use strict';var k=i.$CustomAbrManager21(this.$CustomAbrManager2.getVideoTracks()),l=k?h.compare(k,j)<0:false;this.$CustomAbrManager12=j;this.$CustomAbrManager17(null,l);};i.prototype.unsetPreferredVideoTrack=function(){'use strict';this.$CustomAbrManager12=null;this.$CustomAbrManager17(null,false);};i.prototype.enable=function(j){'use strict';this.$CustomAbrManager5=j;};i.prototype.getInitialVideoTrackId=function(){'use strict';if(!this.$CustomAbrManager1||!this.$CustomAbrManager2)return null;var j=this.$CustomAbrManager22();return j?j.id:null;};i.prototype.getInitialSwitchReason=function(){'use strict';return this.$CustomAbrManager14;};i.prototype.getInitialAudioTrackId=function(){'use strict';if(!this.$CustomAbrManager1||!this.$CustomAbrManager2)return null;var j=this.$CustomAbrManager23();return j?j.id:null;};i.prototype.selectVideoTrack=function(j,k,l,m){'use strict';if(!this.$CustomAbrManager6)return;this.$CustomAbrManager2.selectVideoTrack(j.id,k,l,m);};i.$CustomAbrManager21=function(j){'use strict';for(var k=0;k<j.length;++k)if(j[k].active)return j[k];return null;};i.prototype.$CustomAbrManager18=function(event){'use strict';if(Date.now()<this.$CustomAbrManager4)return;this.$CustomAbrManager17(event);};i.prototype.$CustomAbrManager17=function(event,j){'use strict';if(!this.$CustomAbrManager5)return;var k=this.$CustomAbrManager22();if(k){if(k.active){this.$CustomAbrManager4=Date.now()+i.MIN_EVAL_INTERVAL;return;}this.selectVideoTrack(k,!!j,0,this.$CustomAbrManager13);}this.$CustomAbrManager4=Number.POSITIVE_INFINITY;};i.prototype.$CustomAbrManager19=function(event){'use strict';if(this.$CustomAbrManager4==Number.POSITIVE_INFINITY)this.$CustomAbrManager4=Date.now()+i.MIN_SWITCH_INTERVAL;};i.prototype.$CustomAbrManager22=function(){var j,k=this;'use strict';var l=this.$CustomAbrManager2.getVideoTracks();if(l.length==0)return null;if(!this.$CustomAbrManager6)for(var m=0;m<l.length;m++)if(this.$CustomAbrManager11&&this.$CustomAbrManager11.includes(l[m].streamInfoID)){this.$CustomAbrManager13=c('VideoPlayerStreamSwitchReasons').FORCED;this.$CustomAbrManager14=c('VideoPlayerStreamSwitchReasons').FORCED;return l[m];}if(this.$CustomAbrManager12){var n=l.find(function(y){return y.id===this.$CustomAbrManager12.id;}.bind(this));if(n){this.$CustomAbrManager13=c('VideoPlayerStreamSwitchReasons').USER;return n;}}l.sort(h.compare);if(this.$CustomAbrManager9!==null||this.$CustomAbrManager10!==null){var j=function(){var y=k.$CustomAbrManager9!==null?c('VideoQualityClasses').indexOf(k.$CustomAbrManager9):0,z=k.$CustomAbrManager10!==null?c('VideoQualityClasses').indexOf(k.$CustomAbrManager10):c('VideoQualityClasses').length-1;if(y<=z){var aa=l.filter(function(ca){return c('VideoQualityClasses').indexOf(ca.fbQualityClass)>=y&&c('VideoQualityClasses').indexOf(ca.fbQualityClass)<=z;});k.$CustomAbrManager13=c('VideoPlayerStreamSwitchReasons').PREFER_QUALITY_CLASS;if(!aa.length)return {v:l[l.length-1]};var ba=c('VideoQualityClasses').indexOf('sd');if(l.length==2&&aa.length==2&&z<=ba)return {v:l[0]};l=aa;}}();if(typeof j==="object")return j.v;}var o=l[0],p=this.$CustomAbrManager8,q=this.$CustomAbrManager7;l=l.filter(function(y){return y.width<=q||y.height<=p;});var r=i.$CustomAbrManager21(this.$CustomAbrManager2.getAudioTracks()),s=r?r.bandwidth:0,t=this.$CustomAbrManager1.getBandwidth();for(var m=0;m<l.length;m++){var u=l[m],v=m+1<l.length?l[m+1]:{bandwidth:Number.POSITIVE_INFINITY};if(!u.bandwidth)continue;var w=(u.bandwidth+s)/this.$CustomAbrManager15,x=(v.bandwidth+s)/this.$CustomAbrManager16;if(t>=w&&t<=x){o=u;if(o.active)break;}}this.$CustomAbrManager13=c('VideoPlayerStreamSwitchReasons').BANDWIDTH;return o;};i.prototype.$CustomAbrManager23=function(){'use strict';var j=this.$CustomAbrManager2.getAudioTracks();if(j.length==0)return null;if(!this.$CustomAbrManager6)for(var k=0;k<j.length;k++)if(this.$CustomAbrManager11&&this.$CustomAbrManager11.includes(j[k].streamInfoID))return j[k];return null;};i.FIRST_SWITCH_INTERVAL=c('VideoPlayerShakaExperiments').firstSwitchInterval;i.MIN_SWITCH_INTERVAL=c('VideoPlayerShakaExperiments').minSwitchInterval;i.MIN_EVAL_INTERVAL=c('VideoPlayerShakaExperiments').minEvalInterval;f.exports=i;}),null);
__d('VideoPlayerLiveStreamState',['RTISubscriptionManager','EventEmitter'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j={interrupt:'streamInterruptAt',ended:'endedAt'};h=babelHelpers.inherits(k,c('EventEmitter'));i=h&&h.prototype;function k(l){i.constructor.call(this);this.$VideoPlayerLiveStreamState1=[];for(var m in j)this.$VideoPlayerLiveStreamState1.push(c('RTISubscriptionManager').subscribe('video_broadcast/'+m+'_'+l,this.$VideoPlayerLiveStreamState2.bind(this,j[m])));}k.prototype.unsubscribe=function(){for(var l=this.$VideoPlayerLiveStreamState1,m=Array.isArray(l),n=0,l=m?l:l[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var o;if(m){if(n>=l.length)break;o=l[n++];}else{n=l.next();if(n.done)break;o=n.value;}var p=o;p.unsubscribe();}};k.prototype.$VideoPlayerLiveStreamState2=function(l,m){var n=JSON.parse(m.payload||'{}')||{},o=n.time_position;if(typeof o==='number'){o/=1000;this.emit(l,o);}};f.exports=k;}),null);
__d('VideoPlayerShakaPerformanceLogger',['VideoPlayerShakaPerformanceTypedLogger','VideoPlayerShakaPerformanceLoggerConfig','guid'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('VideoPlayerShakaPerformanceTypedLogger'));i=h&&h.prototype;function j(){h.apply(this,arguments);}k.isEnabled=function(){return c('VideoPlayerShakaPerformanceLoggerConfig').isSampled;};function k(l,m,n){this.$VideoPlayerShakaPerformanceLogger2=l;this.$VideoPlayerShakaPerformanceLogger1=c('guid')();this.$VideoPlayerShakaPerformanceLogger4=m;this.$VideoPlayerShakaPerformanceLogger5=n;}k.prototype.getEventLogger=function(event){var l=Date.now(),m=new j();m.setEvent(event).setVideoID(this.$VideoPlayerShakaPerformanceLogger2).setIsLive(this.$VideoPlayerShakaPerformanceLogger4).setSession(this.$VideoPlayerShakaPerformanceLogger1).setState(this.$VideoPlayerShakaPerformanceLogger3).setResult('success').setAccessToken(this.$VideoPlayerShakaPerformanceLogger5).setClientTimeBegin(l).setClientTimeEnd(l);var n=m.setState;m.setState=function(p){this.$VideoPlayerShakaPerformanceLogger3=p;return n.call(m,p);}.bind(this);var o=m.setError;m.setError=function(p){if(typeof p==='object'){if(p.type==='aborted'||p.type==='delay'){this.setResult('aborted');}else{this.setResult('failed');o.call(this,p.type);}this.setCode(p.status);}else o.call(this,p);return this;};return m;};k.prototype.getOperationLogger=function(l){var m=this.getEventLogger(l),n=m.log;m.log=function(){this.setClientTimeEnd(Date.now());return n.call(this);};return m;};f.exports=k;}),null);
__d('VideoPlayerHTML5Shaka',['invariant','Promise','BlobFactory','CacheStorage','CustomAbrManager','EventEmitter','EventListener','Event','TaggedTimeRanges','URI','VideoDashPrefetchCache','VideoPlayerLiveStreamState','VideoPlayerShakaBandwidthEstimator','VideoPlayerShakaExperiments','VideoQualityClasses','VideoPlayerShakaPerformanceLogger','dispatchEvent','Shaka'],(function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('Shaka').player,l=k.Player,m=k.DashVideoSource,n=k.VideoTrack,o=c('Shaka').dash.mpd.parseMpd,p=c('Shaka').util.FailoverUri,q=window.devicePixelRatio||1,r=c('VideoPlayerShakaBandwidthEstimator').getEstimator();p.setPrefetchCacheValueGetter(c('VideoDashPrefetchCache').getCacheValue);c('Shaka').polyfill.Fullscreen.install();c('Shaka').polyfill.MediaKeys.install();function s(y){var z=y.getVideoTracks();z.sort(n.compare);var aa=z.reduce(function(ba,ca){return ca.fbQualityLabel=='hd'?ca:ba;});if(!aa)return z.pop().id;return aa.id;}function t(y){var z=y.getVideoTracks();z.sort(n.compare);return z.shift().id;}function u(y){var z=c('BlobFactory').getBlob([y]);return URL.createObjectURL(z);}function v(y,event){var z=c('EventListener').capture(y.parentNode,event,function(aa){if(aa.target!=y)return;z.remove();c('Event').kill(aa);});}function w(y,z){'use strict';this.$DisabledAbrManager1=y;this.$DisabledAbrManager2=z;}w.prototype.initialize=function(y,z){'use strict';this.$DisabledAbrManager3=z;};w.prototype.start=function(){'use strict';if(this.$DisabledAbrManager4)return;this.$DisabledAbrManager4=true;if(this.$DisabledAbrManager2&&this.$DisabledAbrManager1)this.$DisabledAbrManager3.selectVideoTrack(s(this.$DisabledAbrManager3),false);};w.prototype.enable=function(){'use strict';};w.prototype.getInitialVideoTrackId=function(){'use strict';if(this.$DisabledAbrManager2)return t(this.$DisabledAbrManager3);var y=this.$DisabledAbrManager1?s(this.$DisabledAbrManager3):t(this.$DisabledAbrManager3);return y;};w.prototype.setPreferredVideoTrack=function(y){'use strict';if(this.$DisabledAbrManager4)this.$DisabledAbrManager3.selectVideoTrack(y.id,true);};w.prototype.unsetPreferredVideoTrack=function(){'use strict';};w.prototype.destroy=function(){'use strict';this.$DisabledAbrManager3=null;};i=babelHelpers.inherits(x,c('EventEmitter'));j=i&&i.prototype;function x(y,z,aa){var ba=aa.videoID,ca=aa.width,da=aa.height,ea=aa.manifest,fa=aa.manifestUrl,ga=aa.isLive,ha=aa.minPlayQuality,ia=aa.maxPlayQuality,ja=aa.accessToken;'use strict';j.constructor.call(this);this.$VideoPlayerHTML5Shaka1=ha;this.$VideoPlayerHTML5Shaka2=ia;this.$VideoPlayerHTML5Shaka3=false;this.$VideoPlayerHTML5Shaka4=null;this.$VideoPlayerHTML5Shaka5=1;this.$VideoPlayerHTML5Shaka6=false;this.$VideoPlayerHTML5Shaka7=ga;this.$VideoPlayerHTML5Shaka8=false;this.$VideoPlayerHTML5Shaka9=ca;this.$VideoPlayerHTML5Shaka10=da;this.$VideoPlayerHTML5Shaka11=c('VideoPlayerShakaPerformanceLogger').isEnabled()?new (c('VideoPlayerShakaPerformanceLogger'))(ba,ga,ja):null;if(!c('VideoPlayerShakaExperiments').improveRebufferLogging)this.$VideoPlayerHTML5Shaka12=true;c('EventListener').listen(y,'playing',this.$VideoPlayerHTML5Shaka13.bind(this));c('EventListener').listen(y,'timeupdate',function(la){this.$VideoPlayerHTML5Shaka14(la.target.currentTime);}.bind(this));c('EventListener').listen(y,'pause',this.$VideoPlayerHTML5Shaka15.bind(this));c('EventListener').listen(y,'play',function(){this.$VideoPlayerHTML5Shaka8=true;}.bind(this));this.$VideoPlayerHTML5Shaka16=null;this.$VideoPlayerHTML5Shaka17=null;this.$VideoPlayerHTML5Shaka18=null;this.$VideoPlayerHTML5Shaka19=new l(y);this.$VideoPlayerHTML5Shaka19.addEventListener('bufferingStart',function(){return this.$VideoPlayerHTML5Shaka20();}.bind(this));this.$VideoPlayerHTML5Shaka19.addEventListener('bufferingEnd',function(){return this.$VideoPlayerHTML5Shaka21();}.bind(this));this.$VideoPlayerHTML5Shaka19.addEventListener('error',function(la){return this.$VideoPlayerHTML5Shaka22(la);}.bind(this));this.$VideoPlayerHTML5Shaka19.addEventListener('adaptation',this.$VideoPlayerHTML5Shaka23.bind(this));this.$VideoPlayerHTML5Shaka19.addEventListener('trackschanged',this.$VideoPlayerHTML5Shaka24.bind(this));this.$VideoPlayerHTML5Shaka19.addEventListener('debug/shakaEvent',function(la){return this.emit('debug/shakaEvent',la.detail);}.bind(this));this.$VideoPlayerHTML5Shaka19.addEventListener('manifestwrapped',this.$VideoPlayerHTML5Shaka25.bind(this));if(c('VideoPlayerShakaExperiments').enableLiveInterruptionDetection)this.$VideoPlayerHTML5Shaka19.addEventListener('manifestIsUpdating',this.$VideoPlayerHTML5Shaka26.bind(this));this.$VideoPlayerHTML5Shaka27=z;this.$VideoPlayerHTML5Shaka28=null;var ka=false;if(ea){this.$VideoPlayerHTML5Shaka29=o(ea,fa);}else{this.$VideoPlayerHTML5Shaka29=fa;ka=fa.indexOf('/dash-abr/')!==-1;}this.$VideoPlayerHTML5Shaka30=this.$VideoPlayerHTML5Shaka31();this.$VideoPlayerHTML5Shaka32=this.$VideoPlayerHTML5Shaka33();this.$VideoPlayerHTML5Shaka34=y;this.$VideoPlayerHTML5Shaka19.configure({enableAdaptation:true,appendPlayingQueryParam:c('VideoPlayerShakaExperiments').addCdnDebugQueryParameters,allowSkipUnloading:c('VideoPlayerShakaExperiments').allowSkipUnloading,endBufferingOnPlaying:c('VideoPlayerShakaExperiments').endBufferingOnPlaying,usePlaybackRateForBuffering:c('VideoPlayerShakaExperiments').improveRebufferLogging,streamBufferSize:ga?c('VideoPlayerShakaExperiments').liveStreamBufferSize:c('VideoPlayerShakaExperiments').streamBufferSize,initialStreamBufferSize:x.isAutoplayBandwidthRestrained()?0:ga?c('VideoPlayerShakaExperiments').liveInitialStreamBufferSize:c('VideoPlayerShakaExperiments').initialStreamBufferSize,dynamicStreamBufferSize:ga?c('VideoPlayerShakaExperiments').liveDynamicStreamBufferSize:null,includeStreamBufferSizeInStartOffset:c('VideoPlayerShakaExperiments').includeStreamBufferSizeInStartOffset,minMpdRefreshInterval:c('VideoPlayerShakaExperiments').minMpdRefreshInterval,disableCacheBustingEvenThoughItMayAffectBandwidthEstimation:true,liveStreamEndTimeout:c('VideoPlayerShakaExperiments').liveStreamEndTimeout/1000,enableLiveInterruptionDetection:c('VideoPlayerShakaExperiments').enableLiveInterruptionDetection,liveInterruptionConsecutiveUpdatesWithoutChange:c('VideoPlayerShakaExperiments').liveInterruptionConsecutiveUpdatesWithoutChange,liveInterruptionConsecutiveUpdatesWithChange:c('VideoPlayerShakaExperiments').liveInterruptionConsecutiveUpdatesWithChange,liveMaxSegmentsToPush:c('VideoPlayerShakaExperiments').liveMaxSegmentsToPush,liveSendPushHeaders:x.isAutoplayBandwidthRestrained()?false:c('VideoPlayerShakaExperiments').liveSendPushHeaders&&!ka,liveMaxManifestFetchesWithPush:c('VideoPlayerShakaExperiments').liveMaxManifestFetchesWithPush,resolveVideoTimeUpdateOnFragmentedTimeRanges:c('VideoPlayerShakaExperiments').resolveVideoTimeUpdateOnFragmentedTimeRanges,enableManifestDebug:c('VideoPlayerShakaExperiments').enableVideoDebug,reappendInitSegmentAfterAbort:c('VideoPlayerShakaExperiments').reappendInitSegmentAfterAbort,performanceLogger:this.$VideoPlayerHTML5Shaka11,useInlineInitSegment:c('VideoPlayerShakaExperiments').useInlineInitSegment,currentTimeDuringReadyStateZeroThrows:c('VideoPlayerShakaExperiments').currentTimeDuringReadyStateZeroThrows});if(ga&&c('VideoPlayerShakaExperiments').enableLiveInterruptionDetection){this.$VideoPlayerHTML5Shaka35=new (c('VideoPlayerLiveStreamState'))(ba);this.$VideoPlayerHTML5Shaka35.addListener('streamInterruptAt',this.$VideoPlayerHTML5Shaka36.bind(this));['streamInterruptAt','commercialBreakAt','endedAt'].forEach(function(la){this.$VideoPlayerHTML5Shaka35.addListener(la,function(event){this.emit('debug/shakaEvent',{type:la,event:event});}.bind(this));}.bind(this));}this.$VideoPlayerHTML5Shaka19.load(this.$VideoPlayerHTML5Shaka32);}x.prototype.getDebug=function(){'use strict';return {AbrManager:this.$VideoPlayerHTML5Shaka30,VideoSource:this.$VideoPlayerHTML5Shaka32,ShakaPlayer:this.$VideoPlayerHTML5Shaka19};};x.getEstimatedBandwidth=function(){'use strict';return r.getBandwidth();};x.isAutoplayBandwidthRestrained=function(){'use strict';return c('VideoPlayerShakaBandwidthEstimator').isAutoplayBandwidthRestrained();};x.prototype.$VideoPlayerHTML5Shaka14=function(y){'use strict';var z=this.$VideoPlayerHTML5Shaka37.get(y);if(!z)return;var aa=z.id,ba=z.reason;if(this.$VideoPlayerHTML5Shaka28!==aa){var ca=this.$VideoPlayerHTML5Shaka28;this.$VideoPlayerHTML5Shaka28=aa;this.emit('representation_ended',{representationID:ca,nextRepresentationID:aa,streamSwitchReason:ba});}};x.prototype.getStreamInfoIDForTimePosition=function(y){'use strict';var z=this.$VideoPlayerHTML5Shaka37.get(y),aa=null;if(z)aa=z.id;return aa;};x.prototype.$VideoPlayerHTML5Shaka38=function(y,z){'use strict';if(y.fbQualityLabel){return y.fbQualityLabel;}else if(n.compare(y,z[0])==0){return 'SD';}else if(n.compare(y,z[z.length-1])==0){return 'HD';}else return null;};x.prototype.getAvailableVideoQualities=function(){'use strict';if(this.$VideoPlayerHTML5Shaka3)return this.$VideoPlayerHTML5Shaka16;var y=this.$VideoPlayerHTML5Shaka32.getVideoTracks();y.sort(n.compare);return y.every(function(z){return z.fbQualityLabel!==null;})?y.map(function(z){return z.fbQualityLabel;}):y.length>1?['SD','HD']:['SD'];};x.prototype.getIsAbrEnabled=function(){'use strict';return c('VideoPlayerShakaExperiments').enableAdaptation;};x.prototype.getSelectedVideoQuality=function(){'use strict';if(this.$VideoPlayerHTML5Shaka3)return this.$VideoPlayerHTML5Shaka17;var y=this.$VideoPlayerHTML5Shaka32.getVideoTracks();y.sort(n.compare);var z=y.find(function(aa){return aa.active;});return z?this.$VideoPlayerHTML5Shaka38(z,y):null;};x.prototype.canAutoSelectVideoQuality=function(){'use strict';return true;};x.prototype.setPreferredVideoQuality=function(y){'use strict';var z=this.$VideoPlayerHTML5Shaka32.getVideoTracks();z.sort(n.compare);var aa=z.find(function(ba){return y==this.$VideoPlayerHTML5Shaka38(ba,z);}.bind(this));if(aa){this.$VideoPlayerHTML5Shaka18=y;this.$VideoPlayerHTML5Shaka30.setPreferredVideoTrack(aa);}};x.prototype.unsetPreferredVideoQuality=function(){'use strict';this.$VideoPlayerHTML5Shaka18=null;this.$VideoPlayerHTML5Shaka30.unsetPreferredVideoTrack();};x.prototype.pause=function(){'use strict';if(this.$VideoPlayerHTML5Shaka39&&!c('VideoPlayerShakaExperiments').improveRebufferLogging){this.$VideoPlayerHTML5Shaka40=true;this.$VideoPlayerHTML5Shaka41=true;c('dispatchEvent')(this.$VideoPlayerHTML5Shaka34,'pause');this.$VideoPlayerHTML5Shaka19.setResumeAfterBuffering(false);}else this.$VideoPlayerHTML5Shaka34.pause();};x.prototype.play=function(){'use strict';this.$VideoPlayerHTML5Shaka8=true;if(this.$VideoPlayerHTML5Shaka11&&(this.$VideoPlayerHTML5Shaka34.paused||this.$VideoPlayerHTML5Shaka34.ended))this.$VideoPlayerHTML5Shaka42=this.$VideoPlayerHTML5Shaka11.getOperationLogger('play').setState('pending_play');if(this.$VideoPlayerHTML5Shaka39&&!c('VideoPlayerShakaExperiments').improveRebufferLogging){this.$VideoPlayerHTML5Shaka40=false;this.$VideoPlayerHTML5Shaka41=true;c('dispatchEvent')(this.$VideoPlayerHTML5Shaka34,'play');c('dispatchEvent')(this.$VideoPlayerHTML5Shaka34,'waiting');this.$VideoPlayerHTML5Shaka19.setResumeAfterBuffering(true);return c('Promise').resolve();}else return this.$VideoPlayerHTML5Shaka34.play();};x.prototype.$VideoPlayerHTML5Shaka43=function(){'use strict';var y=this.$VideoPlayerHTML5Shaka4;if(y){var z=this.$VideoPlayerHTML5Shaka34.currentTime,aa=4,ba=z>y-aa,ca=z>y;if(ca){this.emit('debug/shakaEvent',{type:'streamResumedAt',event:this.$VideoPlayerHTML5Shaka4});this.$VideoPlayerHTML5Shaka4=null;}else if(this.$VideoPlayerHTML5Shaka39)this.$VideoPlayerHTML5Shaka6=ba;}return this.$VideoPlayerHTML5Shaka6;};x.prototype.$VideoPlayerHTML5Shaka20=function(){'use strict';if(!c('VideoPlayerShakaExperiments').improveRebufferLogging){v(this.$VideoPlayerHTML5Shaka34,'pause');this.$VideoPlayerHTML5Shaka40=false;this.$VideoPlayerHTML5Shaka41=false;}this.$VideoPlayerHTML5Shaka39=true;if(this.$VideoPlayerHTML5Shaka43()){if(!c('VideoPlayerShakaExperiments').fixIsLiveInterruptedBacktest){if(this.$VideoPlayerHTML5Shaka11&&!this.$VideoPlayerHTML5Shaka44)this.$VideoPlayerHTML5Shaka44=this.$VideoPlayerHTML5Shaka11.getOperationLogger('stream_interrupted');this.$VideoPlayerHTML5Shaka32.setIsLiveInterrupted(true);}this.emit('streamInterrupted');}else{this.$VideoPlayerHTML5Shaka19.setResumeAfterBuffering(true);this.emit('bufferingStart');}};x.prototype.$VideoPlayerHTML5Shaka21=function(){var y,z=this;'use strict';if(!c('VideoPlayerShakaExperiments').improveRebufferLogging){if(!this.$VideoPlayerHTML5Shaka40)v(this.$VideoPlayerHTML5Shaka34,'play');if(!this.$VideoPlayerHTML5Shaka41)(function(){var aa=c('EventListener').capture(z.$VideoPlayerHTML5Shaka34.parentNode,'playing',function(ba){if(ba.target!=this.$VideoPlayerHTML5Shaka34)return;aa.remove();if(this.$VideoPlayerHTML5Shaka12){this.$VideoPlayerHTML5Shaka12=false;return;}c('Event').kill(ba);}.bind(z));})();}this.$VideoPlayerHTML5Shaka39=false;if(this.$VideoPlayerHTML5Shaka44){this.$VideoPlayerHTML5Shaka44.log();this.$VideoPlayerHTML5Shaka44=null;}this.$VideoPlayerHTML5Shaka32.setIsLiveInterrupted(false);if(this.$VideoPlayerHTML5Shaka6){this.$VideoPlayerHTML5Shaka45();}else this.emit('bufferingEnd');};x.prototype.$VideoPlayerHTML5Shaka22=function(y){'use strict';var z=y.detail||{},aa=z.type||'undefined',ba=z.status||null,ca=z.url||null;if(c('VideoPlayerShakaExperiments').blockPlayRequestOnNetworkError&&this.$VideoPlayerHTML5Shaka7&&Object.values(c('VideoPlayerShakaExperiments').blockPlayRequestHTTPStatusList).indexOf(ba)!=-1&&new (c('URI'))(ca).getPath().split('.').pop()==='mpd'){if(this.$VideoPlayerHTML5Shaka8){c('dispatchEvent')(this.$VideoPlayerHTML5Shaka34,'playing');this.$VideoPlayerHTML5Shaka8=false;}return this.$VideoPlayerHTML5Shaka46();}this.emit('error',{error:'SHAKA_'+aa.toUpperCase(),message:z.message,httpStatus:ba,url:ca});};x.prototype.unload=function(){'use strict';this.$VideoPlayerHTML5Shaka17=this.getSelectedVideoQuality();this.$VideoPlayerHTML5Shaka16=this.getAvailableVideoQualities();this.$VideoPlayerHTML5Shaka7=this.$VideoPlayerHTML5Shaka32&&this.$VideoPlayerHTML5Shaka32.isLive();this.$VideoPlayerHTML5Shaka19.unload();this.$VideoPlayerHTML5Shaka3=true;};x.prototype.$VideoPlayerHTML5Shaka31=function(){'use strict';var y={enableAdaptation:this.getIsAbrEnabled(),minPlayQuality:this.$VideoPlayerHTML5Shaka1,maxPlayQuality:this.$VideoPlayerHTML5Shaka2,maxWidth:this.$VideoPlayerHTML5Shaka47(),maxHeight:this.$VideoPlayerHTML5Shaka48(),initiallyForcedRepresentations:this.$VideoPlayerHTML5Shaka27,bandwidthDowngradeTarget:this.$VideoPlayerHTML5Shaka7?c('VideoPlayerShakaExperiments').liveBandwidthDowngradeTarget:c('VideoPlayerShakaExperiments').bandwidthDowngradeTarget,bandwidthUpgradeTarget:this.$VideoPlayerHTML5Shaka7?c('VideoPlayerShakaExperiments').liveBandwidthUpgradeTarget:c('VideoPlayerShakaExperiments').bandwidthUpgradeTarget},z=c('VideoQualityClasses').indexOf('hd'),aa=this.$VideoPlayerHTML5Shaka1!=null&&c('VideoQualityClasses').indexOf(this.$VideoPlayerHTML5Shaka1)>=z;return new (c('CustomAbrManager'))(y);};x.prototype.$VideoPlayerHTML5Shaka33=function(){'use strict';!this.$VideoPlayerHTML5Shaka30?h(0):void 0;!this.$VideoPlayerHTML5Shaka29?h(0):void 0;var y=new m(this.$VideoPlayerHTML5Shaka29,null,r,this.$VideoPlayerHTML5Shaka30);this.$VideoPlayerHTML5Shaka37=new (c('TaggedTimeRanges'))(function(z,aa){return (z.id===aa.id&&z.reason===aa.reason);});y.setTaggedTimeRangesEntryAdder(function(z,aa,ba){this.$VideoPlayerHTML5Shaka37.add(z,aa,ba);}.bind(this));return y;};x.prototype.reload=function(y){'use strict';if(!this.$VideoPlayerHTML5Shaka3)return;this.$VideoPlayerHTML5Shaka30=this.$VideoPlayerHTML5Shaka31();this.$VideoPlayerHTML5Shaka32=this.$VideoPlayerHTML5Shaka33();if(this.$VideoPlayerHTML5Shaka43()){this.$VideoPlayerHTML5Shaka34.playbackRate=0;this.emit('streamInterrupted');}this.$VideoPlayerHTML5Shaka19.setPlaybackStartTime(y);this.$VideoPlayerHTML5Shaka19.load(this.$VideoPlayerHTML5Shaka32).then(function(){if(this.$VideoPlayerHTML5Shaka7!=this.$VideoPlayerHTML5Shaka32.isLive())return this.$VideoPlayerHTML5Shaka46();if(this.$VideoPlayerHTML5Shaka18)this.setPreferredVideoQuality(this.$VideoPlayerHTML5Shaka18);this.$VideoPlayerHTML5Shaka17=null;this.$VideoPlayerHTML5Shaka49=null;this.$VideoPlayerHTML5Shaka3=false;}.bind(this)).done();};x.prototype.$VideoPlayerHTML5Shaka46=function(){'use strict';c('dispatchEvent')(this.$VideoPlayerHTML5Shaka34,'seeked');c('dispatchEvent')(this.$VideoPlayerHTML5Shaka34,'playing');c('dispatchEvent')(this.$VideoPlayerHTML5Shaka34,'ended');this.emit('streamResumed');this.$VideoPlayerHTML5Shaka35.unsubscribe();this.unload();};x.prototype.getLongestInitResponseTime=function(){'use strict';return this.$VideoPlayerHTML5Shaka32.getLongestInitResponseTime();};x.$VideoPlayerHTML5Shaka50=function(){'use strict';return (c('VideoPlayerShakaExperiments').resolutionConstraintFactor*q);};x.prototype.$VideoPlayerHTML5Shaka47=function(){'use strict';if(!c('VideoPlayerShakaExperiments').useResolutionConstraints)return Infinity;return this.$VideoPlayerHTML5Shaka9*x.$VideoPlayerHTML5Shaka50();};x.prototype.$VideoPlayerHTML5Shaka48=function(){'use strict';if(!c('VideoPlayerShakaExperiments').useResolutionConstraints)return Infinity;return this.$VideoPlayerHTML5Shaka10*x.$VideoPlayerHTML5Shaka50();};x.prototype.setDimensions=function(y,z){'use strict';this.$VideoPlayerHTML5Shaka9=y;this.$VideoPlayerHTML5Shaka10=z;this.$VideoPlayerHTML5Shaka30.setResolutionConstraint(this.$VideoPlayerHTML5Shaka47(),this.$VideoPlayerHTML5Shaka48());};x.isSupported=function(){'use strict';return l.isBrowserSupported();};x.prototype.$VideoPlayerHTML5Shaka24=function(){'use strict';this.emit('tracksChanged');};x.prototype.$VideoPlayerHTML5Shaka23=function(event){'use strict';if(event.contentType==='video')this.emit('adaptation',{reason:event.reason});};x.prototype.$VideoPlayerHTML5Shaka36=function(y){'use strict';if(c('VideoPlayerShakaExperiments').fixIsLiveInterruptedBacktest){if(this.$VideoPlayerHTML5Shaka11&&!this.$VideoPlayerHTML5Shaka44)this.$VideoPlayerHTML5Shaka44=this.$VideoPlayerHTML5Shaka11.getOperationLogger('stream_interrupted');this.$VideoPlayerHTML5Shaka32.setIsLiveInterrupted(true);}this.$VideoPlayerHTML5Shaka4=y;};x.prototype.$VideoPlayerHTML5Shaka26=function(){'use strict';if(this.$VideoPlayerHTML5Shaka43())this.$VideoPlayerHTML5Shaka45();};x.prototype.$VideoPlayerHTML5Shaka45=function(){'use strict';this.$VideoPlayerHTML5Shaka4=null;this.$VideoPlayerHTML5Shaka6=false;this.$VideoPlayerHTML5Shaka32.forceResyncVideoBuffer();this.emit('streamResumed');};x.prototype.$VideoPlayerHTML5Shaka25=function(){'use strict';var y=!this.$VideoPlayerHTML5Shaka34.paused;this.unload();this.reload().then(function(){if(this.$VideoPlayerHTML5Shaka6)this.$VideoPlayerHTML5Shaka45();if(y)this.play();}.bind(this))['catch'](function(z){});};x.prototype.$VideoPlayerHTML5Shaka13=function(){'use strict';this.$VideoPlayerHTML5Shaka8=false;if(this.$VideoPlayerHTML5Shaka12)this.$VideoPlayerHTML5Shaka12=false;if(this.$VideoPlayerHTML5Shaka42){this.$VideoPlayerHTML5Shaka42.log();this.$VideoPlayerHTML5Shaka42=null;}};x.prototype.$VideoPlayerHTML5Shaka15=function(){'use strict';if(this.$VideoPlayerHTML5Shaka8)this.$VideoPlayerHTML5Shaka8=false;if(this.$VideoPlayerHTML5Shaka42){this.$VideoPlayerHTML5Shaka42.setResult('aborted').log();this.$VideoPlayerHTML5Shaka42=null;}};f.exports=x;}),null);