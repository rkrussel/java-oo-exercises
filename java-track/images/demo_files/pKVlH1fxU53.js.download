if (self.CavalryLogger) { CavalryLogger.start_js(["himqc"]); }

__d('FBToggleSwitch.react',['cx','AbstractCheckboxInput.react','React','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$FBToggleSwitch1=function(r){if(this.props.onToggle&&!this.props.disabled)this.props.onToggle(r.target.checked);}.bind(this),n;}l.prototype.render=function(){var m="_ypo"+(this.props.animate?' '+"_ypp":'')+(this.props.disabled?' '+"_ypq":''),n=void 0,o=void 0;if(this.props.indeterminate){o=this.props.checked;}else n=this.props.checked;return c('React').createElement(c('AbstractCheckboxInput.react'),babelHelpers['extends']({},this.props,{checked:n,className:c('joinClasses')(this.props.className,m),defaultChecked:o,onChange:this.$FBToggleSwitch1}),undefined);};l.propTypes={animate:k.bool,indeterminate:k.bool,onToggle:k.func,disabled:k.bool,tooltip:k.string};f.exports=l;}),null);
__d("XGamesChatBanMessageSenderController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/games\/async\/chat\/ban-user\/",{app_id:{type:"Int",required:true},message_id:{type:"Int",required:true},channel:{type:"String",required:true}});}),null);
__d("XGamesChatBlockMessageSenderController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/games\/async\/chat\/block-message-sender\/",{app_id:{type:"Int",required:true},channel:{type:"String",required:true},id:{type:"Int",required:true}});}),null);
__d("XGamesChatFetchMessagesController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/games\/async\/chat\/fetch\/",{channel:{type:"String",required:true},exclude_viewer:{type:"Bool",defaultValue:false},cursor:{type:"Int",defaultValue:0}});}),null);
__d("XGamesChatHideMessageController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/games\/async\/chat\/hide-message\/",{app_id:{type:"Int",required:true},channel:{type:"String",required:true},id:{type:"Int",required:true}});}),null);
__d("XGamesChatPostMessageController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/games\/async\/chat\/post-message\/",{app_id:{type:"Int",required:true},channel:{type:"String",required:true},text:{type:"String",required:true}});}),null);
__d("XGamesChatReportMessageSenderController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/games\/async\/chat\/report-message-sender\/",{app_id:{type:"Int",required:true},channel:{type:"String",required:true},id:{type:"Int",required:true}});}),null);
__d("XGamesChatSetHideController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/games\/async\/chat\/set-hide-chat\/",{app_id:{type:"Int",required:true},hidden:{type:"Bool",defaultValue:false}});}),null);
__d("XGamesChatUnbanMessageSenderController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/games\/async\/chat\/unban-user\/",{app_id:{type:"Int",required:true},message_id:{type:"Int",required:true},channel:{type:"String",required:true}});}),null);
__d("XGamesChatUnblockMessageSenderController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/games\/async\/chat\/unblock-message-sender\/",{app_id:{type:"Int",required:true},channel:{type:"String",required:true},id:{type:"Int",required:true}});}),null);
__d("XGamesChatUnhideMessageController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/games\/async\/chat\/unhide-message\/",{app_id:{type:"Int",required:true},channel:{type:"String",required:true},id:{type:"Int",required:true}});}),null);
__d('GamerChat.react',['cx','fbt','AsyncRequest','FBToggleSwitch.react','Layout.react','Link.react','React','ScrollableArea.react','Set','TextWithEntities.react','Tooltip.react','XGamesChatFetchMessagesController','XGamesChatPostMessageController','XGamesChatHideMessageController','XGamesChatUnhideMessageController','XGamesChatBlockMessageSenderController','XGamesChatUnblockMessageSenderController','XGamesChatReportMessageSenderController','XGamesChatSetHideController','XGamesChatBanMessageSenderController','XGamesChatUnbanMessageSenderController','XUITextInput.react','XUIButton.react','getURLRanges','joinClasses'],(function a(b,c,d,e,f,g,h,i){var j,k,l,m;if(c.__markCompiled)c.__markCompiled();var n=c('Layout.react').Column,o=c('Layout.react').FillColumn,p=c('React').PropTypes,q=500,r=250,s=0;j=babelHelpers.inherits(t,c('React').PureComponent);k=j&&j.prototype;function t(){var v,w;'use strict';for(var x=arguments.length,y=Array(x),z=0;z<x;z++)y[z]=arguments[z];return w=(v=k.constructor).call.apply(v,[this].concat(y)),this.$GamerChat1=false,this.$GamerChat2=null,this.updateChatInterval=0,this.$GamerChat3=function(){if(this.props.isGamesDesktopApp)return false;var aa=this.props.hidden;if(aa===null||aa===undefined)return true;return aa;}.bind(this),this.$GamerChat4=function(){var aa=!this.state.hidden;this.setState({hidden:aa});if(aa){clearInterval(this.updateChatInterval);}else this.$GamerChat5();var ba=c('XGamesChatSetHideController').getURIBuilder().setInt('app_id',this.props.appID).setBool('hidden',aa).getURI();new (c('AsyncRequest'))(ba).setMethod('POST').send();}.bind(this),this.$GamerChat6=function(aa){var ba=new (c('Set'))(this.state.messages.map(function(ea){return ea.id;}).filter(function(ea){return !!ea;})),ca=aa.filter(function(ea){var fa=ea.id;return fa?!ba.has(fa):true;});if(ca.length===0)return;var da=this.state.messages.concat(ca);this.setState({messages:da.slice(Math.max(da.length-q,0))});}.bind(this),this.$GamerChat7=function(aa){new (c('AsyncRequest'))(aa).setHandler(function(ba){var ca=ba.payload.messages;this.$GamerChat2=ba.payload.next_cursor;ca.reverse();this.$GamerChat6(ca);}.bind(this)).send();}.bind(this),this.$GamerChat5=function(){this.updateChatInterval=setInterval(function(){var aa=c('XGamesChatFetchMessagesController').getURIBuilder().setString('channel',this.props.channel).setBool('exclude_viewer',true).setInt('cursor',this.$GamerChat2).getURI();this.$GamerChat7(aa);}.bind(this),1000);}.bind(this),this.$GamerChat8=function(){this.$GamerChat1=false;var aa=this.refs.messageInput.refs.textInput,ba=aa.getValue();this.setState({text:''});ba=ba.trim();if(!ba)return;this.$GamerChat6([{name:this.state.identifier,text:ba,id:'local_message_'+s++,isViewerSender:true}]);var ca=c('XGamesChatPostMessageController').getURIBuilder().setInt('app_id',this.props.appID).setString('channel',this.props.channel).setString('text',ba).getURI();new (c('AsyncRequest'))(ca).setMethod('POST').send();}.bind(this),this.$GamerChat9=function(){this.$GamerChat1=!this.refs.scrollArea.getArea().isScrolledToBottom();}.bind(this),this.$GamerChat10=function(aa){this.setState({text:aa.target.value});}.bind(this),this.$GamerChat11=function(aa){this.setState({blockedIDs:this.state.blockedIDs.concat([aa])});var ba=c('XGamesChatBlockMessageSenderController').getURIBuilder().setInt('app_id',this.props.appID).setString('channel',this.props.channel).setInt('id',aa).getURI();new (c('AsyncRequest'))(ba).setMethod('POST').send();}.bind(this),this.$GamerChat12=function(aa){this.setState({reportedIDs:this.state.reportedIDs.concat([aa])});var ba=c('XGamesChatReportMessageSenderController').getURIBuilder().setInt('app_id',this.props.appID).setString('channel',this.props.channel).setInt('id',aa).getURI();new (c('AsyncRequest'))(ba).setMethod('POST').send();}.bind(this),this.$GamerChat13=function(aa){this.setState({bannedIDs:this.state.bannedIDs.concat([aa])});var ba=c('XGamesChatBanMessageSenderController').getURIBuilder().setInt('app_id',this.props.appID).setString('channel',this.props.channel).setInt('message_id',aa).getURI();new (c('AsyncRequest'))(ba).setMethod('POST').send();}.bind(this),this.$GamerChat14=function(aa){this.setState({bannedIDs:this.state.bannedIDs.filter(function(ca){return ca!==aa;})});var ba=c('XGamesChatUnbanMessageSenderController').getURIBuilder().setInt('app_id',this.props.appID).setString('channel',this.props.channel).setInt('message_id',aa).getURI();new (c('AsyncRequest'))(ba).setMethod('POST').send();}.bind(this),this.$GamerChat15=function(aa){this.setState({blockedIDs:this.state.blockedIDs.filter(function(ca){return ca!==aa;})});var ba=c('XGamesChatUnblockMessageSenderController').getURIBuilder().setInt('app_id',this.props.appID).setString('channel',this.props.channel).setInt('id',aa).getURI();new (c('AsyncRequest'))(ba).setMethod('POST').send();}.bind(this),this.$GamerChat16=function(aa){this.setState({hiddenIDs:this.state.hiddenIDs.concat([aa])});var ba=c('XGamesChatHideMessageController').getURIBuilder().setInt('app_id',this.props.appID).setString('channel',this.props.channel).setInt('id',aa).getURI();new (c('AsyncRequest'))(ba).setMethod('POST').send();}.bind(this),this.$GamerChat17=function(aa){this.setState({hiddenIDs:this.state.hiddenIDs.filter(function(ca){return ca!==aa;})});var ba=c('XGamesChatUnhideMessageController').getURIBuilder().setInt('app_id',this.props.appID).setString('channel',this.props.channel).setInt('id',aa).getURI();new (c('AsyncRequest'))(ba).setMethod('POST').send();}.bind(this),this.$GamerChat18=function(){var aa=c('React').createElement(c('XUIButton.react'),{className:"_4q_8",label:i._("Send"),onClick:this.$GamerChat8,use:'confirm'}),ba=this.props.isGamesDesktopApp?aa:c('React').createElement(c('Tooltip.react'),{tooltip:i._("Chatting as {chat handle}. Messages are visible to people who play {game name}.",[i.param('chat handle',this.state.identifier),i.param('game name',this.props.gameName)])},aa);return (c('React').createElement(c('Layout.react'),{className:"_56xm"+(this.props.isGamesDesktopApp?' '+"_t7e":'')},c('React').createElement('div',null,c('React').createElement(c('XUITextInput.react'),{className:"_56xn",height:'tall',maxLength:this.props.maxMessageLength,onChange:this.$GamerChat10,onEnter:this.$GamerChat8,placeholder:i._("Type a message..."),ref:'messageInput',value:this.state.text})),c('React').createElement('div',null,ba)));}.bind(this),this.state={hidden:this.$GamerChat3(),messages:[],hiddenIDs:[],blockedIDs:[],reportedIDs:[],bannedIDs:[],identifier:this.props.identifier,text:''},w;}t.prototype.componentDidMount=function(){'use strict';var v=c('XGamesChatFetchMessagesController').getURIBuilder().setString('channel',this.props.channel).getURI();this.$GamerChat7(v);if(!this.state.hidden)this.$GamerChat5();};t.prototype.componentWillUnmount=function(){'use strict';clearInterval(this.updateChatInterval);};t.prototype.componentDidUpdate=function(){'use strict';if(!this.$GamerChat1&&!this.state.hidden)this.refs.scrollArea.getArea().scrollToBottom(false);};t.prototype.render=function(){'use strict';var v=this.props.isGamesDesktopApp?'100%':r,w=this.state.hidden?null:c('React').createElement('div',{className:"_4q_9"+(this.props.isGamesDesktopApp?' '+"_2-ys":'')+(this.props.isGamesDesktopApp?' '+"_19o1":'')},c('React').createElement(c('ScrollableArea.react'),{maxHeight:v,onScroll:this.$GamerChat9,ref:'scrollArea'},this.state.messages.map(function(y){return (c('React').createElement(u,{bannedIDs:this.state.bannedIDs,blockedIDs:this.state.blockedIDs,hiddenIDs:this.state.hiddenIDs,isAdmin:this.props.isAdmin,isGamesDesktopApp:this.props.isGamesDesktopApp,key:y.id,message:y,onBanSender:this.$GamerChat13,onBlockSender:this.$GamerChat11,onHideMessage:this.$GamerChat16,onReportSender:this.$GamerChat12,onUnbanSender:this.$GamerChat14,onUnblockSender:this.$GamerChat15,onUnhideMessage:this.$GamerChat17,reportedIDs:this.state.reportedIDs}));}.bind(this))),this.$GamerChat18()),x=this.props.isGamesDesktopApp?null:c('React').createElement(c('Layout.react'),{className:"uiHeader pbs clearfix uiHeaderTop _2zwc"},c('React').createElement(o,{className:"uiHeaderTitle _43md",onClick:this.$GamerChat4},i._("Live Chat")),c('React').createElement(n,null,c('React').createElement(c('Tooltip.react'),{tooltip:this.state.hidden?i._("Show Chat"):i._("Hide Chat")},c('React').createElement(c('FBToggleSwitch.react'),{checked:!this.state.hidden,onToggle:this.$GamerChat4}))));return (c('React').createElement('div',{className:!this.state.hidden?"_3-95":''},x,w));};t.propTypes={appID:p.string.isRequired,channel:p.string.isRequired,identifier:p.string.isRequired,gameName:p.string.isRequired,maxMessageLength:p.number.isRequired,hidden:p.bool,isAdmin:p.bool,isGamesDesktopApp:p.bool};l=babelHelpers.inherits(u,c('React').PureComponent);m=l&&l.prototype;u.prototype.render=function(){'use strict';var v=this.props.message,w=new (c('Set'))(this.props.blockedIDs),x=new (c('Set'))(this.props.hiddenIDs),y=new (c('Set'))(this.props.reportedIDs),z=new (c('Set'))(this.props.bannedIDs),aa="_1myf"+(this.props.isGamesDesktopApp?' '+"_19o2":''),ba=c('joinClasses')(aa,"_1mye");if(z.has(v.id))return (c('React').createElement('div',{className:ba,key:v.id},i._("{name} has been banned.",[i.param('name',v.name)]),' ',c('React').createElement(c('Link.react'),{onClick:function(){return this.props.onUnbanSender(v.id);}.bind(this)},i._("Undo"))));if(w.has(v.id))return (c('React').createElement('div',{className:ba,key:v.id},i._("{name} has been muted.",[i.param('name',v.name)]),' ',c('React').createElement(c('Link.react'),{onClick:function(){return this.props.onUnblockSender(v.id);}.bind(this)},i._("Undo"))));if(y.has(v.id))return (c('React').createElement('div',{className:ba,key:v.id},i._("{name} has been reported.",[i.param('name',v.name)]),' ',c('React').createElement(c('Link.react'),{onClick:function(){return this.props.onBlockSender(v.id);}.bind(this)},i._("Mute {name}",[i.param('name',v.name)]))));if(x.has(v.id))return (c('React').createElement('div',{className:ba,key:v.id},i._("This message has been hidden."),c('React').createElement('br',null),c('React').createElement(c('Link.react'),{onClick:function(){return this.props.onUnhideMessage(v.id);}.bind(this)},i._("Unhide")),' ','\u00B7',' ',c('React').createElement(c('Link.react'),{onClick:function(){return this.props.onBlockSender(v.id);}.bind(this)},i._("Mute")),' ','\u00B7',' ',c('React').createElement(c('Link.react'),{onClick:function(){return this.props.onReportSender(v.id);}.bind(this)},i._("Report")),this.props.isAdmin===true?c('React').createElement('span',null,' ','\u00B7',' ',c('React').createElement(c('Link.react'),{onClick:function(){return this.props.onBanSender(v.id);}.bind(this)},i._("Ban"))):null));var ca=null,da=c('React').createElement('span',{className:"_1p2t"+(this.props.isGamesDesktopApp?' '+"_2-yt":'')},v.name,':');if(!v.isViewerSender){ca=c('React').createElement(c('Tooltip.react'),{className:"_5l3i"+(this.props.isGamesDesktopApp?' '+"_t7f":''),position:'left',tooltip:i._("Hide")},c('React').createElement('div',{className:"_1myg"+(this.props.isGamesDesktopApp?' '+"_t7g":''),onClick:function(){return this.props.onHideMessage(v.id);}.bind(this)}));da=c('React').createElement('span',{className:"_56xk"+(this.props.isGamesDesktopApp?' '+"_2-yu":'')},v.name,':');}return (c('React').createElement('div',{className:aa},ca,da,c('React').createElement('span',{className:"_56xl"+(this.props.isGamesDesktopApp?' '+"_2-yv":'')},c('React').createElement(c('TextWithEntities.react'),{text:v.text,ranges:c('getURLRanges')(v.text),renderEmoticons:true,renderEmoji:true}))));};function u(){'use strict';l.apply(this,arguments);}u.propTypes={blockedIDs:p.array.isRequired,hiddenIDs:p.array.isRequired,message:p.object.isRequired,onBlockSender:p.func.isRequired,onHideMessage:p.func.isRequired,onReportSender:p.func.isRequired,onUnblockSender:p.func.isRequired,onUnhideMessage:p.func.isRequired,reportedIDs:p.array.isRequired,bannedIDs:p.array.isRequired,onBanSender:p.func.isRequired,onUnbanSender:p.func.isRequired,isAdmin:p.bool.isRequired,isGamesDesktopApp:p.bool.isRequired};f.exports=t;}),null);