if (self.CavalryLogger) { CavalryLogger.start_js(["ZjWRw"]); }

__d("AdPageMessageTypeEnum",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={AD_ADMIN_TEXT:"ad_admin_text",AD_TEXT:"ad_text",AD_BUBBLE:"ad_bubble",NON_AD:"non_ad"};}),null);
__d("MessageShareType",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={IMAGE:"image",PLATFORM_SHARE_CTA:"platform_share_CTA"};}),null);
__d("MNAdsLoggerEventEnum",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={LINK_CLICK:"messenger_ads_link_click",LINK_CLICK_CTA:"messenger_ads_link_click_cta",MESSAGE_SEEN_THREAD:"messenger_ads_message_seen_thread",MESSAGE_SEEN_INBOX:"messenger_ads_message_seen_inbox",MESSAGE_SEEN_REQUEST:"messenger_ads_message_seen_request"};}),null);
__d("MNCommerceBlockTypeJSInstance",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={ALL:"all",PROMOTION:"promotion",NONE:"none"};}),null);
__d('MercuryAudioPlayer',['Arbiter','DOM','Event','Flash'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=200;function i(){var r=c('DOM').create('audio'),s=false;try{if(!!r.canPlayType)if(r.canPlayType('video/mp4;').replace(/^no$/,''))s=true;}finally{return s;}}function j(){return c('Flash').isAvailable();}var k=function r(){this.interval=null;this.arbiterInstance=null;this.audio=c('DOM').create('audio');c('Event').listen(this.audio,'playing',function(){this.informAttachment('playing',this.audio.currentTime);this.interval=setInterval(function(){this.informAttachment('playing',this.audio.currentTime);}.bind(this),h);}.bind(this));c('Event').listen(this.audio,'ended',function(){clearInterval(this.interval);this.informAttachment('finished');}.bind(this));};Object.assign(k.prototype,{setAudio:function r(s,t){this.audio.setAttribute('src',s);this.arbiterInstance=t;},informAttachment:function r(s,t){if(this.arbiterInstance)this.arbiterInstance.inform(s,t);},play:function r(){this.audio.play();this.informAttachment('played');},resume:function r(){this.audio.play();this.informAttachment('played');},pause:function r(){this.audio.pause();clearInterval(this.interval);this.informAttachment('paused');},getType:function r(){return 'html5';}});var l=function r(){this.src=null;this.arbiterInstance=null;var s=c('DOM').create('div');document.body.appendChild(s);this.swf=c('Flash').embed('/swf/cigars/SoundStreamPlayer.swf',s,null,{});this.interval=null;c('Arbiter').subscribe('soundstream/finished',function(){clearInterval(this.interval);this.informAttachment('finished');}.bind(this));};Object.assign(l.prototype,{setAudio:function r(s,t){this.src=s;this.arbiterInstance=t;},informAttachment:function r(s,t){if(this.arbiterInstance)this.arbiterInstance.inform(s,t);},play:function r(){this.swf.playSound(this.src);this.interval=setInterval(function(){var s=this.swf.getCurrentTime();this.informAttachment('playing',s);}.bind(this),h);this.informAttachment('played');},resume:function r(){this.swf.resume();this.informAttachment('played');},pause:function r(){clearInterval(this.interval);this.swf.pause();this.informAttachment('paused');},getType:function r(){return 'flash';}});function m(){if(i()){return new k();}else if(j())return new l();return false;}var n=null,o=null,p=0;function q(r,s){this.src=r;this.arbiterInstance=s;this.audio_id=++p;n!==null||(n=m());if(!n)return false;}Object.assign(q.prototype,{getType:function r(){if(!n){return false;}else return n.getType();},play:function r(s){if(s&&o==this.audio_id){n.resume();}else{this.pause();o=this.audio_id;n.setAudio(this.src,this.arbiterInstance);n.play();}},pause:function r(){n.pause();}});f.exports=q;}),null);
__d('MercuryAttachmentAudioClip.react',['cssVar','cx','fbt','Arbiter','ArbiterMixin','MercuryAudioPlayer','CurrentUser','JSLogger','LeftRight.react','MercuryShareAttachmentRenderLocations','React','SubscriptionsHandler','WorkModeConfig','joinClasses','messengerCustomColorUtils','shield'],(function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes,l='MercuryAttachmentAudioClip/play',m='progress-bar',n=c('JSLogger').create('mercury_audio_clip'),o=c('React').createClass({displayName:'AudioClip',mixins:[c('ArbiterMixin')],propTypes:{customColor:k.string,duration:k.number,isChat:k.bool,isFromViewer:k.bool,location:k.oneOf(c('MercuryShareAttachmentRenderLocations').getValues()),onAttachmentLoad:k.func,rootClassName:k.string,showHelp:k.bool,src:k.string.isRequired,width:k.number},getInitialState:function p(){this.logged=false;return {time:0,playing:false,started:false,duration:this.props.duration,audioPlayer:new (c('MercuryAudioPlayer'))(this.props.src,this)};},componentDidMount:function p(){this.props.onAttachmentLoad&&this.props.onAttachmentLoad();this._subscriptionsHandler=new (c('SubscriptionsHandler'))();this._subscriptionsHandler.addSubscriptions(this.subscribe('playing',this.updateTime),this.subscribe('played',c('shield')(this.setState,this,{playing:true,started:true})),this.subscribe('paused',c('shield')(this.setState,this,{playing:false})),this.subscribe('finished',c('shield')(this.setState,this,{playing:false,started:false,time:this.props.duration})),c('Arbiter').subscribe(l,function(q,r){if(this.props.src!=r)this.setState({time:0});}.bind(this)));},componentWillUnmount:function p(){this._subscriptionsHandler&&this._subscriptionsHandler.release();},updateTime:function p(q,r){this.setState({time:r});},play:function p(){if(this.state.playing){this.state.audioPlayer.pause();}else{this.state.audioPlayer.play(this.state.started);c('Arbiter').inform(l,this.props.src);if(!this.logged){this.logged=true;n.log('play',{uid:c('CurrentUser').getID(),duration:this.props.duration});}}},_formatSeconds:function p(q){if(q){q=Math.round(q);var r=q%60;if(r<10)r='0'+r;var s=Math.floor(q/60);return s+':'+r;}else return null;},_renderPlayer:function p(q,r,s){var t=this.props.isFromViewer,u=this.props.isChat,v=c('WorkModeConfig').is_work_user,w=u&&t&&s!==m,x=v?"#373e4c":"#4080ff",y=s||x,z={width:q};if(w)c('messengerCustomColorUtils').customBubbleStyle(y,z);var aa=s&&s!==m&&!u?{color:s}:{};return (c('React').createElement('a',{className:"_1miz"+(' '+"_2e-1")+(' '+"_3_om")+(t&&u?' '+"_3e5f":''),href:'#',style:z,onClick:this.play},c('React').createElement('span',{className:"_1mi- _2e-2"},c('React').createElement('i',{className:"_1mi_ _2e-3"})),c('React').createElement('span',{style:aa,className:"_1mj0 _2e-4 _3oh-"},r),c('React').createElement('div',{className:"_1mj1 _2e-5"})));},render:function p(){var q=this.state.time,r=this.state.playing,s=this._formatSeconds(this.state.duration),t=this.props.location===c('MercuryShareAttachmentRenderLocations').MESSENGER,u=this.props.width||170;if(t){var v=this.props.duration;if(v>10){u=240;}else if(v>5){u=200;}else if(v>2){u=160;}else u=120;}var w=null,x=Math.ceil(q*(u+2)/this.state.duration);if(t)x=Math.ceil(q*(u+24)/this.state.duration);if(this.state.audioPlayer&&this.state.audioPlayer.getType()){var y=this._renderPlayer(u,s,this.props.customColor),z=this._renderPlayer(u,s,m),aa="_1mj2"+(' '+"_2e-6")+(r&&q!==0?' '+"_1mj3":'')+(r&&q===0?' '+"_4g4x":'');w=c('React').createElement('div',{className:aa},y,c('React').createElement('div',{className:"_1mj4 _2e-7",style:{width:x}},z));}else w=c('React').createElement('div',{className:"_1mj2"},c('React').createElement('div',{className:"_1miz"},c('React').createElement(c('LeftRight.react'),null,c('React').createElement('a',{className:"_1mj5",href:this.props.src},c('React').createElement('span',{className:"_3qi6"},c('React').createElement('i',{className:"_1mj6"})),c('React').createElement('span',{className:"_1mj7"},j._("Voice Message")),c('React').createElement('span',{className:"_1mj8"},s)),c('React').createElement('a',{href:this.props.src,className:"_1mj9"},c('React').createElement('i',{className:"_1mja"})))));return (c('React').createElement('div',{className:c('joinClasses')("_1mjb"+(t?' '+"_454y":''),this.props.rootClassName)},w));}});f.exports=o;}),null);
__d('MessengerAdsWebTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('messenger_ads_web:MessengerAdsWebLoggerConfig',this.$MessengerAdsWebTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('messenger_ads_web:MessengerAdsWebLoggerConfig',this.$MessengerAdsWebTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$MessengerAdsWebTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$MessengerAdsWebTypedLogger1=babelHelpers['extends']({},this.$MessengerAdsWebTypedLogger1,j);return this;};h.prototype.setEvent=function(j){this.$MessengerAdsWebTypedLogger1.event=j;return this;};h.prototype.setIsSponsored=function(j){this.$MessengerAdsWebTypedLogger1.is_sponsored=j;return this;};h.prototype.setItemID=function(j){this.$MessengerAdsWebTypedLogger1.item_id=j;return this;};h.prototype.setMessageID=function(j){this.$MessengerAdsWebTypedLogger1.message_id=j;return this;};h.prototype.setMessageTimestamp=function(j){this.$MessengerAdsWebTypedLogger1.message_timestamp=j;return this;};h.prototype.setPageID=function(j){this.$MessengerAdsWebTypedLogger1.page_id=j;return this;};h.prototype.setVC=function(j){this.$MessengerAdsWebTypedLogger1.vc=j;return this;};var i={event:true,is_sponsored:true,item_id:true,message_id:true,message_timestamp:true,page_id:true,vc:true};f.exports=h;}),null);
__d('TimelineMapScrollableArea',['Animation','ArbiterMixin','CSS','DOM','Event','Run','Scroll','SimpleDrag','Style','Vector','$','shield'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j){i&&this.init(c('$')(i),j);}Object.assign(h.prototype,c('ArbiterMixin'),{init:function i(j,k){k=k||{};this._elem=j;this._wrap=c('DOM').find(j,'div.fbScrollableAreaWrap');this._body=c('DOM').find(this._wrap,'div.fbScrollableAreaBody');this._track=c('DOM').find(j,'div.fbScrollableAreaTrack');this._gripper=c('DOM').find(this._track,'div.fbScrollableAreaGripper');this._options=k;this.adjustGripper();this._listeners=[c('Event').listen(this._wrap,'scroll',this._handleScroll.bind(this))];if(k.fade!==false)this._listeners.push(c('Event').listen(j,'mouseenter',c('shield')(this.adjustGripper,this)),c('Event').listen(j,'mouseenter',c('shield')(this.showScrollbar,this)),c('Event').listen(j,'mousemove',this._handleMousemove.bind(this)),c('Event').listen(j,'mouseout',c('shield')(this.hideScrollbar,this)));if(k.fade!==undefined)this._listeners.push(c('Event').listen(this._track,'click',this.clickToScroll.bind(this)));if(k.verticalscroll)this._listeners.push(c('Event').listen(this._wrap,'mousewheel',this.mouseWheel.bind(this)),c('Event').listen(this._wrap,'DOMMouseScroll',this.mouseWheel.bind(this)));this.initDrag();if(!k.persistent)c('Run').onLeave(this.destroy.bind(this));},getRoot:function i(){return this._elem;},initDrag:function i(){var j=new (c('SimpleDrag'))(this._gripper);j.subscribe('start',function(k,event){if(!(event.which&&event.which===1||event.button&&event.button===1))return;this.inform('dragstart');var l=c('Vector').getEventPosition(event).x,m=this._gripper.offsetLeft,n=j.subscribe('update',function(p,q){var r=c('Vector').getEventPosition(q).x-l,s=this._elem.clientWidth,t=this._body.offsetWidth,u=this._track.offsetWidth,v=s/t*u,w=t-this._wrap.offsetWidth,x=m+r,y=u-v;x=Math.max(Math.min(x,y),0);var z=x/y*w;c('Scroll').setLeft(this._wrap,z);}.bind(this)),o=j.subscribe('end',function(){j.unsubscribe(n);j.unsubscribe(o);this.inform('dragend');}.bind(this));}.bind(this));},adjustGripper:function i(){var j=this._elem.clientWidth,k=this._body.offsetWidth,l=this._track.offsetWidth,m=j/k*l;if(m<l){c('Style').set(this._gripper,'width',m+'px');var n=c('Scroll').getLeft(this._wrap)/k*l;c('Style').set(this._gripper,'left',n+'px');c('CSS').show(this._gripper);}else c('CSS').hide(this._gripper);this._checkContentBoundaries();return this;},_checkContentBoundaries:function i(){var j=c('Scroll').getLeft(this._wrap),k=this._wrap.scrollWidth-this._wrap.clientWidth;c('CSS').conditionClass(this._elem,'contentBefore',j>0);c('CSS').conditionClass(this._elem,'contentAfter',j<k);},destroy:function i(){this._listeners.forEach(function(j){j.remove();});this._listeners.length=0;},_handleMousemove:function i(event){var j=c('Vector').getElementPosition(this._track).y,k=c('Vector').getElementDimensions(this._track).y;if(Math.abs(j+k/2-c('Vector').getEventPosition(event).y)<25){this.showScrollbar(false);}else this.hideScrollbar();},_handleScroll:function i(event){this.adjustGripper();if(this._options.fade!==false)this.showScrollbar();},hideScrollbar:function i(){if(!this._scrollbarVisible)return this;this._scrollbarVisible=false;if(this._hideTimeout){clearTimeout(this._hideTimeout);this._hideTimeout=null;}this._hideTimeout=setTimeout(function(){if(this._scrollbarAnimation){this._scrollbarAnimation.stop();this._scrollbarAnimation=null;}this._scrollbarAnimation=new (c('Animation'))(this._track).from('opacity',1).to('opacity',0).duration(250).ondone(c('CSS').addClass.bind(null,this._track,'invisible_elem')).go();}.bind(this),750);return this;},showScrollbar:function i(j){if(this._scrollbarVisible)return this;this._scrollbarVisible=true;if(this._hideTimeout){clearTimeout(this._hideTimeout);this._hideTimeout=null;}if(this._scrollbarAnimation){this._scrollbarAnimation.stop();this._scrollbarAnimation=null;}this.adjustGripper();c('Style').set(this._track,'opacity',1);c('CSS').removeClass(this._track,'invisible_elem');if(j!==false)this.hideScrollbar();return this;},clickToScroll:function i(event){var j=c('Vector').getEventPosition(event).x,k=this._elem.clientWidth,l=this._body.offsetWidth,m=this._track.offsetWidth,n=k/l*m,o=c('Vector').getElementPosition(this._gripper);if(j>=o.x&&j<=o.x+n)return;var p=j<o.x?-1:1,q=this._wrap.offsetWidth*.8*p;this.scrollBy(q);},scrollBy:function i(j){this.setScroll(c('Scroll').getLeft(this._wrap)+j);},getMaxBodyOffset:function i(){return this._body.offsetWidth-this._wrap.offsetWidth;},setScroll:function i(j){var k=j;k=Math.max(Math.min(k,this.getMaxBodyOffset()),0);c('Scroll').setLeft(this._wrap,k);},scrollIntoView:function i(j){var k=this._wrap.clientWidth,l=j.offsetWidth,m=c('Scroll').getLeft(this._wrap),n=m+k,o=j.offsetLeft,p=o+l;if(o<m||k<l){this.setScroll(o);}else if(p>n)this.setScroll(m+(p-n));},mouseWheel:function i(event){if(this.getMaxBodyOffset()<=0)return;var j=0;if(event.wheelDelta){var k=event.wheelDelta;if(event.wheelDeltaX&&event.wheelDeltaY)k=Math.abs(event.wheelDeltaX)>Math.abs(event.wheelDeltaY)?event.wheelDeltaX:event.wheelDeltaY;j=-k*10/40;}else if(event.detail)j=event.detail*10;this.scrollBy(j);event.prevent();}});f.exports=b.TimelineMapScrollableArea||h;}),null);
__d('MercuryFileUploader',['csx','fbt','ArbiterMixin','CSS','Dialog','DOM','Event','FileForm','FileFormResetOnSubmit','FileInput','FormSubmitOnChange','MercuryAttachment','MercuryAttachmentTemplates','MercuryConstants','PhotosUploadID','SubscriptionsHandler','getObjectValues','mixin','shield'],(function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();j=babelHelpers.inherits(l,c('mixin')(c('ArbiterMixin')));k=j&&j.prototype;function l(n,o,p,q){'use strict';k.constructor.call(this);this.$MercuryFileUploader1=n;this.$MercuryFileUploader2={};this.$MercuryFileUploader3={};this.$MercuryFileUploader4={};this.$MercuryFileUploader5={};this.$MercuryFileUploader6={};this.$MercuryFileUploader7={};this.$MercuryFileUploader8={};this.$MercuryFileUploader9={};this.$MercuryFileUploader10={};this.updateElements(o,p,q);}l.prototype.updateElements=function(n,o,p){'use strict';this.$MercuryFileUploader11&&this.$MercuryFileUploader11.release();this.$MercuryFileUploader11=new (c('SubscriptionsHandler'))();this.$MercuryFileUploader12&&this.$MercuryFileUploader12.destroy();this.$MercuryFileUploader12=new (c('FileForm'))(n,[c('FormSubmitOnChange'),c('FileFormResetOnSubmit')]);this.$MercuryFileUploader12.setAllowCrossOrigin(true);this.$MercuryFileUploader12.setUploadInParallel(true);var q=c('DOM').find(n,"._4q60"),r=c('DOM').find(q,"._4q61");new (c('FileInput'))(q,r,o);this.$MercuryFileUploader11.addSubscriptions(this.$MercuryFileUploader12.subscribe('submit',function(){var s={count:0,file_sizes:[],files:[]};if(o.files){for(var t=0;t<o.files.length;t++)if(o.files[t].size>c('MercuryConstants').AttachmentMaxSize){this.showAttachmentSizeErrorDialog();return false;}var u={};for(var v=0;v<o.files.length;v++){var w=this.$MercuryFileUploader13();this.$MercuryFileUploader14(w,o.files[v].name);s.count++;s.file_sizes.push(o.files[v].size);u[w]=o.files[v];s.files.push({upload_id:w,metadata:o.files[v]});}this.$MercuryFileUploader12.setFiles(u);}else{p.value=this.$MercuryFileUploader13();this.$MercuryFileUploader14(p.value,o.value);s.count=1;}this.inform('submit',s);}.bind(this)),this.$MercuryFileUploader12.subscribe('success',this.$MercuryFileUploader15.bind(this)),this.$MercuryFileUploader12.subscribe('failure',this.$MercuryFileUploader16.bind(this)),c('Event').listen(r,'click',c('shield')(this.inform,this,'open')));};l.prototype.showAttachmentSizeErrorDialog=function(){'use strict';this.$MercuryFileUploader12.abort();this.$MercuryFileUploader12.clear();new (c('Dialog'))().setTitle(i._("The file you have selected is too large")).setBody(i._("The file you have selected is too large. The maximum size is 25MB.")).setButtons(c('Dialog').OK).setSemiModal(true).show();};l.prototype.addDroppedFiles=function(n){'use strict';if(!this.$MercuryFileUploader12||!this.$MercuryFileUploader12.canUseXHR())return;var o={},p={count:0,file_sizes:[],files:[]};for(var q=0;q<n.length;q++){var r=n[q];if(r.size>c('MercuryConstants').AttachmentMaxSize){this.showAttachmentSizeErrorDialog();return false;}var s=this.$MercuryFileUploader13();this.$MercuryFileUploader14(s,r.name);o[s]=r;p.file_sizes.push(r.size);p.count++;p.files.push({upload_id:s,metadata:r});}this.$MercuryFileUploader12.setFiles(o);this.$MercuryFileUploader12.forceSendViaXHR();this.inform('submit',p);};l.prototype.isUploading=function(){'use strict';return !!Object.keys(this.$MercuryFileUploader8).length;};l.prototype.addCachedAttachments=function(n){'use strict';n.forEach(function(o){var p=this.$MercuryFileUploader13();this.$MercuryFileUploader14(p,o.filename);this.inform('cached-file-added',{upload_id:p,metadata:o});this.$MercuryFileUploader17(p,o);}.bind(this));};l.prototype.addCachedImageFiles=function(n){'use strict';var o=i._("Photo");n.forEach(function(p){var q=this.$MercuryFileUploader13();this.$MercuryFileUploader14(q,o);this.$MercuryFileUploader17(q,{filename:p,image_id:p,filetype:'image/jpeg'});}.bind(this));};l.prototype.getAttachments=function(){'use strict';return c('getObjectValues')(this.$MercuryFileUploader2);};l.prototype.getImageFiles=function(){'use strict';var n=Object.keys(this.$MercuryFileUploader3).sort(),o=[];n.forEach(function(p){return o.push(this.$MercuryFileUploader3[p]);}.bind(this));return o;};l.prototype.getAnimatedImageFiles=function(){'use strict';return c('getObjectValues')(this.$MercuryFileUploader4);};l.prototype.getVideoFiles=function(){'use strict';return c('getObjectValues')(this.$MercuryFileUploader5);};l.prototype.getAudioFiles=function(){'use strict';return c('getObjectValues')(this.$MercuryFileUploader6);};l.prototype.getFiles=function(){'use strict';return c('getObjectValues')(this.$MercuryFileUploader7);};l.prototype.removeOneAttachment=function(n){'use strict';this.$MercuryFileUploader18(n);};l.prototype.removeAttachments=function(){'use strict';if(this.$MercuryFileUploader1)c('DOM').empty(this.$MercuryFileUploader1);this.$MercuryFileUploader2={};this.$MercuryFileUploader3={};this.$MercuryFileUploader4={};this.$MercuryFileUploader5={};this.$MercuryFileUploader6={};this.$MercuryFileUploader7={};this.$MercuryFileUploader9={};this.$MercuryFileUploader8={};this.$MercuryFileUploader10={};if(this.$MercuryFileUploader1)c('CSS').hide(this.$MercuryFileUploader1);this.inform('dom-updated');};l.prototype.destroy=function(){'use strict';this.$MercuryFileUploader11&&this.$MercuryFileUploader11.release();this.$MercuryFileUploader12&&this.$MercuryFileUploader12.destroy();this.removeAttachments();};l.prototype.$MercuryFileUploader14=function(n,o){'use strict';var p=c('MercuryAttachmentTemplates')[':fb:mercury:upload-file-row'].build(),q={};this.$MercuryFileUploader9[n]=p;this.$MercuryFileUploader8[n]=true;this.$MercuryFileUploader10[n]=Date.now();var r=m(o);c('DOM').appendContent(p.getNode('iconText'),r);q.fileName=r;c('Event').listen(p.getNode('closeFileUpload'),'click',this.$MercuryFileUploader18.bind(this,n));if(this.$MercuryFileUploader1){c('DOM').appendContent(this.$MercuryFileUploader1,p.getRoot());c('CSS').show(this.$MercuryFileUploader1);}this.inform('dom-updated',q);};l.prototype.$MercuryFileUploader18=function(n,event){'use strict';if(this.$MercuryFileUploader8[n]){this.inform('upload-canceled-during-upload');}else if(this.$MercuryFileUploader2[n]||this.$MercuryFileUploader3[n]||this.$MercuryFileUploader4[n]||this.$MercuryFileUploader5[n]||this.$MercuryFileUploader6[n]||this.$MercuryFileUploader7[n])this.inform('upload-canceled-after-uploaded');delete this.$MercuryFileUploader2[n];delete this.$MercuryFileUploader3[n];delete this.$MercuryFileUploader4[n];delete this.$MercuryFileUploader5[n];delete this.$MercuryFileUploader6[n];delete this.$MercuryFileUploader7[n];delete this.$MercuryFileUploader8[n];delete this.$MercuryFileUploader10[n];var o=this.$MercuryFileUploader9[n];delete this.$MercuryFileUploader9[n];if(o){c('DOM').remove(o.getRoot());this.inform('dom-updated');}this.inform('upload-canceled');return false;};l.prototype.$MercuryFileUploader19=function(n,o){'use strict';var p=this.$MercuryFileUploader9[n],q=c('MercuryAttachment').getAttachIconClassByMime(o);c('CSS').addClass(p.getNode('iconText'),q);c('CSS').addClass(p.getRoot(),'done');};l.prototype.$MercuryFileUploader17=function(n,o){'use strict';if(this.$MercuryFileUploader8[n]){delete this.$MercuryFileUploader8[n];if(o.image_id){this.$MercuryFileUploader3[n]=o.image_id;}else if(o.gif_id){this.$MercuryFileUploader4[n]=o.gif_id;}else if(o.video_id){this.$MercuryFileUploader5[n]=o.video_id;}else if(o.audio_id){this.$MercuryFileUploader6[n]=o.audio_id;}else if(o.file_id){this.$MercuryFileUploader7[n]=o.file_id;}else this.$MercuryFileUploader2[n]=o;this.$MercuryFileUploader19(n,o.filetype);this.inform('one-upload-completed',{upload_time_ms:Date.now()-this.$MercuryFileUploader10[n],upload_id:n,metadata:o});}if(!this.isUploading())this.inform('all-uploads-completed',{count:this.getAttachments().length});};l.prototype.$MercuryFileUploader15=function(event,n){'use strict';var o=n.response.getPayload();this.$MercuryFileUploader17(this.$MercuryFileUploader20(n),o.metadata[0]);};l.prototype.$MercuryFileUploader16=function(event,n){'use strict';this.inform('one-upload-failed');this.$MercuryFileUploader18(this.$MercuryFileUploader20(n),event);};l.prototype.$MercuryFileUploader13=function(){'use strict';return 'upload_'+c('PhotosUploadID').getNewID();};l.prototype.$MercuryFileUploader20=function(n){'use strict';var o=n.response.getPayload();if(n.upload){return n.upload.getName();}else return o.uploadID;};function m(n){if(n&&n.startsWith('C:\\fakepath\\'))return n.substring(12);return n;}f.exports=l;}),null);
__d('MercuryShareLinkUploader',['ArbiterMixin','AsyncRequest','CSS','DOM','Event','Form','URLScraper','WebMessengerEvents','mixin','isEmpty'],(function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('mixin')(c('ArbiterMixin')));i=h&&h.prototype;function j(){'use strict';i.constructor.call(this);this.__initialize.apply(this,arguments);}j.prototype.__initialize=function(k,l,m,n,o){'use strict';this.$MercuryShareLinkUploader1=k;this.$MercuryShareLinkUploader2=l;this.$MercuryShareLinkUploader3=m;this.$MercuryShareLinkUploader4=o;this.$MercuryShareLinkUploader5=false;this.$MercuryShareLinkUploader6=null;this.$MercuryShareLinkUploader7=null;c('Event').listen(n,'click',this.close.bind(this));c('Event').listen(o,'keyup',function(){!o.value.length&&this.$MercuryShareLinkUploader8.enable();}.bind(this));this.$MercuryShareLinkUploader8=new (c('URLScraper'))(o);this.$MercuryShareLinkUploader8.subscribe('match',function(p,q){this.loadShare(q&&q.url);}.bind(this));};j.prototype.getAttachData=function(){'use strict';return this.loadAttachData(this.$MercuryShareLinkUploader5,this.$MercuryShareLinkUploader1,this.$MercuryShareLinkUploader4);};j.prototype.getShareDataFromStage=function(k,l){'use strict';var m=c('Form').serialize(l),n=m.attachment&&m.attachment.params;if(!n)return null;if(n instanceof Object){var o=[];o.push(n[0]);o.push(n[1]);n=o;}return {params:n,type:m.attachment.type};};j.prototype.loadAttachData=function(k,l,m,n){'use strict';if(k){var o=c('Form').serialize(l),p=o.attachment&&o.attachment.params,q=o.link_metrics?o.link_metrics.no_image:true;if(!p||c('isEmpty')(p))return null;var r=n?n():m.value;if(r.indexOf(p.url)===-1)return o;if(!p.summary&&!p.favicon&&q&&p.title&&p.url&&p.url.substr(0,p.title.length)===p.title)return null;return o;}return null;};j.prototype.check=function(){'use strict';this.$MercuryShareLinkUploader8.check();};j.prototype.close=function(){'use strict';this.$MercuryShareLinkUploader9();this.$MercuryShareLinkUploader8.disable();this.inform('closed');};j.prototype.clear=function(){'use strict';this.$MercuryShareLinkUploader9();this.$MercuryShareLinkUploader8.enable();};j.prototype.enable=function(){'use strict';this.$MercuryShareLinkUploader8.enable();};j.prototype.disable=function(){'use strict';this.$MercuryShareLinkUploader8.disable();};j.prototype.loadShare=function(k){'use strict';this.$MercuryShareLinkUploader6=k;this.$MercuryShareLinkUploader7&&this.$MercuryShareLinkUploader7.abort();this.$MercuryShareLinkUploader7=new (c('AsyncRequest'))().setMethod('POST').setURI('/ajax/share_scrape.php').setData({u:k}).setHandler(this.$MercuryShareLinkUploader10.bind(this).bind(null,k)).setStatusElement(this.$MercuryShareLinkUploader3);this.$MercuryShareLinkUploader7.send();this.inform('link-detected');};j.prototype.$MercuryShareLinkUploader10=function(k,l){'use strict';if(this.$MercuryShareLinkUploader6!==k)return;this.$MercuryShareLinkUploader6=null;this.$MercuryShareLinkUploader7=null;c('CSS').show(this.$MercuryShareLinkUploader1);c('DOM').empty(this.$MercuryShareLinkUploader2);c('DOM').setContent(this.$MercuryShareLinkUploader2,l.payload);this.$MercuryShareLinkUploader5=true;if(!this.getAttachData()){this.close();return;}c('WebMessengerEvents').detailDOMChanged();};j.prototype.$MercuryShareLinkUploader9=function(){'use strict';c('CSS').hide(this.$MercuryShareLinkUploader1);this.$MercuryShareLinkUploader5=false;this.$MercuryShareLinkUploader6=null;this.$MercuryShareLinkUploader7&&this.$MercuryShareLinkUploader7.abort();this.$MercuryShareLinkUploader7=null;this.$MercuryShareLinkUploader8.reset();c('WebMessengerEvents').detailDOMChanged();};f.exports=j;}),null);
__d('MessengerSharedPhoto.react',['CurrentEnvironment','MercuryConfig','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').PureComponent);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.$MessengerSharedPhoto1=function(q){q.preventDefault();this.props.onClick(c('MercuryConfig').SharedPhotoNewView&&c('CurrentEnvironment').messengerdotcom?this.props.photoID:this.props.fbid);}.bind(this),m;}k.prototype.render=function(){return c('React').createElement('a',{className:this.props.className,href:this.props.uri,onClick:this.$MessengerSharedPhoto1,style:{backgroundImage:'url('+this.props.uri+')'}});};k.propTypes={className:j.string.isRequired,fbid:j.string.isRequired,onClick:j.func.isRequired,photoID:j.string,uri:j.string.isRequired};f.exports=k;}),null);
__d('ChatPhotoViewFooterHScroll.react',['cx','Animation','MessengerSharedPhoto.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes,l=200,m=74,n=140,o=30;i=babelHelpers.inherits(p,c('React').Component);j=i&&i.prototype;function p(){var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=j.constructor).call.apply(q,[this].concat(t)),this.$ChatPhotoViewFooterHScroll1=null,this.state={currentPhoto:'',prevScrollLeft:0,scrollLeft:0},this.$ChatPhotoViewFooterHScroll2=function(v){return v?Math.ceil((v-n*2)/m):o;},r;}p.prototype.componentDidMount=function(){if(this.props.width)this.props.updateNumberInOneBatch(this.$ChatPhotoViewFooterHScroll2(this.props.width));this.$ChatPhotoViewFooterHScroll1=new (c('Animation'))(this.refs.childContainer).to('scrollLeft',0).duration(l).go();};p.prototype.componentWillReceiveProps=function(q){if(q.photoID!=this.state.currentPhoto||this.props.sharedPhotos.length!==q.sharedPhotos.length){var r=q.width?(q.width-m)/2-n:0,s=q.sharedPhotos.findIndex(function(t){return t.node.id===q.photoID;});this.setState({currentPhoto:q.photoID,prevScrollLeft:this.state.scrollLeft,scrollLeft:s*m-r});}if(q.width!=this.props.width)this.props.updateNumberInOneBatch(this.$ChatPhotoViewFooterHScroll2(q.width));};p.prototype.componentDidUpdate=function(){if(this.$ChatPhotoViewFooterHScroll1)this.$ChatPhotoViewFooterHScroll1.from('scrollLeft',this.state.prevScrollLeft).to('scrollLeft',this.state.scrollLeft).duration(l).go();};p.prototype.componentWillUnmount=function(){this.$ChatPhotoViewFooterHScroll1&&this.$ChatPhotoViewFooterHScroll1.stop();};p.prototype.shouldComponentUpdate=function(q,r){if(q.photoID!=this.state.currentPhoto||q.sharedPhotos.length!==this.props.sharedPhotos.length)return true;return false;};p.prototype.render=function(){var q=this.props.sharedPhotos,r=q.map(function(s){return c('React').createElement('div',{className:"_1oyb",key:s.node.legacy_attachment_id},c('React').createElement(c('MessengerSharedPhoto.react'),{className:"_1oyc"+(this.state.currentPhoto!==s.node.id?' '+"_1oyd":''),fbid:s.node.legacy_attachment_id,onClick:this.props.onScroll,photoID:s.node.id,uri:s.node.image1.uri}));}.bind(this));return c('React').createElement('div',{className:"_1oye"},c('React').createElement('div',{className:"_1oyf",ref:'childContainer'},c('React').createElement('div',{className:"_1oyh",ref:'scrollable'},r)));};p.propTypes={onScroll:k.func,photoID:k.string,sharedPhotos:k.array,updateNumberInOneBatch:k.func,width:k.number};f.exports=p;}),null);
__d('MessengerPhotoViewCloseLink.react',['cx','fbt','React','TooltipLink.react'],(function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=function l(m){var n=c('React').createElement('span',null,i._("Press Esc to close"));return (c('React').createElement(c('TooltipLink.react'),{className:"_51ok _50-m _51an",onClick:m.onClick,tooltip:n},c('React').createElement('div',{className:"_387s"})));};k.propTypes={onClick:j.func};f.exports=k;}),null);
__d('SpotlightViewerBottomBarLink',['cx','Link.react','React'],(function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){'use strict';var l=this.props.className||"_4_8j _4_8k";return (c('React').createElement(c('Link.react'),babelHelpers['extends']({},this.props,{className:l}),this.props.children));};function k(){'use strict';i.apply(this,arguments);}f.exports=k;}),null);
__d('ChatPhotoViewHeader.react',['cx','fbt','MessengerPhotoViewCloseLink.react','React','SpotlightViewerBottomBarLink'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').PureComponent);k=j&&j.prototype;m.prototype.render=function(){return (c('React').createElement('div',{className:"_51an _50-m _3h_t _5l-3",role:'banner'},this.$ChatPhotoViewHeader1(),c('React').createElement(c('MessengerPhotoViewCloseLink.react'),{onClick:this.props.onClose})));};m.prototype.$ChatPhotoViewHeader1=function(){var n=void 0;if(!this.props.disableForward)n=c('React').createElement(c('SpotlightViewerBottomBarLink'),{className:"_3h_u",onClick:this.props.showForwardDialog,ref:'forwardButton'},c('React').createElement('div',{className:"_3h_v _3h_w"}),i._("Forward"));return (c('React').createElement('div',{key:'buttonsContainer',ref:'buttons'},c('React').createElement(c('SpotlightViewerBottomBarLink'),{className:"_3h_u",rel:'async',ajaxify:this.props.url,ref:'downloadButton'},c('React').createElement('div',{className:"_3h_x _3h_w"}),i._("Download")),n,c('React').createElement('div',{className:"_3h_u",onClick:this.props.openInfo,ref:'moreInfo'},c('React').createElement('div',{className:"_3h_y _3h_w"}),i._("Info"))));};function m(){j.apply(this,arguments);}m.propTypes={disableForward:l.bool,onClose:l.func,openInfo:l.func,showForwardDialog:l.func,url:l.object};f.exports=m;}),null);
__d('ChatSpeakingSticker.react',['React','ReactDOM'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').PureComponent);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.$ChatSpeakingSticker1=function(){var q=c('ReactDOM').findDOMNode(this.refs.stickerVideo);q.play();}.bind(this),m;}k.prototype.render=function(){return (c('React').createElement('div',{onClick:this.$ChatSpeakingSticker1},c('React').createElement('video',{height:this.props.videoSize.height,ref:"stickerVideo",width:this.props.videoSize.width},c('React').createElement('source',{src:this.props.videoURI}))));};k.propTypes={videoURI:j.string.isRequired,videoSize:j.shape({height:j.number,width:j.number}).isRequired};f.exports=k;}),null);
__d('MessengerFromViewerUtils',['CurrentUser','MercuryIDs'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i){return i.author===c('MercuryIDs').getParticipantIDFromUserID(c('CurrentUser').getID());}f.exports={isFromViewer:h};}),null);
__d('MNCommerceDialogStateActions',['MessengerDispatcher','MNCommerceActionTypes'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={showDialog:function i(j,k){c('MessengerDispatcher').dispatch({type:c('MNCommerceActionTypes').DIALOG.SHOW,dialogContainer:j,state:k});},hideDialog:function i(){c('MessengerDispatcher').dispatch({type:c('MNCommerceActionTypes').DIALOG.HIDE});}};f.exports=h;}),null);
__d('MNCommercePromotionStateActions',['MessengerDispatcher','MNCommerceActionTypes'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={stateLoaded:function i(j){c('MessengerDispatcher').dispatch({type:c('MNCommerceActionTypes').PROMOTION_STATE.LOADED,state:j});},stateLoadError:function i(j){c('MessengerDispatcher').dispatch({type:c('MNCommerceActionTypes').PROMOTION_STATE.LOAD_ERROR,pageID:j});},stateReload:function i(j){c('MessengerDispatcher').dispatch({type:c('MNCommerceActionTypes').PROMOTION_STATE.RELOAD,pageID:j});}};f.exports=h;}),null);
__d('MessengerPhotoInfoDialog.react',['cx','fbt','CurrentEnvironment','MessengerContactImage.react','MessengerDialog.react','MessengerDialogButton.react','MessengerDialogHeader.react','MessengerDialogTitle.react','MessengerActions','MessengerSpinner.react','MercuryIDs','MercuryTimestamp','MercuryParticipants','React','Relay','RelayQL','XUIDialog.react','XUIDialogHeader.react','XUIDialogHeaderTitle.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes,m=54;j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.$MessengerPhotoInfoDialog6=function(){var t=this.props.fullMedia.exif_data,u='';if(t){if(t.aperture)u=t.aperture+' ';if(t.focal_length){var v=t.focal_length.split('/'),w=parseInt(v[0],10)/(parseInt(v[1],10)||1);u+=w+'mm ';}if(t.iso)u+='ISO '+t.iso;}if(!u.length)return null;return (c('React').createElement('div',{className:"_2zn1"},c('React').createElement('div',{className:"_2zn2"},i._("Camera")),c('React').createElement('div',{className:"_2zn4"},c('React').createElement('div',{className:"_2zn5"},t.model||'Camera'),c('React').createElement('div',{className:"_2zn6"},u))));}.bind(this),this.$MessengerPhotoInfoDialog5=function(){var t=this.props.fullMedia,u='';if(t.filesize>1e+06){u=(t.filesize/1e+06).toFixed(2)+'MB';}else if(t.filesize>1000){u=(t.filesize/1000).toFixed(2)+'KB';}else if(t.filesize>0)u=t.filesize+'B';var v=t.__typename==='MessageImage'?(t.original_dimensions.x*t.original_dimensions.y/1e+06).toFixed(2)+'MP':'';return (c('React').createElement('div',{className:"_2zn1"},c('React').createElement('div',{className:"_2zn2"},i._("Details")),c('React').createElement('div',{className:"_2zn4"},c('React').createElement('div',{className:"_2zn5"},t.filename),c('React').createElement('div',{className:"_2zn6"},v+' '+t.original_dimensions.x+' x '+t.original_dimensions.y+' '+u))));}.bind(this),this.$MessengerPhotoInfoDialog4=function(event){event.preventDefault();this.props.showHeader&&this.props.showHeader();c('MessengerActions').hideDialog();}.bind(this),this.$MessengerPhotoInfoDialog3=function(t){if(!t){this.props.showHeader&&this.props.showHeader();c('MessengerActions').hideDialog();}}.bind(this),this.$MessengerPhotoInfoDialog7=function(t){if(!t){this.props.showHeader&&this.props.showHeader();this.props.closeInfo();}}.bind(this),p;}n.prototype.render=function(){if(!this.props.fullMedia)return null;return c('CurrentEnvironment').messengerdotcom?this.$MessengerPhotoInfoDialog1():this.$MessengerPhotoInfoDialog2();};n.prototype.$MessengerPhotoInfoDialog1=function(){var o=this.props.fullMedia;return c('React').createElement(c('MessengerDialog.react'),{onToggle:this.$MessengerPhotoInfoDialog3,ref:'dialog',type:'default',width:504},c('React').createElement(c('MessengerDialogHeader.react'),null,c('React').createElement(c('MessengerDialogTitle.react'),null,i._("Info")),c('React').createElement(c('MessengerDialogButton.react'),{action:'cancel',label:i._("Done"),onClick:this.$MessengerPhotoInfoDialog4,type:'primary'})),c('React').createElement('div',{className:"_2zn1"},c('React').createElement('div',{className:"_2zn2"},i._("Uploaded by")),c('React').createElement('div',{className:"_2zn4"},c('React').createElement('div',{className:"_2zn5"},o.creator.name),c('React').createElement('div',{className:"_2zn6"},c('MercuryTimestamp').getPreciseTimestamp(o.creation_time*1000))),c('React').createElement('div',{className:"_2zn7"},this.showProfilePic())),this.$MessengerPhotoInfoDialog5(),this.$MessengerPhotoInfoDialog6());};n.prototype.$MessengerPhotoInfoDialog2=function(){var o=this.props.fullMedia;return c('React').createElement(c('XUIDialog.react'),{onToggle:this.$MessengerPhotoInfoDialog7,shown:this.props.infoOpen,ref:'dialog',type:'serif',width:504},c('React').createElement(c('XUIDialogHeader.react'),null,c('React').createElement(c('XUIDialogHeaderTitle.react'),null,i._("Info"))),c('React').createElement('div',{className:"_2zn1"},c('React').createElement('div',{className:"_2zn2"},i._("Uploaded by")),c('React').createElement('div',{className:"_2zn4"},c('React').createElement('div',{className:"_2zn5"},o.creator.name),c('React').createElement('div',{className:"_2zn6"},c('MercuryTimestamp').getPreciseTimestamp(o.creation_time*1000))),c('React').createElement('div',{className:"_2zn7"},this.showProfilePic())),this.$MessengerPhotoInfoDialog5(),this.$MessengerPhotoInfoDialog6());};n.prototype.showProfilePic=function(){var o=this.props.fullMedia;if(!o){return c('React').createElement(c('MessengerSpinner.react'),null);}else{var p=c('MercuryIDs').getParticipantIDFromUserID(o.creator.id),q=c('MercuryParticipants').getNow(p);if(q)return (c('React').createElement(c('MessengerContactImage.react'),{isMessengerUser:q.is_messenger_user,size:m,src:q.big_image_src||q.image_src}));return c('React').createElement(c('MessengerSpinner.react'),null);}};n.propTypes={closeInfo:l.func,fullMedia:l.object,infoOpen:l.bool,photoID:l.string,showHeader:l.func};f.exports=c('Relay').createContainer(n,{fragments:{fullMedia:function o(p){return function(){return {children:[{fieldName:'__typename',kind:'Field',metadata:{isRequisite:true},type:'String'},{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{children:[{fieldName:'creation_time',kind:'Field',metadata:{},type:'Time'},{children:[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{fieldName:'name',kind:'Field',metadata:{},type:'String'},{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'}],fieldName:'creator',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id',isAbstract:true},type:'Actor'},{fieldName:'filename',kind:'Field',metadata:{},type:'String'},{children:[{fieldName:'x',kind:'Field',metadata:{},type:'Float'},{fieldName:'y',kind:'Field',metadata:{},type:'Float'}],fieldName:'original_dimensions',kind:'Field',metadata:{canHaveSubselections:true},type:'Vect2'},{fieldName:'filesize',kind:'Field',metadata:{},type:'Int'},{children:[{fieldName:'iso',kind:'Field',metadata:{},type:'Int'},{fieldName:'aperture',kind:'Field',metadata:{},type:'String'},{fieldName:'focal_length',kind:'Field',metadata:{},type:'String'},{fieldName:'model',kind:'Field',metadata:{},type:'String'}],fieldName:'exif_data',kind:'Field',metadata:{canHaveSubselections:true},type:'MessageImageExifData'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'MessageImage',type:'MessageImage'},{children:[{fieldName:'creation_time',kind:'Field',metadata:{},type:'Time'},{children:[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{fieldName:'name',kind:'Field',metadata:{},type:'String'},{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'}],fieldName:'creator',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id',isAbstract:true},type:'Actor'},{fieldName:'filename',kind:'Field',metadata:{},type:'String'},{children:[{fieldName:'x',kind:'Field',metadata:{},type:'Float'},{fieldName:'y',kind:'Field',metadata:{},type:'Float'}],fieldName:'original_dimensions',kind:'Field',metadata:{canHaveSubselections:true},type:'Vect2'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'MessageVideo',type:'MessageVideo'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{isAbstract:true},name:'MessengerPhotoInfoDialog_react_FullMediaRelayQL',type:'Node'};}();}}});}),null);
__d('SpotlightMessagesViewerContainerRoute',['RelayRoute','RelayQL'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('RelayRoute'));i=h&&h.prototype;function j(){h.apply(this,arguments);}j.routeName='SpotlightMessagesViewerContainerRoute';j.paramDefinition={photoID:{type:'String',required:true}};j.queries={fullMedia:function k(l){return function(m){return {calls:[{kind:'Call',metadata:{type:'ID!'},name:'id',value:{kind:'CallVariable',callVariableName:'photoID'}}],children:[].concat.apply([],[{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'},c('RelayQL').__frag(m)]),fieldName:'node',kind:'Query',metadata:{isAbstract:true,identifyingArgName:'id',identifyingArgType:'ID!'},name:'SpotlightMessagesViewerContainerRoute',type:'Node'};}(l.getFragment('fullMedia'));}};f.exports=j;}),null);
__d('MessengerPhotoInfoDialogContainer.react',['MessengerPhotoInfoDialog.react','RelayRootContainer','SpotlightMessagesViewerContainerRoute','React'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'MessengerPhotoInfoDialogContainer',proptypes:{photoID:h.string.isRequired,showHeader:h.func},render:function j(){var k=new (c('SpotlightMessagesViewerContainerRoute'))({photoID:this.props.photoID});return (c('React').createElement(c('RelayRootContainer'),{Component:c('MessengerPhotoInfoDialog.react'),route:k,renderFetched:function(l){return (c('React').createElement(c('MessengerPhotoInfoDialog.react'),babelHelpers['extends']({},l,{closeInfo:this.props.closeInfo,photoID:this.props.photoID,infoOpen:this.props.infoOpen,showHeader:this.props.showHeader})));}.bind(this)}));}});f.exports=i;}),null);
__d("XMessagingVideoAttachmentController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/mercury\/attachments\/video\/",{video_id:{type:"String",required:true},video_container_id:{type:"String",required:true},width:{type:"Int",required:true},height:{type:"Int",required:true},start_muted:{type:"Bool",defaultValue:false},no_autoplay:{type:"Bool",defaultValue:false},load_player_controller:{type:"Bool",defaultValue:false},hide_controls_on_finish:{type:"Bool",defaultValue:false},is_share:{type:"Bool",defaultValue:false},render_play_button:{type:"Bool",defaultValue:false}});}),null);
__d('MessengerVideoPlayer.react',['cx','AsyncRequest','BackgroundImage.react','Event','FullScreen','MessengerSpinner.react','React','VideoPlayerReason','VideoPlayerStates','Vector','XMessagingVideoAttachmentController','SpotlightMercurySharedMediaViewer.react','SubscriptionsHandler','getFullScreenElement','guid','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes,l=1000,m="_ox1";i=babelHelpers.inherits(n,c('React').Component);j=i&&i.prototype;function n(o){j.constructor.call(this,o);this.$MessengerVideoPlayer2=false;this.$MessengerVideoPlayer3=[];this.$MessengerVideoPlayer7=function(p){if(!this.props.onClick||!this.isVideoClicked(p))return;p.preventDefault();this.pause();this.props.onClick&&this.props.onClick();}.bind(this);this.$MessengerVideoPlayer5=function(){if(this.$MessengerVideoPlayer2){this.play();this.$MessengerVideoPlayer2=false;}}.bind(this);this.$MessengerVideoPlayer4=function(){this.$MessengerVideoPlayer2=!!this.state.playerAPI&&this.state.playerAPI.isState(c('VideoPlayerStates').PLAYING);this.pause();}.bind(this);this.state={playerAPI:null};this.$MessengerVideoPlayer1=c('guid')();if(this.props.isInThread){this.listeners=new (c('SubscriptionsHandler'))();this.listeners.addSubscriptions(c('Event').listen(window,'blur',this.$MessengerVideoPlayer4),c('Event').listen(window,'focus',this.$MessengerVideoPlayer5));}}n.prototype.shouldComponentUpdate=function(o){var p=document.getElementById(this.$MessengerVideoPlayer1.toString()),q=c('FullScreen').isFullScreen();if(p!=null&&q&&p.children[0].children[0]===c('getFullScreenElement')())return false;return !this.props.videoData||o.videoData.id!==this.props.videoData.id||!!(o.stageDimensions&&o.stageDimensions!==this.props.stageDimensions);};n.prototype.componentWillReceiveProps=function(o){if(this.props.isInThread&&o.isVisible!==this.props.isVisible)o.isVisible?this.play():this.pause();};n.prototype.componentDidMount=function(){if(this.props.videoData)this.$MessengerVideoPlayer6();};n.prototype.componentDidUpdate=function(){this.$MessengerVideoPlayer3.forEach(function(o){return o.abandon();});this.$MessengerVideoPlayer3=[];if(this.props.videoData)this.$MessengerVideoPlayer6();};n.prototype.componentWillUnmount=function(){this.$MessengerVideoPlayer3.forEach(function(o){return o.abandon();});this.listeners&&this.listeners.release();this.pause();this.seek(0);if(this.state.playerAPI){this.state.playerAPI.destroy();this.setState({playerAPI:null});}};n.prototype.isVideoLoaded=function(){var o=!!this.state.playerAPI;!o;if(this.isState(c('VideoPlayerStates').FALLBACK))return false;return o;};n.prototype.isVideoClicked=function(o){if(o.target instanceof HTMLElement)return o.target.classList.contains(m);return false;};n.prototype.play=function(){if(!this.isVideoLoaded())return;if(this.state.playerAPI)this.state.playerAPI.play(c('VideoPlayerReason').AUTOPLAY);};n.prototype.pause=function(){var o=arguments.length<=0||arguments[0]===undefined?c('VideoPlayerReason').AUTOPLAY:arguments[0];if(!this.isVideoLoaded())return;if(this.state.playerAPI)this.state.playerAPI.pause(o);};n.prototype.seek=function(o){if(!this.isVideoLoaded())return;if(this.state.playerAPI)this.state.playerAPI.seek(o/l);};n.prototype.render=function(){var o=this.props.videoData,p=c('React').createElement('div',{ref:'placeholder'},c('React').createElement(c('MessengerSpinner.react'),{color:'blue',size:c('MessengerSpinner.react').Sizes.LARGE})),q={};if(o&&o.url){var r=o.original_dimensions;q.backgroundImage='url('+o.url+')';p=c('React').createElement('div',{ref:'placeholder'},c('React').createElement(c('BackgroundImage.react'),{className:this.props.className,width:r.x,height:r.y,loadingIndicatorStyle:'large',backgroundSize:'cover',ref:'placeholder',style:q,src:o.url}));}return c('React').createElement('div',{className:c('joinClasses')(this.props.className,"_4-od"),id:this.$MessengerVideoPlayer1,onClick:this.$MessengerVideoPlayer7,style:q},p);};n.prototype.$MessengerVideoPlayer6=function(){var o=this.props.videoData;if(o){var p=o.original_dimensions;if(this.props.stageDimensions)p=c('SpotlightMercurySharedMediaViewer.react').getImageDimensionsForStage(new (c('Vector'))(o.original_dimensions.x,o.original_dimensions.y),this.props.stageDimensions);var q=c('XMessagingVideoAttachmentController').getURIBuilder().setString('video_id',o.legacy_attachment_id).setString('video_container_id',this.$MessengerVideoPlayer1).setInt('width',p.x).setInt('height',p.y).setBool('start_muted',o.start_muted).setBool('no_autoplay',o.no_autoplay).setBool('load_player_controller',true).setBool('hide_controls_on_finish',o.hide_controls_on_finish).setBool('is_share',o.is_share).setBool('render_play_button',this.props.isInThread).getURI(),r=new (c('AsyncRequest'))();this.$MessengerVideoPlayer3.push(r);r.setMethod('GET').setStatusElement(this.refs.placeholder).setURI(q).setRelativeTo(this).setReadOnly(true).setHandler(function(s){}).send();}};n.prototype.$MessengerVideoPlayer8=function(){if(this.props.isVisible&&this.isState(c('VideoPlayerStates').FINISHED))this.play();};n.prototype.onVideoLoaded=function(){if(!this.state.playerAPI)return;this.state.playerAPI.addListener('stateChange',function(){return this.$MessengerVideoPlayer8();}.bind(this));if(this.props.isVisible){this.play();}else this.seek(0);};n.prototype.isState=function(o){return !!(this.state.playerAPI&&this.state.playerAPI.isState(o));};n.propTypes={className:k.string,isInThread:k.bool,isVisible:k.bool,stageDimensions:k.instanceOf(c('Vector')),videoData:k.object,onClick:k.func};n.invokeVideoLoaded=function(o,p){if(p.isState(c('VideoPlayerStates').LOADING)){o.stateChangeListener=p.addListener('stateChange',function(){if(!p.isState(c('VideoPlayerStates').LOADING)){if(o.state&&o.state.playerAPI)return;o.setState({playerAPI:p},o.onVideoLoaded);if(o.stateChangeListener)o.stateChangeListener.remove();}});}else o.setState({playerAPI:p},o.onVideoLoaded);};f.exports=n;}),null);
__d('MercuryThreadMetadataRawRenderer',['cx','fbt','Event','CSS','DOM','MercuryActionStatus','MercuryErrorInfo','MercuryStatusTemplates','TooltipData'],(function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={renderParticipantListWithNoThreadName:function k(l,m,n,o,p,q){var r={callback:true,check_length:true,show_unread_count:true};q=q||{};var s={};for(var t in q)if(r[t]){s[t]=q[t];delete q[t];}var u=n.map(function(z){return o[z];}),v=this.renderRawParticipantList(l,u,n.length,q);v=this.renderRawTitleWithUnreadCount(v,s.show_unread_count?m.unread_count:0);var w=q.abbr_mode,x={};for(var y in q)x[y]=q[y];x.abbr_mode=true;p.forEach(function(z){var aa=p.length>1?this._cloneIfDOMElement(v):v;c('DOM').setContent(z,aa);if(s.check_length&&!w&&z.scrollWidth>z.clientWidth){var ba=this.renderRawParticipantList(l,u,n.length,x),ca=this.renderRawTitleWithUnreadCount(ba,s.show_unread_count?m.unread_count:0);c('DOM').setContent(z,ca);}}.bind(this));s.callback&&s.callback(v);},renderRawParticipantList:function k(l,m,n,o){var p={abbr_mode:true,last_separator_uses_and:true,names_renderer:true};o=o||{};var q=null;if(o.names_renderer){q=o.names_renderer(m);}else q=m.map(function(s){return s.name;});var r=null;if(q.length===0){if(!l){r=i._("New Message");}else r=i._("No Participants");}else if(q.length==1){r=q[0];}else if(q.length==2){if(o.last_separator_uses_and){r=i._("{participant1} and {participant2}",[i.param('participant1',q[0]),i.param('participant2',q[1])]);}else r=i._("{participant1}, {participant2}",[i.param('participant1',q[0]),i.param('participant2',q[1])]);}else if(o.last_separator_uses_and){if(o.abbr_mode){r=i._("{participant1} and {others_link}",[i.param('participant1',q[0]),i.param('others_link',this.renderRawParticipantCount({render_subset:true,count:n-1}))]);}else if(q.length==3){r=i._("{participant1}, {participant2} and {participant3}",[i.param('participant1',q[0]),i.param('participant2',q[1]),i.param('participant3',q[2])]);}else r=i._("{participant1}, {participant2} and {others_link}",[i.param('participant1',q[0]),i.param('participant2',q[1]),i.param('others_link',this.renderRawParticipantCount({render_subset:true,count:n-2}))]);}else if(q.length==3){r=i._("{participant1}, {participant2}, {participant3}",[i.param('participant1',q[0]),i.param('participant2',q[1]),i.param('participant3',q[2])]);}else r=i._("{participant1}, {participant2}, {participant3}, {others_link}",[i.param('participant1',q[0]),i.param('participant2',q[1]),i.param('participant3',q[2]),i.param('others_link',this.renderRawParticipantCount({render_subset:true,count:n-3}))]);if(Array.isArray(r))r=c('DOM').create('span',{},r);return r;},renderRawTitleWithUnreadCount:function k(l,m){var n=l;if(m&&m>1)n=c('DOM').create('span',{},i._("{conversation_title} ({unread_count})",[i.param('conversation_title',l),i.param('unread_count',m)]));return n;},renderRawParticipantCount:function k(l){var m=l.render_subset,n;if(!m){n=l.count>1?i._({"*":"{num} people"},[i.param('num',l.count,[0])]):i._("1 person");}else n=l.count>1?i._({"*":"{others_count} others"},[i.param('others_count',l.count,[0])]):i._("1 other");return n;},renderShortNames:function k(l){if(l.length==1)return [l[0].name];return l.map(function(m){return m.short_name;});},renderStatusIndicator:function k(l,m,n){var o;if(l==c('MercuryActionStatus').RESENDING){o=this.renderResendIndicator();}else if(l!==undefined&&l!=c('MercuryActionStatus').UNSENT&&l!=c('MercuryActionStatus').UNCONFIRMED&&l!=c('MercuryActionStatus').SUCCESS)o=this.renderErrorIndicator(m,n);return o;},renderResendIndicator:function k(){return c('MercuryStatusTemplates')[':fb:mercury:resend-indicator'].render();},renderErrorIndicator:function k(l,m){if(!l)return null;var n=c('MercuryStatusTemplates')[':fb:mercury:error-indicator'].render(),o=l.is_transient,p=c('MercuryErrorInfo').getMessage(l);if(o)if(c('MercuryErrorInfo').isConnectionError(l)){p=i._("{message} Check your internet connection and click to try again.",[i.param('message',p)]);}else p=i._("{message} Click to send again.",[i.param('message',p)]);c('TooltipData').set(n,p,'above','center');if(m&&o){c('Event').listen(n,'click',m);n.setAttribute('tabindex','0');c('CSS').addClass(n,"_55q-");}return n;},_cloneIfDOMElement:function k(l){if(l&&l.cloneNode){return l.cloneNode();}else return l;}};f.exports=j;}),null);
__d('MessagingRecipientTypeaheadItem.react',['cx','BackgroundImage.react','ChatTypeaheadConstants','ImageBlock.react','LeftRight.react','React','SplitImage.react','MercuryThreadMetadataRawRenderer','TypeaheadViewItem','joinClasses','Keys'],(function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'MessagingRecipientTypeaheadItem',propTypes:babelHelpers['extends']({},c('TypeaheadViewItem').propTypes,{imageSize:i.number.isRequired}),mixins:[c('TypeaheadViewItem').Mixin],isThreadRecipient:function k(){return this.props.entry.getType()===c('ChatTypeaheadConstants').THREAD_TYPE;},_getImage:function k(){var l=this.props.entry;if(l.getType()===c('ChatTypeaheadConstants').THREAD_TYPE&&!l.getPhoto()){var m=l.getAuxiliaryData();return (c('React').createElement(c('SplitImage.react'),{size:this.props.imageSize,srcs:m.participantsToRender.map(function(n){return n.image_src;})}));}if(l.getPhoto())return (c('React').createElement(c('BackgroundImage.react'),{width:this.props.imageSize,height:this.props.imageSize,backgroundSize:'cover',src:l.getPhoto()}));return c('React').createElement('span',null);},_getThreadParticipantList:function k(){if(!this.isThreadRecipient())return null;var l=this.props.entry;return c('MercuryThreadMetadataRawRenderer').renderRawParticipantList(l.getUniqueID(),l.getAuxiliaryData().participantsToRender,l.getAuxiliaryData().thread.participants.length-1,{names_renderer:c('MercuryThreadMetadataRawRenderer').renderShortNames});},_getTitle:function k(){var l=this.props.entry;if(this.isThreadRecipient()&&!l.getTitle())return this._getThreadParticipantList();return l.getTitle();},_getSubtitle:function k(){var l=this.props.entry;if(this.isThreadRecipient()&&!l.getTitle())return this._getThreadParticipantList();return l.getSubtitle()?l.getSubtitle().split(' \u00b7 ')[0]:null;},_onKeyDown:function k(event){if(event.keyCode===c('Keys').SPACE||event.keyCode===c('Keys').RETURN){event.preventDefault();this._onSelect(event);}},render:function k(){var l=this._getSubtitle(),m=c('joinClasses')("_599m"+(' '+"_55xn")+(!l?' '+"_5mne":'')+(this.props.highlighted?' '+"_599n":''),this.props.className);return (c('React').createElement('li',{'aria-selected':this.props.selected,className:m,onMouseDown:this._onSelect,onMouseEnter:this._onHighlight,onKeyDown:this._onKeyDown,role:this.props.role},c('React').createElement(c('ImageBlock.react'),{spacing:'medium'},this._getImage(),c('React').createElement(c('LeftRight.react'),null,c('React').createElement('div',null,c('React').createElement('div',{className:"_55xt _599p"},this._getTitle()),c('React').createElement('div',{className:"_55z3 _599q"},l)),this.props.children))));}});f.exports=j;}),null);
__d('MessagingRecipientSelectedList.react',['cx','fbt','xuiglyph','Image.react','LeftRight.react','Map','MessagingRecipientTypeaheadItem.react','React'],(function a(b,c,d,e,f,g,h,i,j){var k,l;if(c.__markCompiled)c.__markCompiled();var m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;function n(){var o,p;'use strict';for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=l.constructor).call.apply(o,[this].concat(r)),this.$MessagingRecipientSelectedList1=function(t){var u=j({name:'cross',shade:'dark',size:'small'});return (c('React').createElement(c('MessagingRecipientTypeaheadItem.react'),{key:t.getUniqueID(),entry:t,imageSize:24,onSelect:this.props.onSelect},c('React').createElement(c('Image.react'),{className:"_1jm4",src:u})));}.bind(this),p;}n.prototype.render=function(){'use strict';var o=i._("Send to:"),p=[];this.props.entries.forEach(function(q){return p.push(this.$MessagingRecipientSelectedList1(q));}.bind(this));return (c('React').createElement('div',{className:"_1jm5"},c('React').createElement(c('LeftRight.react'),{className:"_1jm6 _2ph-"},c('React').createElement('span',null,o),c('React').createElement('span',null,this.props.entries.size)),c('React').createElement('ul',null,p)));};n.propTypes={entries:m.instanceOf(c('Map')),onSelect:m.func.isRequired};f.exports=n;}),null);
__d('MessagingRecipientTypeaheadView.react',['cx','fbt','CenteredContainer.react','Link.react','Map','MessagingRecipientTypeaheadItem.react','React','TypeaheadViewPropTypes','XUISpinner.react'],(function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes,m=32;j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(){var o,p;'use strict';for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.$MessagingRecipientTypeaheadView1=function(t){var u=t===this.props.highlightedEntry,v=this.props.selectedEntries.has(t.getUniqueID());return (c('React').createElement(c('MessagingRecipientTypeaheadItem.react'),{key:t.getUniqueID(),entry:t,highlighted:u,imageSize:m,selected:v,onSelect:this.props.onSelect,onHighlight:this.props.onHighlight,onRenderHighlight:this.props.onRenderHighlight},c('React').createElement(c('Link.react'),{'aria-checked':v,className:"_2i83"+(v?' '+"_2i85":'')+(!v?' '+"_2i86":''),href:'#',role:'checkbox',tabIndex:'0'})));}.bind(this),p;}n.prototype.render=function(){'use strict';if(this.props.entries.length===0&&!this.props.loading)return (c('React').createElement(c('CenteredContainer.react'),{className:"_2pi1"},i._("No results")));return (c('React').createElement('ul',{id:this.props.ariaOwneeID,className:"_51do",role:this.props.role},this.props.entries.map(this.$MessagingRecipientTypeaheadView1),c('React').createElement('div',{className:"_51dq"},this.props.loading?c('React').createElement(c('XUISpinner.react'),null):null)));};n.propTypes=babelHelpers['extends']({},c('TypeaheadViewPropTypes'),{selectedEntries:l.instanceOf(c('Map')),loading:l.bool});n.defaultProps={role:'listbox'};f.exports=n;}),null);
__d("XMessagingForwardAttachmentController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/mercury\/attachments\/forward\/",{});}),null);
__d("XMessengerPlatformShareCTAController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/messages\/platform\/share\/",{});}),null);
__d('MessagingForwardAttachmentDialog.react',['ix','cx','fbt','AsyncRequest','ChatSearchSource','Image.react','LayerFadeOnHide','Layout.react','Map','MessageShareType','MessagingRecipientSelectedList.react','MessagingRecipientTypeaheadView.react','React','SearchableTextInput.react','ScrollableArea.react','XMessagingForwardAttachmentController','XMessengerPlatformShareCTAController','XUIDialog.react','XUIDialogBody.react','XUIDialogButton.react','XUIDialogCancelButton.react','XUIDialogFooter.react','XUIDialogTitle.react','XUISpinner.react','fbglyph','requireWeak'],(function a(b,c,d,e,f,g,h,i,j){var k,l;if(c.__markCompiled)c.__markCompiled();var m=c('Layout.react').Column,n=c('Layout.react').FillColumn,o=c('React').PropTypes;k=babelHelpers.inherits(p,c('React').Component);l=k&&k.prototype;function p(){var q,r;'use strict';for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=l.constructor).call.apply(q,[this].concat(t)),this.state={bootstrappedEntries:[],entries:[],loading:true,selectedEntries:new (c('Map'))(),sendError:null,sending:false,startingThreadingID:Date.now(),query:''},this.$MessagingForwardAttachmentDialog2=function(v){var w=v.getUniqueID(),x=new (c('Map'))(this.state.selectedEntries);if(x.has(w)){x['delete'](w);}else x.set(w,v);this.setState({selectedEntries:x});}.bind(this),this.$MessagingForwardAttachmentDialog3=function(v){var w=v.target.value;this.setState({loading:true,query:w});}.bind(this),this.$MessagingForwardAttachmentDialog4=function(v){this.setState({entries:v});}.bind(this),this.$MessagingForwardAttachmentDialog5=function(v){v===this.state.query&&this.setState({loading:false});}.bind(this),this.$MessagingForwardAttachmentDialog6=function(){var v={},w=this.state.startingThreadingID;this.state.selectedEntries.forEach(function(y){v[w++]=y.getUniqueID();});if(this.props.shareType===c('MessageShareType').PLATFORM_SHARE_CTA){var x=c('XMessengerPlatformShareCTAController').getURIBuilder().getURI();new (c('AsyncRequest'))(x).setMethod('POST').setHandler(this.$MessagingForwardAttachmentDialog7).setData({cta_id:this.props.attachmentID,recipient_map:v}).send();}else{x=c('XMessagingForwardAttachmentController').getURIBuilder().getURI();new (c('AsyncRequest'))(x).setMethod('POST').setHandler(this.$MessagingForwardAttachmentDialog7).setData({attachment_id:this.props.attachmentID,recipient_map:v}).send();}this.setState({sending:true,sendError:null});}.bind(this),this.$MessagingForwardAttachmentDialog7=function(v){if(v.payload.success){this.setState({bootstrappedEntries:[],selectedEntries:new (c('Map'))(),sending:false,startingThreadID:Date.now(),query:''},this.props.onClose);return;}this.setState({sending:false,sendError:v.payload.error});}.bind(this),this.$MessagingForwardAttachmentDialog8=function(v){if(!v)this.props.onClose();}.bind(this),r;}p.prototype.componentWillMount=function(){'use strict';this.$MessagingForwardAttachmentDialog1=new (c('ChatSearchSource'))({queryRequests:[{uri:'/ajax/mercury/composer_query.php'}]});};p.prototype.componentDidMount=function(){'use strict';c('requireWeak')('OrderedFriendsList',function(q){return q.getSearchableEntries(20,function(r){this.setState({bootstrappedEntries:r,loading:false});}.bind(this));}.bind(this));};p.prototype.render=function(){'use strict';var q=j._("Send"),r=null;if(this.state.sending){r=c('React').createElement('div',null,c('React').createElement(c('XUISpinner.react'),null),c('React').createElement('span',{className:"_5s0d _3-99"},j._("Sending")));}else if(this.state.sendError){var s=h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/caution-solid_16_bluegray-40.png");r=c('React').createElement('div',{className:"_5s0d"},c('React').createElement(c('Image.react'),{src:s}),c('React').createElement('span',{className:"_3-99"},this.state.sendError));}var t=j._("Search for people and groups");return (c('React').createElement(c('XUIDialog.react'),{shown:this.props.shown,behaviors:{LayerFadeOnHide:c('LayerFadeOnHide')},onToggle:this.$MessagingForwardAttachmentDialog8,width:560},c('React').createElement(c('XUIDialogTitle.react'),null,this.props.title),c('React').createElement(c('XUIDialogBody.react'),{useCustomPadding:true},c('React').createElement(c('Layout.react'),null,c('React').createElement(m,{className:"_5s0e"},c('React').createElement('div',{className:"_2ph_"},c('React').createElement(c('SearchableTextInput.react'),{className:"_5s0f autofocus",onChange:this.$MessagingForwardAttachmentDialog3,onEntriesFound:this.$MessagingForwardAttachmentDialog4,placeholder:t,queryString:this.state.query,searchSource:this.$MessagingForwardAttachmentDialog1,searchSourceOptions:{onQueryFinished:this.$MessagingForwardAttachmentDialog5}})),c('React').createElement(c('ScrollableArea.react'),{className:"_5s0g",height:400,width:360},c('React').createElement(c('MessagingRecipientTypeaheadView.react'),{entries:this.state.query?this.state.entries:this.state.bootstrappedEntries,loading:this.state.loading,selectedEntries:this.state.selectedEntries,onSelect:this.$MessagingForwardAttachmentDialog2}))),c('React').createElement(n,{className:"_5s0h"},c('React').createElement(c('ScrollableArea.react'),{height:457,shadow:false},c('React').createElement(c('MessagingRecipientSelectedList.react'),{entries:this.state.selectedEntries,onSelect:this.$MessagingForwardAttachmentDialog2}))))),c('React').createElement(c('XUIDialogFooter.react'),{leftContent:r},c('React').createElement(c('XUIDialogCancelButton.react'),{onClick:this.props.onClose}),c('React').createElement(c('XUIDialogButton.react'),{use:'confirm',disabled:!this.state.selectedEntries.size||this.state.sending,label:q,onClick:this.$MessagingForwardAttachmentDialog6}))));};p.propTypes={attachmentID:o.string.isRequired,onClose:o.func,shown:o.bool.isRequired,title:o.string.isRequired,shareType:o.string};p.defaultProps={shareType:c('MessageShareType').IMAGE};f.exports=p;}),null);
__d("XForwardingNUXSeenController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/chat\/forwarding_nux_seen\/",{});}),null);
__d('MessagingForwardingButtonNUX.react',['AsyncRequest','ChatConfig','React','XForwardingNUXSeenController','XUIAmbientNUX.react'],(function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(){var l,m;'use strict';for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.state={showNUX:!c('ChatConfig').get('seen_forwarding_nux')},this.$MessagingForwardingButtonNUX1=function(){if(!this.state.showNUX)return;c('ChatConfig').set('seen_forwarding_nux',true);new (c('AsyncRequest'))(c('XForwardingNUXSeenController').getURIBuilder().getURI()).send();this.setState({showNUX:false});}.bind(this),this.close=function(){this.$MessagingForwardingButtonNUX1();}.bind(this),m;}k.prototype.render=function(){'use strict';return c('React').createElement(c('XUIAmbientNUX.react'),{contextRef:this.props.contextRef,onCloseButtonClick:this.$MessagingForwardingButtonNUX1,position:'left',width:'auto',shown:this.state.showNUX},this.props.children);};k.propTypes={contextRef:j.func.isRequired};f.exports=k;}),null);
__d("MessengerThreadSharedMediaAfterWebGraphQLQuery",["WebGraphQLQueryHelper"],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();f.exports=c("WebGraphQLQueryHelper").getExports({docID:"862057963929327",queryID:"865890076879449"});}),null);
__d("MessengerThreadSharedMediaBeforeWebGraphQLQuery",["WebGraphQLQueryHelper"],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();f.exports=c("WebGraphQLQueryHelper").getExports({docID:"862057933929330",queryID:"865890050212785"});}),null);
__d("MessengerThreadSharedMediaFindWebGraphQLQuery",["WebGraphQLQueryHelper"],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();f.exports=c("WebGraphQLQueryHelper").getExports({docID:"841896385945485",queryID:"865890046879452"});}),null);
__d('PhotoUtils',['Event','URI'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={getImagesFromData:function i(j){var k=[];for(var l in j)if(l.indexOf('image')===0)k.push(j[l]);return k;},getFBIDFromData:function i(j){return j&&j.id;},getOriginalImageFromData:function i(j){return j.original||j.download_image;},getDownloadURLFromData:function i(j){var k=this.getOriginalImageFromData(j);if(!k)return null;var l=new (c('URI'))(k.uri);l.addQueryData({dl:1});return l;},getPermalinkFromData:function i(j){return j.permalink;},canViewerMakeCoverPhoto:function i(j){return !!j.can_viewer_make_cover_photo;},getCoverPhotoURLFromData:function i(j){return new (c('URI'))('/profile.php').addQueryData({preview_cover:h.getFBIDFromData(j)});},preload:function i(j,k,l){var m=j.getDimensions();for(var n=0;n<k.length;++n){var o=m.getBestFitImageFromPhoto(k[n],m.getMaxStageDimensions()),p=new Image();l&&c('Event').listen(p,'load',l.bind(null,k[n]));j.getLogger().log(o.uri);p.src=o.uri;}}};f.exports=h;}),null);
__d('SpotlightMessagesViewerPagers.react',['cx','LeftRight.react','Link.react','React'],(function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=function j(k){return (c('React').createElement(c('LeftRight.react'),null,c('React').createElement(c('Link.react'),{className:"_322u"+(!k.disablePrevArrow?' '+"_2bbb":'')+(' '+"_50-m")}),c('React').createElement(c('Link.react'),{className:"_322u"+(!k.disableNextArrow?' '+"_2bbc":'')+(' '+"_50-m")})));};f.exports=i;}),null);
__d('SpotlightViewer',['cx','React','Spotlight.react'],(function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){'use strict';if(!this.props.open)return null;var l="_n3";if(this.props.className)l+=' '+this.props.className;return (c('React').createElement(c('Spotlight.react'),{onBeforeHide:this.props.onBeforeHide,onHide:this.props.onHide,rootClassName:this.props.rootClassName,shown:this.props.open,key:'photoLayer'},c('React').createElement('div',{className:l,onClick:this.props.onClick},this.props.children)));};function k(){'use strict';i.apply(this,arguments);}f.exports=k;}),null);
__d('SpotlightViewerImage',['cx','Image.react','React','XUISpinner.react'],(function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(l){'use strict';j.constructor.call(this,l);this.$SpotlightViewerImage3=function(){this.setState({loading:false});}.bind(this);this.state={loading:true};}k.prototype.componentWillReceiveProps=function(l){'use strict';if(l.src!==this.props.src)this.setState({loading:true});};k.prototype.render=function(){'use strict';return c('React').createElement('div',{className:"_4-od"},this.$SpotlightViewerImage1(),this.$SpotlightViewerImage2());};k.prototype.$SpotlightViewerImage1=function(){'use strict';if(!this.state.loading)return null;return (c('React').createElement(c('XUISpinner.react'),{className:"_enh",size:'large'}));};k.prototype.$SpotlightViewerImage2=function(){'use strict';return (c('React').createElement('div',{className:this.state.loading?"_eni":''},c('React').createElement(c('Image.react'),{onLoad:this.$SpotlightViewerImage3,src:this.props.src,style:{width:this.props.dimensions.x,height:this.props.dimensions.y}})));};f.exports=k;}),null);
__d('SpotlightViewport',['csx','cx','Locale','Parent','React','ReactDOM','Vector','joinClasses'],(function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'SpotlightViewport',propTypes:{stageDimensions:j.object.isRequired,useWidth:j.bool},PAGE_TO_PREV_PERCENTAGE:.2,sections:{NONE:null,FORWARD:1,BACKWARD:2},timer:null,getInitialState:function l(){return {currentActiveSection:this.sections.NONE,active:true};},componentDidMount:function l(){this._onMouseEnter();},componentWillUnmount:function l(){if(this.props.fadeInNOut)clearTimeout(this.timer);},_onMouseMove:function l(event){var m=c('ReactDOM').findDOMNode(this),n=c('Vector').getEventPosition(event.nativeEvent),o=c('Vector').getElementPosition(m),p=this.props.useWidth?this.props.stageDimensions.x:c('Vector').getElementDimensions(m).x;if(this.props.fadeInNOut)if(this._isMouseOverActionBars(n)){clearTimeout(this.timer);}else this._onMouseEnter();var q,r=n.x-o.x,s=r/p;if(c('Locale').isRTL()){q=s>1-this.PAGE_TO_PREV_PERCENTAGE;}else q=s<this.PAGE_TO_PREV_PERCENTAGE;if(q){this.setState({currentActiveSection:this.sections.BACKWARD});}else this.setState({currentActiveSection:this.sections.FORWARD});},_onClick:function l(event){var m=this.state.currentActiveSection==this.sections.FORWARD,n=event.target;if(!c('Parent').bySelector(n,"._51an"))this.props.onClick&&this.props.onClick(m,event);},_isMouseOverActionBars:function l(m){return m.y<70||m.y>this.props.stageDimensions.y-70;},_onMouseEnter:function l(){this.setState({active:true});if(this.props.fadeInNOut){clearTimeout(this.timer);this.timer=setTimeout(this._onMouseLeave,1000);}},_onMouseLeave:function l(){this.setState({active:false});},makeActive:function l(){this._onMouseEnter();},render:function l(){var m="_4-of"+(!this.state.active&&!this.props.active?' '+"_50-l":'')+(this.state.currentActiveSection===this.sections.BACKWARD?' '+"_516a":'')+(this.state.currentActiveSection===this.sections.FORWARD?' '+"_516b":'')+(this.props.showLoadingIndicator?' '+"_51jp":'');if(this.props.className)m=c('joinClasses')(m,this.props.className);var n={};if(this.props.stageDimensions){n={height:this.props.stageDimensions.y};if(this.props.useWidth)n.width=this.props.stageDimensions.x;}return (c('React').createElement('div',{className:m,style:n,onClick:this._onClick,onMouseMove:this._onMouseMove,onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave},this.props.children,c('React').createElement('div',{className:"_4-og"},c('React').createElement('span',{className:"_4-oh"}),this.props.media,c('React').createElement('div',{className:"_4-oi"}))));}});f.exports=k;}),null);
__d("XMessagingPhotoDownloadController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/mercury\/attachments\/photo\/",{photo_id:{type:"String",required:true}});}),null);
__d('SpotlightMercurySharedMediaViewer.react',['csx','cx','fbt','invariant','ActorURI','ChatPhotoViewFooterHScroll.react','ChatPhotoViewHeader.react','Event','KeyEventController','MessagingForwardAttachmentDialog.react','MessagingForwardingButtonNUX.react','MessengerPhotoInfoDialogContainer.react','MessengerThreadSharedMediaHelper','MessengerVideoPlayer.react','Parent','PhotoUtils','React','ReactFragment','SpotlightViewer','SpotlightViewerImage','SpotlightMessagesViewerPagers.react','SpotlightViewport','SubscriptionsHandler','Vector','XMessagingPhotoDownloadController'],(function a(b,c,d,e,f,g,h,i,j,k){'use strict';var l,m;if(c.__markCompiled)c.__markCompiled();var n=c('React').PropTypes,o=88,p=30;l=babelHelpers.inherits(q,c('React').Component);m=l&&l.prototype;function q(){var r,s;for(var t=arguments.length,u=Array(t),v=0;v<t;v++)u[v]=arguments[v];return s=(r=m.constructor).call.apply(r,[this].concat(u)),this.$SpotlightMercurySharedMediaViewer1=undefined,this.$SpotlightMercurySharedMediaViewer2=[],this.state={hasPrevPage:false,hasNextPage:false,firstPhotoLoaded:false,isLoading:false,mediaData:[],numberInOneBatch:p,photoData:null,showForward:false,showInfo:false,stageDimensions:new (c('Vector'))()},this.$SpotlightMercurySharedMediaViewer11=function(){if(!this.state.photoData)return null;return (c('React').createElement(c('ChatPhotoViewFooterHScroll.react'),{onScroll:this.$SpotlightMercurySharedMediaViewer16,photoID:this.state.photoData.node.id,sharedPhotos:this.state.mediaData,updateNumberInOneBatch:this.$SpotlightMercurySharedMediaViewer17,width:this.state.stageDimensions.x}));}.bind(this),this.$SpotlightMercurySharedMediaViewer13=function(){return this.state.showInfo?c('React').createElement(c('MessengerPhotoInfoDialogContainer.react'),{closeInfo:this.$SpotlightMercurySharedMediaViewer19,infoOpen:this.state.showInfo,photoID:this.state.photoData.node.id}):c('React').createElement('xhp',null);}.bind(this),this.$SpotlightMercurySharedMediaViewer17=function(w){this.setState({numberInOneBatch:w});}.bind(this),this.$SpotlightMercurySharedMediaViewer16=function(w){if(!this.state.mediaData||this.state.isLoading)return;var x=this.state.mediaData.findIndex(function(z){return z.node.legacy_attachment_id===w;});if(x<0)return;var y=this.state.mediaData[x];this.setState({photoData:y});this.$SpotlightMercurySharedMediaViewer20(x);}.bind(this),this.$SpotlightMercurySharedMediaViewer5=function(w,event){if(this.state.photoData==null||this.state.isLoading)return;if(event&&!!c('Parent').bySelector(event.target,"._3tsq"))return;var x=this.state.mediaData.findIndex(function(z){!(this.state.photoData!=null)?k(0):void 0;return z.node.legacy_attachment_id===this.state.photoData.node.legacy_attachment_id;}.bind(this));if(x<0||x===this.state.mediaData.length-1&&!this.state.hasNextPage&&w)return;if(x===0&&!w){this.setState({isLoading:true},function(){return this.$SpotlightMercurySharedMediaViewer7(this.state.photoData,1,function(z){if(z===0)return;this.$SpotlightMercurySharedMediaViewer5(w);}.bind(this));}.bind(this));return;}var y=w?this.state.mediaData[x+1]:this.state.mediaData[x-1];this.setState({photoData:y});this.$SpotlightMercurySharedMediaViewer20(x);}.bind(this),this.$SpotlightMercurySharedMediaViewer20=function(w){var x=this.state.numberInOneBatch,y=this.state.mediaData;if(w<=x/2){this.setState({isLoading:true},function(){return this.$SpotlightMercurySharedMediaViewer7(y[0],x,function(){});}.bind(this));}else if(w>=y.length-x/2&&this.state.hasNextPage)this.setState({isLoading:true},function(){return this.$SpotlightMercurySharedMediaViewer6(y[y.length-1],x,function(){});}.bind(this));}.bind(this),this.$SpotlightMercurySharedMediaViewer10=function(){if(this.props.photoID===null)return;this.setState({photoData:null});this.props.onClosePhotoView();}.bind(this),this.$SpotlightMercurySharedMediaViewer15=function(){this.setState({showForward:true});this.refs.forwardNUX.close();}.bind(this),this.$SpotlightMercurySharedMediaViewer18=function(){this.setState({showForward:false});}.bind(this),this.$SpotlightMercurySharedMediaViewer14=function(){this.setState({showInfo:true});}.bind(this),this.$SpotlightMercurySharedMediaViewer19=function(){this.setState({showInfo:false});}.bind(this),this.$SpotlightMercurySharedMediaViewer4=function(w){var x=c('MessengerThreadSharedMediaHelper').search(this.props.threadID,String(w),function(y){return this.$SpotlightMercurySharedMediaViewer21(y,0,function(){});}.bind(this));this.$SpotlightMercurySharedMediaViewer2.push(x);}.bind(this),this.$SpotlightMercurySharedMediaViewer6=function(w,x,y){var z=c('MessengerThreadSharedMediaHelper').loadMorePrevious(this.props.threadID,w.cursor,x||1,function(aa){return this.$SpotlightMercurySharedMediaViewer21(aa,1,y);}.bind(this));this.$SpotlightMercurySharedMediaViewer2.push(z);}.bind(this),this.$SpotlightMercurySharedMediaViewer7=function(w,x,y){var z=w?w.cursor:null,aa=c('MessengerThreadSharedMediaHelper').loadMoreLatest(this.props.threadID,z,x||1,function(ba){return this.$SpotlightMercurySharedMediaViewer21(ba,-1,y);}.bind(this));this.$SpotlightMercurySharedMediaViewer2.push(aa);}.bind(this),this.$SpotlightMercurySharedMediaViewer21=function(w,x,y){var z=Object.keys(w)[0],aa=w[z].message_shared_media,ba=aa.page_info,ca=aa.edges.length;if(ca!==0){var da=this.state.mediaData;switch(x){case 0:this.setState({photoData:aa.edges[0],mediaData:[aa.edges[0]],firstPhotoLoaded:true});break;case 1:da=da.concat(aa.edges);this.setState({hasNextPage:ba.has_next_page,mediaData:da});break;case -1:da=aa.edges;da=da.concat(this.state.mediaData);this.setState({mediaData:da,hasPrevPage:ba.has_previous_page});break;}}this.setState({isLoading:false});y(ca);}.bind(this),this.$SpotlightMercurySharedMediaViewer3=function(){var w=new (c('Vector'))(c('Vector').getViewportDimensions().x,c('Vector').getViewportDimensions().y-o);return w;},this.$SpotlightMercurySharedMediaViewer8=function(){if(this.state.photoData&&this.state.photoData.node){var w=this.state.photoData.node;if(w.__typename&&w.__typename==='MessageVideo')return this.$SpotlightMercurySharedMediaViewer22();var x=this.state.stageDimensions,y=this.$SpotlightMercurySharedMediaViewer23(w,x);if(!y)return null;var z=q.getImageDimensionsForStage(new (c('Vector'))(y.width,y.height),x);return this.$SpotlightMercurySharedMediaViewer24(y,z);}else return null;}.bind(this),this.$SpotlightMercurySharedMediaViewer24=function(w,x){return (c('React').createElement(c('SpotlightViewerImage'),{dimensions:x,ref:'image',src:w.uri}));},this.$SpotlightMercurySharedMediaViewer23=function(w,x){var y=null,z=c('PhotoUtils').getImagesFromData(w);z=z.sort(function(ba,ca){return ca.width-ba.width;});if(window.devicePixelRatio&&window.devicePixelRatio>1)x=new (c('Vector'))(x.x*window.devicePixelRatio,x.y*window.devicePixelRatio);for(var aa=0;aa<z.length;aa++)if(!y||z[aa].width>=x.x||z[aa].height>=x.y)y=z[aa];return y;},s;}q.prototype.componentDidMount=function(){this.setState({isLoading:true,stageDimensions:this.$SpotlightMercurySharedMediaViewer3()},function(){return this.$SpotlightMercurySharedMediaViewer4(this.props.photoID);}.bind(this));this.$SpotlightMercurySharedMediaViewer1=new (c('SubscriptionsHandler'))();this.$SpotlightMercurySharedMediaViewer1.addSubscriptions(c('Event').listen(window,'resize',function(){this.setState({stageDimensions:this.$SpotlightMercurySharedMediaViewer3()});}.bind(this)),c('KeyEventController').registerKey('LEFT',function(){this.$SpotlightMercurySharedMediaViewer5(false);return false;}.bind(this)),c('KeyEventController').registerKey('RIGHT',function(){this.$SpotlightMercurySharedMediaViewer5(true);return false;}.bind(this)));};q.prototype.componentWillUpdate=function(r,s){if(s.firstPhotoLoaded!==this.state.firstPhotoLoaded)this.setState({isLoading:true},function(){this.$SpotlightMercurySharedMediaViewer6(s.photoData,s.numberInOneBatch,function(){});this.$SpotlightMercurySharedMediaViewer7(s.photoData,s.numberInOneBatch,function(){});}.bind(this));if(s.numberInOneBatch!=this.state.numberInOneBatch&&!s.isLoading)this.setState({isLoading:true},function(){return this.$SpotlightMercurySharedMediaViewer6(s.mediaData[s.mediaData.length-1],s.numberInOneBatch,function(){});}.bind(this));};q.prototype.componentWillUnmount=function(){this.$SpotlightMercurySharedMediaViewer1&&this.$SpotlightMercurySharedMediaViewer1.release();this.$SpotlightMercurySharedMediaViewer1=null;this.$SpotlightMercurySharedMediaViewer2.forEach(function(r){return r.abandon();});};q.prototype.render=function(){var r=this.$SpotlightMercurySharedMediaViewer8(),s=this.state.stageDimensions,t=this.state.isLoading||this.props.useloadingindicator&&!this.state.photoData;if(this.state.photoData==null)return null;var u=this.state.mediaData.findIndex(function(w){!(this.state.photoData!=null)?k(0):void 0;return w.node.id===this.state.photoData.node.id;}.bind(this)),v=c('React').createElement('div',null,this.$SpotlightMercurySharedMediaViewer9(),this.props.disablepaging?null:c('React').createElement(c('SpotlightMessagesViewerPagers.react'),{disablePrevArrow:u<=0&&!this.state.hasPrevPage,disableNextArrow:!this.state.hasNextPage&&u>=this.state.mediaData.length-1}));return c('React').createElement('span',null,c('React').createElement(c('SpotlightViewer'),{className:"_53vs",onHide:this.$SpotlightMercurySharedMediaViewer10,open:this.props.photoID!==null,ref:'spotlightViewer',rootClassName:this.props.rootClassName},c('React').createElement(c('SpotlightViewport'),{active:false,fadeInNOut:true,media:r,onClick:this.$SpotlightMercurySharedMediaViewer5,ref:'viewport',showLoadingIndicator:t,stageDimensions:s,useWidth:true},v),this.$SpotlightMercurySharedMediaViewer11()),this.$SpotlightMercurySharedMediaViewer12(),this.$SpotlightMercurySharedMediaViewer13());};q.prototype.$SpotlightMercurySharedMediaViewer9=function(){if(!this.state.photoData)return null;var r=this.state.photoData.node.legacy_attachment_id,s=c('XMessagingPhotoDownloadController').getURIBuilder().setString('photo_id',r).getURI();if(this.props.actorid)s=c('ActorURI').create(s,this.props.actorid);return c('React').createElement(c('ChatPhotoViewHeader.react'),{disableForward:this.props.disableForward,onClose:this.$SpotlightMercurySharedMediaViewer10,openInfo:this.$SpotlightMercurySharedMediaViewer14,ref:'photoviewheader',showForwardDialog:this.$SpotlightMercurySharedMediaViewer15,url:s});};q.prototype.$SpotlightMercurySharedMediaViewer12=function(){if(!this.state.photoData)return null;var r=j._("Forward in separate messages");return c('ReactFragment').create({forwardDialog:c('React').createElement(c('MessagingForwardAttachmentDialog.react'),{attachmentID:this.state.photoData.node.legacy_attachment_id,onClose:this.$SpotlightMercurySharedMediaViewer18,shown:this.state.showForward,title:r}),forwardButtonNUX:c('React').createElement(c('MessagingForwardingButtonNUX.react'),{contextRef:function(){return this.refs.forwardButton;}.bind(this),ref:'forwardNUX'},j._("Send this image to other people in separate messages."))});};q.prototype.$SpotlightMercurySharedMediaViewer22=function(){if(this.state.photoData)return c('React').createElement(c('MessengerVideoPlayer.react'),{isVisible:true,videoData:this.state.photoData.node,stageDimensions:this.state.stageDimensions});return null;};q.propTypes={disableForward:n.bool,onClosePhotoView:n.func,photoID:n.string,rootClassName:n.string,threadID:n.string};q.getImageDimensionsForStage=function(r,s){var t=r.x,u=r.y,v=s.x,w=s.y,x=t/u,y=v/w;if(t>=v||u>=w){if(y<x){t=v;u=Math.round(v/x);}else if(y>x){t=Math.round(w*x);u=w;}else{t=v;u=w;}}else if(x<y){t=Math.round(u*x);}else u=Math.round(t/x);return new (c('Vector'))(t,u);};f.exports=q;}),null);
__d('MessengerRadioButton.react',['cx','React','XUIRadioInput.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();i=babelHelpers.inherits(k,c('React').PureComponent);j=i&&i.prototype;k.prototype.render=function(){return (c('React').createElement(c('XUIRadioInput.react'),babelHelpers['extends']({},this.props,{className:"__rm"})));};function k(){i.apply(this,arguments);}f.exports=k;}),null);
__d('MessengerRadioList.react',['invariant','InputLabel.react','MessengerRadioButton.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k,l;if(c.__markCompiled)c.__markCompiled();var m=c('React').PropTypes;i=babelHelpers.inherits(n,c('React').Component);j=i&&i.prototype;function n(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=j.constructor).call.apply(p,[this].concat(s)),this.$MessengerRadioListItem1=function(event){!(event.target instanceof HTMLInputElement)?h(0):void 0;this.props.onSelect&&this.props.onSelect(event.target.value);}.bind(this),q;}n.prototype.render=function(){return c('React').createElement('li',{className:this.props.className},c('React').createElement(c('InputLabel.react'),{display:'inline'},c('React').createElement(c('MessengerRadioButton.react'),{checked:this.props.selectedValue===this.props.value,disabled:!!this.props.disabled,name:this.props.name,onChange:this.$MessengerRadioListItem1,value:this.props.value}),c('React').createElement('label',null,this.props.children)));};n.propTypes={disabled:m.bool,name:m.string,onSelect:m.func,selectedValue:m.any,value:m.any};k=babelHelpers.inherits(o,c('React').Component);l=k&&k.prototype;o.prototype.render=function(){var p=c('React').Children.map(this.props.children,function(q){return c('React').cloneElement(q,{name:this.props.name,onSelect:this.props.onValueChange,selectedValue:this.props.selectedValue});},this);return c('React').createElement('ul',babelHelpers['extends']({},this.props,{name:null}),p);};function o(){k.apply(this,arguments);}o.propTypes={name:m.string,onValueChange:m.func,selectedValue:m.any};o.Item=n;f.exports=o;}),null);
__d('MessengerHotLikeSVG.react',['cssVar','cx','fbt','React','joinClasses','uniqueID'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l;if(c.__markCompiled)c.__markCompiled();var m=c('React').PropTypes,n='transparent',o=j._("Thumbs Up Sign");k=babelHelpers.inherits(p,c('React').Component);l=k&&k.prototype;function p(){var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=l.constructor).call.apply(q,[this].concat(t)),this.state={titleId:c('uniqueID')()},r;}p.prototype.render=function(){var q=this.props.color||"#0084ff";return (c('React').createElement('div',{className:c('joinClasses')(this.props.className,"_1i1j")},c('React').createElement('svg',{'aria-labelledby':this.state.titleId,height:'100%',role:'img',version:'1.1',viewBox:'0 0 381 400',width:'100%',x:'0px',y:'0px'},c('React').createElement('title',{id:this.state.titleId},o),c('React').createElement('g',null,c('React').createElement('g',null,c('React').createElement('path',{d:'M0,399.8h86.4V160.8H0V399.8z M381,220.7c0-13.6-7.4-25.5-18.5-31.8c8.8-6.6,14.5-17.4,14.5-29.3 c0-20.1-16.4-36.8-36.5-36.8H217c20.4-106.5-31.3-128.2-51.7-123c-12.3,3.1-13.6-0.3-11.4,24.2l3.4,42.7c0.3,3.5,0,7.2-0.8,10.8 c-0.8,3.6-2.7,6.9-4.6,10L106.8,160v208.7h195.3v-1.2c19.2-1.1,34.5-17.4,34.5-36.9c0-6.1-1.5-12-4.1-17 c17.3-2.8,30.4-18,30.4-36.1c0-8.2-2.7-15.9-7.4-22C370.1,250.8,381,237,381,220.7z',fill:q,stroke:n,strokeLinecap:'round',strokeWidth:'5%'}))))));};p.propTypes={color:m.string};f.exports=p;}),null);
__d('MessengerHotLikePreview.react',['cx','Animation','EmojiLikeConstants','EmojiLikeCxData','HotLikeSound','MercuryConfig','MessengerHotLikePreviewEvents','MessengerHotLikeSVG.react','MessengerHotLikeUtils','React','ReactDOM','StickerConstants','SubscriptionsHandler'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$MessengerHotLikePreview5=function(){this.$MessengerHotLikePreview6=new (c('Animation'))(c('ReactDOM').findDOMNode(this));this.$MessengerHotLikePreview7(-2,2,150,1000);this.$MessengerHotLikePreview7(-4,4,100,1000);this.$MessengerHotLikePreview7(-10,10,75,1000);this.$MessengerHotLikePreview6.go();}.bind(this),this.$MessengerHotLikePreview7=function(r,s,t,u){var v=Math.floor(u/t),w=null;for(var x=0;x<v;x++){w=x%2?r:s;this.$MessengerHotLikePreview6.to('rotateZ',w).duration(t).checkpoint();}}.bind(this),this.$MessengerHotLikePreview2=function(r,s){var t=s?c('MessengerHotLikePreviewEvents').FINISH_EMOJI_ANIMATION:c('MessengerHotLikePreviewEvents').FINISH_ANIMATION;if(this.$MessengerHotLikePreview8)return;this.$MessengerHotLikePreview8=true;var u=Date.now()-this.props.since,v=null;if(this.props.customLike)v=c('MessengerHotLikeUtils').getEmojiSizeForTime(u);var w=c('MessengerHotLikeUtils').getStickerIDForTime(u);c('HotLikeSound').snap(w);var x=c('MessengerHotLikeUtils').getMetadataForHotLike(v||w);this.$MessengerHotLikePreview6.stop();var y=30,z=-10;if(w===c('StickerConstants').HOT_LIKE_SMALL_STICKER_ID){y=0;z=0;}this.$MessengerHotLikePreview4.stop().to('width',x.width*1.2).to('height',x.height*1.2).to('rotateZ',y).duration(100).checkpoint().to('width',x.width*.9).to('height',x.height*.9).to('rotateZ',z).duration(100).checkpoint().to('width',x.width).to('height',x.height).to('rotateZ',0).duration(100).ondone(function(){c('MessengerHotLikePreviewEvents').emit(t,r,w,v);}).go();}.bind(this),this.$MessengerHotLikePreview3=function(r){c('HotLikeSound').pop();this.$MessengerHotLikePreview4.stop().to('width',0).to('height',0).duration(100).ondone(function(){c('MessengerHotLikePreviewEvents').emit(c('MessengerHotLikePreviewEvents').REMOVE,r);}).go();}.bind(this),n;}l.prototype.componentDidMount=function(){this.$MessengerHotLikePreview1=new (c('SubscriptionsHandler'))();this.$MessengerHotLikePreview1.addSubscriptions(c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').STOP,this.$MessengerHotLikePreview2),c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').STOP_EMOJI,this.$MessengerHotLikePreview2),c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').POP,this.$MessengerHotLikePreview3));c('HotLikeSound').start();this.$MessengerHotLikePreview4=new (c('Animation'))(c('ReactDOM').findDOMNode(this)).to('width',80).to('height',80).duration(3000).go();this.$MessengerHotLikePreview5();};l.prototype.componentWillUnmount=function(){this.$MessengerHotLikePreview1&&this.$MessengerHotLikePreview1.release();};l.prototype.render=function(){if(this.props.customLike){var m=this.props.customLike;if(c('MercuryConfig').MessengerNewEmojiGK)var n=c('EmojiLikeCxData').getNewEmojiData(m.emoji,c('EmojiLikeConstants').size.LARGE);var o=n?n.url:this.props.customLike.large;if(m.uri)o=m.uri;return c('React').createElement('div',{className:"_4a9g _383m",style:{backgroundImage:'url('+o+')'}});}return c('React').createElement('div',{className:"_4a9g _576q"},c('React').createElement(c('MessengerHotLikeSVG.react'),{color:this.props.customColor}));};l.propTypes={customLike:k.object,since:k.number};f.exports=l;}),null);
__d('MNCommerceAttachmentConstants',[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={XLARGE_IMAGE_DIMENSION:72,LARGE_IMAGE_DIMENSION:60,SMALL_IMAGE_DIMENSION:32,SINGLE_IMAGE_HEIGHT:108,BUBBLE_PADDING:6,IMAGE_HEIGHT:{CHAT:108,WEB_INBOX:130},UNLINK_ERROR_DIALOG:{WIDTH:300},DIALOG:{WIDTH:445,PADDING:12},MDOTCOMDIALOG:{WIDTH:495},ORDER_DETAIL:{SUB_TOTAL:'subTotal',SHIPPING:'shippingCost',TAX:'tax',TOTAL:'totalCost'}};f.exports=h;}),null);
__d('MNCommerceDialog.react',['cx','CurrentEnvironment','LayerFadeOnHide','LayerHideOnEscape','MNCommerceAttachmentConstants','MessengerDialog.react','React','XUIDialog.react','emptyFunction','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'MNCommerceDialog',propTypes:{onToggle:i.func,shown:i.bool,width:i.number.isRequired},getDefaultProps:function k(){return {onToggle:c('emptyFunction'),repositionOnUpdate:true,shown:true,width:c('CurrentEnvironment').messengerdotcom?c('MNCommerceAttachmentConstants').MDOTCOMDIALOG.WIDTH:c('MNCommerceAttachmentConstants').DIALOG.WIDTH};},componentDidUpdate:function k(){if(this.props.repositionOnUpdate)setTimeout(function(){if(this.isMounted()&&this.refs.dialog&&this.refs.dialog.layer)this.refs.dialog.layer.updatePosition();}.bind(this),0);},render:function k(){var l=c('CurrentEnvironment').messengerdotcom,m=l?c('MessengerDialog.react'):c('XUIDialog.react');return (c('React').createElement(m,babelHelpers['extends']({behaviors:{LayerFadeOnHide:c('LayerFadeOnHide'),LayerHideOnEscape:c('LayerHideOnEscape')}},this.props,{className:c('joinClasses')(this.props.className,l?"_3rx0":''),ref:'dialog'}),this.props.children));}});f.exports=j;}),null);
__d('MNCommerceDialogBody.react',['CurrentEnvironment','MessengerDialogBody.react','React','XUIDialogBody.react'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.prototype.render=function(){var k=c('CurrentEnvironment').messengerdotcom,l=k?c('MessengerDialogBody.react'):c('XUIDialogBody.react');return (c('React').createElement(l,this.props,this.props.children));};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('MNCommerceDialogTitle.react',['CurrentEnvironment','MessengerDialogHeader.react','React','XUIDialogTitle.react'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.prototype.render=function(){var k=c('CurrentEnvironment').messengerdotcom,l=k?c('MessengerDialogHeader.react'):c('XUIDialogTitle.react');return (c('React').createElement(l,this.props,this.props.children));};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('MNCommerceDetailsDialog.react',['cx','fbt','React','MNCommerceDialog.react','MNCommerceDialogBody.react','MNCommerceDialogTitle.react','XUISpinner.react','XUIButton.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$MNCommerceDetailsDialog3=function(){return this.props.title?c('React').createElement(c('MNCommerceDialogTitle.react'),null,this.props.title):null;}.bind(this),this.$MNCommerceDetailsDialog2=function(){return (c('React').createElement('div',{className:"_4y9b"},c('React').createElement('p',{className:"_4y9c"},i._("Sorry, Something Went Wrong")),c('React').createElement('p',{className:"_4y9d"},this.props.errorMessage),c('React').createElement(c('XUIButton.react'),{onClick:this.props.onTryAgain,label:i._("Try Again")})));}.bind(this),this.$MNCommerceDetailsDialog1=function(){return (c('React').createElement('div',{className:"_4y9e"},c('React').createElement(c('XUISpinner.react'),{background:'light',size:'large',paused:false})));},o;}m.prototype.render=function(){var n=null;if(this.props.loading){n=this.$MNCommerceDetailsDialog1();}else if(this.props.error){n=this.$MNCommerceDetailsDialog2();}else n=this.props.children;return c('React').createElement(c('MNCommerceDialog.react'),{className:this.props.className,modal:true,onToggle:this.props.onToggle,shown:this.props.shown},this.$MNCommerceDetailsDialog3(),c('React').createElement(c('MNCommerceDialogBody.react'),{useCustomPadding:true},n));};m.propTypes={error:l.object,errorMessage:l.node,loading:l.bool.isRequired,onToggle:l.func,onTryAgain:l.func,title:l.node,shown:l.bool.isRequired};m.defaultProps={shown:false};f.exports=m;}),null);
__d('MNCommerceButton.react',['CurrentEnvironment','MessengerDialogButton.react','React','XUIButton.react'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.prototype.render=function(){var k=c('CurrentEnvironment').messengerdotcom,l=k?c('MessengerDialogButton.react'):c('XUIButton.react'),m=this.props.type;if(!m)m=this.props.type==='confirm'?'primary':'secondary';var n=k?'default':this.props.use,o=babelHelpers['extends']({},this.props,{type:m,use:n});return (c('React').createElement(l,o,this.props.children));};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('MNCommerceDialogFooter.react',['cx','CurrentEnvironment','MessengerDialogFooter.react','React','XUIDialogFooter.react','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){var l=c('CurrentEnvironment').messengerdotcom,m=l?c('MessengerDialogFooter.react'):c('XUIDialogFooter.react'),n=void 0,o=this.props.children;if(l){n=c('React').Children.count(this.props.children);o=c('React').Children.map(this.props.children,function(p,q){if(!p)return null;return c('React').cloneElement(p,{className:c('joinClasses')(p.props.className,"_4ec0"),type:q===0&&n===2?'secondary':'primary'});});}return (c('React').createElement(m,this.props,o));};function k(){i.apply(this,arguments);}f.exports=k;}),null);
__d('MNCommercePromotionManageBlockDialog.react',['fbt','CurrentEnvironment','Link.react','MessengerRadioList.react','MNCommerceButton.react','MNCommerceDetailsDialog.react','MNCommerceDialogBody.react','MNCommerceDialogFooter.react','MNCommerceDialogTitle.react','MNCommerceBlockTypeJSInstance','React','URI','WorkModeConfig','XUIRadioList.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('MessengerRadioList.react').Item,l=c('XUIRadioList.react').Item,m=c('React').PropTypes;i=babelHelpers.inherits(n,c('React').Component);j=i&&i.prototype;function n(p,q){j.constructor.call(this,p,q);o.call(this);this.state=this.$MNCommercePromotionManageBlockDialog1();}n.prototype.componentWillReceiveProps=function(p){this.setState(this.$MNCommercePromotionManageBlockDialog1(p));};n.prototype.render=function(){var p=this.props.merchantName||'',q=h._("Manage messages from {label for merchant name}",[h.param('label for merchant name',p)]),r=h._("Cancel"),s=h._("Confirm"),t=h._("Manage Options couldn't be shown."),u=c('WorkModeConfig').is_work_user?new (c('URI'))('https://facebook.com/help/work/1731361900459513').setSubdomain(c('WorkModeConfig').company_subdomain):new (c('URI'))('https://www.facebook.com/help/389645087895231'),v=c('React').createElement(c('Link.react'),{href:u,target:'_blank'},h._("Learn More"));return (c('React').createElement(c('MNCommerceDetailsDialog.react'),babelHelpers['extends']({errorMessage:t,onToggle:this.props.onToggle,shown:this.props.shown},this.props),c('React').createElement(c('MNCommerceDialogTitle.react'),{showCloseButton:true},q),c('React').createElement(c('MNCommerceDialogBody.react'),null,this.$MNCommercePromotionManageBlockDialog2()),c('React').createElement(c('MNCommerceDialogFooter.react'),{leftContent:v},c('React').createElement(c('MNCommerceButton.react'),{label:r,onClick:this.props.onCancelButtonClick,use:'default'}),c('React').createElement(c('MNCommerceButton.react'),{label:s,onClick:this.$MNCommercePromotionManageBlockDialog3,use:'confirm'}))));};n.propTypes={isAllBlocked:m.bool,isPromotionBlocked:m.bool,error:m.object,loading:m.bool.isRequired,merchantName:m.string,onCancelButtonClick:m.func,onConfirmButtonClick:m.func.isRequired,pageID:m.string};var o=function p(){this.$MNCommercePromotionManageBlockDialog1=function(q){var r=q||this.props,s=c('MNCommerceBlockTypeJSInstance').ALL;if(r.isAllBlocked){s=c('MNCommerceBlockTypeJSInstance').NONE;}else if(r.isPromotionBlocked)s=c('MNCommerceBlockTypeJSInstance').PROMOTION;return {type:s};}.bind(this);this.onTypeChange=function(q){this.setState({type:q});}.bind(this);this.$MNCommercePromotionManageBlockDialog2=function(){var q=c('CurrentEnvironment').messengerdotcom,r=q?c('MessengerRadioList.react'):c('XUIRadioList.react'),s=q?k:l;return (c('React').createElement(r,{selectedValue:this.state.type,onValueChange:this.onTypeChange},c('React').createElement(s,{value:c('MNCommerceBlockTypeJSInstance').ALL},h._("Receive all messages")),c('React').createElement(s,{value:c('MNCommerceBlockTypeJSInstance').PROMOTION},h._("Block sponsored messages")),c('React').createElement(s,{value:c('MNCommerceBlockTypeJSInstance').NONE},h._("Block all messages"))));}.bind(this);this.$MNCommercePromotionManageBlockDialog3=function(q){var r=this.props;r.onToggle(false);if(!r.onConfirmButtonClick)return;var s=r.pageID;r.onConfirmButtonClick(s,this.state.type);}.bind(this);};f.exports=n;}),null);
__d("XMNCommercePromotionStateController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/messages\/commerce\/promotion\/state\/",{page_id:{type:"String",required:true}});}),null);
__d('MNCommercePromotionStateDataManager',['AsyncRequest','MNCommercePromotionStateActions','XMNCommercePromotionStateController'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();h.prototype.fetchPromotionState=function(i){var j=c('XMNCommercePromotionStateController').getURIBuilder().setString('page_id',i).getURI();new (c('AsyncRequest'))().setURI(j).setHandler(this.$MNCommercePromotionStateDataManager1).setErrorHandler(this.$MNCommercePromotionStateDataManager2).send();};h.prototype.$MNCommercePromotionStateDataManager1=function(i){var j=i.getRequest().uri.getQueryData(),k=j.page_id;i.payload.pageID=k;c('MNCommercePromotionStateActions').stateLoaded(i.payload);};h.prototype.$MNCommercePromotionStateDataManager2=function(i){var j=i.getRequest().uri.getQueryData(),k=j.page_id;c('MNCommercePromotionStateActions').stateLoadError(k);};function h(){}f.exports=new h();}),null);
__d('MNCommercePromotionStateStore',['Cache','FluxStore','LoadObject','MessengerDispatcher','MNCommerceActionTypes','MNCommerceCacheTimeoutLimits','MNCommercePromotionStateDataManager'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;function j(){i.constructor.call(this,c('MessengerDispatcher'));this.$MNCommercePromotionStateStore1=new (c('Cache'))();}j.prototype.__onDispatch=function(k){var l=k.type,m=k.pageID||k.state&&k.state.pageID;switch(l){case c('MNCommerceActionTypes').PROMOTION_STATE.LOADED:var n=k.state;this.$MNCommercePromotionStateStore1.set(m,c('LoadObject').empty().setValue(n),null,c('MNCommerceCacheTimeoutLimits').SUCCESS_TIMEOUT);this.__emitChange();break;case c('MNCommerceActionTypes').PROMOTION_STATE.LOAD_ERROR:this.$MNCommercePromotionStateStore1.set(m,c('LoadObject').empty().setError(new Error('Unable to load permissions for: '+m)),null,c('MNCommerceCacheTimeoutLimits').ERROR_TIMEOUT);this.__emitChange();break;case c('MNCommerceActionTypes').PROMOTION_STATE.RELOAD:if(m){this.$MNCommercePromotionStateStore1.set(m,c('LoadObject').loading());c('MNCommercePromotionStateDataManager').fetchPromotionState(m);}this.__emitChange();break;}};j.prototype.getPromotionState=function(k){if(k&&!this.$MNCommercePromotionStateStore1.has(k)){this.$MNCommercePromotionStateStore1.set(k,c('LoadObject').loading().setValue({pageID:k}));c('MNCommercePromotionStateDataManager').fetchPromotionState(k);}return this.$MNCommercePromotionStateStore1.get(k)||c('LoadObject').empty();};f.exports=new j();}),null);
__d('MNCommercePromotionManageBlockDialogContainer.react',['MNCommerceDialogStateActions','MNCommerceDialogStateStore','MNCommercePromotionManageBlockDialog.react','MNCommercePromotionStateActions','MNCommercePromotionStateStore','PureStoreBasedStateMixin','React'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').createClass({displayName:'MNCommercePromotionManageBlockDialogContainer',mixins:[c('PureStoreBasedStateMixin')(c('MNCommercePromotionStateStore'))],statics:{calculateState:function i(){var j=c('MNCommerceDialogStateStore').getState(),k=null;if(j)k=j.pageID;var l=c('MNCommercePromotionStateStore').getPromotionState(k);return {shown:!!j,loading:l.isLoading(),onConfirmButtonClick:j&&j.onConfirmButtonClick,pageID:k,promotionState:l.getValue(),error:l.getError()};}},render:function i(){var j=this.state.promotionState;return (c('React').createElement(c('MNCommercePromotionManageBlockDialog.react'),{error:this.state.error,isAllBlocked:j&&j.is_all_blocked,isPromotionBlocked:j&&j.is_promotion_blocked,loading:this.state.loading,merchantName:j&&j.name,onCancelButtonClick:this._hideDialog,onToggle:this._onToggle,pageID:this.state.pageID,onTryAgain:this._onTryAgainClick,onConfirmButtonClick:this.state.onConfirmButtonClick,shown:this.state.shown}));},_onToggle:function i(j){if(!j)this._hideDialog();},_onTryAgainClick:function i(){c('MNCommercePromotionStateActions').stateReload(this.state.pageID);},_hideDialog:function i(){c('MNCommerceDialogStateActions').hideDialog();}});f.exports=h;}),null);
__d('MercuryShareAttachmentReactShape',['React'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=h.shape({share_id:h.string,description:h.string,media:h.shape({image:h.string,image_size:h.shape({height:h.number,width:h.number}),duration:h.number,playable:h.bool,source:h.string}),source:h.string,style_list:h.arrayOf(h.string),subattachments:h.array,target:h.object,title:h.string,properties:h.object,uri:h.string,action_links:h.array}).isRequired;f.exports=i;}),null);
__d('MessengerMomentsAppSnippet.react',['cx','fbt','ix','Image.react','MercuryShareAttachmentReactShape','React'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l;if(c.__markCompiled)c.__markCompiled();var m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;n.prototype.render=function(){var o=this.props.attachment;if(!o||!o.target)return null;return (c('React').createElement('span',{className:"uiIconText _3l6h"},c('React').createElement(c('Image.react'),{src:j('/images/messaging/docs/generic.png')}),o.target.snippet));};function n(){k.apply(this,arguments);}n.propTypes={attachment:c('MercuryShareAttachmentReactShape')};f.exports=n;}),null);
__d("XMNCommercePromotionBlockController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/messages\/commerce\/promotion\/block\/",{page_id:{type:"String",required:true},type:{type:"String",required:true}});}),null);
__d('MNCommercePromotionBlockDataManager',['AsyncRequest','MNCommercePromotionStateActions','XMNCommercePromotionBlockController'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();h.prototype.block=function(i,j){var k=c('XMNCommercePromotionBlockController').getURIBuilder().setString('page_id',i).setString('type',j).getURI();new (c('AsyncRequest'))().setURI(k).setHandler(this.$MNCommercePromotionBlockDataManager1).setErrorHandler(this.$MNCommercePromotionBlockDataManager2).send();};h.prototype.$MNCommercePromotionBlockDataManager1=function(i){var j=i.getRequest().uri.getQueryData(),k=j.page_id;c('MNCommercePromotionStateActions').stateReload(k);};h.prototype.$MNCommercePromotionBlockDataManager2=function(i){var j=i.getRequest().uri.getQueryData(),k=j.page_id;c('MNCommercePromotionStateActions').stateLoadError(k);};function h(){}f.exports=new h();}),null);
__d('MercuryAttachmentAttribution.react',['cx','Image.react','ImmutableObject','React','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$MercuryAttachmentAttribution1=function(){return this.props.attachment&&this.props.attachment.app_attribution;}.bind(this),n;}l.prototype.render=function(){var m=this.$MercuryAttachmentAttribution1();if(!m)return null;return c('React').createElement('div',{className:c('joinClasses')(this.props.className,"_29ew")},c('React').createElement(c('Image.react'),{src:m.icon_url,className:"_29ex"}),c('React').createElement('span',{className:"_29ey"},m.name));};l.propTypes={attachment:k.instanceOf(c('ImmutableObject'))};f.exports=l;}),null);
__d('MercuryAttachmentSnippetType',['keyMirror'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('keyMirror')({PHOTO:null,GIF:null,VIDEO:null,AUDIO_CLIP:null,STICKER:null,SHARE:null,ERROR:null,MIXED:null,GIFT:null,THIRDPARTYSTICKER:null,FILE:null,LIKE_STICKER:null});f.exports=h;}),null);
__d('P2PSnippetStringUtils',['fbt','P2PPaymentRequestStatus','P2PTransferStatus'],(function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={getRequestCanceledSnippet:function j(k,l,m,n,o){if(k){return h._("Your request for {payment request amount} from {receiver's name} was canceled.",[h.param('payment request amount',o),h.param('receiver\'s name',n)]);}else if(l){return h._("{requester's name}'s request for {payment request amount} was canceled.",[h.param('requester\'s name',m),h.param('payment request amount',o)]);}else return h._("{requester's name}'s request for {payment request amount} from {receiver's name} was canceled.",[h.param('requester\'s name',m),h.param('payment request amount',o),h.param('receiver\'s name',n)]);},getRequestDeclinedSnippet:function j(k,l,m,n,o){if(k){return h._("{receiver's name} declined your request for {payment request amount}.",[h.param('receiver\'s name',n),h.param('payment request amount',o)]);}else if(l){return h._("You declined {requester's name}'s request for {payment request amount}.",[h.param('requester\'s name',m),h.param('payment request amount',o)]);}else return h._("{receiver's name} declined {sender's name}'s request for {payment request amount}.",[h.param('receiver\'s name',n),h.param('sender\'s name',m),h.param('payment request amount',o)]);},getRequestSentSnippet:function j(k,l,m,n,o){if(k){return h._("You requested {amount} from {requestee name}.",[h.param('amount',o),h.param('requestee name',n)]);}else if(l){return h._("{requester name} requested {amount} from you.",[h.param('requester name',m),h.param('amount',o)]);}else return h._("{name} requested {amount} from {requestee name}.",[h.param('name',m),h.param('amount',o),h.param('requestee name',n)]);},getRequestSnippetByStatus:function j(k,l,m,n,o,p){var q=k||c('P2PPaymentRequestStatus').INITED,r=[l,m,n,o,p];switch(q){case c('P2PPaymentRequestStatus').DECLINED:return this.getRequestDeclinedSnippet.apply(this,r);case c('P2PPaymentRequestStatus').TRANSFER_FAILED:case c('P2PPaymentRequestStatus').CANCELED:return this.getRequestCanceledSnippet.apply(this,r);}return this.getRequestSentSnippet.apply(this,r);},getTransferCanceledSnippet:function j(k,l,m,n,o){if(k){return h._("Your {amount} payment to {receiver_name} was canceled.",[h.param('amount',o),h.param('receiver_name',n)]);}else if(l){return h._("{sender name}'s {amount} payment was canceled.",[h.param('sender name',m),h.param('amount',o)]);}else return h._("{sender_name}'s {amount} payment to {receiver_name} was canceled.",[h.param('sender_name',m),h.param('amount',o),h.param('receiver_name',n)]);},getTransferDeclinedSnippet:function j(k,l,m,n,o){if(k){return h._("{receiver_name} didn't accept your {amount} payment.",[h.param('receiver_name',n),h.param('amount',o)]);}else if(l){return h._("You didn't accept {sender name}'s {amount} payment.",[h.param('sender name',m),h.param('amount',o)]);}else return h._("{receiver_name} didn't accept {sender_name}'s {amount} payment.",[h.param('receiver_name',n),h.param('sender_name',m),h.param('amount',o)]);},getTransferSentSnippet:function j(k,l,m,n,o){if(k){return h._("You sent {receiver name} {amount}.",[h.param('receiver name',n),h.param('amount',o)]);}else if(l){return h._("{name} sent you {amount}.",[h.param('name',m),h.param('amount',o)]);}else return h._("{sender name} sent {receiver name} {amount}.",[h.param('sender name',m),h.param('receiver name',n),h.param('amount',o)]);},getTransferSnippetByStatus:function j(k,l,m,n,o,p){var q=[l,m,n,o,p],r=k||c('P2PTransferStatus').PENDING_SENDER_INITED;switch(r){case c('P2PTransferStatus').CANCELED_DECLINED:return this.getTransferDeclinedSnippet.apply(this,q);case c('P2PTransferStatus').CANCELED_SENDER_RISK:case c('P2PTransferStatus').CANCELED_RECIPIENT_RISK:case c('P2PTransferStatus').CANCELED_SYSTEM_FAIL:case c('P2PTransferStatus').CANCELED_EXPIRED:case c('P2PTransferStatus').CANCELED_SAME_CARD:return this.getTransferCanceledSnippet.apply(this,q);}return this.getTransferSentSnippet.apply(this,q);}};f.exports=i;}),null);
__d('MercuryAttachmentSnippetRenderer',['fbt','CurrentUser','MercuryAttachmentSnippetType','MercuryAttachmentType','MercuryAudioType','MercuryGiftSnippetRenderer','P2PSnippetStringUtils','StickerConstants','StoryAttachmentStyle'],(function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i={getAttachmentSnippetType:function j(k){if(this._hasOnlyPhotos(k))return c('MercuryAttachmentSnippetType').PHOTO;if(this._hasOnlyAnimatedImages(k))return c('MercuryAttachmentSnippetType').GIF;if(this._hasOnlyVideo(k))return c('MercuryAttachmentSnippetType').VIDEO;if(this._hasAudioClip(k))return c('MercuryAttachmentSnippetType').AUDIO_CLIP;if(this._hasLikeSticker(k))return c('MercuryAttachmentSnippetType').LIKE_STICKER;if(this._hasSticker(k))return c('MercuryAttachmentSnippetType').STICKER;if(this._hasThirdPartySticker(k))return c('MercuryAttachmentSnippetType').THIRDPARTYSTICKER;if(this._hasShare(k))return c('MercuryAttachmentSnippetType').SHARE;if(this._hasGift(k))return c('MercuryAttachmentSnippetType').GIFT;if(this._hasError(k))return c('MercuryAttachmentSnippetType').ERROR;if(this._hasFile(k))return c('MercuryAttachmentSnippetType').FILE;return c('MercuryAttachmentSnippetType').MIXED;},renderAttachmentSnippetText:function j(k,l,m,n){switch(k){case c('MercuryAttachmentSnippetType').PHOTO:return this._renderPhotoAttachmentSnippetText(l,m,this._getPhotoAttachments(n));case c('MercuryAttachmentSnippetType').GIF:return this._renderAnimatedImagesAttachmentSnippetText(l,m,this._getAnimatedImageAttachments(n));case c('MercuryAttachmentSnippetType').VIDEO:return l?h._("You sent a video."):h._("{sender name} sent a video.",[h.param('sender name',m)]);case c('MercuryAttachmentSnippetType').AUDIO_CLIP:return l?h._("You sent a voice message."):h._("{name} sent a voice message.",[h.param('name',m)]);case c('MercuryAttachmentSnippetType').STICKER:case c('MercuryAttachmentSnippetType').LIKE_STICKER:case c('MercuryAttachmentSnippetType').THIRDPARTYSTICKER:return l?h._("You sent a sticker."):h._("{name} sent a sticker.",[h.param('name',m)]);case c('MercuryAttachmentSnippetType').SHARE:if(n&&this._hasP2PPayment(n))return this._renderP2PPaymentSnippetText(n[0]);if(n&&this._hasP2PPaymentRequest(n))return this._renderP2PPaymentRequestSnippetText(n[0]);if(n&&this._hasBusinessMessage(n))return this._renderBusinessMessageSnippetText(n[0],m);if(n&&this._hasLocation(n))return l?h._("You sent a location."):h._("{sender name} sent a location.",[h.param('sender name',m)]);if(n&&this._hasLiveLocation(n))return l?h._("You sent a live location."):h._("{sender name} sent a live location.",[h.param('sender name',m)]);return l?h._("You sent a link."):h._("{sender name} sent a link.",[h.param('sender name',m)]);case c('MercuryAttachmentSnippetType').GIFT:return c('MercuryGiftSnippetRenderer').renderText(l,m);case c('MercuryAttachmentSnippetType').FILE:return l?h._("You sent an attachment."):h._("{sender name} sent an attachment.",[h.param('sender name',m)]);case c('MercuryAttachmentSnippetType').ERROR:return l?h._("You sent an attachment."):h._("{sender name} sent an attachment.",[h.param('sender name',m)]);default:return '';}},_hasOnlyPhotos:function j(k){return this._getPhotoAttachments(k).length===k.length;},_hasThirdPartySticker:function j(k){return (k.length===1&&k[0].attach_type===c('MercuryAttachmentType').THIRDPARTYSTICKER);},_hasOnlyAnimatedImages:function j(k){return this._getAnimatedImageAttachments(k).length===k.length;},_hasOnlyVideo:function j(k){return (k.length===1&&k[0].attach_type===c('MercuryAttachmentType').VIDEO);},_hasAudioClip:function j(k){var l=k[0].metadata&&k[0].metadata.type;return (k.length===1&&(l===c('MercuryAudioType').AudioClip||l===c('MercuryAudioType').VoiceMessageWithTranscript));},_hasBusinessMessage:function j(k){return this._hasSingleShareAttachmentOfStyle(k,c('StoryAttachmentStyle').BUSINESS_MESSAGE_ITEMS);},_hasSticker:function j(k){return (k.length===1&&k[0].attach_type===c('MercuryAttachmentType').STICKER);},_hasLikeSticker:function j(k){if(k.length<1)return false;var l=k[0].metadata&&k[0].metadata.stickerID;return (k.length===1&&(l==c('StickerConstants').LIKE_STICKER_ID||l==c('StickerConstants').HOT_LIKE_SMALL_STICKER_ID||l==c('StickerConstants').HOT_LIKE_MEDIUM_STICKER_ID||l==c('StickerConstants').HOT_LIKE_LARGE_STICKER_ID));},_hasLocation:function j(k){return this._hasSingleShareAttachmentOfStyle(k,c('StoryAttachmentStyle').MESSAGE_LOCATION);},_hasLiveLocation:function j(k){return this._hasSingleShareAttachmentOfStyle(k,c('StoryAttachmentStyle').MESSAGE_LIVE_LOCATION);},_hasP2PPayment:function j(k){return this._hasSingleShareAttachmentOfStyle(k,c('StoryAttachmentStyle').ORION);},_hasP2PPaymentRequest:function j(k){return this._hasSingleShareAttachmentOfStyle(k,c('StoryAttachmentStyle').ORION_REQUEST);},_hasSingleShareAttachmentOfStyle:function j(k,l){return (k.length===1&&k[0].attach_type===c('MercuryAttachmentType').SHARE&&k[0].share.style_list.indexOf(l)>=0);},_hasShare:function j(k){return (k.length===1&&k[0].attach_type===c('MercuryAttachmentType').SHARE);},_hasError:function j(k){return (k.length===1&&k[0].attach_type===c('MercuryAttachmentType').ERROR);},_hasGift:function j(k){return (k.length===1&&k[0].attach_type===c('MercuryAttachmentType').GIFT);},_hasFile:function j(k){return (k.length===1&&k[0].attach_type===c('MercuryAttachmentType').FILE);},_getPhotoAttachments:function j(k){if(!k)return [];return k.filter(function(l){return l.attach_type===c('MercuryAttachmentType').PHOTO;});},_getAnimatedImageAttachments:function j(k){if(!k)return [];return k.filter(function(l){return l.attach_type===c('MercuryAttachmentType').ANIMATED_IMAGE;});},_renderPhotoAttachmentSnippetText:function j(k,l,m){if(m.length===1){if(k){return h._("You sent a photo.");}else return h._("{name} sent a photo.",[h.param('name',l)]);}else if(k){return h._({"*":"You sent {num_photos} photos."},[h.param('num_photos',m.length,[0])]);}else return h._({"*":"{name} sent {num_photos} photos."},[h.param('name',l),h.param('num_photos',m.length,[0])]);},_renderAnimatedImagesAttachmentSnippetText:function j(k,l,m){if(m.length===1){if(k){return h._("You sent a GIF.");}else return h._("{name} sent a GIF.",[h.param('name',l)]);}else if(k){return h._("You sent {num_animated_images} GIFs.",[h.param('num_animated_images',m.length)]);}else return h._("{name} sent {num_animated_images} GIFs.",[h.param('name',l),h.param('num_animated_images',m.length)]);},_renderBusinessMessageSnippetText:function j(k,l){var m=k.share.target,n=m&&m.message||h._("{sender name} sent an attachment.",[h.param('sender name',l)]);return n;},_renderP2PPaymentSnippetText:function j(k){var l=k.share.target;return this.renderP2PPaymentSnippetText(c('CurrentUser').getID()===l.sender.id,l.sender.name,l.amountWithSymbol,l.status,c('CurrentUser').getID()===l.receiver.id,l.receiver.name);},_renderP2PPaymentRequestSnippetText:function j(k){var l=k.share.target;return this.renderP2PPaymentRequestSnippetText(c('CurrentUser').getID()===l.requester.id,l.requester.name,l.amountWithSymbol,l.currentStatus,c('CurrentUser').getID()===l.requestee.id,l.requestee.name);},renderP2PPaymentSnippetText:function j(k,l,m,n,o,p){return c('P2PSnippetStringUtils').getTransferSnippetByStatus(n,k,o||false,l||'',p||'',m);},renderP2PPaymentRequestSnippetText:function j(k,l,m,n,o,p){return c('P2PSnippetStringUtils').getRequestSnippetByStatus(n,k,o||false,l||'',p||'',m);}};f.exports=i;}),null);
__d('MercuryAnimatedShareSnippet.react',['cx','fbt','ix','Image.react','React'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l;if(c.__markCompiled)c.__markCompiled();var m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;n.prototype.render=function(){var o=this.props.isViewerSender?i._("You sent a GIF."):i._("{sender name} sent a GIF.",[i.param('sender name',this.props.senderName)]);return (c('React').createElement('span',{className:"uiIconText _3l6h"},c('React').createElement(c('Image.react'),{src:j('/images/icons/photo.gif')}),o));};function n(){k.apply(this,arguments);}n.propTypes={isViewerSender:m.bool,senderName:m.string};f.exports=n;}),null);
__d('MercuryFallbackShareAttachmentSnippet.react',['cx','fbt','ix','Image.react','React'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l;if(c.__markCompiled)c.__markCompiled();var m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;n.prototype.render=function(){var o=void 0;if(this.props.isViewerSender){o=i._("You sent a link.");}else o=i._("{sender name} sent a link.",[i.param('sender name',this.props.senderName)]);return (c('React').createElement('span',{className:"uiIconText _3l6h"},c('React').createElement(c('Image.react'),{src:j('/images/messaging/docs/generic.png')}),o));};function n(){k.apply(this,arguments);}n.propTypes={isViewerSender:m.bool,senderName:m.oneOfType([m.string,m.object])};f.exports=n;}),null);
__d('MercuryFundraiserPTCShareSnippet.react',['cx','fbt','ix','Image.react','React'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l;if(c.__markCompiled)c.__markCompiled();var m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;n.prototype.render=function(){var o=this.props.isViewerSender?i._("You shared a fundraiser"):i._("{sender name} shared a fundraiser",[i.param('sender name',this.props.senderName)]);return (c('React').createElement('span',{className:"uiIconText _3l6h"},c('React').createElement(c('Image.react'),{src:j('/images/emoticons/heart.png')}),o));};function n(){k.apply(this,arguments);}n.propTypes={isViewerSender:m.bool,senderName:m.string};f.exports=n;}),null);
__d('MercuryMessageLiveLocationShareAttachmentSnippet.react',['cx','fbt','ix','Image.react','React'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l;if(c.__markCompiled)c.__markCompiled();var m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;n.prototype.render=function(){var o=void 0;if(this.props.isViewerSender){o=i._("You sent a live location.");}else o=i._("{sender name} sent a live location.",[i.param('sender name',this.props.senderName)]);return (c('React').createElement('span',{className:"uiIconText _3l6h"},c('React').createElement(c('Image.react'),{src:j('/images/messaging/location/location.png')}),o));};function n(){k.apply(this,arguments);}n.propTypes={isViewerSender:m.bool,senderName:m.string};f.exports=n;}),null);
__d('MercuryMessageLocationShareAttachmentSnippet.react',['cx','fbt','ix','Image.react','React'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l;if(c.__markCompiled)c.__markCompiled();var m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;n.prototype.render=function(){var o=void 0;if(this.props.isViewerSender){o=i._("You sent a location.");}else o=i._("{sender name} sent a location.",[i.param('sender name',this.props.senderName)]);return (c('React').createElement('span',{className:"uiIconText _3l6h"},c('React').createElement(c('Image.react'),{src:j('/images/messaging/location/location.png')}),o));};function n(){k.apply(this,arguments);}n.propTypes={isViewerSender:m.bool,senderName:m.string};f.exports=n;}),null);
__d('MercuryMessengerInviteShareAttachmentSnippet.react',['cx','React','MercuryShareAttachmentReactShape'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){return (c('React').createElement('span',{className:"_3l6h"},this.props.attachment.title));};function k(){i.apply(this,arguments);}k.propTypes={attachment:c('MercuryShareAttachmentReactShape')};f.exports=k;}),null);
__d('MercuryPhotoShareSnippet.react',['cx','fbt','ix','Image.react','React'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l;if(c.__markCompiled)c.__markCompiled();var m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;n.prototype.render=function(){var o=this.props.isViewerSender?i._("You sent a photo."):i._("{sender name} sent a photo.",[i.param('sender name',this.props.senderName)]);return (c('React').createElement('span',{className:"uiIconText _3l6h"},c('React').createElement(c('Image.react'),{src:j('/images/icons/photo.gif')}),o));};function n(){k.apply(this,arguments);}n.propTypes={isViewerSender:m.bool,senderName:m.string};f.exports=n;}),null);
__d('MercuryPromotionShareAttachmentSnippet.react',['cx','fbt','ix','Image.react','React'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l;if(c.__markCompiled)c.__markCompiled();var m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;n.prototype.render=function(){var o=this.props.attachment,p=o&&o.target,q=null;if(this.props.isViewerSender){q=i._("You sent an attachment.");}else q=i._("{sender name} sent an attachment.",[i.param('sender name',this.props.senderName)]);var r=p&&p.message||q;return (c('React').createElement('span',{className:"uiIconText _3l6h"},c('React').createElement(c('Image.react'),{src:j('/images/messaging/docs/generic.png')}),r));};function n(){k.apply(this,arguments);}n.propTypes={senderName:m.string,attachment:m.object,isViewerSender:m.bool};f.exports=n;}),null);
__d('MercurySaleGroupProductItemShareSnippet.react',['cx','fbt','ix','Image.react','React'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l;if(c.__markCompiled)c.__markCompiled();var m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;n.prototype.render=function(){var o=this.props.isViewerSender?i._("You sent a for sale item."):i._("{sender name} sent a for sale item.",[i.param('sender name',this.props.senderName)]);return (c('React').createElement('span',{className:"uiIconText _3l6h"},c('React').createElement(c('Image.react'),{src:j('/images/messaging/docs/generic.png')}),o));};function n(){k.apply(this,arguments);}n.propTypes={isViewerSender:m.bool,senderName:m.string};f.exports=n;}),null);
__d('MercuryTransactionInvoiceShareSnippet.react',['cx','fbt','ix','Image.react','React'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l;if(c.__markCompiled)c.__markCompiled();var m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;n.prototype.render=function(){var o=this.props.isViewerSender?i._("You sent an invoice"):i._("Page {sender name} sent you an invoice.",[i.param('sender name',this.props.senderName)]);return (c('React').createElement('span',{className:"uiIconText _3l6h"},c('React').createElement(c('Image.react'),{src:j('/images/messaging/docs/generic.png')}),o));};function n(){k.apply(this,arguments);}n.propTypes={isViewerSender:m.bool,senderName:m.string};f.exports=n;}),null);
__d('MercuryVideoShareSnippet.react',['cx','fbt','ix','Image.react','React'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l;if(c.__markCompiled)c.__markCompiled();var m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;n.prototype.render=function(){var o=this.props.isViewerSender?i._("You sent a video."):i._("{sender name} sent a video.",[i.param('sender name',this.props.senderName)]);return (c('React').createElement('span',{className:"uiIconText _3l6h"},c('React').createElement(c('Image.react'),{src:j('/images/icons/video.gif')}),o));};function n(){k.apply(this,arguments);}n.propTypes={isViewerSender:m.bool,senderName:m.oneOfType([m.string,m.object])};f.exports=n;}),null);
__d('P2PMercuryAttachmentSnippetRendererBase.react',['cx','ix','Image.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.render=function(){return (c('React').createElement('span',{className:"uiIconText _3l6h _3_io"},c('React').createElement(c('Image.react'),{height:12,src:i('/images/p2p/attachment-snippet-icon.png'),width:12}),this.props.text));};function m(){j.apply(this,arguments);}m.propTypes={text:l.node};f.exports=m;}),null);
__d('P2PMercuryAttachmentSnippet.react',['CurrentUser','MercuryAttachmentSnippetRenderer','P2PMercuryAttachmentSnippetRendererBase.react','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.prototype.render=function(){var l=c('MercuryAttachmentSnippetRenderer').renderP2PPaymentSnippetText(c('CurrentUser').getID()===this.props.sender.id,this.props.sender.name,this.props.amountWithSymbol,this.props.status,c('CurrentUser').getID()===this.props.receiver.id,this.props.receiver.name);return (c('React').createElement(c('P2PMercuryAttachmentSnippetRendererBase.react'),{text:l}));};function k(){h.apply(this,arguments);}k.propTypes={amount:j.string,amountWithSymbol:j.string,currency:j.string,groupThreadFBID:j.string,receiver:j.object,sender:j.object};k.defaultProps={sender:{},receiver:{}};f.exports=k;}),null);
__d('P2PMercuryShareAttachmentSnippet.react',['MercuryShareAttachmentReactShape','P2PMercuryAttachmentSnippet.react','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.prototype.render=function(){var k=this.props.attachment?this.props.attachment.target:{};return (c('React').createElement(c('P2PMercuryAttachmentSnippet.react'),k));};function j(){h.apply(this,arguments);}j.propTypes={attachment:c('MercuryShareAttachmentReactShape')};f.exports=j;}),null);
__d('P2PPaymentRequestMercuryAttachmentSnippet.react',['CurrentUser','MercuryAttachmentSnippetRenderer','P2PMercuryAttachmentSnippetRendererBase.react','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.prototype.render=function(){var l=c('MercuryAttachmentSnippetRenderer').renderP2PPaymentRequestSnippetText(c('CurrentUser').getID()===this.props.requester.id,this.props.requester.name,this.props.formattedAmount,this.props.status,c('CurrentUser').getID()===this.props.requestee.id,this.props.requestee.name);return (c('React').createElement(c('P2PMercuryAttachmentSnippetRendererBase.react'),{text:l}));};function k(){h.apply(this,arguments);}k.propTypes={formattedAmount:j.string.isRequired,requestee:j.object.isRequired,requester:j.object.isRequired,status:j.number.isRequired};f.exports=k;}),null);
__d('P2PPaymentRequestMercuryShareAttachmentSnippet.react',['MercuryShareAttachmentReactShape','P2PPaymentRequestMercuryAttachmentSnippet.react','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.prototype.render=function(){var k=this.props.attachment?this.props.attachment.target:{};return (c('React').createElement(c('P2PPaymentRequestMercuryAttachmentSnippet.react'),{formattedAmount:k.amountWithSymbol,requestee:k.requestee,requester:k.requester,status:k.currentStatus}));};function j(){h.apply(this,arguments);}j.propTypes={attachment:c('MercuryShareAttachmentReactShape')};f.exports=j;}),null);
__d('MercuryShareStyleMap',['cx','JSResource','Map','MercuryConfig','MercuryShareAttachmentRenderLocations','StoryAttachmentStyle','emptyFunction','MercuryFallbackShareAttachmentSnippet.react','P2PMercuryShareAttachmentSnippet.react','P2PPaymentRequestMercuryShareAttachmentSnippet.react','MercuryPromotionShareAttachmentSnippet.react','MessengerMomentsAppSnippet.react','MercuryPhotoShareSnippet.react','MercuryVideoShareSnippet.react','MercuryMessageLocationShareAttachmentSnippet.react','MercuryMessageLiveLocationShareAttachmentSnippet.react','MercuryAnimatedShareSnippet.react','MercurySaleGroupProductItemShareSnippet.react','MercuryTransactionInvoiceShareSnippet.react','MercuryFundraiserPTCShareSnippet.react','MercuryMessengerInviteShareAttachmentSnippet.react'],(function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=new (c('Map'))();i.set(c('StoryAttachmentStyle').FALLBACK,{componentName:'MercuryFallbackShareAttachment.react',componentLoader:c('JSResource')('MercuryFallbackShareAttachment.react').__setRef('MercuryShareStyleMap'),getSnippetComponent:function l(){return c('MercuryFallbackShareAttachmentSnippet.react');},cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d"]])});i.set(c('StoryAttachmentStyle').EVENT,{componentName:'MercuryEventShareAttachment.react',componentLoader:c('JSResource')('MercuryEventShareAttachment.react').__setRef('MercuryShareStyleMap'),getSnippetComponent:function l(){return c('MercuryFallbackShareAttachmentSnippet.react');}});i.set(c('StoryAttachmentStyle').ORION,{componentName:'P2PMercuryShareAttachmentContainer.react',componentLoader:c('JSResource')('P2PMercuryShareAttachmentContainer.react').__setRef('MercuryShareStyleMap'),getSnippetComponent:function l(){return c('P2PMercuryShareAttachmentSnippet.react');},cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d _3-50"]])});i.set(c('StoryAttachmentStyle').ORION_REQUEST,{componentName:'P2PPaymentRequestMercuryShareAttachmentContainer.react',componentLoader:c('JSResource')('P2PPaymentRequestMercuryShareAttachmentContainer.react').__setRef('MercuryShareStyleMap'),getSnippetComponent:function l(){return c('P2PPaymentRequestMercuryShareAttachmentSnippet.react');},cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d _3-50"]])});if(c('MercuryConfig').WWWMessengerCommerceGK){i.set(c('StoryAttachmentStyle').RETAIL_RECEIPT,{componentName:'MNCommerceReceiptMercuryShareAttachment.react',componentLoader:c('JSResource')('MNCommerceReceiptMercuryShareAttachment.react').__setRef('MercuryShareStyleMap'),cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d _205d"]])});i.set(c('StoryAttachmentStyle').RETAIL_CANCELLATION,{componentName:'MNCommerceCancelationMercuryShareAttachment.react',componentLoader:c('JSResource')('MNCommerceCancelationMercuryShareAttachment.react').__setRef('MercuryShareStyleMap'),cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d _205d"]])});i.set(c('StoryAttachmentStyle').RETAIL_SHIPMENT,{componentName:'MNCommerceShippingMercuryShareAttachment.react',componentLoader:c('JSResource')('MNCommerceShippingMercuryShareAttachment.react').__setRef('MercuryShareStyleMap'),cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d _205d"]])});i.set(c('StoryAttachmentStyle').RETAIL_SHIPMENT_TRACKING_EVENT,{componentName:'MNCommerceShippingMercuryShareAttachment.react',componentLoader:c('JSResource')('MNCommerceShippingMercuryShareAttachment.react').__setRef('MercuryShareStyleMap'),cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d _205d"]])});i.set(c('StoryAttachmentStyle').RETAIL_NOW_IN_STOCK,{componentName:'MNCommerceProductSubscriptionMercuryShareAttachment.react',componentLoader:c('JSResource')('MNCommerceProductSubscriptionMercuryShareAttachment.react').__setRef('MercuryShareStyleMap'),cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d _205d"]])});i.set(c('StoryAttachmentStyle').RETAIL_PROMOTION,{componentName:'MNCommercePromotionMercuryShareAttachment.react',componentLoader:c('JSResource')('MNCommercePromotionMercuryShareAttachment.react').__setRef('MercuryShareStyleMap'),cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d _205d _28rg"]])});if(c('MercuryConfig').MessengerGamesGK){i.set(c('StoryAttachmentStyle').INSTANT_GAMES_SHARE_MESSAGE,{componentName:'MessengerGamesShareAttachment.react',componentLoader:c('JSResource')('MessengerGamesShareAttachment.react').__setRef('MercuryShareStyleMap'),cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d _205d _28rg"]])});i.set(c('StoryAttachmentStyle').INSTANT_GAMES_SHARE_SCORE_MESSAGE,{componentName:'MessengerGamesShareAttachment.react',componentLoader:c('JSResource')('MessengerGamesShareAttachment.react').__setRef('MercuryShareStyleMap'),cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d _205d _28rg"]])});}i.set(c('StoryAttachmentStyle').RETAIL_ITEM,{componentName:'MNCommercePromotionMercuryShareAttachment.react',componentLoader:c('JSResource')('MNCommercePromotionMercuryShareAttachment.react').__setRef('MercuryShareStyleMap'),cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d _205d _28rg"]])});i.set(c('StoryAttachmentStyle').BUSINESS_MESSAGE_ITEMS,{componentName:'MNCommercePromotionMercuryShareAttachment.react',componentLoader:c('JSResource')('MNCommercePromotionMercuryShareAttachment.react').__setRef('MercuryShareStyleMap'),getSnippetComponent:function l(){return (c('MercuryPromotionShareAttachmentSnippet.react'));},cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d _205d _28rg"]])});i.set(c('StoryAttachmentStyle').H_SCROLL,{componentName:'MNCommerceHScrollMessageAttachment.react',componentLoader:c('JSResource')('MNCommerceHScrollMessageAttachment.react').__setRef('MercuryShareStyleMap'),getSnippetComponent:function l(){return (c('MercuryPromotionShareAttachmentSnippet.react'));},cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d _205d _8ka"]])});if(c('MercuryConfig').WWWMessengerVListGK){i.set(c('StoryAttachmentStyle').MESSENGER_PLATFORM_COMPACT_ITEM,{componentName:'MessengerPlatformVerticalListItemAttachment.react',componentLoader:c('JSResource')('MessengerPlatformVerticalListItemAttachment.react').__setRef('MercuryShareStyleMap'),getSnippetComponent:function l(){return c('MercuryPromotionShareAttachmentSnippet.react');},cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_205d _28rg"]])});i.set(c('StoryAttachmentStyle').MESSENGER_PLATFORM_COVER_ITEM,{componentName:'MessengerPlatformVerticalListItemAttachment.react',componentLoader:c('JSResource')('MessengerPlatformVerticalListItemAttachment.react').__setRef('MercuryShareStyleMap'),getSnippetComponent:function l(){return c('MercuryPromotionShareAttachmentSnippet.react');},cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_205d _28rg"]])});i.set(c('StoryAttachmentStyle').MESSENGER_PLATFORM_BUTTON_LIST,{componentName:'MNCommercePromotionMercuryShareAttachment.react',componentLoader:c('JSResource')('MNCommercePromotionMercuryShareAttachment.react').__setRef('MercuryShareStyleMap'),getSnippetComponent:function l(){return (c('MercuryPromotionShareAttachmentSnippet.react'));},cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_205d _28rg"]])});i.set(c('StoryAttachmentStyle').VERTICAL_ATTACHMENT_LIST,{componentName:'MessengerPlatformVerticalListAttachment.react',componentLoader:c('JSResource')('MessengerPlatformVerticalListAttachment.react').__setRef('MercuryShareStyleMap'),getSnippetComponent:function l(){return (c('MercuryPromotionShareAttachmentSnippet.react'));},cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_205d"]])});}}if(c('MercuryConfig').WWWMessengerTransportationGK){i.set(c('StoryAttachmentStyle').RIDE_ORDERED,{componentName:'MNTransportationRideConfirmationMercuryAttachment.react',componentLoader:c('JSResource')('MNTransportationRideConfirmationMercuryAttachment.react').__setRef('MercuryShareStyleMap'),getSnippetComponent:function l(){return c('MercuryPromotionShareAttachmentSnippet.react');},cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d _205d"]])});i.set(c('StoryAttachmentStyle').RIDE_RECEIPT,{componentName:'MNTransportationRideReceiptMercuryAttachment.react',componentLoader:c('JSResource')('MNTransportationRideReceiptMercuryAttachment.react').__setRef('MercuryShareStyleMap'),getSnippetComponent:function l(){return c('MercuryPromotionShareAttachmentSnippet.react');},cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d _205d"]])});}if(c('MercuryConfig').WWWMessengerAirlinesGK){i.set(c('StoryAttachmentStyle').AIRLINE_UPDATE,{componentName:'MNAirlineUpdateMercuryAttachment.react',componentLoader:c('JSResource')('MNAirlineUpdateMercuryAttachment.react').__setRef('MercuryShareStyleMap'),cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d _205d _8kb"]])});i.set(c('StoryAttachmentStyle').AIRLINE_ITINERARY,{componentName:'MNAirlineItineraryMercuryAttachment.react',componentLoader:c('JSResource')('MNAirlineItineraryMercuryAttachment.react').__setRef('MercuryShareStyleMap'),cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d _205d _8kb"]])});i.set(c('StoryAttachmentStyle').AIRLINE_CHECKIN_REMINDER,{componentName:'MNAirlineCheckInMercuryAttachment.react',componentLoader:c('JSResource')('MNAirlineCheckInMercuryAttachment.react').__setRef('MercuryShareStyleMap'),cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d _205d _8kb"]])});i.set(c('StoryAttachmentStyle').AIRLINE_BOARDING_PASS,{componentName:'MNAirlineBoardingPassMercuryAttachment.react',componentLoader:c('JSResource')('MNAirlineBoardingPassMercuryAttachment.react').__setRef('MercuryShareStyleMap'),cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d _205d _8kb"]])});}if(c('MercuryConfig').WWWMessengerMoneyPennyGK)i.set(c('StoryAttachmentStyle').RETAIL_AGENT_ITEM_SUGGESTION,{componentName:'MNCommerceAgentItemSuggestionMercuryShareAttachment.react',componentLoader:c('JSResource')('MNCommerceAgentItemSuggestionMercuryShareAttachment.react').__setRef('MercuryShareStyleMap'),cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d _205d"]])});if(c('MercuryConfig').MomentsMessengerWWWGK){var j={componentName:'MessengerMomentsAppShareAttachment.react',componentLoader:c('JSResource')('MessengerMomentsAppShareAttachment.react').__setRef('MercuryShareStyleMap'),getSnippetComponent:function l(){return c('MessengerMomentsAppSnippet.react');},cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d"]])};i.set(c('StoryAttachmentStyle').MOMENTS_APP_INVITATION,j);i.set(c('StoryAttachmentStyle').MOMENTS_APP_PHOTO_REQUEST,j);}if(c('MercuryConfig').MercuryGenieRendering)i.set(c('StoryAttachmentStyle').GENIE_MESSAGE,{componentName:'GenieMessageShareAttachment.react',componentLoader:c('JSResource')('GenieMessageShareAttachment.react').__setRef('MercuryShareStyleMap'),cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_2wrf"]]),getSnippetComponent:function l(){return c('MercuryFallbackShareAttachmentSnippet.react');}});if(c('MercuryConfig').MessengerEnhancedLinkShare)i.set(c('StoryAttachmentStyle').ENHANCED_LINK_REDDIT_POST,{componentName:'MercuryRedditPostShareAttachment.react',componentLoader:c('JSResource')('MercuryRedditPostShareAttachment.react').__setRef('MercuryShareStyleMap'),getSnippetComponent:function l(){return c('MercuryFallbackShareAttachmentSnippet.react');}});i.set(c('StoryAttachmentStyle').MOVIE_BOT_MOVIE_LIST,{componentName:'MovieBotMovieListShareAttachment.react',componentLoader:c('JSResource')('MovieBotMovieListShareAttachment.react').__setRef('MercuryShareStyleMap'),cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d"]])});i.set(c('StoryAttachmentStyle').MOVIE_BOT_MOVIE_SHOWTIME_LIST,{componentName:'MovieBotMovieShowtimeListShareAttachment.react',componentLoader:c('JSResource')('MovieBotMovieShowtimeListShareAttachment.react').__setRef('MercuryShareStyleMap'),cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d"]])});i.set(c('StoryAttachmentStyle').SHARE_LARGE_IMAGE,{componentName:'MercuryShareLargeImageAttachment.react',componentLoader:c('JSResource')('MercuryShareLargeImageAttachment.react').__setRef('MercuryShareStyleMap'),getSnippetComponent:function l(){return c('MercuryPhotoShareSnippet.react');},cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d"]]),unwrapInStory:c('emptyFunction').thatReturnsTrue});i.set(c('StoryAttachmentStyle').IMAGE_SHARE,{componentName:'MercuryImageShareAttachment.react',componentLoader:c('JSResource')('MercuryImageShareAttachment.react').__setRef('MercuryShareStyleMap'),getSnippetComponent:function l(){return c('MercuryPhotoShareSnippet.react');},unwrapInStory:c('emptyFunction').thatReturnsTrue});if(c('MercuryConfig').MessengerSharedVideoNewDesign){i.set(c('StoryAttachmentStyle').VIDEO,{componentName:'MercuryVideoShareAttachment.react',componentLoader:c('JSResource')('MercuryVideoShareAttachment.react').__setRef('MercuryShareStyleMap'),getSnippetComponent:function l(){return c('MercuryVideoShareSnippet.react');},cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_3duc"]]),unwrapInStory:c('emptyFunction').thatReturnsTrue});}else i.set(c('StoryAttachmentStyle').VIDEO,{componentName:'MercuryVideoShareAttachment.react',componentLoader:c('JSResource')('MercuryVideoShareAttachment.react').__setRef('MercuryShareStyleMap'),getSnippetComponent:function l(){return c('MercuryVideoShareSnippet.react');},unwrapInStory:c('emptyFunction').thatReturnsTrue});i.set(c('StoryAttachmentStyle').MESSAGE_LOCATION,{componentName:'MercuryMessageLocationShareAttachment.react',componentLoader:c('JSResource')('MercuryMessageLocationShareAttachment.react').__setRef('MercuryShareStyleMap'),getSnippetComponent:function l(){return c('MercuryMessageLocationShareAttachmentSnippet.react');},cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d"]])});i.set(c('StoryAttachmentStyle').MESSAGE_LIVE_LOCATION,{componentName:'MercuryMessageLiveLocationShareAttachment.react',componentLoader:c('JSResource')('MercuryMessageLiveLocationShareAttachment.react').__setRef('MercuryShareStyleMap'),getSnippetComponent:function l(){return c('MercuryMessageLiveLocationShareAttachmentSnippet.react');},cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d"]])});i.set(c('StoryAttachmentStyle').ANIMATED_IMAGE_SHARE,{componentName:'MercuryAnimatedShareAttachment.react',componentLoader:c('JSResource')('MercuryAnimatedShareAttachment.react').__setRef('MercuryShareStyleMap'),getSnippetComponent:function l(){return c('MercuryAnimatedShareSnippet.react');},unwrapInStory:c('emptyFunction').thatReturnsFalse});i.set(c('StoryAttachmentStyle').GROUP_SELL_PRODUCT_ITEM,{componentName:'MercurySaleGroupProductItemShareAttachment.react',componentLoader:c('JSResource')('MercurySaleGroupProductItemShareAttachment.react').__setRef('MercuryShareStyleMap'),getSnippetComponent:function l(){return c('MercurySaleGroupProductItemShareSnippet.react');},cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d"]]),unwrapInStory:c('emptyFunction').thatReturnsTrue});i.set(c('StoryAttachmentStyle').COMMERCE_PRODUCT_ITEM,{componentName:'MercuryCommerceProductItemShareAttachment.react',componentLoader:c('JSResource')('MercuryCommerceProductItemShareAttachment.react').__setRef('MercuryShareStyleMap'),getSnippetComponent:function l(){return c('MercuryFallbackShareAttachmentSnippet.react');},cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d"]]),unwrapInStory:c('emptyFunction').thatReturnsTrue});i.set(c('StoryAttachmentStyle').TRANSACTION_INVOICE,{componentName:'MercuryTransactionInvoiceShareAttachment.react',componentLoader:c('JSResource')('MercuryTransactionInvoiceShareAttachment.react').__setRef('MercuryShareStyleMap'),getSnippetComponent:function l(){return c('MercuryTransactionInvoiceShareSnippet.react');},cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d"]]),unwrapInStory:c('emptyFunction').thatReturnsTrue});i.set(c('StoryAttachmentStyle').FINANCIAL_BILL_PAYMENT_REQUEST,{componentName:'MNBillPaymentRequestMercuryShareAttachment.react',componentLoader:c('JSResource')('MNBillPaymentRequestMercuryShareAttachment.react').__setRef('MercuryShareStyleMap'),cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d _205d"]])});i.set(c('StoryAttachmentStyle').MUSIC_AGGREGATION,{componentName:'MercuryMusicAttachment.react',componentLoader:c('JSResource')('MercuryMusicAttachment.react').__setRef('MercuryShareStyleMap'),cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d"]])});i.set(c('StoryAttachmentStyle').VIDEO_SHARE_YOUTUBE,{componentName:'MercuryVideoShareYoutubeAttachment.react',componentLoader:c('JSResource')('MercuryVideoShareYoutubeAttachment.react').__setRef('MercuryShareStyleMap'),cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d"]])});i.set(c('StoryAttachmentStyle').RTC_CALL_LOG,{componentName:'MercuryRTCShareAttachment.react',componentLoader:c('JSResource')('MercuryRTCShareAttachment.react').__setRef('MercuryShareStyleMap')});i.set(c('StoryAttachmentStyle').FUNDRAISER_PERSON_TO_CHARITY,{componentName:'MercuryFundraiserPTCAttachment.react',componentLoader:c('JSResource')('MercuryFundraiserPTCAttachment.react').__setRef('MercuryShareStyleMap'),getSnippetComponent:function l(){return c('MercuryFundraiserPTCShareSnippet.react');}});i.set(c('StoryAttachmentStyle').MESSENGER_TEAM_BOT_SHARE,{componentName:'MessengerTeamBotShareAttachment.react',componentLoader:c('JSResource')('MessengerTeamBotShareAttachment.react').__setRef('MercuryShareStyleMap')});i.set(c('StoryAttachmentStyle').MESSENGER_INVITE,{componentName:'MercuryMessengerInviteShareAttachment.react',componentLoader:c('JSResource')('MercuryMessengerInviteShareAttachment.react').__setRef('MercuryShareStyleMap'),cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_3thf"]]),getSnippetComponent:function l(){return c('MercuryMessengerInviteShareAttachmentSnippet.react');},unwrapInStory:c('emptyFunction').thatReturnsTrue});i.set(c('StoryAttachmentStyle').NATIVE_COMPONENT_FLOW_BOOKING_REQUEST,{componentName:'PagesPlatformRequestMercuryShareAttachmentContainer.react',componentLoader:c('JSResource')('PagesPlatformRequestMercuryShareAttachmentContainer.react').__setRef('MercuryShareStyleMap'),cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d"]]),unwrapInStory:c('emptyFunction').thatReturnsTrue});i.set(c('StoryAttachmentStyle').PAGES_PLATFORM_BOOKING_MESSAGE,{componentName:'PagesPlatformBookingMessageAttachment.react',componentLoader:c('JSResource')('PagesPlatformBookingMessageAttachment.react').__setRef('MercuryShareStyleMap'),cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d"]]),unwrapInStory:c('emptyFunction').thatReturnsTrue});i.set(c('StoryAttachmentStyle').FRIEND_REQUEST,{componentName:'MercuryMessengerFriendRequestAttachment.react',componentLoader:c('JSResource')('MercuryMessengerFriendRequestAttachment.react').__setRef('MercuryShareStyleMap'),cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d"]]),unwrapInStory:c('emptyFunction').thatReturnsTrue});i.set(c('StoryAttachmentStyle').PAGES_PLATFORM_LEAD_GEN,{componentName:'PagesPlatformLeadGenMercuryShareAttachmentContainer.react',componentLoader:c('JSResource')('PagesPlatformLeadGenMercuryShareAttachmentContainer.react').__setRef('MercuryShareStyleMap'),cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_b4_"]]),unwrapInStory:c('emptyFunction').thatReturnsTrue});if(c('MercuryConfig').WWWEventRemindersXMA)i.set(c('StoryAttachmentStyle').EVENT_REMINDER,{componentName:'MercuryLightweightEventShareAttachment.react',componentLoader:c('JSResource')('MercuryLightweightEventShareAttachment.react').__setRef('MercuryShareStyleMap'),cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d"]])});var k={getStyleFactory:function l(m){if(!m||!m.style_list)return null;if(m.style_list[0]===c('StoryAttachmentStyle').ATTACHED_STORY){var n=m.subattachments,o=n&&n.length?n[0].style_list:[],p=o.length?this._getStyleMapEntry(o):null,q=n[0];if(Array.isArray(o)&&o.find(function(t){return t===c('StoryAttachmentStyle').VIDEO;})){var r={video_title:m.title,description:m.description,source:m.source};q=Object.assign({},n[0],r);}if(p&&p.unwrapInStory&&p.unwrapInStory())return {attachment:q,factory:p};}var s=this._getStyleMapEntry(m.style_list);if(!s)return null;return {attachment:m,factory:s};},_getStyleMapEntry:function l(m){for(var n=0;n<m.length;n++){var o=i.get(m[n]);if(o)return o;}return null;}};f.exports=k;}),null);
__d('MercuryShareAttachmentSnippet.react',['MercuryShareAttachmentReactShape','MercuryShareStyleMap','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.prototype.render=function(){var l=c('MercuryShareStyleMap').getStyleFactory(this.props.attachment);if(l.factory&&!!l.factory.getSnippetComponent){var m=l.factory.getSnippetComponent();return (c('React').createElement(m,babelHelpers['extends']({},this.props,{attachment:l.attachment})));}return null;};function k(){h.apply(this,arguments);}k.propTypes={attachment:c('MercuryShareAttachmentReactShape'),isSenderViewer:j.bool,senderName:j.oneOfType([j.string,j.object])};f.exports=k;}),null);
__d('MercuryAttachmentSnippet.react',['cx','ix','fbt','EmoticonsList','Image.react','MercuryAttachment','MercuryAttachmentSnippetRenderer','MercuryAttachmentSnippetType','MercuryAttachmentType','MercuryConfig','MercuryIDs','MercuryShareAttachmentSnippet.react','MessengerTextWithEmoticons.react','MercuryParticipants','React','StickerConstants','TextWithEmoticons.react','joinClasses'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l;if(c.__markCompiled)c.__markCompiled();var m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;function n(){var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=l.constructor).call.apply(q,[this].concat(t)),this.$MercuryAttachmentSnippet6=function(v){return this.$MercuryAttachmentSnippet17(c('MercuryAttachmentSnippetRenderer').renderAttachmentSnippetText(c('MercuryAttachmentSnippetType').PHOTO,this.$MercuryAttachmentSnippet18,v,this.$MercuryAttachmentSnippet5));}.bind(this),this.$MercuryAttachmentSnippet7=function(v){return this.$MercuryAttachmentSnippet17(c('MercuryAttachmentSnippetRenderer').renderAttachmentSnippetText(c('MercuryAttachmentSnippetType').GIF,this.$MercuryAttachmentSnippet18,v,this.$MercuryAttachmentSnippet5));}.bind(this),this.$MercuryAttachmentSnippet8=function(v){return this.$MercuryAttachmentSnippet17(c('MercuryAttachmentSnippetRenderer').renderAttachmentSnippetText(c('MercuryAttachmentSnippetType').VIDEO,this.$MercuryAttachmentSnippet18,v));}.bind(this),this.$MercuryAttachmentSnippet9=function(v){return this.$MercuryAttachmentSnippet17(c('MercuryAttachmentSnippetRenderer').renderAttachmentSnippetText(c('MercuryAttachmentSnippetType').AUDIO_CLIP,this.$MercuryAttachmentSnippet18,v));}.bind(this),this.$MercuryAttachmentSnippet15=function(v){return (c('React').createElement('span',null,c('MercuryAttachmentSnippetRenderer').renderAttachmentSnippetText(c('MercuryAttachmentSnippetType').THIRDPARTYSTICKER,this.$MercuryAttachmentSnippet18,v)));}.bind(this),this.$MercuryAttachmentSnippet10=function(v){var w=c('MercuryConfig').MessengerNewEmojiGK?c('React').createElement(c('MessengerTextWithEmoticons.react'),{renderEmoticons:true,text:c('EmoticonsList').symbols.like}):c('React').createElement(c('TextWithEmoticons.react'),{renderEmoticons:true,text:c('EmoticonsList').symbols.like});if(this.$MercuryAttachmentSnippet18){return (c('React').createElement('span',null,j._("You: {conversation_snippet}",[j.param('conversation_snippet',w)])));}else return this.props.thread.is_canonical?c('React').createElement('span',null,j._("{conversation_snippet}",[j.param('conversation_snippet',w)])):c('React').createElement('span',null,j._("{sender name}: {conversation_snippet}",[j.param('sender name',v),j.param('conversation_snippet',w)]));}.bind(this),this.$MercuryAttachmentSnippet11=function(v){return (c('React').createElement('span',null,c('MercuryAttachmentSnippetRenderer').renderAttachmentSnippetText(c('MercuryAttachmentSnippetType').STICKER,this.$MercuryAttachmentSnippet18,v)));}.bind(this),this.$MercuryAttachmentSnippet12=function(v){if(!!this.$MercuryAttachmentSnippet5[0].share)return (c('React').createElement(c('MercuryShareAttachmentSnippet.react'),{attachment:this.$MercuryAttachmentSnippet5[0].share,senderName:v,isViewerSender:this.$MercuryAttachmentSnippet18}));return this.$MercuryAttachmentSnippet17(c('MercuryAttachmentSnippetRenderer').renderAttachmentSnippetText(c('MercuryAttachmentSnippetType').SHARE,this.$MercuryAttachmentSnippet18,v));}.bind(this),this.$MercuryAttachmentSnippet13=function(v){return (c('React').createElement('span',null,c('MercuryAttachmentSnippetRenderer').renderAttachmentSnippetText(c('MercuryAttachmentSnippetType').GIFT,this.$MercuryAttachmentSnippet18,v)));}.bind(this),this.$MercuryAttachmentSnippet16=function(v){return (c('React').createElement('span',null,this.$MercuryAttachmentSnippet5.filter(function(w){return (w.attach_type===c('MercuryAttachmentType').FILE||w.attach_type===c('MercuryAttachmentType').PHOTO||w.attach_type===c('MercuryAttachmentType').VIDEO);}).map(function(w,x){return this.$MercuryAttachmentSnippet17(w.name,w.icon_type,x);}.bind(this))));}.bind(this),this.$MercuryAttachmentSnippet17=function(v,w,x){var y=c('MercuryAttachment').getAttachIconClass(w||this.$MercuryAttachmentSnippet5[0].icon_type),z=c('joinClasses')(y,"uiIconText _3l6h");return (c('React').createElement('span',{key:x},c('React').createElement('span',{className:z},c('React').createElement(c('Image.react'),{src:i('/images/messaging/docs/generic.png')})),v));}.bind(this),this.$MercuryAttachmentSnippet14=function(v){var w=c('MercuryAttachmentSnippetRenderer').renderAttachmentSnippetText(c('MercuryAttachmentSnippetType').ERROR,this.$MercuryAttachmentSnippet18,v);return this.$MercuryAttachmentSnippet17(w);}.bind(this),this.$MercuryAttachmentSnippet2=function(v){this.$MercuryAttachmentSnippet19=v.viewer;this.$MercuryAttachmentSnippet20=v.thread.snippet_sender;this.$MercuryAttachmentSnippet5=v.thread.snippet_attachments;this.$MercuryAttachmentSnippet18=p(this.$MercuryAttachmentSnippet20,this.$MercuryAttachmentSnippet19);}.bind(this),this.$MercuryAttachmentSnippet4=function(){if(!this.$MercuryAttachmentSnippet20||this.$MercuryAttachmentSnippet18)return null;var v=c('MercuryParticipants').getNow(this.$MercuryAttachmentSnippet20);if(!v)return null;var w=c('MercuryIDs').getUserIDFromParticipantID(this.$MercuryAttachmentSnippet20),x=this.props.thread.custom_nickname&&this.props.thread.custom_nickname[w];if(x&&c('MercuryConfig').MessengerNewEmojiGK)x=c('React').createElement(c('MessengerTextWithEmoticons.react'),{renderEmoticons:true,renderEmoji:true,text:x});return x?x:v.short_name;}.bind(this),this.$MercuryAttachmentSnippet1=function(v){if(!v)return;this.$MercuryAttachmentSnippet3();if(!c('MercuryParticipants').getNow(v))this.$MercuryAttachmentSnippet21=c('MercuryParticipants').get(v,function(w){return this.forceUpdate();}.bind(this));}.bind(this),this.$MercuryAttachmentSnippet3=function(){this.$MercuryAttachmentSnippet21&&this.$MercuryAttachmentSnippet21.remove();}.bind(this),r;}n.prototype.componentWillMount=function(){this.$MercuryAttachmentSnippet1(this.props.thread.snippet_sender);this.$MercuryAttachmentSnippet2(this.props);};n.prototype.componentWillReceiveProps=function(q){this.$MercuryAttachmentSnippet1(q.thread.snippet_sender);this.$MercuryAttachmentSnippet2(q);};n.prototype.componentWillUnmount=function(){this.$MercuryAttachmentSnippet3();};n.prototype.render=function(){var q=this.$MercuryAttachmentSnippet4(),r=c('MercuryAttachmentSnippetRenderer').getAttachmentSnippetType(this.$MercuryAttachmentSnippet5);switch(r){case c('MercuryAttachmentSnippetType').PHOTO:return this.$MercuryAttachmentSnippet6(q);case c('MercuryAttachmentSnippetType').GIF:return this.$MercuryAttachmentSnippet7(q);case c('MercuryAttachmentSnippetType').VIDEO:return this.$MercuryAttachmentSnippet8(q);case c('MercuryAttachmentSnippetType').AUDIO_CLIP:return this.$MercuryAttachmentSnippet9(q);case c('MercuryAttachmentSnippetType').LIKE_STICKER:return this.$MercuryAttachmentSnippet10(q);case c('MercuryAttachmentSnippetType').STICKER:return this.$MercuryAttachmentSnippet11(q);case c('MercuryAttachmentSnippetType').SHARE:return this.$MercuryAttachmentSnippet12(q);case c('MercuryAttachmentSnippetType').GIFT:return this.$MercuryAttachmentSnippet13(q);case c('MercuryAttachmentSnippetType').ERROR:return this.$MercuryAttachmentSnippet14(q);case c('MercuryAttachmentSnippetType').THIRDPARTYSTICKER:return this.$MercuryAttachmentSnippet15(q);default:return this.$MercuryAttachmentSnippet16(q);}};n.propTypes={thread:m.object.isRequired,viewer:m.string.isRequired};function o(q){return (q==c('StickerConstants').LIKE_STICKER_ID||q==c('StickerConstants').HOT_LIKE_SMALL_STICKER_ID||q==c('StickerConstants').HOT_LIKE_MEDIUM_STICKER_ID||q==c('StickerConstants').HOT_LIKE_LARGE_STICKER_ID);}function p(q,r){return !!(q&&c('MercuryIDs').getParticipantIDFromUserID(r)==q);}f.exports=n;}),null);
__d('MercuryParticipantsImage.react',['MercuryParticipants','React','SplitImage.react','areEqual'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'MercuryParticipantsImage',_bigImageToken:null,propTypes:{participants:h.array.isRequired,size:h.number},getInitialState:function j(){return {participantImages:[]};},componentDidMount:function j(){this._getParticipantImages(this.props);},componentWillReceiveProps:function j(k){this._getParticipantImages(k);},componentWillUnmount:function j(){this._bigImageToken&&this._bigImageToken.remove();},shouldComponentUpdate:function j(k,l){return (k.size!==this.props.size||!c('areEqual')(l.participantImages,this.state.participantImages));},render:function j(){if(this.state.participantImages.length>0)return (c('React').createElement(c('SplitImage.react'),{border:true,className:this.props.className,srcs:this.state.participantImages,size:this.props.size}));return null;},_getParticipantImages:function j(k){this._bigImageToken&&this._bigImageToken.remove();if(!k.participants||!k.participants.length){this.setState({participantImages:[]});}else this._bigImageToken=c('MercuryParticipants').getOrderedBigImageMulti(k.participants,function(l){this.isMounted()&&this.setState({participantImages:l});}.bind(this));}});f.exports=i;}),null);
__d('MercuryThreadImage.react',['ImmutableObject','MercuryIDs','MercuryParticipantsImage.react','MercuryParticipantsConstants','Pixelz.react','React','areEqual'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.prototype.shouldComponentUpdate=function(l,m){return (l.thread.image_src!==this.props.thread.image_src||!c('areEqual')(l.thread.participants,this.props.thread.participants)||l.size!==this.props.size||l.viewer!==this.props.viewer||l.useBackground!==this.props.useBackground);};k.prototype.render=function(){var l=this.props.size||c('MercuryParticipantsConstants').BIG_IMAGE_SIZE,m=this.props.thread.image_src;if(m){if(this.props.useBackground)return (c('React').createElement('div',{style:{height:l,backgroundImage:'url('+m+')',backgroundPosition:'50% 50%',backgroundRepeat:'no-repeat',backgroundSize:'cover',width:l}}));return (c('React').createElement(c('Pixelz.react'),{alt:'',height:l,resizeMode:'cover',src:m,width:l}));}var n=c('MercuryIDs').isCanonical(this.props.thread.thread_id),o=c('MercuryIDs').getParticipantIDFromUserID(this.props.viewer),p=[];if(this.props.thread.participants)p=n?this.props.thread.participants.filter(function(q){return q!==o;}):this.props.thread.participants.slice(0,3);if(p.length===0&&n)p.push(o);return (c('React').createElement(c('MercuryParticipantsImage.react'),{className:this.props.className,participants:p,size:l}));};function k(){h.apply(this,arguments);}k.propTypes={thread:j.instanceOf(c('ImmutableObject')).isRequired,viewer:j.string.isRequired,size:j.number,useBackground:j.bool};f.exports=k;}),null);
__d('MercuryShareAttachment.react',['cx','BootloadedComponent.react','DOM','Event','MercuryShareAttachmentReactShape','MercuryShareAttachmentRenderLocations','MercuryShareStyleMap','React','ReactDOM','emptyFunction','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$MercuryShareAttachment2=function(r,s){if(this.props.location===c('MercuryShareAttachmentRenderLocations').MESSENGER&&!this.props.isSubattachment)s=c('joinClasses')("_52mr _2poz _ui9",s);return s?c('React').createElement('div',{className:s},r):r;}.bind(this),this.$MercuryShareAttachment3=function(r){this.$MercuryShareAttachment1(r);c('DOM').scry(c('ReactDOM').findDOMNode(this),'img').forEach(function(s){var t=c('Event').listen(s,'load',function(){this.$MercuryShareAttachment1(s.height);t.remove();}.bind(this));}.bind(this));}.bind(this),this.$MercuryShareAttachment1=function(r){this.props.onComponentLoaded(r);}.bind(this),n;}l.prototype.componentDidMount=function(){this.$MercuryShareAttachment1();};l.prototype.render=function(){var m=c('MercuryShareStyleMap').getStyleFactory(this.props.attachment);if(!m)return null;var n=m.attachment,o=m.factory;return this.$MercuryShareAttachment2(c('React').createElement(c('BootloadedComponent.react'),babelHelpers['extends']({},this.props,{attachment:n,bootloadLoader:o.componentLoader,bootloadPlaceholder:c('React').createElement('div',null),module:o.componentName,onComponentLoad:this.$MercuryShareAttachment3})),o.cx&&o.cx.get(this.props.location));};l.propTypes={attachment:c('MercuryShareAttachmentReactShape'),isSponsored:k.bool,isSubattachment:k.bool,isVisible:k.bool,location:k.oneOf(c('MercuryShareAttachmentRenderLocations').getValues()),messageID:k.string,onComponentLoaded:k.func.isRequired,pageID:k.string,threadID:k.string.isRequired};l.defaultProps={onComponentLoaded:c('emptyFunction')};f.exports=l;}),null);
__d('MercuryOrderedThreadlist',['invariant','Bootloader','FBID','LogHistory','MercuryActionType','MercuryDispatcher','MercuryFilters','MercuryFolders','MercuryPayloadSource','MercuryServerRequests','MercurySingletonProvider','MercuryThreadIDMap','MessagingTag','PageMessageEnumTag','RangedCallbackManager','MercuryThreadInformer','MercuryThreads','arrayContains'],(function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('LogHistory').getInstance('ordered_threadlist_model'),j=c('MercuryFilters').getSupportedFilters().concat([c('MercuryFilters').ALL,c('MessagingTag').GROUPS]),k=c('MercuryFolders').getSupportedFolders().concat([c('MessagingTag').SPAM]);l.getForFBID=function(o){return n.getForFBID(o);};l.get=function(){return n.get();};function l(o){this.$MercuryOrderedThreadlist1=o;this.$MercuryOrderedThreadlist2=c('MercuryThreadIDMap').getForFBID(this.$MercuryOrderedThreadlist1);this.$MercuryOrderedThreadlist3=c('MercuryThreadInformer').getForFBID(this.$MercuryOrderedThreadlist1);this.$MercuryOrderedThreadlist4=c('MercuryThreads').getForFBID(this.$MercuryOrderedThreadlist1);this.$MercuryOrderedThreadlist5=c('MercuryDispatcher').getForFBID(this.$MercuryOrderedThreadlist1);this.$MercuryOrderedThreadlist6={};this.$MercuryOrderedThreadlist7();this.$MercuryOrderedThreadlist5.subscribe('update-threadlist',function(p,q){if(!m(q))return;var r=q.ordered_threadlists;if(r&&r.length){this.$MercuryOrderedThreadlist8(r);}else{var s=(q.actions||[]).filter(function(t){return t.thread_id;});this.$MercuryOrderedThreadlist9(q.threads||[]);this.$MercuryOrderedThreadlist10(s);}this.$MercuryOrderedThreadlist3.updatedThreadlist();}.bind(this));this.$MercuryOrderedThreadlist5.subscribe('invalidate-global-state',function(){return this.$MercuryOrderedThreadlist11();}.bind(this));}l.prototype.getThreadlistOrderMap=function(o,p){if(!this.$MercuryOrderedThreadlist6[o][p]){j=j.concat([p]);k.forEach(function(q){this.$MercuryOrderedThreadlist6[q][p]=new (c('RangedCallbackManager'))(function(r){var s=this.$MercuryOrderedThreadlist4.getThreadMetaNow(r);return s&&s.timestamp;}.bind(this),function(r,s){return s-r;},this.$MercuryOrderedThreadlist2.canLinkExternally.bind(this.$MercuryOrderedThreadlist2));}.bind(this));}return this.$MercuryOrderedThreadlist6[o][p];};l.prototype.getThreadlist=function(o,p,q,r,s,t){return this.getFilteredThreadlist(o,p,q,c('MercuryFilters').ALL,r,s,t);};l.prototype.getFilteredThreadlist=function(o,p,q,r,s,t,u){var v=this.getThreadlistOrderMap(q,r),w=v.executeOrEnqueue(o,p,s,t),x=v.getUnavailableResources(w),y=v.getError(o,p,t);if(x.length||y){if(v.getCurrentArraySize()<o){var z={start:o,limit:p,filter:r,resources_size:v.getCurrentArraySize()};i.warn('range_with_gap',JSON.stringify(z));}v.setError(false);this.getServerRequests().fetchThreadlistInfo(v.getCurrentArraySize(),x.length,q,r==c('MercuryFilters').ALL?null:r,u);}return w;};l.prototype.getServerRequests=function(){return c('MercuryServerRequests').getForFBID(this.$MercuryOrderedThreadlist1);};l.prototype.getThreadlistUntilTimestamp=function(o,p,q){q=q||c('MercuryFilters').ALL;return this.getThreadlistOrderMap(p,q).getElementsUntil(o);};l.prototype.getAvailableThreadlistNow=function(o,p){p=p||c('MercuryFilters').ALL;return this.getThreadlistOrderMap(o,p).getAllResources();};l.prototype.getThreadCount=function(o,p){p=p||c('MercuryFilters').ALL;return this.getThreadlistOrderMap(o,p).getCurrentArraySize();};l.prototype.hasLoadedThreadlist=function(o,p){p=p||c('MercuryFilters').ALL;return this.getThreadlistOrderMap(o,p).hasReachedEndOfArray();};l.prototype.unsubscribe=function(o,p,q){q=q||c('MercuryFilters').ALL;this.getThreadlistOrderMap(p,q).unsubscribe(o);};l.prototype.$MercuryOrderedThreadlist11=function(){this.$MercuryOrderedThreadlist6={};this.$MercuryOrderedThreadlist7();};l.prototype.$MercuryOrderedThreadlist7=function(){k.forEach(function(o){this.$MercuryOrderedThreadlist6[o]={};j.forEach(function(p){this.$MercuryOrderedThreadlist6[o][p]=new (c('RangedCallbackManager'))(function(q){var r=this.$MercuryOrderedThreadlist4.getThreadMetaNow(q);return r&&r.timestamp;}.bind(this),function(q,r){return r-q;},this.$MercuryOrderedThreadlist2.canLinkExternally.bind(this.$MercuryOrderedThreadlist2));}.bind(this));}.bind(this));};l.prototype.$MercuryOrderedThreadlist12=function(o,p,q){var r=this.$MercuryOrderedThreadlist4.getThreadMetaNow(o);return !!(r&&r.timestamp&&q&&p&&this.$MercuryOrderedThreadlist13(o)==p&&c('arrayContains')(this.$MercuryOrderedThreadlist14(o),q));};l.prototype.$MercuryOrderedThreadlist15=function(o,p,q){var r,s=this,t=[],u=false,v=false,w=(o||[]).filter(function(aa){var ba=aa.filter||c('MercuryFilters').ALL;return (aa.folder==p||!aa.folder&&p==c('MessagingTag').INBOX)&&ba==q;}),x=this.$MercuryOrderedThreadlist6[p][q].getAllResources(),y=void 0;w.forEach(function(aa){t=t.concat(aa.thread_ids);if(aa.error){if(aa.end>x.length)v=aa.error;}else{var ba=aa.end-aa.start;if(aa.thread_ids.length<ba)u=true;}if(!y||aa.end>y)y=aa.end;});this.$MercuryOrderedThreadlist16(t,p,q);if(u){this.$MercuryOrderedThreadlist6[p][q].setReachedEndOfArray();}else if(v){this.$MercuryOrderedThreadlist6[p][q].setError(v);}else{var z=this.$MercuryOrderedThreadlist6[p][q].getCurrentArraySize();if(y&&z<y)(function(){var aa={},ba=x.concat(t),ca=ba.filter(function(da){var ea=aa[da];aa[da]=true;return ea;});if(ca.length){i.warn('duplicate_threads',JSON.stringify({folder:p,expected_final_size:y,actual_final_size:z,duplicate_thread_ids:ca}));s.getServerRequests().fetchThreadlistInfo(y,ca.length,p,q==c('MercuryFilters').ALL?null:q);}})();}};l.prototype.$MercuryOrderedThreadlist8=function(o){k.forEach(function(p){j.forEach(function(q){this.$MercuryOrderedThreadlist15(o,p,q);}.bind(this));}.bind(this));};l.prototype.$MercuryOrderedThreadlist10=function(o){var p={},q=this.getThreadlistOrderMap(c('MessagingTag').INBOX,c('MercuryFilters').NONPRIORITY),r=this.$MercuryOrderedThreadlist4;k.forEach(function(s){p[s]={};j.forEach(function(t){p[s][t]={to_add:[],to_remove:[],to_remove_if_last_after_add:{}};});});o.forEach(function(s){if(s.is_forward)return;var t=s.thread_id;this.$MercuryOrderedThreadlist17(t,function(u){this.$MercuryOrderedThreadlist18(t,function(v){var w=function(){v.forEach(function(z){if(!c('arrayContains')(j,z))return;!!!u?h(0):void 0;p[u][z].to_add.push(t);if(!this.$MercuryOrderedThreadlist6[u][z].hasReachedEndOfArray()&&!this.$MercuryOrderedThreadlist6[u][z].hasResource(t))p[u][z].to_remove_if_last_after_add[t]=true;}.bind(this));}.bind(this);function x(z){!!!u?h(0):void 0;if(c('arrayContains')(j,z))if(c('arrayContains')(v,z)){p[u][z].to_add.push(t);}else p[u][z].to_remove.push(t);}function y(){c('Bootloader').loadModules(["PagesManagerMessagingPriorityStore"],function(z){if(c('arrayContains')(j,c('PageMessageEnumTag').IMPORTANT))if(c('arrayContains')(v,c('MercuryFilters').NONPRIORITY)){p[c('MessagingTag').INBOX][c('PageMessageEnumTag').IMPORTANT].to_remove.push(t);if(z.hasMorePriorityItem())return;var aa=q.getAllResources();if(!aa.length||!z.hasMoreNonPriorityItem()){p[c('MessagingTag').INBOX][c('MercuryFilters').NONPRIORITY].to_add.push(t);return;}var ba=r.getThreadMetaNow(aa[aa.length-1]),ca=r.getThreadMetaNow(t);if(!ba||!ca)return;var da=ba.timestamp,ea=ca.timestamp;if(da<=ea)p[c('MessagingTag').INBOX][c('MercuryFilters').NONPRIORITY].to_add.push(t);}else{p[c('MessagingTag').INBOX][c('MercuryFilters').NONPRIORITY].to_remove.push(t);p[c('MessagingTag').INBOX][c('PageMessageEnumTag').IMPORTANT].to_add.push(t);}},'MercuryOrderedThreadlist');}if(!u){if(s.action_type===c('MercuryActionType').CHANGE_FOLDER||s.action_type===c('MercuryActionType').CHANGE_ARCHIVED_STATUS)k.forEach(function(z){if(z!==u)j.forEach(function(aa){this.$MercuryOrderedThreadlist6[z][aa].removeResources([t]);}.bind(this));}.bind(this));return;}!!!u?h(0):void 0;switch(s.action_type){case c('MercuryActionType').DELETE_THREAD:v.forEach(function(z){if(!c('arrayContains')(j,z))return;p[u][z].to_remove.push(t);});break;case c('MercuryActionType').CHANGE_ARCHIVED_STATUS:case c('MercuryActionType').CHANGE_FOLDER:w();break;case c('MercuryActionType').CHANGE_READ_STATUS:x(c('MessagingTag').UNREAD);break;case c('MercuryActionType').USER_GENERATED_MESSAGE:case c('MercuryActionType').LOG_MESSAGE:v.forEach(function(z){if(!c('arrayContains')(j,z))return;if(this.$MercuryOrderedThreadlist12(t,u,z))p[u][z].to_add.push(t);}.bind(this));break;case c('MercuryActionType').CHANGE_FLAG:x(c('PageMessageEnumTag').FLAG);break;case c('MercuryActionType').UPDATE_PRIORITY:if(c('arrayContains')(j,c('PageMessageEnumTag').IMPORTANT))y();break;}}.bind(this));}.bind(this));}.bind(this));k.forEach(function(s){j.forEach(function(t){var u=this.$MercuryOrderedThreadlist6[s][t];this.$MercuryOrderedThreadlist16(p[s][t].to_add,s,t);for(var v=u.getCurrentArraySize()-1;v>=0;v--){var w=u.getResourceAtIndex(v);if(!p[s][t].to_remove_if_last_after_add[w])break;p[s][t].to_remove.push(w);}u.removeResources(p[s][t].to_remove);}.bind(this));}.bind(this));};l.prototype.$MercuryOrderedThreadlist9=function(o){var p={};k.forEach(function(q){p[q]={};j.forEach(function(r){p[q][r]=[];});});o.forEach(function(q){this.$MercuryOrderedThreadlist17(q.thread_id,function(r){this.$MercuryOrderedThreadlist18(q.thread_id,function(s){if(r)s.forEach(function(t){if(this.$MercuryOrderedThreadlist12(q.thread_id,r,t))p[r][t].push(q.thread_id);}.bind(this));}.bind(this));}.bind(this));}.bind(this));k.forEach(function(q){j.forEach(function(r){if(p[q][r].length>0)this.$MercuryOrderedThreadlist16(p[q][r],q,r);}.bind(this));}.bind(this));};l.prototype.$MercuryOrderedThreadlist16=function(o,p,q){q=q||c('MercuryFilters').ALL;this.$MercuryOrderedThreadlist6[p][q].addResources(o);k.forEach(function(r){if(r!=p)this.$MercuryOrderedThreadlist6[r][q].removeResources(o);}.bind(this));};l.prototype.$MercuryOrderedThreadlist17=function(o,p){this.$MercuryOrderedThreadlist4.getThreadMeta(o,function(q){p(this.$MercuryOrderedThreadlist13(o,q));}.bind(this));};l.prototype.$MercuryOrderedThreadlist13=function(o,p){p=p||this.$MercuryOrderedThreadlist4.getThreadMetaNow(o);var q=null;if(!p){q='No thread metadata';}else if(!p.folder)q='No thread folder';if(q){var r={error:q,tid:o};i.warn('no_thread_folder',JSON.stringify(r));return null;}!!!p?h(0):void 0;var s=p.folder;if(p.is_archived)s=c('MessagingTag').ACTION_ARCHIVED;if(this.$MercuryOrderedThreadlist6[s]){return s;}else return null;};l.prototype.$MercuryOrderedThreadlist18=function(o,p){this.$MercuryOrderedThreadlist4.getThreadMeta(o,function(q){p(this.$MercuryOrderedThreadlist14(o,q));}.bind(this));};l.prototype.$MercuryOrderedThreadlist14=function(o,p){p=p||this.$MercuryOrderedThreadlist4.getThreadMetaNow(o);var q=[c('MercuryFilters').ALL];if(!p){var r={error:'no_thread_metadata',tid:o};i.warn('no_thread_metadata',JSON.stringify(r));return [];}if(p.unread_count)q.push(c('MessagingTag').UNREAD);if(!p.is_canonical)q.push(c('MessagingTag').GROUPS);var s=p.page_thread_info;if(s&&s.flagged)q.push(c('PageMessageEnumTag').FLAG);if(s)if(s.is_priority===true){q.push(c('PageMessageEnumTag').IMPORTANT);}else if(s.is_priority===false)q.push(c('MercuryFilters').NONPRIORITY);return q;};function m(o){switch(o.payload_source){case c('MercuryPayloadSource').CLIENT_CHANGE_ARCHIVED_STATUS:case c('MercuryPayloadSource').CLIENT_CHANGE_READ_STATUS:case c('MercuryPayloadSource').CLIENT_CHANGE_FOLDER:case c('MercuryPayloadSource').CLIENT_CHANNEL_MESSAGE:case c('MercuryPayloadSource').CLIENT_DELETE_MESSAGES:case c('MercuryPayloadSource').CLIENT_DELETE_THREAD:case c('MercuryPayloadSource').CLIENT_SEND_MESSAGE:case c('MercuryPayloadSource').SERVER_SEND_MESSAGE:case c('MercuryPayloadSource').SERVER_FETCH_THREADLIST_INFO:case c('MercuryPayloadSource').SERVER_THREAD_SYNC:case c('MercuryPayloadSource').SERVER_INVALIDATE_GLOBAL_STATE:return true;case c('MercuryPayloadSource').SERVER_INITIAL_DATA:return !!o.ordered_threadlists;default:return false;}}var n=new (c('MercurySingletonProvider'))(l);f.exports=l;}),null);
__d('DOMEmployeeLink',['cx','EmployeeLinkMatcher','EmployeeLinkRanges','JSXDOM','TransformTextToDOMMixin'],(function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={match:function j(k){if(!c('EmployeeLinkMatcher').isMatch(k))return false;var l=c('EmployeeLinkMatcher').match(k);return {startIndex:l.idx,endIndex:l.idx+l.lnk.length,element:this._element(l.lnk)};},_element:function j(k){var l=c('EmployeeLinkRanges').get(k);if(l.length==0)return k;return c('JSXDOM').a({className:"_553k",href:l[0].entity.url,target:'_blank',rel:'nofollow'},k);}};f.exports=Object.assign(i,c('TransformTextToDOMMixin'));}),null);
__d('DOMHyperlink',['cx','Env','JSXDOM','TransformTextToDOMMixin','UntrustedLink','URI','URLScraper','isFacebookURI'],(function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={MAX_ITEMS:40,match:function j(k,l){var m=c('URLScraper').match(k);if(!m)return false;var n=k.indexOf(m),o=n+m.length;return {startIndex:n,endIndex:o,element:this._element(m,l)};},_element:function j(k,l){var m=k,n=m.replace(/"/g,'%22');if(!/^[a-z][a-z0-9\-+.]+:\/\//i.test(k))n='http://'+n;if(!c('URI').isValidURI(n))return m;var o=c('JSXDOM').a({className:"_553k",href:n,target:"_blank",rel:"nofollow"},m);if(l&&!c('isFacebookURI')(new (c('URI'))(n)))o.onmousedown=function(p){c('UntrustedLink').bootstrap(this,c('Env').lhsh,p);};return o;}};f.exports=Object.assign(i,c('TransformTextToDOMMixin'));}),null);
__d('MercuryMessageRenderer',['DOM','DOMEmoji','DOMEmote','DOMEmployeeLink','DOMHyperlink','JSXDOM','URI','shouldAddMRefParam','transformTextToDOM'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={formatMessageBody:function l(m,n,o){var p=(m||'').replace(/\s+$/,'');if(!n)return k(p,false,o);var q=Object.keys(n).map(function(t){return window.parseInt(t);}).sort(function(t,u){return t-u;}),r=[],s=0;q.forEach(function(t){var u=p.slice(s,t);if(u)r.push(k(u,false,o));s=t+n[t].length;var v=p.slice(t,s);if(v)r.push(k(v,true,o));});if(s<p.length)r.push(k(p.slice(s),false,o));return r.length===0?null:r.length===1?r[0]:c('DOM').create('span',{},r);}};function i(l,m){var n=m(l);if(Array.isArray(n))n.forEach(function(o){if(o.href){var p=new (c('URI'))(o.href);if(c('shouldAddMRefParam')(p))o.href=p.addQueryData({__mref:'message'}).toString();}});return n;}function j(l,m){var n=l.replace(/\r\n?/g,'\n').split(/\n{2,}/);return n.filter(function(o){return o.length;}).map(function(o){return c('JSXDOM').p(null,i(o,m));});}function k(l,m,n){if(l.length===0&&!m)return null;var o=function p(q){return c('transformTextToDOM')(q,[c('DOMHyperlink').params(true),c('DOMEmoji'),c('DOMEmote'),c('DOMEmployeeLink')]);};return (c('JSXDOM').span({className:m?'highlight':null},n?j(l,o):i(l,o)));}f.exports=h;}),null);
__d('MercuryThreadSearchUtils',['escapeRegex','TokenizeUtil'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={wordsInString:function i(j){return (j||'').split(/\s+/).filter(function(k){return k.trim().length>0;});},anyMatchPredicate:function i(j,k){for(var l=0;l<j.length;l++)if(k(j[l]))return true;return false;},allMatchPredicate:function i(j,k){for(var l=0;l<j.length;l++)if(!k(j[l]))return false;return true;},queryWordMatchesAnyNameWord:function i(j,k){var l=new RegExp('^'+c('escapeRegex')(j),'i');return this.anyMatchPredicate(k,function(m){var n=c('TokenizeUtil').parse(m).flatValue;return l.test(n);});},queryMatchesName:function i(j,k){var l=this.wordsInString(j),m=this.wordsInString(k);return this.allMatchPredicate(l,function(n){return this.queryWordMatchesAnyNameWord(n,m);}.bind(this));}};f.exports=h;}),null);
__d('MercuryLocalThreadResults',['MercuryFolders','MercuryIDs','MercurySingletonMixin','MercuryOrderedThreadlist','MercuryParticipants','MercuryThreadSearchUtils','MercuryThreads'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){'use strict';this.$MercuryLocalThreadResults1=i;this.$MercuryLocalThreadResults2=c('MercuryOrderedThreadlist').getForFBID(this.$MercuryLocalThreadResults1);this.$MercuryLocalThreadResults3=c('MercuryThreads').getForFBID(this.$MercuryLocalThreadResults1);}h.prototype.findMatchingThreadsFromIds=function(i,j){'use strict';return j.filter(function(k){var l=this.$MercuryLocalThreadResults3.getThreadMetaNow(k);return this.$MercuryLocalThreadResults4(l,i);}.bind(this));};h.prototype.findMatchingThreads=function(i){'use strict';var j=[];c('MercuryFolders').getSupportedFolders().forEach(function(k){j=j.concat(this.$MercuryLocalThreadResults2.getThreadlistUntilTimestamp(0,k));}.bind(this));return this.findMatchingThreadsFromIds(i,j);};h.prototype.$MercuryLocalThreadResults4=function(i,j){'use strict';var k=this.$MercuryLocalThreadResults5(i.participants),l=c('MercuryThreadSearchUtils').wordsInString(j),m=null;c('MercuryParticipants').getMulti(k,function(n){m=k.map(function(o){return n[o];});});if(!m)return false;return c('MercuryThreadSearchUtils').allMatchPredicate(l,function(n){var o=c('MercuryThreadSearchUtils').anyMatchPredicate(m,function(q){return q&&q.name&&c('MercuryThreadSearchUtils').queryWordMatchesAnyNameWord(n,c('MercuryThreadSearchUtils').wordsInString(q.name));}),p=i.name&&c('MercuryThreadSearchUtils').queryWordMatchesAnyNameWord(n,c('MercuryThreadSearchUtils').wordsInString(i.name));return o||p;});};h.prototype.$MercuryLocalThreadResults5=function(i){'use strict';if(i.length===1&&c('MercuryIDs').tokenize(i[0]).value===this.$MercuryLocalThreadResults1)return i;return i.filter(function(j){var k=c('MercuryIDs').tokenize(j).value;return k!==this.$MercuryLocalThreadResults1;}.bind(this));};Object.assign(h,c('MercurySingletonMixin'));f.exports=h;}),null);
__d('MercurySearchSnippetResults',['CurrentEnvironment','MercuryAPIArgsSource','MercuryIDs','MercurySingletonMixin','MercuryThreadlistConstants','MercuryThreadIDMap','RangedCallbackManager','MercuryServerDispatcher','MercuryServerPayloadPreprocessor'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('CurrentEnvironment').messengerdotcom?c('MercuryAPIArgsSource').MESSENGER:c('MercuryAPIArgsSource').WEBMESSENGER,i={},j={},k=null,l=c('MercuryThreadlistConstants').WEBMESSENGER_SEARCH_SNIPPET_COUNT,m=c('MercuryThreadlistConstants').WEBMESSENGER_SEARCH_SNIPPET_LIMIT,n=c('MercuryThreadlistConstants').WEBMESSENGER_SEARCH_SNIPPET_MORE;function o(x){'use strict';this.$MercurySearchSnippetResults1=x;this.$MercurySearchSnippetResults2=c('MercuryServerPayloadPreprocessor').getForFBID(x);c('MercuryServerDispatcher').registerEndpoints({'/ajax/mercury/search_snippets.php':{request_user_id:x,mode:c('MercuryServerDispatcher').IMMEDIATE,handler:function(y){this.handleUpdate(y);}.bind(this)}});this.$MercurySearchSnippetResults3=c('MercuryThreadIDMap').getForFBID(x);}o.prototype.getFBID=function(){'use strict';return this.$MercurySearchSnippetResults1;};o.prototype.getThreadIDMap=function(){'use strict';return this.$MercurySearchSnippetResults3;};o.prototype.getAllThreadSearchResults=function(x,y){'use strict';if(x)p(this.$MercurySearchSnippetResults1,x,m,0,y);};o.prototype.getAllThreadSearchMoreResults=function(x,y){'use strict';if(x){var z=i[x];if(z){var aa=z.getCurrentArraySize();p(this.$MercurySearchSnippetResults1,x,n,aa,y);}}};o.prototype.getSingleThreadSearchResults=function(x,y,z){'use strict';if(!x||!y)return;q.call(this,x,y,l,0,z);};o.prototype.getSingleThreadSearchMoreResults=function(x,y,z){'use strict';if(!x||!y)return;if(!j[y])return;var aa=j[y][x];if(aa){var ba=aa.num_total_snippets,ca=aa.snippets_cbm.getCurrentArraySize(),da=ba-ca;if(da>0){var ea=da>n?n:da;q.call(this,x,y,ea,ca,z);}}};o.prototype.countSnippetsMatchingQueryInThread=function(x,y){'use strict';var z=j[y][x];if(z)return z.num_total_snippets;};o.prototype.findIndexOfSnippet=function(x,y,z,aa){'use strict';var ba=v(x,y),ca=ba.getAllResources();for(var da=0;da<ca.length;da++)if(z===ca[da].message_id)return da;};o.prototype.findSnippetAtIndex=function(x,y,z,aa){'use strict';s(x,y,z);t.call(this,x,y,z,aa);};o.prototype.handleUpdate=function(x){'use strict';if(x.mercury_payload)this.$MercurySearchSnippetResults2.handleUpdate(x.mercury_payload);var y=x.search_snippets||{};Object.keys(y).filter(function(na){return !!y[na];}).forEach(function(na){Object.keys(y[na]).forEach(function(oa){y[na][oa].snippets.forEach(function(pa){pa.matched_keywords=r(pa.matched_keywords);});});});var z=x.offset,aa=[];for(var ba in y){var ca=y[ba];for(var da in ca){var ea=ca[da],fa=x.other_user_fbid||x.thread_fbid,ga=this.$MercurySearchSnippetResults3.getClientIDFromServerIDNow(da),ha=ea.snippets,ia=v(ba,ga),ja=ia.getCurrentArraySize();if(!fa){aa.push(ga);if(ja)continue;}else if(z!=ja)continue;var ka=j[ga][ba];ka.num_total_snippets=ea.num_total_snippets;ia.addResourcesWithoutSorting(ha,ja);if(!fa||x.limit>ha.length)if(ia.getCurrentArraySize()==ka.num_total_snippets)ia.setReachedEndOfArray();}if(!fa){var la=u(ba),ma=la.getCurrentArraySize();if(z==ma){la.addResourcesWithoutSorting(aa,ma);if(x.limit>aa.length)la.setReachedEndOfArray();}}}};function p(x,y,z,aa,ba){if(k)if(!k.thread_id){var ca=u(k.query);ca.unsubscribe(k.subscriber_id);k=null;}var ca=u(y),da=aa+z,ea=ca.executeOrEnqueue(0,da,function(ha){var ia={};for(var ja=0;ja<ha.length;ja++){var ka=ha[ja],la=j[ka][y];ia[ka]={num_total_snippets:la.num_total_snippets,snippets:la.snippets_cbm.getAllResources()};}var ma=ca.hasReachedEndOfArray();ba(ia,ma);}),fa=ca.getUnavailableResources(ea);if(fa.length){k={query:y,thread_id:null,subscriber_id:ea};var ga={query:y,offset:aa,limit:z+1,snippetLimit:l};ga.identifier='thread_fbid';w(ga,x);}}function q(x,y,z,aa,ba){if(k)if(k.thread_id){var ca=v(k.query,k.thread_id);ca.unsubscribe(k.subscriber_id);k=null;}var ca=v(x,y),da=aa+z,ea=ca.executeOrEnqueue(0,da,function(){var ka=ca.getAllResources(),la=j[y][x].num_total_snippets;ba(ka,la);}),fa=ca.getUnavailableResources(ea);if(fa.length){k={query:x,thread_id:y,subscriber_id:ea};var ga={query:x,snippetOffset:aa,snippetLimit:z},ha=this.getThreadIDMap().getServerIDFromClientIDNow(y),ia=c('MercuryIDs').tokenize(y),ja=ia.type;if(ja=='user'){ga.other_user_fbid=ha;}else ga.thread_fbid=ha;ga.identifier='thread_fbid';w(ga,this.getFBID());}}function r(x){if(x instanceof Array){var y={};for(var z=0;z<x.length;z++)y[z.toString()]=x[z];return y;}else return x;}function s(x,y,z){}function t(x,y,z,aa){var ba=j[y][x],ca=ba.snippets_cbm.getAllResources(),da=ba.num_total_snippets,ea=ca.length;if(z<ea){aa(ca[z].message_id);return;}var fa=da-ea,ga=fa>n?n:fa;q.call(this,x,y,ga,ea,function(ha,ia){t.call(this,x,y,z,aa);});}function u(x){if(!i[x])i[x]=new (c('RangedCallbackManager'))();return i[x];}function v(x,y){if(!j[y])j[y]={};var z=j[y][x];if(!z){z={num_total_snippets:-1,snippets_cbm:new (c('RangedCallbackManager'))()};j[y][x]=z;}return z.snippets_cbm;}function w(x,y){x.client=h;c('MercuryServerDispatcher').trySend('/ajax/mercury/search_snippets.php',x,null,y);}Object.assign(o,c('MercurySingletonMixin'));f.exports=o;}),null);
__d('MercurySearchThreadResultOrderer',['MercurySingletonMixin','MessagingTag','MercuryThreads','createObjectFrom'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(l){'use strict';this.$MercurySearchThreadResultOrderer1=l;this.$MercurySearchThreadResultOrderer2=c('MercuryThreads').getForFBID(l);}h.prototype.separateCanonicalThreadsInFolder=function(l,m){'use strict';var n=[],o=[];l.forEach(function(p){var q=this.$MercurySearchThreadResultOrderer2.getThreadMetaNow(p);if(q.folder===m&&q.is_canonical){n.push(p);}else o.push(p);}.bind(this));return {canonical_in_folder:n.sort(function(p,q){return this.$MercurySearchThreadResultOrderer3(p,q);}.bind(this)),remaining:o};};h.prototype.filterThreadsInFolder=function(l,m){'use strict';var n=[];l.forEach(function(o){var p=this.$MercurySearchThreadResultOrderer2.getThreadMetaNow(o);if(p.folder===m&&p.is_archived===false){n.push(o);}else if(m===c('MessagingTag').ACTION_ARCHIVED&&p.is_archived===true)n.push(o);}.bind(this));return n;};h.prototype.orderResults=function(l,m,n,o){'use strict';var p=k(m,n),q=p.sort(this.$MercurySearchThreadResultOrderer4.bind(this,o));return k(l,q);};h.prototype.$MercurySearchThreadResultOrderer4=function(l,m,n){'use strict';var o=this.$MercurySearchThreadResultOrderer2.getThreadMetaNow(m),p=this.$MercurySearchThreadResultOrderer2.getThreadMetaNow(n),q=i(o),r=i(p);if(q!==r)return j(q,l)>j(r,l)?-1:1;if(o.is_canonical!==p.is_canonical)return o.is_canonical?-1:1;return this.$MercurySearchThreadResultOrderer3(m,n);};h.prototype.$MercurySearchThreadResultOrderer3=function(l,m){'use strict';var n=this.$MercurySearchThreadResultOrderer2.getThreadMetaNow(l),o=this.$MercurySearchThreadResultOrderer2.getThreadMetaNow(m);return n.timestamp>o.timestamp?-1:1;};function i(l){return l.is_archived?c('MessagingTag').ACTION_ARCHIVED:l.folder;}function j(l,m){if(l===m)return 5;var n={};n[c('MessagingTag').INBOX]=4;n[c('MessagingTag').ACTION_ARCHIVED]=3;n[c('MessagingTag').OTHER]=2;n[c('MessagingTag').SPAM]=1;return n[l];}function k(l,m){var n=c('createObjectFrom')(l),o=m.filter(function(p){return !(p in n);});return l.concat(o);}Object.assign(h,c('MercurySingletonMixin'));f.exports=h;}),null);
__d('MercurySearchThreadResults',['KeyedCallbackManager','MercuryAPIArgsSource','MercurySingletonMixin','MercuryThreadlistConstants','MercuryThreadIDMap','RangedCallbackManager','MercuryServerDispatcher','MercuryServerPayloadPreprocessor'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=new (c('KeyedCallbackManager'))(),i=c('MercuryThreadlistConstants').WEBMESSENGER_THREAD_COUNT,j=c('MercuryThreadlistConstants').WEBMESSENGER_MORE_COUNT;function k(l){'use strict';this.$MercurySearchThreadResults1=l;this.$MercurySearchThreadResults2=c('MercuryServerPayloadPreprocessor').getForFBID(this.$MercurySearchThreadResults1);this.$MercurySearchThreadResults3=c('MercuryThreadIDMap').getForFBID(this.$MercurySearchThreadResults1);c('MercuryServerDispatcher').registerEndpoints({'/ajax/mercury/search_threads.php':{request_user_id:l,mode:c('MercuryServerDispatcher').IMMEDIATE,handler:function(m){this.handleUpdate(m);}.bind(this)}});}k.prototype.getThreadlist=function(l,m){'use strict';if(l){var n=h.executeOrEnqueue(l,function(q){var r=q.getAllResources(),s=q.hasReachedEndOfArray();m(r,s);}),o=h.getUnavailableResources(n),p=c('MercuryAPIArgsSource').WEBMESSENGER;if(o.length)this.$MercurySearchThreadResults4({client:p,query:l,offset:0,limit:i+1});return n;}};k.prototype.isExhausted=function(l){'use strict';var m=h.getResource(l);return m?m.hasReachedEndOfArray():false;};k.prototype.getCachedThreadlist=function(l){'use strict';var m=h.getResource(l);return m?m.getAllResources():null;};k.prototype.cacheThreadlist=function(l,m){'use strict';h.getResource(l);var n=new (c('RangedCallbackManager'))();n.addResourcesWithoutSorting(m,0);n.setReachedEndOfArray();h.setResource(l,n);};k.prototype.getMoreThreadlist=function(l,m){'use strict';if(l){var n=h.getResource(l);if(n){var o=n.getCurrentArraySize(),p=j,q=n.executeOrEnqueue(0,o+p,function(){var s=n.getAllResources(),t=n.hasReachedEndOfArray();m(s,t);}),r=n.getUnavailableResources(q);if(r.length)this.$MercurySearchThreadResults4({query:l,offset:o,limit:p+1});return q;}}};k.prototype.handleUpdate=function(l){'use strict';if(l.mercury_payload)this.$MercurySearchThreadResults2.handleUpdate(l.mercury_payload);var m=l.search_threads||{};for(var n in m){var o=m[n]||[],p=o.map(function(r){return this.$MercurySearchThreadResults3.getClientIDFromServerIDNow(r);}.bind(this)),q=h.getResource(n);if(q){this.$MercurySearchThreadResults5(q,p,j+1);}else{q=new (c('RangedCallbackManager'))();this.$MercurySearchThreadResults5(q,p,i+1);h.setResource(n,q);}}};k.prototype.unsubscribe=function(l,m){'use strict';if(m){var n=h.getResource(m);if(n){n.unsubscribe(l);}else h.unsubscribe(l);}};k.prototype.setInitialCount=function(l){'use strict';i=l;};k.prototype.$MercurySearchThreadResults5=function(l,m,n){'use strict';var o=l.getCurrentArraySize(),p=m.length<n;if(!p)m.pop();l.addResourcesWithoutSorting(m,o);if(p)l.setReachedEndOfArray();};k.prototype.$MercurySearchThreadResults4=function(l){'use strict';l.client=c('MercuryAPIArgsSource').WEBMESSENGER;l.index='fbid';c('MercuryServerDispatcher').trySend('/ajax/mercury/search_threads.php',l,null,this.$MercurySearchThreadResults1);};Object.assign(k,c('MercurySingletonMixin'));f.exports=k;}),null);
__d('MercurySearchThreadsStrategy',['WebMessengerConstants','MercuryLocalThreadResults','MercurySingletonMixin','MercurySearchThreadResults','createObjectFrom'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=null,i=null,j=c('WebMessengerConstants').SEARCH_THREAD_DELAY;function k(l){'use strict';this.$MercurySearchThreadsStrategy1=l;this.$MercurySearchThreadsStrategy2=c('MercuryLocalThreadResults').getForFBID(this.$MercurySearchThreadsStrategy1);this.$MercurySearchThreadsStrategy3=c('MercurySearchThreadResults').getForFBID(this.$MercurySearchThreadsStrategy1);}k.prototype.clearTimer=function(){'use strict';h=null;clearTimeout(i);i=null;};k.prototype.search=function(l,m,n,o){'use strict';if(l!=h){h=l;clearTimeout(i);i=null;}var p=this.$MercurySearchThreadsStrategy2.findMatchingThreads(l),q=this.$MercurySearchThreadsStrategy3.getCachedThreadlist(l);if(q){var r=this.$MercurySearchThreadsStrategy4(p,q);m(r);n([],this.$MercurySearchThreadsStrategy3.isExhausted(l));o(null,l);return;}var s=this.$MercurySearchThreadsStrategy5(l),t=this.$MercurySearchThreadsStrategy4(p,s.thread_ids);if(s.from_exhausted_remote_results){this.$MercurySearchThreadsStrategy3.cacheThreadlist(l,t);m(t);n([],true);o(null,l);return;}m(t);i=setTimeout(function(){var u=this.$MercurySearchThreadsStrategy3.getThreadlist(l,n);o(u,l);}.bind(this),j);};k.prototype.$MercurySearchThreadsStrategy5=function(l){'use strict';var m='',n=[];for(var o=l.length-1;o>0;o--){var p=l.slice(0,o),q=this.$MercurySearchThreadsStrategy3.getCachedThreadlist(p);if(!q)continue;if(this.$MercurySearchThreadsStrategy3.isExhausted(p)){return {from_exhausted_remote_results:true,thread_ids:this.$MercurySearchThreadsStrategy2.findMatchingThreadsFromIds(l,q)};}else if(m.length===0){m=p;n=this.$MercurySearchThreadsStrategy2.findMatchingThreadsFromIds(l,q);}}return {from_exhausted_remote_results:false,thread_ids:n};};k.prototype.$MercurySearchThreadsStrategy4=function(l,m){'use strict';return Object.keys(babelHelpers['extends']({},c('createObjectFrom')(l),c('createObjectFrom')(m)));};Object.assign(k,c('MercurySingletonMixin'));f.exports=k;}),null);
__d('MNAdsLogMessageUtils',['MercuryConfig','MessagingTag','MessengerAdsWebTypedLogger','MNAdsLoggerEventEnum','AdPageMessageTypeEnum'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('MercuryConfig').LOG_INTERVAL_MS||60000;function i(){this.$MNAdsLogMessageUtils1={};}i.prototype.isLoggedWithinInterval=function(j){if(this.$MNAdsLogMessageUtils1[j]&&this.$MNAdsLogMessageUtils1[j]-Date.now()<h)return true;return false;};i.prototype.setLoggingTime=function(j){this.$MNAdsLogMessageUtils1[j]=Date.now();};i.prototype.logAdsThreadListImpression=function(j){switch(j.folder){case c('MessagingTag').INBOX:this.logWithThreadMetaData(j,c('MNAdsLoggerEventEnum').MESSAGE_SEEN_INBOX);break;case c('MessagingTag').PENDING:this.logWithThreadMetaData(j,c('MNAdsLoggerEventEnum').MESSAGE_SEEN_REQUEST);break;default:return;}};i.prototype.logWithThreadMetaData=function(j,event){if(j.last_message_type!==c('AdPageMessageTypeEnum').NON_AD){var k=j.last_message_timestamp+String(event);if(!c('MercuryConfig').MercuryThreadListEnableImpressionLog||this.isLoggedWithinInterval(k))return;new (c('MessengerAdsWebTypedLogger'))().setEvent(event).setMessageTimestamp(j.last_message_timestamp).setPageID(j.other_user_fbid).log();this.setLoggingTime(k);}};f.exports=new i();}),null);
__d('MNAdsMessageUtils',['cx','fbt','AdPageMessageTypeEnum','Bootloader','FBJSON','Link.react','MercuryConfig','MercuryIDs','MessagingGenericAdminTextType','MessagingTag','MNCommerceDialogStateActions','MNCommercePromotionBlockDataManager','React','getPageIDFromThreadID'],(function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j='offsite_ad';k.prototype.isAdsMessageRequest=function(l){return l.folder==c('MessagingTag').PENDING&&l.last_message_type!==c('AdPageMessageTypeEnum').NON_AD;};k.prototype.renderAdsMessageRequestStatus=function(){var l=i._("Sponsored");return (c('React').createElement('span',null,l));};k.prototype.isAdsAdminMessage=function(l){return l&&l.log_message_data&&l.log_message_data.message_type&&l.log_message_data.message_type===c('MessagingGenericAdminTextType').AD_MANAGE_MESSAGE;};k.prototype.isOffsiteAd=function(l){if(l.log_message_data&&l.log_message_data.untypedData&&l.log_message_data.untypedData.ad_properties){var m=c('FBJSON').parse(l.log_message_data.untypedData.ad_properties);for(var n=m,o=Array.isArray(n),p=0,n=o?n:n[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var q;if(o){if(p>=n.length)break;q=n[p++];}else{p=n.next();if(p.done)break;q=p.value;}var r=q;if(r===j)return true;}}return false;};k.prototype.getadPreferencesUrl=function(l){if(l.log_message_data&&l.log_message_data.untypedData&&l.log_message_data.untypedData.ad_preferences_url)return l.log_message_data.untypedData.ad_preferences_url;return '';};k.prototype.getAdsPageManage=function(l,m){var n=null;if(c('MercuryConfig').WWWMessengerManageAdminGK){var o=function(){var p=this.isOffsiteAd(l),q=c('getPageIDFromThreadID')(l.thread_id);if(!q)q=c('MercuryIDs').getUserIDFromParticipantID(l.author);var r=this.getadPreferencesUrl(l),s=function t(u,v){return c('MNCommercePromotionBlockDataManager').block(u,v);};c('Bootloader').loadModules(["MNAdsMessagesManageBlockDialogContainer.react"],function(t){c('MNCommerceDialogStateActions').showDialog(t,{adPreferencesUrl:r,isOffsiteAd:p,onConfirmButtonClick:s,pageID:q});},'MNAdsMessageUtils');}.bind(this);n=c('React').createElement(c('Link.react'),{className:(!m?"_3kyk":'')+(m?' '+"_3kyl":''),onClick:o},i._("Manage"));return (c('React').createElement('span',{className:!m?"_3kym":''},l.log_message_body,' ','\u00B7',' ',n));}return (c('React').createElement('span',{className:!m?"_3kym":''},l.log_message_body));};function k(){}f.exports=new k();}),null);
__d("Autosize",["cx","CSS","DOM","Style"],(function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=['fontFamily','fontStyle','fontVariant','fontWeight','letterSpacing','textDecoration','textIndent','textTransform','whiteSpace','wordSpacing','wordWrap'],j=/^[0-9]+$/;function k(p){var q=p.cloneNode(true);c("CSS").addClass(q,"_4g");var r=p.clientWidth-c("Style").getFloat(p,'paddingLeft')-c("Style").getFloat(p,'paddingRight');c("Style").set(q,'width',r+'px');var s=p.clientHeight-c("Style").getFloat(p,'paddingTop')-c("Style").getFloat(p,'paddingBottom');c("Style").set(q,'height',s+'px');c("DOM").insertAfter(p,q);return q;}function l(p,q,r,s,t){var u=p.style.fontSize,v=p.style.height;c("Style").set(p,"height","auto");if(q!==null){var w=p.style.width;c("Style").set(p,"width","auto");}var x=0,y=t.length-1;while(x<y){var z=Math.ceil((x+y)/2);c("Style").set(p,"font-size",t[z]+s);if(r!==null&&p.scrollHeight>r||q!==null&&p.scrollWidth>q){y=z-1;}else x=z;}p.style.fontSize=u;p.style.height=v;if(q!==null)p.style.width=w;return t[x]+s;}function m(p,q,r,s,t,u){var v=p.style.fontSize,w=p.style.height;c("Style").set(p,"height","auto");if(q!==null){var x=p.style.width;c("Style").set(p,"width","auto");}c("Style").set(p,"font-size",u+s);if((r===null||p.scrollHeight<=r)&&(q===null||p.scrollWidth<=q)){p.style.fontSize=v;p.style.height=w;if(q!==null)p.style.width=x;return u+s;}c("Style").set(p,"font-size",t+s);if(r!==null&&p.scrollHeight>r||q!==null&&p.scrollWidth>q){p.style.fontSize=v;p.style.height=w;if(q!==null)p.style.width=x;return t+s;}while(t+1<u){var y=Math.ceil((t+u)/2);c("Style").set(p,"font-size",y+s);if(r!==null&&p.scrollHeight>r||q!==null&&p.scrollWidth>q){u=y;}else t=y;}p.style.fontSize=v;p.style.height=w;if(q!==null)p.style.width=x;return t+s;}function n(p,q){this._wrap=p;this._attr=q;if(this._attr.sizes){var r=this._attr.sizes;for(var s=1,t=r.length;s<t;s++){if(r[s-1]<=r[s])continue;r.sort(function(v,w){return v-w;});break;}}else if(q.min>q.max){var u=q.min;q.min=q.max;q.max=u;}this.fit();}n.prototype.fit=function(p,q){var r=this._wrap;if(!r.clientWidth){o.push(this);return;}var s=k(r);if(typeof p==="undefined")p=this._attr.width;if(j.test(p)){s.style.width=p+"px";}else if(p!==null&&p!=="auto")s.style.width=p;if(typeof q==="undefined")q=this._attr.height;if(j.test(q)){s.style.height=q+"px";}else if(q!==null&&q!=="auto")s.style.height=q;var t=null;if(!this._attr.wrap)t=s.clientWidth;var u=null;if(this._attr.wrap||q!==null)u=s.clientHeight;var v;if(this._attr.sizes){v=l(s,t,u,"px",this._attr.sizes);}else v=m(s,t,u,"px",this._attr.min,this._attr.max);c("DOM").remove(s);c("Style").set(r,"font-size",v);c("CSS").removeClass(r,"invisible_elem");};var o=[];n.onNodeInserted=function(){var p=o;o=[];p.forEach(function(q){q.fit();});};f.exports=n;}),null);
/*
 * @preserve-header
 *
 * Javascript EXIF Reader 0.1.6
 * Copyright (c) 2008 Jacob Seidelin, jseidelin@nihilogic.dk, http://blog.nihilogic.dk/
 * Licensed under the MPL License [http://www.nihilogic.dk/licenses/mpl-license.txt]
 */__d("exif/exif",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();var h=(function(){var i={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},j={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},k={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},l={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function m(y,event,z){if(y.addEventListener){y.addEventListener(event,z,false);}else if(y.attachEvent)y.attachEvent("on"+event,z);}function n(y){return !!(y.exifdata);}function o(y,z){BinaryAjax(y.src,function(aa){var ba=p(aa.binaryResponse);y.exifdata=ba||{};if(z)z.call(y);});}function p(y){if(y.getByteAt(0)!=255||y.getByteAt(1)!=216)return false;var z=2,aa=y.getLength(),ba;while(z<aa){if(y.getByteAt(z)!=255)return false;ba=y.getByteAt(z+1);if(ba==22400){return s(y,z+4,y.getShortAt(z+2,true)-2);}else if(ba==225){return s(y,z+4,y.getShortAt(z+2,true)-2);}else z+=2+y.getShortAt(z+2,true);}}function q(y,z,aa,ba,ca){var da=y.getShortAt(aa,ca),ea={},fa,ga,ha;for(ha=0;ha<da;ha++){fa=aa+ha*12+2;ga=ba[y.getShortAt(fa,ca)];ea[ga]=r(y,fa,z,aa,ca);}return ea;}function r(y,z,aa,ba,ca){var da=y.getShortAt(z+2,ca),ea=y.getLongAt(z+4,ca),fa=y.getLongAt(z+8,ca)+aa,ga,ha,ia,ja,ka,la;switch(da){case 1:case 7:if(ea==1){return y.getByteAt(z+8,ca);}else{ga=ea>4?fa:(z+8);ha=[];for(ja=0;ja<ea;ja++)ha[ja]=y.getByteAt(ga+ja);return ha;}case 2:ga=ea>4?fa:(z+8);return y.getStringAt(ga,ea-1);case 3:if(ea==1){return y.getShortAt(z+8,ca);}else{ga=ea>2?fa:(z+8);ha=[];for(ja=0;ja<ea;ja++)ha[ja]=y.getShortAt(ga+2*ja,ca);return ha;}case 4:if(ea==1){return y.getLongAt(z+8,ca);}else{ha=[];for(var ja=0;ja<ea;ja++)ha[ja]=y.getLongAt(fa+4*ja,ca);return ha;}case 5:if(ea==1){ka=y.getLongAt(fa,ca);la=y.getLongAt(fa+4,ca);ia=new Number(ka/la);ia.numerator=ka;ia.denominator=la;return ia;}else{ha=[];for(ja=0;ja<ea;ja++){ka=y.getLongAt(fa+8*ja,ca);la=y.getLongAt(fa+4+8*ja,ca);ha[ja]=new Number(ka/la);ha[ja].numerator=ka;ha[ja].denominator=la;}return ha;}case 9:if(ea==1){return y.getSLongAt(z+8,ca);}else{ha=[];for(ja=0;ja<ea;ja++)ha[ja]=y.getSLongAt(fa+4*ja,ca);return ha;}case 10:if(ea==1){return y.getSLongAt(fa,ca)/y.getSLongAt(fa+4,ca);}else{ha=[];for(ja=0;ja<ea;ja++)ha[ja]=y.getSLongAt(fa+8*ja,ca)/y.getSLongAt(fa+4+8*ja,ca);return ha;}}}function s(y,z){if(y.getStringAt(z,4)!="Exif")return false;var aa,ba,ca,da,ea,fa=z+6;if(y.getShortAt(fa)==18761){aa=false;}else if(y.getShortAt(fa)==19789){aa=true;}else return false;if(y.getShortAt(fa+2,aa)!=42)return false;if(y.getLongAt(fa+4,aa)!=8)return false;ba=q(y,fa,fa+8,j,aa);if(ba.ExifIFDPointer){da=q(y,fa,fa+ba.ExifIFDPointer,i,aa);for(ca in da){switch(ca){case "LightSource":case "Flash":case "MeteringMode":case "ExposureProgram":case "SensingMethod":case "SceneCaptureType":case "SceneType":case "CustomRendered":case "WhiteBalance":case "GainControl":case "Contrast":case "Saturation":case "Sharpness":case "SubjectDistanceRange":case "FileSource":da[ca]=l[ca][da[ca]];break;case "ExifVersion":case "FlashpixVersion":da[ca]=String.fromCharCode(da[ca][0],da[ca][1],da[ca][2],da[ca][3]);break;case "ComponentsConfiguration":da[ca]=l.Components[da[ca][0]]+l.Components[da[ca][1]]+l.Components[da[ca][2]]+l.Components[da[ca][3]];break;}ba[ca]=da[ca];}}if(ba.GPSInfoIFDPointer){ea=q(y,fa,fa+ba.GPSInfoIFDPointer,k,aa);for(ca in ea){switch(ca){case "GPSVersionID":ea[ca]=ea[ca][0]+"."+ea[ca][1]+"."+ea[ca][2]+"."+ea[ca][3];break;}ba[ca]=ea[ca];}}return ba;}function t(y,z){if(!y.complete)return false;if(!n(y)){o(y,z);}else if(z)z.call(y);return true;}function u(y,z){if(!n(y))return;return y.exifdata[z];}function v(y){if(!n(y))return {};var z,aa=y.exifdata,ba={};for(z in aa)if(aa.hasOwnProperty(z))ba[z]=aa[z];return ba;}function w(y){if(!n(y))return "";var z,aa=y.exifdata,ba="";for(z in aa)if(aa.hasOwnProperty(z))if(typeof aa[z]=="object"){if(aa[z] instanceof Number){ba+=z+" : "+aa[z]+" ["+aa[z].numerator+"/"+aa[z].denominator+"]\r\n";}else ba+=z+" : ["+aa[z].length+" values]\r\n";}else ba+=z+" : "+aa[z]+"\r\n";return ba;}function x(y){return p(y);}return {readFromBinaryFile:x,pretty:w,getTag:u,getAllTags:v,getData:t,Tags:i,TiffTags:j,GPSTags:k,StringValues:l};})();f.exports=h;}),null);
__d('ImageExif',['exif/exif'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(k){this.getByteAt=function(l){return k.getUint8(l);};this.getShortAt=function(l,m){return k.getUint16(l,!m);};this.getSShortAt=function(l,m){return k.getInt16(l,!m);};this.getLongAt=function(l,m){return k.getUint32(l,!m);};this.getSLongAt=function(l,m){return k.getInt32(l,!m);};this.getStringAt=function(l,m){var n=Array(m);for(var o=0;o<m;o++)n.push(String.fromCharCode(this.getByteAt(l+o)));return n.join('');};this.getLength=function(){return k.byteLength;};}function i(k){var l=function m(n){return k.charCodeAt(n)&255;};this.getByteAt=l;this.getShortAt=function(m,n){var o=this.getSShortAt(m,n);return o>0?o:o+65536;};this.getSShortAt=function(m,n){var o=l(m),p=l(m+1);return n?(o<<8)+p:(p<<8)+o;};this.getLongAt=function(m,n){var o=this.getSLongAt(m,n);return o>0?o:o+4294967296;};this.getSLongAt=function(m,n){var o=l(m),p=l(m+1),q=l(m+2),r=l(m+3);return n?(((o<<8)+p<<8)+q<<8)+r:(((r<<8)+q<<8)+p<<8)+o;};this.getStringAt=function(m,n){return k.substr(m,n);};this.getLength=function(){return k.length;};}var j={readFromFile:function k(l,m){var n=new FileReader();n.addEventListener('load',function(event){var o=event.target.result,p=o instanceof ArrayBuffer?this.readFromArrayBuffer(o):this.readFromBinaryString(o);m(p);}.bind(this),false);if(window.DataView){n.readAsArrayBuffer(l);}else n.readAsBinaryString(l);},readFromBinaryString:function k(l){return c('exif/exif').readFromBinaryFile(new i(l));},readFromArrayBuffer:function k(l){return c('exif/exif').readFromBinaryFile(new h(new DataView(l)));}};f.exports=j;}),null);
__d('StringEncoding',[],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(o,p){var q=new Uint8Array(o),r=0,s=[];while(r<q.length){var t=q[r],u=void 0;if(t>>7===0){u=1;}else if(t>>5===6){t&=31;u=2;}else if(t>>4===14){t&=15;u=3;}else if(t>>3===30){t&=7;u=4;}else if(t>>2===62){t&=3;u=5;}else if(t>>1===126){t&=1;u=6;}else throw new Error('Cannot decode as UTF-8 - '+'unrecognised codepoint header');if(r+u>q.length)throw new Error('Cannot decode as UTF-8 - '+'incomplete codepoint');for(var v=1;v<u;v++){var w=q[r+v];if(w>>6!==2)throw new Error('Cannot decode as UTF-8 - '+'unrecognised codepoint subsequent byte');w&=63;t<<=6;t|=w;}if(t>1114111)throw new Error('Cannot decode as UTF-8 - '+"JavaScript doesn't support codepoints over 0x10FFFF");if(!t)switch(p){case 'error':throw new Error('Cannot decode as UTF-8 - '+"contains a null and we're not allowing them");case 'ignore':continue;case 'truncate':return String.fromCodePoint.apply(String,s);case 'include':break;}s.push(t);r+=u;}return String.fromCodePoint.apply(String,s);}function i(o){return (o&255)<<8|o>>8;}function j(o,p){if(o.byteLength%2!==0)throw new Error('Cannot decode as UTF-16 - '+'data length mod 2 != 0');var q=new Uint16Array(o),r=0,s=[],t=false;if(q[0]===65279){++r;}else if(q[0]==65534){++r;t=true;}while(r<q.length){var u=q[r];if(t)u=i(u);var v=u;if(u>55295&&u<57344){if((u&64512)!==55296)throw new Error('Cannot decode as UTF-16 - '+'incorrect signature for high surrogate');if(r+1>=q.length)throw new Error('Cannot decode as UTF-16 - '+'incomplete codepoint');++r;var w=q[r];if(t)w=i(w);if((w&64512)!==56320)throw new Error('Cannot decode as UTF-16 - '+'incorrect signature for low surrogate');v=((u&1023)<<10|w&1023)+65536;}if(!v)switch(p){case 'error':throw new Error('Cannot decode as UTF-16 - '+"contains a null and we're not allowing them");case 'ignore':continue;case 'truncate':return String.fromCodePoint.apply(String,s);case 'include':break;}s.push(v);++r;}return String.fromCodePoint.apply(String,s);}function k(o){return ((o&255)<<24|(o&255<<8)<<8|(o&255<<16)>>8|o>>>24);}function l(o,p){if(o.byteLength%4!==0)throw new Error('Cannot decode as UTF-32 - '+'data length mod 4 != 0');var q=new Uint32Array(o),r=0,s=[],t=false;if(q[0]===65279){++r;}else if(q[0]==4294836224){++r;t=true;}while(r<q.length){var u=q[r];if(t)u=k(u);if(u&2147483648)throw new Error('Cannot decode as UTF-32 - '+'invalid codepoint');if(u>1114111)throw new Error('Cannot decode as UTF-32 - '+"JavaScript doesn't support codepoints over 0x10FFFF");if(!u)switch(p){case 'error':throw new Error('Cannot decode as UTF-32 - '+"contains a null and we're not allowing them");case 'ignore':continue;case 'truncate':return String.fromCodePoint.apply(String,s);case 'include':break;}s.push(u);++r;}return String.fromCodePoint.apply(String,s);}var m={'utf-8':h,'utf-16':j,'utf-32':l};function n(o,p){if(o){this.$Decoder1=o;}else this.$Decoder1=['utf-8','utf-16','utf-32'];if(!p)p='error';this.$Decoder2=p;for(var q=this.$Decoder1,r=Array.isArray(q),s=0,q=r?q:q[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var t;if(r){if(s>=q.length)break;t=q[s++];}else{s=q.next();if(s.done)break;t=s.value;}var u=t;this.$Decoder3(u);}}n.prototype.getPrecedence=function(){return this.$Decoder1;};n.prototype.decode=function(o){var p=[];for(var q=this.$Decoder1,r=Array.isArray(q),s=0,q=r?q:q[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var t;if(r){if(s>=q.length)break;t=q[s++];}else{s=q.next();if(s.done)break;t=s.value;}var u=t,v=this.$Decoder3(u);try{return v(o,this.$Decoder2);}catch(w){p.push(w);}}throw new Error(p.join(', '));};n.prototype.$Decoder3=function(o){var p=m[o];if(!p)throw new Error('Unknown encoding '+o);return p;};f.exports.Decoder=n;}),null);
__d('ImageMetadata',['regeneratorRuntime','Promise','StringEncoding','ImageExif'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(m){this.$ImageMetadata4=m;this.$ImageMetadata5=new Uint8Array(m);this.$ImageMetadata6();}h.prototype.$ImageMetadata6=function(){var m=0;while(m<this.$ImageMetadata5.length){m=this.$ImageMetadata7(m);if(m===-1)return;var n=this.$ImageMetadata5[m+1],o=i[n];if(!o)return;var p=o.length;if(p===undefined)p=this.$ImageMetadata5[m+2]*256+this.$ImageMetadata5[m+3];this.$ImageMetadata8(m,p,o);if(o.name==='SOS')return;m+=2+p;}};h.prototype.$ImageMetadata8=function(m,n,o){switch(o.name){case 'APP1':if(this.$ImageMetadata9(m+4,j)){this.$ImageMetadata10(m+4+j.length,n-2-j.length);}else if(this.$ImageMetadata9(m+4,k)){this.$ImageMetadata11(m+4+k.length,n-2-k.length);}else if(this.$ImageMetadata9(m+4,l))this.$ImageMetadata12(m+4+l.length,n-2-l.length);break;case 'SOF0':case 'SOF1':case 'SOF2':case 'SOF3':case 'SOF5':case 'SOF6':case 'SOF7':case 'JPG':case 'SOF9':case 'SOF10':case 'SOF11':case 'SOF13':case 'SOF14':case 'SOF15':this.$ImageMetadata13(m+4,n-2);break;}};h.prototype.$ImageMetadata13=function(m,n){var o=this.$ImageMetadata5[m+3]*256+this.$ImageMetadata5[m+4],p=this.$ImageMetadata5[m+1]*256+this.$ImageMetadata5[m+2];if(o>0&&p>0)this.$ImageMetadata3={x:o,y:p};};h.prototype.$ImageMetadata10=function(m,n){var o=emptyFunction;try{emptyFunction=function(){};var p=c('ImageExif').readFromArrayBuffer(this.$ImageMetadata4)||{};}finally{emptyFunction=o;}var q={};for(var r in p){var s=p[r];if(typeof s==='string')s=s.trim();q[r.trim()]=s;}this.$ImageMetadata1=q;};h.prototype.$ImageMetadata11=function(m,n){this.$ImageMetadata2={};var o=this.$ImageMetadata2,p=new (c('StringEncoding').Decoder)(null,'truncate');try{var r=p.decode(this.$ImageMetadata4.slice(m,m+n));}catch(q){return;}for(var s=0;s<r.length;++s){var t=r.indexOf('<GPano:',s);if(t==-1)break;var u=r.indexOf('>',t),v=r.substring(t+1,u).trim(),w=r.indexOf('<',u),x=r.substring(u+1,w).trim();o[v]=x;s=w;}for(var y=0;y<r.length;++y){var z=r.indexOf('GPano:',y);if(z==-1)break;var aa=r.indexOf('=',z),ba=r.substring(z,aa).trim(),ca=r.indexOf('"',z);if(ba.indexOf('>')==-1&&ba.indexOf('<')==-1){var da=r.indexOf('"',ca+1),ea=r.substring(ca+1,da).trim();o[ba]=ea;y=da;}}};h.prototype.$ImageMetadata12=function(m){};h.prototype.$ImageMetadata9=function(m,n){return n.split('').every(function(o){return this.$ImageMetadata5[m++]===o.charCodeAt(0);}.bind(this));};h.prototype.$ImageMetadata7=function(m){for(var n=m;n+1<this.$ImageMetadata5.length;++n)if(this.$ImageMetadata5[n]===255&&this.$ImageMetadata5[n+1]!==0&&this.$ImageMetadata5[n+1]!==255)return n;return -1;};h.prototype.hasExif=function(){return Boolean(this.$ImageMetadata1);};h.prototype.hasXMP=function(){return Boolean(this.$ImageMetadata2);};h.prototype.hasSize=function(){return Boolean(this.$ImageMetadata3);};h.prototype.getExif=function(){if(!this.$ImageMetadata1)throw new Error('Image has no Exif data');return this.$ImageMetadata1;};h.prototype.getXMP=function(){if(!this.$ImageMetadata2)throw new Error('Image has no XMP data');return this.$ImageMetadata2;};h.prototype.getSize=function(){if(!this.$ImageMetadata3)throw new Error('Could not find size data?!');return this.$ImageMetadata3;};h.genMetadataFromBlob=function m(n){return c('regeneratorRuntime').async(function o(p){while(1)switch(p.prev=p.next){case 0:p.t0=h;p.next=3;return c('regeneratorRuntime').awrap(h.$ImageMetadata14(n));case 3:p.t1=p.sent;return p.abrupt('return',new p.t0(p.t1));case 5:case 'end':return p.stop();}},null,this);};h.$ImageMetadata14=function(m){return new (c('Promise'))(function(n,o){var p=new b.FileReader();p.onabort=o;p.onerror=o;p.onload=n;p.readAsArrayBuffer(m);});};var i=[];i[216]={name:'SOI',length:0};i[192]={name:'SOF0'};i[193]={name:'SOF1'};i[194]={name:'SOF2'};i[195]={name:'SOF3'};i[197]={name:'SOF5'};i[198]={name:'SOF6'};i[199]={name:'SOF7'};i[200]={name:'JPG'};i[201]={name:'SOF9'};i[202]={name:'SOF10'};i[203]={name:'SOF11'};i[205]={name:'SOF13'};i[206]={name:'SOF14'};i[207]={name:'SOF15'};i[196]={name:'DHT'};i[219]={name:'DQT'};i[221]={name:'DRI',length:2};i[218]={name:'SOS'};i[208]={name:'RST0',length:0};i[209]={name:'RST1',length:0};i[210]={name:'RST2',length:0};i[211]={name:'RST3',length:0};i[212]={name:'RST4',length:0};i[213]={name:'RST5',length:0};i[214]={name:'RST6',length:0};i[215]={name:'RST7',length:0};i[224]={name:'APP0'};i[225]={name:'APP1'};i[226]={name:'APP2'};i[227]={name:'APP3'};i[228]={name:'APP4'};i[229]={name:'APP5'};i[230]={name:'APP6'};i[231]={name:'APP7'};i[232]={name:'APP8'};i[233]={name:'APP9'};i[234]={name:'APP10'};i[235]={name:'APP11'};i[236]={name:'APP12'};i[237]={name:'APP13'};i[238]={name:'APP14'};i[239]={name:'APP15'};i[254]={name:'COM'};i[217]={name:'EOI',length:0};var j='Exif\0\0',k='http://ns.adobe.com/xap/1.0/\0',l='http://ns.adobe.com/xmp/extension/\0';f.exports=h;}),null);
__d('SphericalImage',['Promise','regeneratorRuntime','ImageMetadata'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h='GPano:ProjectionType',i=100,j='cylindrical';function k(x){return new (c('Promise'))(function(y,z){var aa=new b.FileReader();aa.onabort=z;aa.onerror=z;aa.onload=function(event){return y(event.target.result);};aa.readAsArrayBuffer(x);});}function l(x){if(!x.hasXMP())return false;var y=x.getXMP(),z=Boolean(y['GPano:CroppedAreaImageWidthPixels']&&y['GPano:CroppedAreaImageHeightPixels']&&y['GPano:FullPanoWidthPixels']&&y['GPano:FullPanoHeightPixels']);if(z)return true;var aa=x.getSize(),ba=Math.abs(aa.x-aa.y*2)<=2;if(y[h]==='equirectangular'&&ba)return true;var ca=aa.x===aa.y*6||aa.y===aa.x*6,da=Boolean(y[h]==='cubestrip'||y[h]==='cubemap');if(da&&ca)return true;return false;}var m={'iPhone 4S':{x:19334,y:3264},'iPhone 5':{x:18521,y:3264},'iPhone 5c':{x:18521,y:3264},'iPhone 5s':{x:17279,y:3264},'iPhone 6':{x:17731,y:3264},'iPhone 6 Plus':{x:17731,y:3264},'iPhone 6s':{x:21729,y:4000},'iPhone 6s Plus':{x:21729,y:4000},'iPhone SE':{x:21729,y:4000},'iPhone 7':{x:21842,y:3884},'iPhone 7 Plus':{x:21842,y:3884},'iPad Air':{x:14810,y:2592},'iPad Air 2':{x:18512,y:3264},'iPad Mini 2':{x:14810,y:2592},'iPad Mini 3':{x:14810,y:2592},'iPad Mini 4':{x:18512,y:3264},'iPad Pro':{x:18512,y:3264}},n={'sm-g90':{minHeight:2200,fullWidth:17000},'sm-n91':{minHeight:2200,fullWidth:17000},'sm-g92':{minHeight:2200,fullWidth:15550},'sm-n92':{minHeight:2200,fullWidth:15550},'sm-g93':{minHeight:2800,fullWidth:20200},'sm-n93':{minHeight:2800,fullWidth:20200}};function o(x){if(!x.hasExif())return false;return (q(x)||p(x)||r(x));}function p(x){var y=x.getExif(),z=x.getSize();return (y.Make==='RICOH'&&y.Model==='RICOH THETA S'&&z.x===2*z.y);}function q(x){var y=x.getExif();if(y.Make!='Apple')return false;var z=m[y.Model];if(!z)return false;var aa=void 0,ba=void 0;if(y.ExifImageWidth&&y.ExifImageLength)if(!ba||y.ExifImageWidth>ba.x)ba={x:y.ExifImageWidth,y:y.ExifImageLength};if(y.ImageWidth&&y.ImageLength)if(!ba||y.ImageWidth>ba.x)ba={x:y.ImageWidth,y:y.ImageLength};if(y.OriginalImageWidth&&y.OriginalImageHeight)if(!ba||y.OriginalImageWidth>ba.x)ba={x:y.OriginalImageWidth,y:y.OriginalImageHeight};if(y.PixelXDimension&&y.PixelYDimension)if(!ba||y.PixelXDimension>ba.x)ba={x:y.PixelXDimension,y:y.PixelYDimension};if(x.hasSize()){aa=x.getSize();var ca=s(aa);if(ba){var da=s(ba);if(!t(ca,da))return false;}if(ca<2)return false;}var ea=ba||aa;if(!ea)return false;if(!t(ea.y,z.y,.3))return false;return true;}function r(x){var y=x.getExif(),z=x.getSize(),aa=z.x,ba=z.y;if(String(y.Make).toLowerCase()!='samsung')return false;var ca=String(y.Model).toLowerCase().trim(),da=null;Object.keys(n).forEach(function(ga){if(ca.includes(ga))da=n[ga];});if(!da)return false;if(y.Orientation===6){var ea=aa;aa=ba;ba=ea;}if(ba<da.minHeight)return false;var fa=aa/da.fullWidth*360;if(fa<i||aa<2*ba)return false;return true;}function s(x){return x.x/x.y;}function t(x,y){var z=arguments.length<=2||arguments[2]===undefined?.05:arguments[2];return x>(1-z)*y&&x<(1+z)*y;}function u(x){return (l(x)||o(x));}function v(x){var y,z;return c('regeneratorRuntime').async(function aa(ba){while(1)switch(ba.prev=ba.next){case 0:ba.next=2;return c('regeneratorRuntime').awrap(k(x));case 2:y=ba.sent;z=new (c('ImageMetadata'))(y);return ba.abrupt('return',u(z));case 5:case 'end':return ba.stop();}},null,this);}function w(x){'use strict';this.$SphericalImage1=x;this.$SphericalImage2=u(this.$SphericalImage1);}w.createFromBlob=function x(y){var z;return c('regeneratorRuntime').async(function aa(ba){while(1)switch(ba.prev=ba.next){case 0:'use strict';ba.next=3;return c('regeneratorRuntime').awrap(k(y));case 3:z=ba.sent;return ba.abrupt('return',new this(new (c('ImageMetadata'))(z)));case 5:case 'end':return ba.stop();}},null,this);};w.prototype.isSpherical=function(){'use strict';return this.$SphericalImage2;};w.prototype.getMetadata=function(){'use strict';return this.$SphericalImage1;};w.prototype.getProjectionType=function(){'use strict';var x='';if(this.$SphericalImage1.hasXMP())x=this.$SphericalImage1.getXMP()[h];if(this.isSpherical()&&!x)x=j;return x;};f.exports={isSphericalBlob:v,isSphericalMetadata:u,SphericalImage:w};}),null);
__d('XComposerPhotoUploader',['regeneratorRuntime','Promise','AsyncUploadRequest','ReactComposerMediaUtils','FileInputUploader','JSLogger','PhotosMimeType','PhotosUploadID','SphericalPhotoConfig','SphericalImage','curry','emptyFunction','performanceNow'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('SphericalImage').SphericalImage,i=b.URL||b.webkitURL||{};function j(k){this.$XComposerPhotoUploader2=k.uploadData||{};this.$XComposerPhotoUploader1=k.uploadEndpoint;this.$XComposerPhotoUploader3=k.retryLimit;this.$XComposerPhotoUploader4=k.concurrentLimit;this.$XComposerPhotoUploader5=k.resizer;this.$XComposerPhotoUploader6=k.onUploadEnqueued||c('emptyFunction');this.$XComposerPhotoUploader7=k.onUploadsEnqueued||c('emptyFunction');this.$XComposerPhotoUploader8=k.onResizeStart||c('emptyFunction');this.$XComposerPhotoUploader11=k.onResizeProgress||c('emptyFunction');this.$XComposerPhotoUploader9=k.onResizeSuccess||c('emptyFunction');this.$XComposerPhotoUploader10=k.onResizeFailure||c('emptyFunction');this.$XComposerPhotoUploader12=k.onUploadIsSpherical||c('emptyFunction');this.$XComposerPhotoUploader13=k.onUploadSent||c('emptyFunction');this.$XComposerPhotoUploader14=k.onUploadStart||c('emptyFunction');this.$XComposerPhotoUploader15=k.onUploadProgress||c('emptyFunction');this.$XComposerPhotoUploader16=k.onUploadSuccess||c('emptyFunction');this.$XComposerPhotoUploader17=k.onUploadFailure||c('emptyFunction');this.$XComposerPhotoUploader18=c('JSLogger').create('composer');}j.prototype.upload=function(k,l){l=l||0;var m=Object.assign({},this.$XComposerPhotoUploader2),n=null;if(!this.$XComposerPhotoUploader19(k)){var o=c('PhotosUploadID').getNewID();k.uploadID=o;m.upload_id=o;this.$XComposerPhotoUploader6({uploadID:o,fileName:k.value.split('/').pop().split('\\').pop(),fileURL:i.createObjectURL?i.createObjectURL(k):null});}else{n=Array.from(k.files);n=n.filter(function(s){return !c('ReactComposerMediaUtils').hasVideos([s.name]);});if(n.length===0)return;var p=n.length+l;n.forEach(function(s){if(!s.uploadID)s.uploadID=c('PhotosUploadID').getNewID();var t=false;if(c('SphericalPhotoConfig').spherical_photo_www_upload)t=null;this.$XComposerPhotoUploader6({uploadID:s.uploadID,fileName:s.name,isSpherical:t,fileURL:i.createObjectURL?i.createObjectURL(s):null});}.bind(this));if(!c('SphericalPhotoConfig').spherical_photo_www_upload||!c('SphericalPhotoConfig').www_spherical_photo_mmp&&p>1)m.allow_spherical_photo=false;}this.$XComposerPhotoUploader7();var q=new (c('FileInputUploader'))(k).setURI(this.$XComposerPhotoUploader1).setData(m).setAllowCrossOrigin(true).setNetworkErrorRetryLimit(this.$XComposerPhotoUploader3).setUploadInParallel(true);if(n&&n.length>0){q.setFiles({farr:n});if(this.$XComposerPhotoUploader5){q.setPreprocessHandler(this.$XComposerPhotoUploader20.bind(this));}else q.setPreprocessHandler(this.$XComposerPhotoUploader21.bind(this));if(this.$XComposerPhotoUploader4)q.setConcurrentLimit(this.$XComposerPhotoUploader4);}q.subscribe('progress',function(s,t){return (this.$XComposerPhotoUploader15(this.$XComposerPhotoUploader22(t,k),t));}.bind(this));q.subscribe('failure',function(s,t){return (this.$XComposerPhotoUploader17(this.$XComposerPhotoUploader22(t,k),t,n));}.bind(this));q.subscribe('start',function(s,t){return (this.$XComposerPhotoUploader14(this.$XComposerPhotoUploader22(t,k),t));}.bind(this));q.subscribe('success',function(s,t){return (this.$XComposerPhotoUploader16(this.$XComposerPhotoUploader22(t,k),t));}.bind(this));try{q.send();this.$XComposerPhotoUploader13(k);}catch(r){this.$XComposerPhotoUploader18.error('error_send_unpublished_files',r);throw r;}};j.prototype.getAsyncUploadRequest=function(k,l){var m=new (c('AsyncUploadRequest'))().setData(Object.assign({},l&&l.data,this.$XComposerPhotoUploader2)).setFiles({farr:k}).setAllowCrossOrigin(true).setURI(this.$XComposerPhotoUploader1);if(this.$XComposerPhotoUploader4)m.setLimit(this.$XComposerPhotoUploader4);if(this.$XComposerPhotoUploader5)m.setPreprocessHandler(this.$XComposerPhotoUploader20.bind(this));m.subscribe('start',function(n,o){return (this.$XComposerPhotoUploader14(o.getFile().uploadID,{upload:o}));}.bind(this));m.subscribe('progress',function(n,o){return (this.$XComposerPhotoUploader15(o.getFile().uploadID,{upload:o,event:o.getProgressEvent()}));}.bind(this));m.subscribe('success',function(n,o){return (this.$XComposerPhotoUploader16(o.getFile().uploadID,{upload:o,response:o.getResponse()}));}.bind(this));m.subscribe('failure',function(n,o){return (this.$XComposerPhotoUploader17(o.getFile().uploadID,{upload:o,response:o.getResponse()},k));}.bind(this));return m;};j.prototype.$XComposerPhotoUploader22=function(k,l){if(k.upload){return k.upload.getFile().uploadID;}else return l.uploadID;};j.prototype.$XComposerPhotoUploader21=function(k,l){(function m(){return c('regeneratorRuntime').async(function n(o){while(1)switch(o.prev=o.next){case 0:o.next=2;return c('regeneratorRuntime').awrap(this.$XComposerPhotoUploader23(k,l));case 2:return o.abrupt('return',o.sent);case 3:case 'end':return o.stop();}},null,this);}).bind(this)().done();};j.prototype.$XComposerPhotoUploader23=function k(l,m){var n,o;return c('regeneratorRuntime').async(function p(q){while(1)switch(q.prev=q.next){case 0:n=l.getFile();q.next=3;return c('regeneratorRuntime').awrap(this.$XComposerPhotoUploader24(n));case 3:o=q.sent;this.$XComposerPhotoUploader12(n,o.isSpherical(),o.getProjectionType());m(l);case 6:case 'end':return q.stop();}},null,this);};j.prototype.$XComposerPhotoUploader20=function(k,l){(function m(){return c('regeneratorRuntime').async(function n(o){while(1)switch(o.prev=o.next){case 0:o.next=2;return c('regeneratorRuntime').awrap(this.$XComposerPhotoUploader25(k,l));case 2:return o.abrupt('return',o.sent);case 3:case 'end':return o.stop();}},null,this);}).bind(this)().done();};j.prototype.$XComposerPhotoUploader24=function k(l){return c('regeneratorRuntime').async(function m(n){while(1)switch(n.prev=n.next){case 0:n.next=2;return c('regeneratorRuntime').awrap(h.createFromBlob(l));case 2:return n.abrupt('return',n.sent);case 3:case 'end':return n.stop();}},null,this);};j.prototype.$XComposerPhotoUploader26=function(k){return this.$XComposerPhotoUploader27(this.$XComposerPhotoUploader5.resizeBlob.bind(this.$XComposerPhotoUploader5),k);};j.prototype.$XComposerPhotoUploader28=function(k){return this.$XComposerPhotoUploader27(this.$XComposerPhotoUploader5.resize360Blob.bind(this.$XComposerPhotoUploader5),k);};j.prototype.$XComposerPhotoUploader27=function(k,l){var m=c('curry')(this.$XComposerPhotoUploader11,l.uploadID),n=function(){return this.$XComposerPhotoUploader8(l);}.bind(this);return new (c('Promise'))(function(o,p){n();k(l,function(q,r,s){if(q){p(q);}else if(s){o(null);}else o(r);},m);});};j.prototype.$XComposerPhotoUploader25=function k(l,m){var n,o,p,q,r,s;return c('regeneratorRuntime').async(function t(u){while(1)switch(u.prev=u.next){case 0:n=l.getFile();if(!(!n||!c('PhotosMimeType').isJpeg(n.type))){u.next=5;break;}this.$XComposerPhotoUploader12(n,false,'');m(l);return u.abrupt('return');case 5:o=c('performanceNow')();u.prev=6;p=null;if(!c('SphericalPhotoConfig').spherical_photo_www_upload){u.next=12;break;}u.next=11;return c('regeneratorRuntime').awrap(this.$XComposerPhotoUploader24(n));case 11:p=u.sent;case 12:if(!(p&&p.isSpherical())){u.next=19;break;}this.$XComposerPhotoUploader12(n,true,p.getProjectionType());u.next=16;return c('regeneratorRuntime').awrap(this.$XComposerPhotoUploader28(n));case 16:q=u.sent;u.next=23;break;case 19:this.$XComposerPhotoUploader12(n,false,'');u.next=22;return c('regeneratorRuntime').awrap(this.$XComposerPhotoUploader26(n));case 22:q=u.sent;case 23:if(q){q.uploadID=n.uploadID;q.name=n.name;l.setFile(q);}r=q===null;l.getFile().filename=n.name;this.$XComposerPhotoUploader9(n,q||n,r,c('performanceNow')()-o);u.next=34;break;case 29:u.prev=29;u.t0=u['catch'](6);s=c('performanceNow')()-o;this.$XComposerPhotoUploader10(n,q||n,u.t0,s);case 34:m(l);case 35:case 'end':return u.stop();}},null,this,[[6,29]]);};j.prototype.$XComposerPhotoUploader19=function(k){return !!k.files&&c('AsyncUploadRequest').isSupported();};f.exports=j;}),null);
__d('EmojiSticker.react',['cx','Image.react','React','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.componentDidMount=function(){this.props.onAttachmentLoad&&this.props.onAttachmentLoad();};l.prototype.render=function(){var m=this.props.emojiImage?this.props.emojiImage:c('React').createElement(c('Image.react'),{src:this.props.sourceURI});return (c('React').createElement('div',{'aria-label':this.props.emoji,className:c('joinClasses')(this.props.className,"_383m"),tabIndex:'0'},m));};function l(){i.apply(this,arguments);}l.propTypes={emoji:k.string,emojiImage:k.any,onAttachmentLoad:k.func,sourceURI:k.string.isRequired};f.exports=l;}),null);
__d('Sticker.react',['cx','fbt','Arbiter','Image.react','MessengerHotLikeSVG.react','React','ReactDOM','PaddedStickerConfig','StickerConstants','emptyFunction','getElementPosition','getObjectValues','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=83,l=5000,m=10,n={CLICK:'click',HOVER:'hover',LOAD_AND_HOVER:'load_and_hover'},o=c('React').createClass({displayName:'Sticker',propTypes:{accessibilityLabel:j.string,animationTrigger:j.oneOf(c('getObjectValues')(n)),forceCursorPointer:j.bool,frameCount:j.number.isRequired,frameRate:j.number,framesPerCol:j.number.isRequired,framesPerRow:j.number.isRequired,onAttachmentLoad:j.func,onStickerClick:j.func,packID:j.string,packName:j.string,sourceURI:j.string.isRequired,sourceWidth:j.number.isRequired,sourceHeight:j.number.isRequired,spriteURI:j.string,stickerID:j.string,subscribedThreadID:j.string,testID:j.string},getInitialState:function p(){return {index:0,hasAnimated:false,unsubscribeID:null};},getDefaultProps:function p(){return {accessibilityLabel:'',forceCursorPointer:false,frameRate:k,onStickerClick:c('emptyFunction'),packID:null,packName:''};},componentDidMount:function p(){this.props.onAttachmentLoad&&this.props.onAttachmentLoad();this._stopIntervalID=0;if(this.props.animationTrigger===n.LOAD_AND_HOVER&&this.props.frameCount>1&&this.props.spriteURI)this.startAnimation();if(this.props.subscribedThreadID&&this.props.frameCount>1){var q=c('Arbiter').subscribe(this.props.subscribedThreadID,function(r,s){this.isScrolledIntoView(s.scrollTop,s.viewHeight,s.top);}.bind(this));this.setState({unsubscribeID:q});}},componentWillUnmount:function p(){if(this.state.unsubscribeID)c('Arbiter').unsubscribe(this.state.unsubscribeID);if(this.isAnimating())clearInterval(this._stopIntervalID);},isAnimating:function p(){return !!this._stopIntervalID;},getWidth:function p(){return Math.floor(this.props.sourceWidth);},getHeight:function p(){return Math.floor(this.props.sourceHeight);},preloadSprite:function p(){var q=new window.Image();q.onload=function(){if(this.isMounted()&&!this.state.hasAnimated){this.setState({hasAnimated:true});this._stopIntervalID=setInterval(this.incrementFrameIndex,this.props.frameRate);}}.bind(this);if(c('PaddedStickerConfig').ChatPaddedAnimatedStickerGK&&this.props.paddedSpriteURI){q.src=this.props.paddedSpriteURI;}else q.src=this.props.spriteURI;},isScrolledIntoView:function p(q,r,s){var t=c('getElementPosition')(c('ReactDOM').findDOMNode(this)),u=q+t.y-s,v=q+r,w=u+t.height;if(this.props.frameCount>1&&!this.state.hasAnimated&&w-m<=v&&u+m>=q)this.startAnimation();},startAnimation:function p(){if(!this.state.hasAnimated&&this.props.spriteURI){this.preloadSprite();}else if(!this.isAnimating()){this.setState({hasAnimated:true});this._stopIntervalID=setInterval(this.incrementFrameIndex,this.props.frameRate);}},stopAnimation:function p(){this.setState({index:0});clearInterval(this._stopIntervalID);this._stopIntervalID=0;},toggleAnimation:function p(){if(this.isAnimating()){this.stopAnimation();}else this.startAnimation();},shouldStopAnimating:function p(){var q=this.state.index%this.props.frameCount;if(!(q===0&&this.state.index*this.props.frameRate>l))return false;if(this.props.animationTrigger===n.CLICK)return true;return !this.state.isHovered;},incrementFrameIndex:function p(){if(this.shouldStopAnimating()){this.stopAnimation();}else this.setState({index:this.state.index+1});},getStyle:function p(){var q=0,r=this.props.spriteURI;if(c('PaddedStickerConfig').ChatPaddedAnimatedStickerGK&&this.props.paddedSpriteURI){r=this.props.paddedSpriteURI;var s=240/Math.min(this.getHeight(),this.getWidth());q=Math.floor(c('StickerConstants').SPRITE_PADDING/s);}var t=this.state.index%this.props.frameCount,u=t%this.props.framesPerRow*(this.getWidth()+q*2)+q,v=Math.floor(t/this.props.framesPerRow)*(this.getHeight()+q*2)+q,w=this.props.frameCount>1&&this.props.animationTrigger===n.CLICK||this._isStickerClickable(this.props.packID),x=this.props.forceCursorPointer||w?'pointer':'default';if(!this.state.hasAnimated||!this.props.spriteURI){return {backgroundImage:this._isHotLike()?null:'url('+this.props.sourceURI+')',backgroundRepeat:'no-repeat',backgroundSize:this.getWidth()+'px '+this.getHeight()+'px',cursor:x,height:this.getHeight(),width:this.getWidth()};}else return {backgroundImage:'url('+r+')',backgroundPosition:-u+'px '+ -v+'px',backgroundSize:(this.getWidth()+q*2)*this.props.framesPerRow+'px '+(this.getHeight()+q*2)*this.props.framesPerCol+'px',cursor:x,height:this.getHeight(),width:this.getWidth(),imageRendering:'-webkit-optimize-contrast'};},_isStickerClickable:function p(q){return q&&q!=c('StickerConstants').MOBILE_LIKE_STICKER_PACK_ID&&q!=c('StickerConstants').GRAVEYARD_PACK_ID;},onStickerClick:function p(){if(!this._isStickerClickable(this.props.packID))return;if(this.props.onStickerClick)this.props.onStickerClick(this.props.packID,this.props.stickerID);},mouseLeft:function p(){this.setState({isHovered:false});},mouseEntered:function p(){this.setState({isHovered:true});if(!this.isAnimating())this.startAnimation();},tabFocusSelected:function p(){this.setState({isHovered:true});if(!this.isAnimating())this.startAnimation();},tabFocusUnselected:function p(){this.setState({isHovered:false});},getAriaLabel:function p(){return i._("{pack name} {sticker name} sticker",[i.param('pack name',this.props.packName),i.param('sticker name',this.props.accessibilityLabel)]);},render:function p(){var q=void 0,r=void 0;if(this.props.animationTrigger===n.CLICK&&this.props.frameCount>1&&this.props.spriteURI){q=true;}else if((this.props.animationTrigger===n.HOVER||this.props.animationTrigger===n.LOAD_AND_HOVER)&&this.props.frameCount>1&&this.props.spriteURI)r=true;var s=q?this.toggleAnimation:null;if(this.props.packID)s=this.onStickerClick;var t=this.props.className,u=null;if(this._isHotLike()){t=c('joinClasses')(t,"_576q");u=c('React').createElement(c('MessengerHotLikeSVG.react'),{color:this.props.customColor});}return (c('React').createElement('div',{'aria-label':this.getAriaLabel(),className:t,'data-testid':this.props.testID,tabIndex:'0',role:'img',style:this.getStyle(),onClick:s,onMouseEnter:r?this.mouseEntered:null,onMouseLeave:r?this.mouseLeft:null,onFocus:this.tabFocusSelected,onBlur:this.tabFocusUnselected},u));},_isHotLike:function p(){if(!!document.createElementNS&&!!document.createElementNS('http://www.w3.org/2000/svg','svg').createSVGRect)return (this.props.stickerID===c('StickerConstants').HOT_LIKE_SMALL_STICKER_ID||this.props.stickerID===c('StickerConstants').HOT_LIKE_MEDIUM_STICKER_ID||this.props.stickerID===c('StickerConstants').HOT_LIKE_LARGE_STICKER_ID);return false;}});f.exports=o;}),null);
__d("StickerUtils",[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={getScaledDimensions:function i(j,k,l){var m,n,o;if(k>j){o=l/k;m=j*o;n=k*o;}else{o=l/j;m=j*o;n=k*o;}return {height:Math.round(m),width:Math.round(n)};},capitalizeWords:function i(j){var k=j.split(" ");for(var l=0;l<k.length;l++){var m=k[l].charAt(0).toUpperCase();k[l]=m+k[l].substr(1);}return k.join(" ");}};f.exports=h;}),null);
__d("XStickerInTrayController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/stickers\/in_tray\/",{pack_id:{type:"Int",required:true}});}),null);
__d('StickersPackInTray',['Promise','AsyncRequest','RelayQL','RelayStore','XStickerInTrayController','createRelayQuery'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={onIsPackInTray:function i(j,k,l){var m=c('createRelayQuery')(function(){return {children:[{children:[{calls:[{kind:'Call',metadata:{type:'StickerInterfaces'},name:'interface',value:{kind:'CallVariable',callVariableName:'stickerInterface'}},{kind:'Call',metadata:{},name:'first',value:{kind:'CallValue',callValue:10000}}],children:[{children:[{children:[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'}],fieldName:'node',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id',isRequisite:true},type:'StickerPack'},{fieldName:'cursor',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'edges',kind:'Field',metadata:{canHaveSubselections:true,isPlural:true},type:'PacksInTrayEdge'},{children:[{fieldName:'has_next_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'},{fieldName:'has_previous_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'}],fieldName:'page_info',kind:'Field',metadata:{canHaveSubselections:true,isGenerated:true,isRequisite:true},type:'PageInfo'}],fieldName:'tray_packs',kind:'Field',metadata:{canHaveSubselections:true,isConnection:true},type:'PacksInTrayConnection'}],fieldName:'sticker_store',kind:'Field',metadata:{canHaveSubselections:true},type:'StickerStore'}],fieldName:'viewer',kind:'Query',metadata:{},name:'StickersPackInTray',type:'Viewer'};}(),{stickerInterface:k}),n=c('RelayStore').readQuery(m);n=n&&n.length>0?n[0]:null;if(n&&n.sticker_store&&n.sticker_store.tray_packs&&n.sticker_store.tray_packs.edges)return new (c('Promise'))(function(p,q){return p({in_sticker_tray:n.sticker_store.tray_packs.edges.filter(function(r){return r.node.id===j;}).length>0});}).then(l);var o=c('XStickerInTrayController').getURIBuilder().setInt('pack_id',j).getURI();return new (c('Promise'))(function(p,q){return (new (c('AsyncRequest'))(o).setHandler(function(r){return p(r.getPayload());}).setAllowCrossPageTransition(true).send());}).then(l);}};f.exports=h;}),null);
__d('StickersStoreController',['cx','Bootloader','DialogFitHeight','DOM','LayerAutoFocus','LayerFadeOnHide','LayerHideOnEscape','PureStoreBasedStateMixin','React','ReactDOM','StickersActions','StickersDispatcher','StickersStateStore','XUIDialog.react','XUIDialogBody.react','XUISpinner.react','isSocialPlugin','requestAnimationFrame'],(function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=688,k=320,l=null,m=c('React').createClass({displayName:'StoreLayer',mixins:[c('PureStoreBasedStateMixin')(c('StickersStateStore'))],propTypes:{isComposer:i.bool,onToggle:i.func.isRequired,shown:i.bool.isRequired},getDefaultProps:function r(){return {isComposer:false};},statics:{calculateState:function r(){return {packID:c('StickersStateStore').getState().get('storePackID')};}},getInitialState:function r(){return {renderStore:function s(){return (c('React').createElement('div',{className:"_5r5e"},c('React').createElement(c('XUISpinner.react'),{background:'light',size:'large'})));}};},componentWillMount:function r(){c('StickersDispatcher').explicitlyRegisterStores([c('StickersStateStore')]);},shouldComponentUpdate:function r(s){return !!s.shown;},componentDidMount:function r(){c('Bootloader').loadModules(["StickersStore.react","RelayRootContainer","StickersStorePackListRoute","StickersStorePackDetailRoute"],function(s,t,u,v){this.setState({renderStore:function(){var w=this.state.packID?new v({packID:this.state.packID}):new u();return (c('React').createElement(t,{Component:s,route:w,renderFetched:function(x){return (c('React').createElement(s,babelHelpers['extends']({},x,{isComposer:this.props.isComposer,packID:this.state.packID,shown:this.props.shown})));}.bind(this)}));}.bind(this)});}.bind(this),'StickersStoreController');},_onToggle:function r(s){c('requestAnimationFrame')(function(){return this.props.onToggle(s);}.bind(this));},render:function r(){var s=c('isSocialPlugin')()&&document.body.offsetWidth<j?k:j;return (c('React').createElement(c('XUIDialog.react'),{behaviors:{DialogFitHeight:c('DialogFitHeight'),LayerAutoFocus:c('LayerAutoFocus'),LayerFadeOnHide:c('LayerFadeOnHide'),LayerHideOnEscape:c('LayerHideOnEscape')},onToggle:this._onToggle,shown:this.props.shown,width:s},c('React').createElement(c('XUIDialogBody.react'),{className:"_5rq- autofocus"},this.state.renderStore())));}}),n=function r(s){if(!l){l=c('DOM').create('div');c('DOM').appendContent(document.body,l);}c('ReactDOM').render(c('React').createElement(m,{isComposer:s,onToggle:p,shown:true}),l);},o=function r(){if(!l)return;c('ReactDOM').render(c('React').createElement(m,{shown:false,onToggle:p}),l);},p=function r(s){s?n():o();},q={showStore:function r(s,t){c('StickersActions').selectStorePack(s);n(!!t);}};f.exports=q;}),null);
__d('getViewerRecordID',['RelayStore'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('RelayStore').getStoreData();function i(){return h.getCachedStore().getDataID('viewer');}f.exports=i;}),null);