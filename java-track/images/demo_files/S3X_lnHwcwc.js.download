if (self.CavalryLogger) { CavalryLogger.start_js(["uX+vI"]); }

__d("ComposerMemePickerDialogEvent",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={MEME_PROMPT_CLICKED:"meme_prompt_clicked",MEME_PICKER_OPENED:"meme_picker_opened",MEME_SELECTED:"meme_selected",MEME_POSTED:"meme_posted"};}),null);
__d("ModalPhotoEditorTabName",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={CROP:"crop",FILTERS:"filters",FRAMES:"frames",PRODUCT_TAG:"product_tag",STICKERS:"stickers",TAG:"tag",TEXT:"text"};}),null);
__d("PromptsInteractionsEventNames",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={OPEN_SELECTING_CONTENT:"open_selecting_content",OPEN_SUGGESTING_CONTENT:"open_suggesting_content",CLOSE_SUGGESTION:"close_suggestion",SELECT_SUGGESTION:"select_suggestion",CANCEL_COMPOSER:"cancel_composer",POST_PROMPT:"post_prompt",POST_WITHOUT_PROMPT:"post_without_prompt",POST_CREATED:"post_created",IMPRESSION:"impression",SHOW_SUGGESTION:"show_suggestion",HIDE_SUGGESTION:"hide_suggestion",PROMPT_AVAILABLE:"prompt_available",PROMPT_NOT_CONSIDERED:"prompt_not_considered",DEIMPRESSION:"deimpression",CLICK_TAGGER:"og-tagger-click",UNDO_DISMISS:"undo_dismiss",SHARE:"share",CAMERA_CAPTURE:"camera_capture",CAMERA_FLIP:"camera_flip",SAVE_TO_CAMERA_ROLL:"save_to_camera_roll",TAP_FLASH_BUTTON:"tap_flash_button",SCREENSHOT:"screenshot",CLOSE_BUTTON:"close_button",BACK_TO_CAMERA_BUTTON:"back_to_camera_button",BACK_BUTTON:"back_button",PREVIEW_CONFIRM:"preview_confirm",GALLERY_SELECT:"gallery_select",IMPRESSION_END:"impression_end",EFFECT_APPLIED:"effect_applied",THUMBNAIL_IMPRESSION:"thumbnail_impression",NUX_SHOWN:"nux_shown",NUX_DIALOG_BUTTON_CLICKED_ALLOW:"nux_dialog_button_clicked_allow",NUX_DIALOG_BUTTON_CLICKED_DENY:"nux_dialog_button_clicked_deny",NUX_BUTTON_CLICKED:"nux_button_clicked",PERMISSION_ACCEPTED:"permission_accepted",PERMISSION_DENIED:"permission_denied",NUX_VIDEO_DOWNLOAD:"nux_video_download",NUX_BACK_TO_TOP:"nux_back_to_top",CAMERA_OFF:"camera_off",START_INSPIRATION_SESSION:"start_inspiration_session",END_INSPIRATION_SESSION:"end_inspiration_session",START_NUX_SESSION:"start_nux_session",END_NUX_SESSION:"end_nux_session",START_CAMERA_SESSION:"start_camera_session",END_CAMERA_SESSION:"end_camera_session",START_EDITING_SESSION:"start_editing_session",END_EDITING_SESSION:"end_editing_session",START_SHARE_SHEET_SESSION:"start_share_sheet_session",END_SHARE_SHEET_SESSION:"end_share_sheet_session",START_EFFECTS_TRAY_SESSION:"start_effects_tray_session",END_EFFECTS_TRAY_SESSION:"end_effects_tray_session",START_GALLERY_SESSION:"start_gallery_session",END_GALLERY_SESSION:"end_gallery_session",START_DOODLE_SESSION:"start_doodle_session",END_DOODLE_SESSION:"end_doodle_session",START_TEXT_SESSION:"start_text_session",END_TEXT_SESSION:"end_text_session",CAMERA_BUTTON_IN_FEED_IMPRESSION:"camera_button_in_feed_impression",NO_EFFECTS:"no_effects"};}),null);
__d("ReactComposerCollageLayoutActor",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={USER:1,PAGE:2};}),null);
__d("ReactComposerJSONCollageLayoutData",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={"2":[{validActors:3,photoLayouts:[[0,3,3,0],[0,6,3,3]]},{validActors:3,photoLayouts:[[0,6,3,0],[3,6,6,0]]},{validActors:3,photoLayouts:[[0,3,6,0],[0,6,6,3]]},{validActors:1,photoLayouts:[[0,6,2,0],[2,6,4,0]]}],"3":[{validActors:3,photoLayouts:[[0,6,3,0],[3,3,6,0],[3,6,6,3]]},{validActors:3,photoLayouts:[[0,3,6,0],[0,6,3,3],[3,6,6,3]]},{validActors:2,photoLayouts:[[0,2,2,0],[0,4,2,2],[0,6,2,4]]},{validActors:1,photoLayouts:[[0,6,4,0],[4,3,6,0],[4,6,6,3]]},{validActors:1,photoLayouts:[[0,4,6,0],[0,6,3,4],[3,6,6,4]]},{validActors:1,photoLayouts:[[0,6,2,0],[2,6,4,0],[4,6,6,0]]},{validActors:1,photoLayouts:[[0,2,6,0],[0,4,6,2],[0,6,6,4]]}],"4":[{validActors:3,photoLayouts:[[0,3,3,0],[0,6,3,3],[3,3,6,0],[3,6,6,3]]},{validActors:3,photoLayouts:[[0,6,4,0],[4,2,6,0],[4,4,6,2],[4,6,6,4]]},{validActors:3,photoLayouts:[[0,4,6,0],[0,6,2,4],[2,6,4,4],[4,6,6,4]]}],"5":[{validActors:1,photoLayouts:[[0,3,3,0],[3,3,6,0],[0,6,2,3],[2,6,4,3],[4,6,6,3]]},{validActors:1,photoLayouts:[[0,3,3,0],[0,6,3,3],[3,2,5,0],[3,4,5,2],[3,6,5,4]]}]};}),null);
__d("ReactComposerMediaAspectTypes",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={LANDSCAPE:"landscape",PORTRAIT:"portrait",SQUARE:"square",PANORAMA_TESTING_ONLY:"panorama",VERTICAL_PANORAMA_TESTING_ONLY:"vertical_panorama"};}),null);
__d('CircularProgressBar.react',['cx','React'],(function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'CircularProgressBar',propTypes:{percentComplete:i.number.isRequired},render:function k(){var l=360*this.props.percentComplete/100,m=Math.max(l,180)-180,n=Math.min(l,180),o=this.props.percentComplete<100?'1':'0';return (c('React').createElement('div',{className:"_1_bj",style:{opacity:o}},c('React').createElement('div',{className:"_1_bk"},c('React').createElement('div',{className:"_1_bl",style:{opacity:o}}),c('React').createElement('div',{className:"_1_bp _1_bq"},c('React').createElement('div',{className:"_1_br",style:{transform:'translateX(-100%) rotate('+m+'deg)',opacity:o}})),c('React').createElement('div',{className:"_1_bs _1_bq"},c('React').createElement('div',{className:"_1_br",style:{transform:'translateX(-100%) rotate('+n+'deg)',opacity:o}})))));}});f.exports=j;}),null);
__d('MemePickerDialogTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:MemePickerDialogLoggerConfig',this.$MemePickerDialogTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:MemePickerDialogLoggerConfig',this.$MemePickerDialogTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$MemePickerDialogTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$MemePickerDialogTypedLogger1=babelHelpers['extends']({},this.$MemePickerDialogTypedLogger1,j);return this;};h.prototype.setEvent=function(j){this.$MemePickerDialogTypedLogger1.event=j;return this;};h.prototype.setMeme=function(j){this.$MemePickerDialogTypedLogger1.meme=j;return this;};h.prototype.setVC=function(j){this.$MemePickerDialogTypedLogger1.vc=j;return this;};var i={event:true,meme:true,vc:true};f.exports=h;}),null);
__d('FaceRecognitionController',['ArbiterMixin','BanzaiODS','Poller','mixin','removeFromArray','FacerecWaterfallEvent'],(function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('mixin')(c('ArbiterMixin')));i=h&&h.prototype;function j(k){'use strict';i.constructor.call(this);this._config=babelHelpers['extends']({uri:'/photos/tagging/recognition/',interval:2000,maxRequests:4,targetIsPage:false,targetID:null},k);this._cleanup();this._poller=new (c('Poller'))({dontStart:true,maxRequests:this._config.maxRequests,interval:this._config.interval,setupRequest:function(l){l.setURI(this._config.uri).setData({recognition_project:'composer_facerec',photos:this._pendingPhotos,waterfallID:this._config.waterfallID,target:this._config.targetID,is_page:this._config.targetIsPage,include_unrecognized_faceboxes:!!this._config.include_unrecognized_faceboxes,include_face_crop_src:!!this._config.include_face_crop_src,include_recognized_user_profile_picture:!!this._config.include_recognized_user_profile_picture,include_low_confidence_recognitions:!!this._config.include_low_confidence_recognitions}).setHandler(this._handleResponse.bind(this));}.bind(this)});this._poller.subscribe('done',function(){var l=this._pendingPhotos;this._cleanup();this.inform('done',{unresolved:l,facerecWaterfallEvent:c('FacerecWaterfallEvent').CLIENT_RECOGNITION_POLLER_GIVE_UP});}.bind(this));}j.prototype.setWaterfallID=function(k){'use strict';this._config.waterfallID=k;};j.prototype.start=function(k){'use strict';Array.prototype.push.apply(this._pendingPhotos,k);this._poller.reset();this._resetSafeguardTimeout();};j.prototype.stop=function(){'use strict';this._poller.stop();this._cleanup();};j.prototype._cleanup=function(){'use strict';window.clearTimeout(this._safeguardTimeout);this._safeguardTimeout=null;this._pendingPhotos=[];};j.prototype._resetSafeguardTimeout=function(){'use strict';window.clearTimeout(this._safeguardTimeout);this._safeguardTimeout=window.setTimeout(function(){c('BanzaiODS').bumpEntityKey('composer_facerec','safeguard');var k=this._pendingPhotos;this._poller.stop();this._cleanup();this.inform('done',{unresolved:k,facerecWaterfallEvent:c('FacerecWaterfallEvent').CLIENT_RECOGNITION_POLLER_TIMEOUT});}.bind(this),(this._config.maxRequests+2)*this._config.interval);};j.prototype._handleResponse=function(k){'use strict';var l=k.getPayload();l.forEach(function(m){var n=0;c('removeFromArray')(this._pendingPhotos,m.fbid);m.faceboxes.forEach(function(o){n+=o.recognitions.length;o.recognitions.forEach(function(p){this.inform('recognition',{photo:m.fbid,facebox:{fbid:o.fbid,x:o.x,y:o.y},recognition:p});}.bind(this));}.bind(this));this.inform('photo',{photo:m.fbid,faceboxes:m.faceboxes,recognitions:n});}.bind(this));if(!this._pendingPhotos.length){this._poller.stop();this._cleanup();this.inform('done',{unresolved:this._pendingPhotos});}};f.exports=j;}),null);
__d('MemePickerLogger',['ComposerMemePickerDialogEvent','FunnelLogger','MemePickerDialogTypedLogger'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h='WWW_MEME_PICKER_DIALOG_FUNNEL',i=false,j={_log:function k(l,m){new (c('MemePickerDialogTypedLogger'))().setEvent(l).setMeme(m).log();if(!i){i=true;c('FunnelLogger').startFunnel(h);}c('FunnelLogger').appendAction(h,l);},logMemePromptClicked:function k(){this._log(c('ComposerMemePickerDialogEvent').MEME_PROMPT_CLICKED);},logMemePickerOpened:function k(){this._log(c('ComposerMemePickerDialogEvent').MEME_PICKER_OPENED);},logMemeSelected:function k(l){this._log(c('ComposerMemePickerDialogEvent').MEME_SELECTED,l);},logMemePosted:function k(l){this._log(c('ComposerMemePickerDialogEvent').MEME_POSTED,l);}};f.exports=j;}),null);
__d('ReactComposerPhotoUploader',['ReactComposerLoggingStore','ReactComposerMediaConfig','ReactComposerMediaUploadType','ReactComposerMediaUtils','ReactComposerPhotoActions','ReactComposerMediaUploadActions','ReactComposerMediaUploadStore','ReactComposerMediaUploadActionType','ActorURI','AsyncUploadRequest','FaceRecognitionController','JpegResizer','Map','PhotosUploadID','SphericalPhotoConfig','XComposerPhotoUploader','performanceNow'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i,j,k){this.$ReactComposerPhotoUploader1=i.composerID;this.$ReactComposerPhotoUploader5=k;var l=c('ReactComposerMediaConfig').photo,m=null;if(c('JpegResizer').isSupported()){m=c('JpegResizer').getSingleton(j>1?c('JpegResizer').DEFAULT_POOL_SIZE:1);m.setHighQuality(l.highQuality);}else c('ReactComposerMediaUploadActions').resizerUnavailable(this.$ReactComposerPhotoUploader1);var n=c('ActorURI').create(l.uploadEndpoint,i.actorID);this.$ReactComposerPhotoUploader2=new (c('XComposerPhotoUploader'))({uploadEndpoint:n,uploadData:Object.assign({qn:c('ReactComposerLoggingStore').getSessionID(this.$ReactComposerPhotoUploader1),target_id:i.targetID},l.uploadData),retryLimit:l.retryLimit,concurrentLimit:l.concurrentLimit,resizer:m,onUploadEnqueued:this.$ReactComposerPhotoUploader6.bind(this),onResizeStart:this.$ReactComposerPhotoUploader7.bind(this),onResizeSuccess:this.$ReactComposerPhotoUploader8.bind(this),onResizeFailure:this.$ReactComposerPhotoUploader9.bind(this),onResizeProgress:this.$ReactComposerPhotoUploader10.bind(this),onUploadIsSpherical:this.$ReactComposerPhotoUploader11.bind(this),onUploadStart:this.$ReactComposerPhotoUploader12.bind(this),onUploadProgress:this.$ReactComposerPhotoUploader13.bind(this),onUploadSuccess:this.$ReactComposerPhotoUploader14.bind(this),onUploadFailure:this.$ReactComposerPhotoUploader15.bind(this),gks:i.gks});this.$ReactComposerPhotoUploader3=new (c('FaceRecognitionController'))({include_unrecognized_faceboxes:true,include_low_confidence_recognitions:true,include_face_crop_src:true});this.$ReactComposerPhotoUploader3.subscribe('photo',this.$ReactComposerPhotoUploader16.bind(this));this.$ReactComposerPhotoUploader3.subscribe('done',this.$ReactComposerPhotoUploader17.bind(this));this.$ReactComposerPhotoUploader4=new (c('Map'))();}h.prototype.upload=function(i){var j=c('ReactComposerMediaUploadStore').getUploads(this.$ReactComposerPhotoUploader1).size;this.$ReactComposerPhotoUploader2.upload(i,j);};h.prototype.retry=function(i){var j=this.$ReactComposerPhotoUploader2.getAsyncUploadRequest([i]);j.send();};h.prototype.getAsyncUploadRequest=function(i,j){return this.$ReactComposerPhotoUploader2.getAsyncUploadRequest(i,j);};h.prototype.enqueueAsyncUploadRequest=function(i,j,k,l,m){j.forEach(function(n){var o=k.indexMap?k.indexMap.get(n.uploadID):c('ReactComposerMediaUploadStore').getUploads(i).size;c('ReactComposerMediaUploadActions').enqueue(i,n.uploadID,n.name,o,c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_ENQUEUED,c('ReactComposerMediaUploadType').PHOTO,URL.createObjectURL(n),l.xyTags,m);});this.getAsyncUploadRequest(j,k).send();};h.prototype.isUploadLimitExceeded=function(i,j){var k=this.getMaxSelectableFilesCount(i),l=!j||!c('AsyncUploadRequest').isSupported()?1:j.length;return l>k;};h.prototype.getMaxSelectableFilesCount=function(i){return !!i?c('ReactComposerMediaConfig').photo.limit:1;};h.prototype.$ReactComposerPhotoUploader6=function(i){c('ReactComposerMediaUploadActions').enqueue(this.$ReactComposerPhotoUploader1,i.uploadID,i.fileName,c('ReactComposerMediaUploadStore').getUploads(this.$ReactComposerPhotoUploader1).size,c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_ENQUEUED,c('ReactComposerMediaUploadType').PHOTO,i.fileURL,null,i.isSpherical);};h.prototype.$ReactComposerPhotoUploader11=function(i,j,k){c('ReactComposerMediaUploadActions').isSpherical(this.$ReactComposerPhotoUploader1,i.uploadID,j,k);};h.prototype.$ReactComposerPhotoUploader7=function(i){c('ReactComposerMediaUploadActions').startResizing(this.$ReactComposerPhotoUploader1,i.uploadID,{bytes:i.size});};h.prototype.$ReactComposerPhotoUploader10=function(i,event){setTimeout(function(){return c('ReactComposerMediaUploadActions').progressResizing(this.$ReactComposerPhotoUploader1,i,100*event.written/event.total);}.bind(this),0);};h.prototype.$ReactComposerPhotoUploader8=function(i,j,k,l){c('ReactComposerMediaUploadActions').doneResizing(this.$ReactComposerPhotoUploader1,i.uploadID,{dt:l,media_data_size:i.size,bytes:j.size,custom_tags:{skipped_resizing:k}});};h.prototype.$ReactComposerPhotoUploader9=function(i,j,k,l){c('ReactComposerMediaUploadActions').failResizing(this.$ReactComposerPhotoUploader1,i.uploadID,{dt:l,bytes:i.size,error_code:k.code,error_info:k.message});};h.prototype.$ReactComposerPhotoUploader12=function(i,j){c('ReactComposerMediaUploadActions').startUploading(this.$ReactComposerPhotoUploader1,i,j.upload,c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_UPLOADING);this.$ReactComposerPhotoUploader4.set(i,c('performanceNow')());};h.prototype.$ReactComposerPhotoUploader13=function(i,j){setTimeout(function(){return c('ReactComposerMediaUploadActions').progressUploading(this.$ReactComposerPhotoUploader1,i,100*j.event.loaded/j.event.total);}.bind(this),0);};h.prototype.$ReactComposerPhotoUploader14=function(i,j){if(c('ReactComposerMediaUploadStore').getHasUploadBeenRemoved(this.$ReactComposerPhotoUploader1,i))return;if(!j.response.payload)return;var k=Array.isArray(j.response.payload)?j.response.payload:[j.response.payload],l=this.$ReactComposerPhotoUploader4.get(i)||0,m=l?c('performanceNow')()-l:0,n=k[0],o=k.slice(1);c('ReactComposerMediaUploadActions').doneUploading(this.$ReactComposerPhotoUploader1,i,c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_DONE,j.upload,m,n.photoID,n.sphericalPhotoID,n.thumbSrc,n.originalPhotoID,n.mediaLocation,c('SphericalPhotoConfig').spherical_photo_www_upload&&n.cubestripURI||null,n.imageSrc,n.width,n.height);c('ReactComposerMediaUtils').changeToPeopleTaggerAfterUpload(this.$ReactComposerPhotoUploader1);this.$ReactComposerPhotoUploader18(i,n,j.upload);o.forEach(function(p){var q=c('PhotosUploadID').getNewID();c('ReactComposerMediaUploadActions').doneUploadingExtra(this.$ReactComposerPhotoUploader1,q,p.photoID,p.thumbSrc,c('SphericalPhotoConfig').spherical_photo_www_upload&&p.cubestripURI||null,p.imageSrc,p.width,p.height);this.$ReactComposerPhotoUploader18(q,p,j.upload);}.bind(this));};h.prototype.$ReactComposerPhotoUploader18=function(i,j,k){if(!this.$ReactComposerPhotoUploader5.disableFaceRecognition){c('ReactComposerPhotoActions').startRecognizing(this.$ReactComposerPhotoUploader1,j.photoID);this.$ReactComposerPhotoUploader3.start([j.photoID]);}var l=c('ReactComposerMediaUploadStore').getMediaUpload(this.$ReactComposerPhotoUploader1,i);if(l.xyTags)c('ReactComposerMediaUtils').handleXYTagsOnly(this.$ReactComposerPhotoUploader1,l.photoID,l.xyTags);};h.prototype.$ReactComposerPhotoUploader15=function(i,j,k){if(c('ReactComposerMediaUploadStore').getHasUploadBeenRemoved(this.$ReactComposerPhotoUploader1,i))return;var l=j.response,m={code:l.getError(),description:l.getErrorDescription(),summary:l.getErrorSummary(),transient:l.isTransient()||l.getError()==1004||l.getError()==1006};c('ReactComposerMediaUploadActions').failUploading(this.$ReactComposerPhotoUploader1,i,j.upload,c('performanceNow')()-this.$ReactComposerPhotoUploader4.get(i),m,c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_FAILED);};h.prototype.$ReactComposerPhotoUploader16=function(i,j){j.faceboxes.forEach(function(k){var l=void 0;if(k.recognitions.length>0){var m=k.recognitions[0].user;l={subjectID:m.fbid,value:m.name};}c('ReactComposerPhotoActions').addFacebox(this.$ReactComposerPhotoUploader1,j.photo,{id:k.fbid,x:k.x,y:k.y,top:k.top,left:k.left,width:k.width,height:k.height,croppedURI:k.src,bestRecognition:l,allRecognitions:k.allRecognitions});}.bind(this));c('ReactComposerPhotoActions').finishRecognizingPhoto(this.$ReactComposerPhotoUploader1,j.photo);};h.prototype.$ReactComposerPhotoUploader17=function(i,j){c('ReactComposerPhotoActions').finishRecognizing(this.$ReactComposerPhotoUploader1,j.unresolved,j.facerecWaterfallEvent||null);};f.exports=h;}),null);
__d('ReactComposerScrapedAttachmentPhotoDropWarningDialog.react',['fbt','LayerHideOnEscape','React','XUIButton.react','XUIDialog.react','XUIDialogBody.react','XUIDialogFooter.react','XUIDialogHeader.react','XUIDialogHeaderTitle.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$ReactComposerScrapedAttachmentPhotoDropWarningDialog1=function(){this.props.onCancel&&this.props.onCancel();}.bind(this),this.$ReactComposerScrapedAttachmentPhotoDropWarningDialog2=function(){this.props.onCancel&&this.props.onCancel();}.bind(this),n;}l.prototype.componentDidMount=function(){this.refs.dialog.layer.subscribe('hide',this.$ReactComposerScrapedAttachmentPhotoDropWarningDialog1);};l.prototype.render=function(){return c('React').createElement(c('XUIDialog.react'),{ref:'dialog',shown:this.props.shown,width:500,layerHideOnBlur:false,behaviors:{LayerHideOnEscape:c('LayerHideOnEscape')},key:'dialog'},c('React').createElement(c('XUIDialogHeader.react'),null,c('React').createElement(c('XUIDialogHeaderTitle.react'),null,h._("Remove Link Preview"))),c('React').createElement(c('XUIDialogBody.react'),null,h._("Uploading a photo will remove the link preview. Do you want to continue?")),c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIButton.react'),{use:'confirm',onClick:this.props.onConfirm,label:h._("Upload Photo")}),c('React').createElement(c('XUIButton.react'),{onClick:this.props.onCancel,label:h._("Cancel")})));};l.propTypes={shown:k.bool,onConfirm:k.func,onCancel:k.func};f.exports=l;}),null);
__d('ReactComposerDragDropPromptContainer.react',['ReactComposerAttachmentType','ReactComposerConfig','ReactComposerDragDropPromptLazy.react','ReactComposerLoggingName','ReactComposerPhotoUploader','ReactComposerPropsAndStoreBasedStateMixin','ReactComposerScrapedAttachmentActions','ReactComposerScrapedAttachmentStore','ReactComposerScrapedAttachmentPhotoDropWarningDialog.react','ReactComposerStatusUtils','ReactComposerVideoUploadStore','ReactComponentWithPureRenderMixin','React'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'ReactComposerDragDropPromptContainer',_uploader:undefined,mixins:[c('ReactComponentWithPureRenderMixin'),c('ReactComposerPropsAndStoreBasedStateMixin')(c('ReactComposerVideoUploadStore'))],propTypes:{root:h.object.isRequired,config:c('ReactComposerConfig').isRequired},statics:{calculateState:function j(k,l,m){return {enabled:!c('ReactComposerVideoUploadStore').getVideo(k)};}},getAttachmentInitialState:function j(k,l){return {photoDropWarningShown:false,pendingFiles:null};},componentWillMount:function j(){var k=this.props.config.attachmentsConfig[c('ReactComposerAttachmentType').STATUS],l=this.props.config.attachmentsConfig[c('ReactComposerAttachmentType').MEDIA];this._uploader=new (c('ReactComposerPhotoUploader'))(this.context,l.photoLimit,{disableFaceRecognition:l.disableFaceboxTagger});c('ReactComposerScrapedAttachmentActions').enabled(this.context.composerID,k.canScrapeShare);},renderLayers:function j(){return (c('React').createElement(c('ReactComposerScrapedAttachmentPhotoDropWarningDialog.react'),{shown:this.state.photoDropWarningShown,onCancel:this._onPhotoDropWarningCancel,onConfirm:this._onPhotoDropWarningConfirm,key:'photoDropWarningDialog'}));},render:function j(){if(!this.state.enabled)return c('React').createElement('span',null,this.renderLayers());return (c('React').createElement('span',null,c('React').createElement(c('ReactComposerDragDropPromptLazy.react'),{root:this.props.root,onFilesDrop:this._onFilesDrop,onURLDrop:this._onURLDrop}),this.renderLayers()));},_onFilesDrop:function j(k){if(c('ReactComposerScrapedAttachmentStore').hasAttachment(this.context.composerID)&&this.state.pendingFiles==null){this.setState({photoDropWarningShown:true,pendingFiles:k});return;}c('ReactComposerStatusUtils').uploadDroppedFiles(this.context.composerID,k,this._uploader,this.props.config.targetData.targetSupportsMultiMedia,this.props.config.attachmentsConfig[c('ReactComposerAttachmentType').MEDIA],this.context);},_onPhotoDropWarningCancel:function j(){this.setState({photoDropWarningShown:false,pendingFiles:null});},_onPhotoDropWarningConfirm:function j(){var k=this.state.pendingFiles;this.setState({photoDropWarningShown:false,pendingFiles:null});this._onFilesDrop(k);},_onURLDrop:function j(k){c('ReactComposerStatusUtils').scrapeLink(this.context.composerID,this.context.targetID,k,this.context.composerType,this.context.actorID,c('ReactComposerLoggingName').LINK_DROPPED);}});f.exports=i;}),null);
__d('ReactComposerLiveVideoPreviewButton.react',['fbt','React','XUIAmbientNUX.react','XUIButton.react'],(function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;l.prototype.$ReactComposerLiveVideoPreviewButton1=function(){'use strict';return (c('React').createElement(c('XUIAmbientNUX.react'),{contextRef:function(){return this.refs.button;}.bind(this),shown:this.props.showNUX,position:'below',width:'auto',onCloseButtonClick:this.props.onNUXCloseButtonClick},h._("Click to turn on the camera for your live video")));};l.prototype.render=function(){'use strict';return (c('React').createElement('span',null,c('React').createElement(c('XUIButton.react'),{disabled:this.props.disabled,ref:'button',label:h._("Next"),onClick:this.props.onClick,use:'confirm'}),this.$ReactComposerLiveVideoPreviewButton1()));};function l(){'use strict';i.apply(this,arguments);}l.propTypes={disabled:k.bool,showNUX:k.bool,onClick:function m(){},onNUXCloseButtonClick:function m(){}};f.exports=l;}),null);
__d('ReactComposerCollagePlusButton.react',['ix','cx','fbt','ReactComposerAttachmentType','ReactComposerConfig','ReactComposerLoggingName','ReactComposerMediaFilePickerController.react','Image.react','Link.react','React','fbglyph'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l;if(c.__markCompiled)c.__markCompiled();var m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;n.prototype.render=function(){var o=this.props.composerConfig.attachmentsConfig[c('ReactComposerAttachmentType').MEDIA];return (c('React').createElement(c('ReactComposerMediaFilePickerController.react'),{containerClassName:"_kqb",loggingName:c('ReactComposerLoggingName').MEDIA_COLLAGE_PLUS_BUTTON,disableFaceRecognition:!this.props.enableFaceboxTagger,mediaAcceptParam:this.props.composerConfig.mediaAcceptParam,mediaConfig:o,photoLimit:o.photoLimit,targetData:this.props.composerConfig.targetData},c('React').createElement(c('Link.react'),null,c('React').createElement(c('Image.react'),{className:"_kqk",src:h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/plus_20_fig-accent.png")}),j._("Add more photos \/ videos"))));};function n(){k.apply(this,arguments);}n.propTypes={composerConfig:c('ReactComposerConfig').isRequired,enableFaceboxTagger:m.bool};f.exports=n;}),null);
__d('ReactComposerCollageDragHandler',['Event','Map','Vector'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(m){return m.reduce(function(n,o){return n+o;});}function i(m){var n=m.length;if(n===0)return null;var o=h(m.map(function(q){return q.x;}))/n,p=h(m.map(function(q){return q.y;}))/n;return new (c('Vector'))(o,p);}function j(m){var n=m.length;if(n===0)return null;var o=0,p=0;for(var q=0;q<n;q++){var r=m.item(q);o+=r.pageX;p+=r.pageY;}return new (c('Vector'))(o/n,p/n);}function k(event){return (event.buttons!==undefined?event.buttons&1:event.button===0&&event.type!=='mouseup');}function l(m,n,o,p){this.$ReactComposerCollageDragHandler1=m;this.$ReactComposerCollageDragHandler2=n;this.$ReactComposerCollageDragHandler3=o;this.$ReactComposerCollageDragHandler4=p;this.$ReactComposerCollageDragHandler7=false;this.$ReactComposerCollageDragHandler5=new (c('Map'))();}l.prototype.onMouseDown=function(event){if(k(event)){this.$ReactComposerCollageDragHandler7=true;this.$ReactComposerCollageDragHandler8(event);this.$ReactComposerCollageDragHandler2(this.$ReactComposerCollageDragHandler1,this.$ReactComposerCollageDragHandler6);}};l.prototype.onMouseUp=function(event){if(!k(event)&&this.$ReactComposerCollageDragHandler7){this.$ReactComposerCollageDragHandler7=false;this.$ReactComposerCollageDragHandler8(event);this.$ReactComposerCollageDragHandler4(this.$ReactComposerCollageDragHandler1,this.$ReactComposerCollageDragHandler6);}};l.prototype.onMouseMove=function(event){if(!k(event))this.$ReactComposerCollageDragHandler7=false;if(this.$ReactComposerCollageDragHandler7){var m=this.$ReactComposerCollageDragHandler8(event);this.$ReactComposerCollageDragHandler3(this.$ReactComposerCollageDragHandler1,this.$ReactComposerCollageDragHandler6,m);}};l.prototype.onBlur=function(event){if(this.$ReactComposerCollageDragHandler7)this.$ReactComposerCollageDragHandler4(this.$ReactComposerCollageDragHandler1,this.$ReactComposerCollageDragHandler6);this.$ReactComposerCollageDragHandler7=false;this.$ReactComposerCollageDragHandler6=null;if(this.$ReactComposerCollageDragHandler5.size>0)this.$ReactComposerCollageDragHandler4(this.$ReactComposerCollageDragHandler1,j(Array.from(this.$ReactComposerCollageDragHandler5.values())));this.$ReactComposerCollageDragHandler5=new (c('Map'))();};l.prototype.onTouchStart=function(event){if(this.$ReactComposerCollageDragHandler5.size===0){var m=j(event.targetTouches);this.$ReactComposerCollageDragHandler2(this.$ReactComposerCollageDragHandler1,m);}this.$ReactComposerCollageDragHandler9(event);};l.prototype.onTouchMove=function(event){var m=j(event.targetTouches),n=this.$ReactComposerCollageDragHandler9(event);this.$ReactComposerCollageDragHandler3(this.$ReactComposerCollageDragHandler1,m,n);};l.prototype.onTouchEnd=function(event){this.$ReactComposerCollageDragHandler9(event);if(!event.targetTouches.length)this.$ReactComposerCollageDragHandler4(this.$ReactComposerCollageDragHandler1,j(event.changedTouches));};l.prototype.onTouchCancel=function(event){this.$ReactComposerCollageDragHandler9(event);if(!event.targetTouches.length)this.$ReactComposerCollageDragHandler4(this.$ReactComposerCollageDragHandler1,j(event.changedTouches));};l.prototype.$ReactComposerCollageDragHandler8=function(event){var m=new (c('Vector'))(event.pageX,event.pageY),n=null;if(this.$ReactComposerCollageDragHandler6)n=m.sub(this.$ReactComposerCollageDragHandler6);this.$ReactComposerCollageDragHandler6=m;return n;};l.prototype.$ReactComposerCollageDragHandler9=function(event){event.preventDefault();var m=[],n=this.$ReactComposerCollageDragHandler5;this.$ReactComposerCollageDragHandler5=new (c('Map'))();for(var o=0;o<event.targetTouches.length;o++){var p=event.targetTouches.item(o),q=new (c('Vector'))(p.pageX,p.pageY),r=n.get(p.identifier);this.$ReactComposerCollageDragHandler5.set(p.identifier,q);if(r)m.push(q.sub(r));}var s=i(m);return s;};f.exports=l;}),null);
__d('ReactComposerPhotoActionButton.react',['cx','React','Tooltip','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;l.prototype.render=function(){var m=c('joinClasses')(this.props.className,"_jfh");return (c('React').createElement('button',babelHelpers['extends']({className:m,onClick:this.props.onClick,tabIndex:'0','aria-label':this.props.tooltip},c('Tooltip').propsFor(this.props.tooltip)),c('React').createElement('div',{className:this.props.iconClassName})));};function l(){i.apply(this,arguments);}l.propTypes={tooltip:k.node,className:k.string,onClick:k.func,iconClassName:k.string};f.exports=l;}),null);
__d('ReactComposerPhotoEditActionButton.react',['cx','fbt','ReactComposerPhotoActionButton.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').PureComponent);k=j&&j.prototype;m.prototype.render=function(){var n=i._("Edit Photo");return (c('React').createElement(c('ReactComposerPhotoActionButton.react'),{className:"_4_z4",onClick:this.props.onClick,tooltip:n,iconClassName:"_4_z5"}));};function m(){j.apply(this,arguments);}m.propTypes={onClick:l.func};f.exports=m;}),null);
__d('ReactComposerFaceboxTaggerTypeaheadPresenter',['cx','React','XUITypeaheadView.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){return (c('React').createElement('div',{className:"_3ntx"},c('React').createElement(c('XUITypeaheadView.react'),this.props)));};function k(){i.apply(this,arguments);}var l={ViewRenderer:k,useLayer:true};f.exports=l;}),null);
__d('ReactComposerPhotoFaceboxTagger.react',['cx','fbt','ReactComposerFaceboxTaggerTypeaheadPresenter','React','XUITypeahead.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').PureComponent);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.state={query:''},this.$ReactComposerPhotoFaceboxTagger1=function(s){this.props.onTagAdded(this.props.faceboxID,s.getUniqueID(),s.getTitle());}.bind(this),this.$ReactComposerPhotoFaceboxTagger2=function(event){this.setState({query:event.target.value});}.bind(this),o;}m.prototype.render=function(){var n=i._("Who is this?");return c('React').createElement(c('XUITypeahead.react'),{className:"_xgd",queryString:this.state.query,placeholder:n,onSelectAttempt:this.$ReactComposerPhotoFaceboxTagger1,onChange:this.$ReactComposerPhotoFaceboxTagger2,searchSource:this.props.dataSource,highlightOnSelect:true,showEntriesOnFocus:true,autoHighlight:true,selectOnTab:true,focusedOnInit:true,presenter:c('ReactComposerFaceboxTaggerTypeaheadPresenter')});};m.propTypes={faceboxID:l.string.isRequired,dataSource:l.object.isRequired,onTagAdded:l.func.isRequired};f.exports=m;}),null);
__d('ReactComposerQAndAActionType',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=c('keyMirrorRecursive')({SET_QANDA_CONFIG:null},'ReactComposerQAndAActionType');}),null);
__d('ReactComposerQAndAStore',['ReactComposerQAndAActionType','ReactComposerStoreBase'],(function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('ReactComposerStoreBase'));i=h&&h.prototype;function j(){'use strict';var k;i.constructor.call(this,function(){return {photoLimit:1,profilePicURI:null,profileURI:null,faceboxDataSource:null};},function(l){switch(l.type){case c('ReactComposerQAndAActionType').SET_QANDA_CONFIG:k&&k.$ReactComposerQAndAStore1(l);break;}});k=this;}j.prototype.getPhotoLimit=function(k){'use strict';return this.getComposerData(k).photoLimit;};j.prototype.getProfilePicSrc=function(k){'use strict';return this.getComposerData(k).profilePicSrc;};j.prototype.getProfileURI=function(k){'use strict';return this.getComposerData(k).profileURI;};j.prototype.getFaceboxDataSource=function(k){'use strict';return this.getComposerData(k).faceboxDataSource;};j.prototype.$ReactComposerQAndAStore1=function(k){'use strict';var l=this.validateAction(k,['composerID','config']),m=l[0],n=l[1],o=this.getComposerData(m);o.photoLimit=n.photoLimit;o.profilePicSrc=n.profilePicSrc;o.profileURI=n.profileURI;o.faceboxDataSource=n.faceboxDataSource;this.emitChange(k.composerID);};f.exports=new j();}),null);
__d('ReactComposerPhotoFaceboxTaggerContainer.react',['ReactComposerMediaAttachmentStore','ReactComposerPhotoFaceboxTagger.react','ReactComposerPropsAndStoreBasedStateMixin','ReactComposerQAndAStore','ReactComponentWithPureRenderMixin','React'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'ReactComposerPhotoFaceboxTaggerContainer',mixins:[c('ReactComponentWithPureRenderMixin'),c('ReactComposerPropsAndStoreBasedStateMixin')(c('ReactComposerMediaAttachmentStore'),c('ReactComposerQAndAStore'))],propTypes:{faceboxID:h.string.isRequired,onTagAdded:h.func.isRequired},statics:{calculateState:function j(k){var l=c('ReactComposerMediaAttachmentStore').getTaggingDataSource(k)||c('ReactComposerQAndAStore').getFaceboxDataSource(k);l&&l.bootstrap();return {dataSource:l};}},render:function j(){return (c('React').createElement(c('ReactComposerPhotoFaceboxTagger.react'),{faceboxID:this.props.faceboxID,dataSource:this.state.dataSource,onTagAdded:this.props.onTagAdded}));}});f.exports=i;}),null);
__d('ReactComposerPhotoProductTagActionButton.react',['cx','fbt','AsyncRequest','CommerceProductTaggerType','CommerceSelfServeNUXType','ReactComposerPhotoActionButton.react','ReactComposerTaggerActions','ReactComposerTaggerType','React','XCommerceSelfServeMerchantNUXSeenController','XUIAmbientNUX.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').PureComponent);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$ReactComposerPhotoProductTagActionButton1=function(){if(!this.props.showNux)return null;c('ReactComposerTaggerActions').handleSetTaggerShowNUX(this.props.composerID,c('ReactComposerTaggerType').PRODUCT,false);var s=this.props.productTaggerType,t=s===c('CommerceProductTaggerType').SHOP_PAGE?i._("Tag products from your shop in this photo"):i._("Tag products from your product catalog in this photo");return (c('React').createElement(c('XUIAmbientNUX.react'),{alignment:'center',contextRef:function(){return this.refs.fbReactComposerPhotoActionbutton;}.bind(this),position:'below',shown:true,onCloseButtonClick:this.$ReactComposerPhotoProductTagActionButton2},t));}.bind(this),this.$ReactComposerPhotoProductTagActionButton2=function(){var s=c('XCommerceSelfServeMerchantNUXSeenController').getURIBuilder().setInt('page_id',this.props.pageID).setEnum('nux_type',c('CommerceSelfServeNUXType').COMPOSER_PRODUCT_PHOTO_TAGGER_BUTTON).getURI();new (c('AsyncRequest'))(s).send();this.props.onHideNux();}.bind(this),o;}m.prototype.render=function(){var n=i._("Tag Products");return c('React').createElement('div',null,c('React').createElement(c('ReactComposerPhotoActionButton.react'),{ref:'fbReactComposerPhotoActionbutton',className:"_a69"+(this.props.hasTag?' '+"_a6b":''),tooltip:n,iconClassName:"_a6_",onClick:this.props.onClick}),this.$ReactComposerPhotoProductTagActionButton1());};m.propTypes={composerID:l.string.isRequired,pageID:l.string.isRequired,productTaggerType:l.string.isRequired,hasTag:l.bool.isRequired,onClick:l.any,onHideNux:l.func.isRequired,showNux:l.bool.isRequired};f.exports=m;}),null);
__d('ReactComposerPhotoTagActionButton.react',['cx','fbt','ReactComposerPhotoActionButton.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').PureComponent);k=j&&j.prototype;m.prototype.render=function(){var n=i._("Tag");return (c('React').createElement(c('ReactComposerPhotoActionButton.react'),{className:"_cwf"+(this.props.hasTag?' '+"_cwh":''),tooltip:n,iconClassName:"_cwg",onClick:this.props.onClick}));};function m(){j.apply(this,arguments);}m.propTypes={hasTag:l.bool.isRequired,onClick:l.any};f.exports=m;}),null);
__d('ReactComposerPhotoTaggedFaceboxSummary.react',['cx','fbt','ix','Image.react','LeftRight.react','React','TooltipLink.react'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l;if(c.__markCompiled)c.__markCompiled();var m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').PureComponent);l=k&&k.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=l.constructor).call.apply(o,[this].concat(r)),this.$ReactComposerPhotoTaggedFaceboxSummary1=function(){this.props.onTagRemoved(this.props.faceboxID,this.props.taggedSubjectID);}.bind(this),p;}n.prototype.render=function(){var o=i._("Edit Name");return c('React').createElement(c('LeftRight.react'),{className:"_31bg"},c('React').createElement('div',{className:"_31bh"},this.props.taggedValue),c('React').createElement(c('TooltipLink.react'),{alignH:'center',position:'below',tooltip:o,onClick:this.$ReactComposerPhotoTaggedFaceboxSummary1},c('React').createElement(c('Image.react'),{src:j('/images/icons/edit.png')})));};n.propTypes={faceboxID:m.string.isRequired,onTagRemoved:m.func.isRequired,taggedSubjectID:m.string.isRequired,taggedValue:m.string.isRequired};f.exports=n;}),null);
__d('ReactComposerPhotoTagger.react',['cx','fbt','ReactComposerContextMixin','ReactComposerPhotoActions','ReactComposerPhotoFaceboxTaggerContainer.react','ReactComposerPhotoEditActionButton.react','ReactComposerPhotoStore','ReactComposerPhotoTagActionButton.react','ReactComposerPhotoProductTagActionButton.react','ReactComposerPhotoTaggedFaceboxSummary.react','ActorURI','AsyncRequest','CommerceProductTaggerType','ContextualLayerAutoFlip','Image.react','ImageBlock.react','immutable','ReactLayeredComponentMixin_DEPRECATED','LayerHideOnBlur','LayerHideOnEscape','LayerTabIsolation','ModalPhotoEditorTabName','ReactComponentWithPureRenderMixin','React','XStickerPhotoEditorController','PhotoEditorTargetType','XUIContextualDialog.react','XUIContextualDialogBody.react','XUIDialogCloseButton.react','XUIContextualDialogFooter.react'],(function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=268,l=32,m=c('React').createClass({displayName:'ReactComposerPhotoTagger',_photoEditorRequest:undefined,mixins:[c('ReactLayeredComponentMixin_DEPRECATED'),c('ReactComponentWithPureRenderMixin'),c('ReactComposerContextMixin')],propTypes:{canTagFromModal:j.bool,draggingPhotos:j.bool,enableFaceboxTagger:j.bool.isRequired,disablePhotoEditing:j.bool.isRequired,faceboxes:j.instanceOf(c('immutable').Map).isRequired,onEditClick:j.func,onHideProductTaggerNux:j.func.isRequired,onTagAdded:j.func.isRequired,onTagIntent:j.func,onTagRemoved:j.func.isRequired,originalID:j.string,photoID:j.string.isRequired,productTaggerType:j.string.isRequired,shown:j.bool.isRequired,showProductTaggerNux:j.bool.isRequired},getDefaultProps:function n(){return {shown:false};},componentWillReceiveProps:function n(o){if(!this.props.draggingPhotos&&o.draggingPhotos)c('ReactComposerPhotoActions').setPhotoBeingTagged(this.context.composerID,null);},render:function n(){var o=null,p=this.props.productTaggerType!==c('CommerceProductTaggerType').NONE;if(p){o=this._onProductTagClick;}else if(this.props.canTagFromModal)o=this._onTagClick;var q=null;if(p){q=c('React').createElement(c('ReactComposerPhotoProductTagActionButton.react'),{composerID:this.context.composerID,productTaggerType:this.props.productTaggerType,pageID:this.context.targetID,hasTag:c('ReactComposerPhotoStore').hasTagsInPhoto(this.context.composerID,this.props.photoID),onClick:o,onHideNux:this.props.onHideProductTaggerNux,showNux:this.props.showProductTaggerNux});}else if(this.props.enableFaceboxTagger)q=c('React').createElement(c('ReactComposerPhotoTagActionButton.react'),{hasTag:c('ReactComposerPhotoStore').hasTagsInPhoto(this.context.composerID,this.props.photoID),onClick:o});var r=this.props.disablePhotoEditing?null:c('React').createElement(c('ReactComposerPhotoEditActionButton.react'),{onClick:this._onEditClick});return (c('React').createElement('div',{className:"_jfi",onClick:this._onClick,tabIndex:'-1'},q,r));},renderLayers:function n(){if(!this.props.shown||!this.props.enableFaceboxTagger)return null;return {dialog:this._getDialog()};},_getDialog:function n(){return (c('React').createElement(c('XUIContextualDialog.react'),{ref:'dialog',shown:this.props.shown,onToggle:this._onDialogToggled,contextRef:function(){return this;}.bind(this),position:'below',alignment:'center',width:k,behaviors:{LayerHideOnBlur:c('LayerHideOnBlur'),LayerHideOnEscape:c('LayerHideOnEscape'),ContextualLayerAutoFlip:c('ContextualLayerAutoFlip'),LayerTabIsolation:c('LayerTabIsolation')}},c('React').createElement(c('XUIContextualDialogBody.react'),null,this._getDialogBody()),c('React').createElement(c('XUIContextualDialogFooter.react'),null,c('React').createElement(c('XUIDialogCloseButton.react'),{use:'confirm',label:'Close',onClick:this._onCloseButtonClicked}))));},_getDialogBody:function n(){if(this.props.faceboxes.size===0)return i._("We could not find any faces to tag.");return this.props.faceboxes.valueSeq().map(function(o){var p=o.taggedSubjectID?c('React').createElement(c('ReactComposerPhotoTaggedFaceboxSummary.react'),{faceboxID:o.id,onTagRemoved:this.props.onTagRemoved,taggedSubjectID:o.taggedSubjectID,taggedValue:o.taggedValue}):c('React').createElement(c('ReactComposerPhotoFaceboxTaggerContainer.react'),{faceboxID:o.id,onTagAdded:this.props.onTagAdded});return (c('React').createElement(c('ImageBlock.react'),{key:o.id,className:"_qv7"},c('React').createElement(c('Image.react'),{className:"_qv8",height:l,src:o.croppedURI,width:l}),p));}.bind(this));},_onCloseButtonClicked:function n(){c('ReactComposerPhotoActions').setPhotoBeingTagged(this.context.composerID,null);},_onDialogToggled:function n(o){if(!o)this._onCloseButtonClicked();},_onClick:function n(){this.props.onTagIntent&&this.props.onTagIntent();c('ReactComposerPhotoActions').setPhotoBeingTagged(this.context.composerID,this.props.photoID);},_onTagClick:function n(event){this._onEditClick(event,null,c('ModalPhotoEditorTabName').TAG);},_onProductTagClick:function n(event){this._onEditClick(event,null,c('ModalPhotoEditorTabName').PRODUCT_TAG);},_onEditClick:function n(event,o,p){event.stopPropagation();if(this._photoEditorRequest)return;c('ReactComposerPhotoActions').startPhotoEdit(this.context.composerID,this.props.photoID);var q=c('XStickerPhotoEditorController').getURIBuilder().setString('grid_id',this.context.composerID).setEnum('target_type',c('PhotoEditorTargetType').COMPOSER).setInt('latest_fbid',this.props.photoID).setInt('photo_fbid',this.props.originalID||this.props.photoID).setEnum('initial_tab',p).getURI();q=c('ActorURI').create(q,this.context.actorID);this._photoEditorRequest=new (c('AsyncRequest'))(q).setFinallyHandler(function(){this._photoEditorRequest=null;c('ReactComposerPhotoActions').finishLoadingPhotoEdit(this.context.composerID,this.props.photoID);}.bind(this));this._photoEditorRequest&&this._photoEditorRequest.send();this.props.onEditClick&&this.props.onEditClick();}});f.exports=m;}),null);
__d('ReactComposerPhotoThumbnail.react',['Image.react','React'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=function i(j){if(j.bgURL){var k={backgroundImage:'url('+j.bgURL+')'};return (c('React').createElement('div',{className:j.bgClassName,style:k}));}else if(j.imgSrc)return (c('React').createElement(c('Image.react'),{className:j.imgClassName,src:j.imgSrc,style:j.style,width:j.width,height:j.height}));return null;};f.exports=h;}),null);
__d('ReactComposerSphericalPhotoMiddlewares',['Promise','ReactComposerMediaUploadActions','ReactComposerMediaUploadStore','ReactComposerPhotoActions','ReactComposerPhotoStore','ReactComposerPhotoUploader','Bootloader','Map','PUWMethods','SphericalMediaActions'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=new (c('Map'))(),i=0;function j(k){'use strict';this.$ComposerSphericalPhotoMiddlewares9=function(){return function(m){return function(n){if(n.type===c('SphericalMediaActions').PHOTO_REMOVED)if(this.$ComposerSphericalPhotoMiddlewares2){i--;this.$ComposerSphericalPhotoMiddlewares2=false;this.$ComposerSphericalPhotoMiddlewares10();}return m(n);}.bind(this);}.bind(this);}.bind(this);this.$ComposerSphericalPhotoMiddlewares7=function(){return function(m){return function(n){if(n.type===c('SphericalMediaActions').UPDATE_PHOTO||n.type===c('SphericalMediaActions').UPDATE_PHOTO_DONE||n.type===c('SphericalMediaActions').UPDATE_PHOTO_FAILED){switch(n.type){case c('SphericalMediaActions').UPDATE_PHOTO:i++;this.$ComposerSphericalPhotoMiddlewares2=true;break;case c('SphericalMediaActions').UPDATE_PHOTO_FAILED:case c('SphericalMediaActions').UPDATE_PHOTO_DONE:if(this.$ComposerSphericalPhotoMiddlewares2){i--;this.$ComposerSphericalPhotoMiddlewares2=false;}break;}this.$ComposerSphericalPhotoMiddlewares10();}return m(n);}.bind(this);}.bind(this);}.bind(this);this.$ComposerSphericalPhotoMiddlewares8=function(m){var n=m.getState;return function(o){return function(p){switch(p.type){case c('SphericalMediaActions').DISABLE_SPHERICAL_ON_SAVE:this.$ComposerSphericalPhotoMiddlewares11();break;case c('SphericalMediaActions').UPDATE_PHOTO_DONE:var q=n(),r=q.source;this.$ComposerSphericalPhotoMiddlewares12(r.thumbnail);break;default:break;}return o(p);}.bind(this);}.bind(this);}.bind(this);this.$ComposerSphericalPhotoMiddlewares15=function(m,n,o,p){var q=this.$ComposerSphericalPhotoMiddlewares1.composerID,r=c('ReactComposerMediaUploadStore').getMediaUpload(this.$ComposerSphericalPhotoMiddlewares1.composerID,this.$ComposerSphericalPhotoMiddlewares5);this.$ComposerSphericalPhotoMiddlewares13();c('ReactComposerPhotoActions').changeSphericalPhotoUpdateStatus(q,true);var s=function v(){return new (c('Promise'))(function(w){var x=new Image(),y=o.listen(x,'load',function(){w(x);y.remove();});x.src=r.fileURL;});},t=function v(w){return new (c('Promise'))(function(x,y){var z=p.create('canvas'),aa=z.getContext('2d');z.width=w.width;z.height=w.height;aa.drawImage(w,0,0);m(z,'image/jpeg',100).then(function(ba){x(ba);aa.clearRect(0,0,z.width,z.height);},y).done();});},u=function(v){var w=r.id;c('ReactComposerPhotoActions').changeSphericalPhotoUpdateStatus(q,false);if(!c('ReactComposerMediaUploadStore').getMediaUploadExists(q,w))return;var x=c('ReactComposerMediaUploadStore').getUploadIndex(q,w);c('ReactComposerPhotoActions').removePhoto(q,r.photoID,w);var y=v;y.uploadID=n();y.name=r.filename;y.fileURL=r.fileURL;var z=new (c('Map'))([[y.uploadID,x]]);this.$ComposerSphericalPhotoMiddlewares6.enqueueAsyncUploadRequest(q,[y],{data:{xy_tags:r.xyTags,stickers:r.stickers,text_overlays:r.textOverlays,has_crop:r.hasCrop,has_filter:r.hasFilter,spherical_photo_id:this.$ComposerSphericalPhotoMiddlewares4},indexMap:z},{xyTags:r.xyTags},false);c('ReactComposerMediaUploadActions').photosSelect(q,1,c('PUWMethods').DISABLE_SPHERICAL);}.bind(this);s().then(t).then(u).done();}.bind(this);this.$ComposerSphericalPhotoMiddlewares1=k.context;var l={disableFaceRecognition:true};this.$ComposerSphericalPhotoMiddlewares6=new (c('ReactComposerPhotoUploader'))(k.context,1,l);this.$ComposerSphericalPhotoMiddlewares3=k.sphericalPhotoID;this.$ComposerSphericalPhotoMiddlewares4=k.photoID;this.$ComposerSphericalPhotoMiddlewares5=k.uploadID;this.$ComposerSphericalPhotoMiddlewares2=false;}j.prototype.get=function(){'use strict';return [this.$ComposerSphericalPhotoMiddlewares7,this.$ComposerSphericalPhotoMiddlewares8,this.$ComposerSphericalPhotoMiddlewares9];};j.prototype.$ComposerSphericalPhotoMiddlewares10=function(){'use strict';if(i<0){i=0;this.$ComposerSphericalPhotoMiddlewares2=false;}c('ReactComposerPhotoActions').changeSphericalPhotoUpdateStatus(this.$ComposerSphericalPhotoMiddlewares1.composerID,i!==0);};j.prototype.$ComposerSphericalPhotoMiddlewares13=function(){'use strict';var k=this.$ComposerSphericalPhotoMiddlewares1.composerID,l=c('ReactComposerMediaUploadStore').getMediaUpload(k,this.$ComposerSphericalPhotoMiddlewares5),m=c('ReactComposerMediaUploadStore').getUploadIndex(k,this.$ComposerSphericalPhotoMiddlewares5),n=c('ReactComposerPhotoStore').getPhoto(k,this.$ComposerSphericalPhotoMiddlewares4);h.set(this.$ComposerSphericalPhotoMiddlewares4,{upload:l,photo:n,index:m});if(this.$ComposerSphericalPhotoMiddlewares3){var o=this.$ComposerSphericalPhotoMiddlewares3,p=h.get(o);if(p){p.upload=p.upload.set('flatPhotoID',this.$ComposerSphericalPhotoMiddlewares4);h.set(o,p);}}};j.prototype.$ComposerSphericalPhotoMiddlewares14=function(k){'use strict';var l=k.photo,m=k.upload,n=k.index;c('ReactComposerPhotoActions').removePhoto(this.$ComposerSphericalPhotoMiddlewares1.composerID,this.$ComposerSphericalPhotoMiddlewares4,this.$ComposerSphericalPhotoMiddlewares5);c('ReactComposerMediaUploadActions').addPhotoUpload(this.$ComposerSphericalPhotoMiddlewares1.composerID,n,m,l);};j.prototype.$ComposerSphericalPhotoMiddlewares12=function(k){'use strict';if(!this.$ComposerSphericalPhotoMiddlewares3)return;var l=h.get(this.$ComposerSphericalPhotoMiddlewares3);if(!l)throw new Error('Could not find the original upload.');this.$ComposerSphericalPhotoMiddlewares13();l.photo=l.photo.set('thumbSrc',k).set('imageSrc',k);this.$ComposerSphericalPhotoMiddlewares14(l);};j.prototype.$ComposerSphericalPhotoMiddlewares11=function(){'use strict';var k=c('ReactComposerMediaUploadStore').getMediaUpload(this.$ComposerSphericalPhotoMiddlewares1.composerID,this.$ComposerSphericalPhotoMiddlewares5);if(k.flatPhotoID){var l=h.get(k.flatPhotoID);if(l){this.$ComposerSphericalPhotoMiddlewares14(l);return;}}c('Bootloader').loadModules(["canvasToBlob","uniqueID","Event","DOM"],this.$ComposerSphericalPhotoMiddlewares15,'ReactComposerSphericalPhotoMiddlewares');};f.exports=j;}),null);
__d('SphericalMediaGyroIcon.react',['fbt','ix','Image.react','React'],(function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();var l=h._("360 Photo");j=babelHelpers.inherits(m,c('React').PureComponent);k=j&&j.prototype;m.prototype.render=function(){'use strict';var n=this.props.isEnabled?i('/images/photos/spherical/gyro-small.png'):i('/images/photos/spherical/not-360.png');return (c('React').createElement(c('Image.react'),{className:this.props.className,src:n,alt:l}));};function m(){'use strict';j.apply(this,arguments);}m.defaultProps={isEnabled:true};f.exports=m;}),null);
__d('SphericalPhotoIVSNUX',['fbt','BasicFBNux','DOM','React','ReactDOM','SphericalPhotoNUX','XUIAmbientNUX.react'],(function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('SphericalPhotoNUX').IVS,j=i.NUX_ID,k=i.SHOULD_SHOW_NUX,l=1,m=k,n=0,o=[],p=h._("New! Select what view of your 360 photo people see first."),q={shouldShow:function r(){return m&&n<l;},show:function r(s){if(!q.shouldShow())return;c('BasicFBNux').onView(j);n++;var t=c('ReactDOM').findDOMNode(s.contextRef()),u=c('DOM').create('div');c('DOM').appendContent(t,u);c('ReactDOM').render(c('React').createElement(c('XUIAmbientNUX.react'),{contextRef:s.contextRef,shown:true,position:s.position||'above',onCloseButtonClick:function v(){c('BasicFBNux').onDismiss(j);m=false;q.hideAll();}},p),u);o.push(u);},hideAll:function r(){if(o.length>0){c('BasicFBNux').onDismiss(j);o.forEach(function(s){c('ReactDOM').unmountComponentAtNode(s);});o=[];}}};f.exports=q;}),null);
__d('ReactComposerSphericalPhoto.react',['cx','fbt','ReactComposerLoggingStore','ReactComposerMediaConfig','ReactComposerPhotoActionButton.react','ReactComposerPhotoThumbnail.react','ReactComposerSphericalPhotoMiddlewares','ReactComposerStore','React','XUICloseButton.react','SphericalMediaBootloaded.react','SphericalMediaConstants','SphericalMediaGyroIcon.react','SphericalPhotoConfig','SphericalPhotoIVSNUX','SubscriptionsHandler','ReactComposerContextMixin'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('ReactComposerContextMixin').contextTypes,m=c('SphericalMediaConstants').LOGGER_SURFACES,n=i._("Edit 360 Settings");j=babelHelpers.inherits(o,c('React').PureComponent);k=j&&j.prototype;function o(p){k.constructor.call(this,p);this.$ReactComposerSphericalPhoto3=null;this.$ReactComposerSphericalPhoto8=function(){this.setState({isNuxShown:false});c('SphericalPhotoIVSNUX').hideAll();}.bind(this);this.$ReactComposerSphericalPhoto1=new (c('SubscriptionsHandler'))();this.state={isPosting:false,isNuxShown:false};}o.prototype.componentDidMount=function(){this.$ReactComposerSphericalPhoto1.addSubscriptions(c('ReactComposerStore').addChangeListener(function(p){var q=p.composerID;this.setState({isPosting:c('ReactComposerStore').isPosting(q)});}.bind(this)));this.$ReactComposerSphericalPhoto4();};o.prototype.componentWillUnmount=function(){this.$ReactComposerSphericalPhoto1.release();};o.prototype.componentDidUpdate=function(){this.$ReactComposerSphericalPhoto4();};o.prototype.$ReactComposerSphericalPhoto4=function(){var p,q=this;if(c('SphericalPhotoIVSNUX').shouldShow()&&this.$ReactComposerSphericalPhoto5()&&this.$ReactComposerSphericalPhoto2)(function(){var r=q.$ReactComposerSphericalPhoto2;c('SphericalPhotoIVSNUX').show({contextRef:function s(){return r;}});q.setState({isNuxShown:true});})();};o.prototype.$ReactComposerSphericalPhoto6=function(){var p=this.$ReactComposerSphericalPhoto3;if(!p){p=new (c('ReactComposerSphericalPhotoMiddlewares'))({context:this.context,photoID:this.props.photoID,sphericalPhotoID:this.props.sphericalPhotoID,uploadID:this.props.uploadID});this.$ReactComposerSphericalPhoto3=p;}return p;};o.prototype.$ReactComposerSphericalPhoto7=function(p){var q=p.width,r=p.height,s=this.context.gks.local_image_display?this.props.fileURL:null;if(s||this.props.thumbSrc)return c('React').createElement(c('ReactComposerPhotoThumbnail.react'),{bgClassName:"_1a__ _2y94",bgURL:s,imgClassName:"_2y94",height:r,imgSrc:this.props.thumbSrc,style:this.props.imageStyle,width:q});return null;};o.prototype.$ReactComposerSphericalPhoto5=function(){return (c('SphericalPhotoConfig').spherical_photo_www_upload_settings&&!this.state.isPosting&&this.props.showEditButton);};o.prototype.render=function(){var p=Boolean(this.props.sphericalPhotoID),q=this.state.isNuxShown,r=this.context,s=r.actorID,t=r.composerID,u=this.props.width||c('ReactComposerMediaConfig').photo.thumbWidth,v=this.props.height||c('ReactComposerMediaConfig').photo.thumbHeight,w=this.props.sphericalPhotoID||this.props.photoID;return (c('React').createElement('div',{className:this.props.className,style:{width:u,height:v}},this.$ReactComposerSphericalPhoto7({width:u,height:v}),c('SphericalPhotoConfig').spherical_photo_www_upload_settings&&w?c('React').createElement(c('SphericalMediaBootloaded.react'),{componentName:c('SphericalMediaConstants').COMP_PHOTO_EDIT_THUMB,loadingElement:this.props.loadingElement,actorID:s,containerWidth:this.props.containerWidth,containerHeight:this.props.containerHeight,editButtonRef:function(){return this.$ReactComposerSphericalPhoto2;}.bind(this),height:v,isSphericalDisabled:p,photoID:w,surface:m.composer,sessionID:c('ReactComposerLoggingStore').getSessionID(t),hideThumbnail:p,middlewares:this.$ReactComposerSphericalPhoto6().get(),width:u}):null,c('React').createElement(c('SphericalMediaGyroIcon.react'),{className:"_jk8"+(q?' '+"_4eqa":''),isEnabled:!p}),c('React').createElement(c('ReactComposerPhotoActionButton.react'),{className:"_4_z4"+(q?' '+"_4eqb":'')+(!this.$ReactComposerSphericalPhoto5()?' '+"hidden_elem":''),onClick:this.$ReactComposerSphericalPhoto8,ref:function(x){return this.$ReactComposerSphericalPhoto2=x;}.bind(this),tooltip:n,iconClassName:"_4_z5"}),this.props.onRemoveButtonClicked?c('React').createElement(c('XUICloseButton.react'),{className:"_jfe"+(this.state.isPosting?' '+"hidden_elem":''),onClick:this.props.onRemoveButtonClicked,size:'medium',shade:'light'}):null));};o.contextTypes=l;f.exports=o;}),null);
__d('ReactComposerCollagePhoto.react',['cx','ReactComposerSphericalPhoto.react','ReactComposerPhotoTagger.react','React','SphericalMediaGyroIcon.react','XUICloseButton.react','Image.react','CircularProgressBar.react','CommerceProductTaggerType','immutable','ReactComposerCollageDragHandler','ReactComposerContextMixin'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('ReactComposerContextMixin').contextTypes,l=c('React').PropTypes;i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;m.prototype.render=function(){var n={height:this.props.containerHeight,overflow:'hidden',position:'relative',width:this.props.containerWidth},o=Boolean(this.props.isSpherical||this.props.sphericalPhotoID),p=void 0,q=void 0,r=void 0,s=void 0,t=void 0;if(!o){t=this.$ReactComposerCollagePhoto1();if(!this.props.isDragging)s=this.$ReactComposerCollagePhoto2();}else s=this.$ReactComposerCollagePhoto3();if(!this.props.isDragging)p=this.$ReactComposerCollagePhoto4();if(this.props.isRecognizingFaceboxes||this.props.isLoadingPhotoEdit||this.props.uploading&&this.props.uploadProgress===100)r=this.$ReactComposerCollagePhoto5();if(this.props.uploading&&this.props.uploadProgress<100)q=c('React').createElement(c('CircularProgressBar.react'),{percentComplete:this.props.uploadProgress});var u="_jfc"+(' '+"_4c06")+('');return (c('React').createElement('div',{ref:'root',className:u,onMouseDown:function(v){return this.props.dragHandler.onMouseDown(v);}.bind(this),onMouseUp:function(v){return this.props.dragHandler.onMouseUp(v);}.bind(this),onMouseMove:function(v){return this.props.dragHandler.onMouseMove(v);}.bind(this),onTouchStart:function(v){return this.props.dragHandler.onTouchStart(v);}.bind(this),onTouchMove:function(v){return this.props.dragHandler.onTouchMove(v);}.bind(this),onTouchEnd:function(v){return this.props.dragHandler.onTouchEnd(v);}.bind(this),onTouchCancel:function(v){return this.props.dragHandler.onTouchCancel(v);}.bind(this),style:n},t,c('React').createElement('div',{onMouseDown:function v(w){return w.stopPropagation();}},p,s),r,q));};m.prototype.$ReactComposerCollagePhoto5=function(){return (c('React').createElement('div',{className:"_do4"},c('React').createElement('div',{className:"_do5"},c('React').createElement('div',{className:"_do6"}))));};m.prototype.$ReactComposerCollagePhoto2=function(){if(!this.props.posting&&!this.props.uploading)return (c('React').createElement(c('ReactComposerPhotoTagger.react'),{draggingPhotos:false,enableFaceboxTagger:this.props.enableFaceboxTagger,productTaggerType:this.props.productTaggerType,disablePhotoEditing:!this.props.enablePhotoEditing,faceboxes:this.props.faceboxes,onTagAdded:this.props.onTagAdded,onTagRemoved:this.props.onTagRemoved,showProductTaggerNux:false,onHideProductTaggerNux:this.props.onHideProductTaggerNux,photoID:this.props.photoID,shown:this.props.showPhotoTagger}));return null;};m.prototype.$ReactComposerCollagePhoto3=function(){if(this.props.uploading)return (c('React').createElement('div',null,this.$ReactComposerCollagePhoto1(),c('React').createElement(c('SphericalMediaGyroIcon.react'),{className:"_jk8"})));var n=!(this.props.posting||this.props.uploading||this.props.isDragging);return (c('React').createElement('div',null,c('React').createElement(c('ReactComposerSphericalPhoto.react'),{loadingElement:this.$ReactComposerCollagePhoto5(),className:"_5g6c",containerWidth:this.props.containerWidth,containerHeight:this.props.containerHeight,height:this.props.height,imageStyle:this.props.style,photoID:this.props.photoID,showEditButton:n,sphericalPhotoID:this.props.sphericalPhotoID,thumbSrc:this.props.imageSrc,uploadID:this.props.uploadID,width:this.props.width})));};m.prototype.$ReactComposerCollagePhoto4=function(){if(!this.props.posting)return (c('React').createElement(c('XUICloseButton.react'),{className:"_jfe",onClick:this.props.onRemoveButtonClicked,onMouseDown:function n(o){return o.stopPropagation();},size:'medium',shade:'light'}));return null;};m.prototype.$ReactComposerCollagePhoto1=function(){return c('React').createElement(c('Image.react'),{src:this.props.fileURL,width:this.props.width,height:this.props.height,style:this.props.style});};function m(){i.apply(this,arguments);}m.defaultProps={width:0,height:0,photoID:'',style:{},posting:false,showPhotoTagger:false,enableFaceboxTagger:false,productTaggerType:c('CommerceProductTaggerType').NONE,enablePhotoEditing:true,isSpherical:false};m.propTypes={uploadID:l.string.isRequired,uploading:l.bool.isRequired,photoID:l.string,width:l.number.isRequired,height:l.number.isRequired,containerWidth:l.number.isRequired,containerHeight:l.number.isRequired,dragHandler:l.instanceOf(c('ReactComposerCollageDragHandler')).isRequired,isDragging:l.bool.isRequired,fileURL:l.string.isRequired,style:l.object.isRequired,uploadProgress:l.number.isRequired,faceboxes:l.instanceOf(c('immutable').Map),imageSrc:l.string,isLoadingPhotoEdit:l.bool,isRecognizingFaceboxes:l.bool,isSpherical:l.bool,sphericalPhotoID:l.string,enableFaceboxTagger:l.bool.isRequired,enablePhotoEditing:l.bool.isRequired,productTaggerType:l.string.isRequired,onHideProductTaggerNux:l.func.isRequired,showPhotoTagger:l.bool.isRequired,onTagAdded:l.func.isRequired,onTagRemoved:l.func.isRequired};m.contextTypes=k;f.exports=m;}),null);
__d('ReactComposerCollagePhotoContainer.react',['ReactComposerPhotoActions','ReactComposerPhotoStore','ReactComposerPhotoUploadState','ReactComposerPropsAndStoreBasedStateMixin','ReactComposerStore','ReactComposerMediaUploadActions','ReactComposerMediaUploadStore','ReactComposerCollagePhoto.react','ReactComposerCollageDragHandler','ReactComposerContextMixin','ReactComponentWithPureRenderMixin','React'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('ReactComposerContextMixin').contextTypes,i=c('React').PropTypes,j=c('React').createClass({displayName:'ReactComposerCollagePhotoContainer',mixins:[c('ReactComponentWithPureRenderMixin'),c('ReactComposerPropsAndStoreBasedStateMixin')(c('ReactComposerStore'),c('ReactComposerPhotoStore'),c('ReactComposerMediaUploadStore'))],propTypes:{upload:i.object.isRequired,itemWidth:i.number.isRequired,itemHeight:i.number.isRequired,opacity:i.number,enableFaceboxTagger:i.bool,enablePhotoEditing:i.bool,dragHandler:i.instanceOf(c('ReactComposerCollageDragHandler')).isRequired,isDragging:i.bool,productTaggerType:i.string,focus:i.object.isRequired,containerWidth:i.number.isRequired,containerHeight:i.number.isRequired,isSpherical:i.bool,onRemoveItem:i.func},statics:{calculateState:function k(l,m){var n=m.upload,o=this._overallProgress(n);if(n.state==c('ReactComposerPhotoUploadState').PHOTO_UPLOAD_DONE){var p=c('ReactComposerPhotoStore').getPhoto(l,m.upload.photoID),q=c('ReactComposerPhotoStore').getPhotoBeingTagged(l)===m.upload.photoID;return {uploading:false,overallProgress:o,faceboxes:p.faceboxes,isLoadingPhotoEdit:p.isLoadingPhotoEdit,isRecognizingFaceboxes:p.isRecognizingFaceboxes,isSpherical:n.isSpherical,isSphericalDisabled:Boolean(n.sphericalPhotoID),sphericalPhotoID:n.sphericalPhotoID,showPhotoTagger:q,imageSrc:p.imageSrc};}else return {isSpherical:n.isSpherical,uploading:true,overallProgress:o};},_overallProgress:function k(l){switch(l.state){case c('ReactComposerPhotoUploadState').PHOTO_UPLOAD_RESIZE_STARTED:return .1*l.progress;case c('ReactComposerPhotoUploadState').PHOTO_UPLOAD_UPLOADING:return .1*100+.9*l.progress;case c('ReactComposerPhotoUploadState').PHOTO_UPLOAD_DONE:return 100;default:return 0;}}},render:function k(){var l=this._calculateSmallestFitSize(this.props.containerWidth,this.props.containerHeight),m=this._generateStyle(l,this.props.containerWidth,this.props.containerHeight);return (c('React').createElement(c('ReactComposerCollagePhoto.react'),{ref:'container',uploadID:this.props.upload.id,photoID:this.props.upload.photoID,width:l.width,height:l.height,dragHandler:this.props.dragHandler,isDragging:this.props.isDragging,containerWidth:this.props.containerWidth,containerHeight:this.props.containerHeight,fileURL:this.props.upload.fileURL,style:m,posting:this.state.posting,uploading:this.state.uploading,uploadProgress:this.state.overallProgress,faceboxes:this.state.faceboxes,imageSrc:this.state.imageSrc,isLoadingPhotoEdit:this.state.isLoadingPhotoEdit,isRecognizingFaceboxes:this.state.isRecognizingFaceboxes,isSpherical:this.state.isSpherical,sphericalPhotoID:this.state.sphericalPhotoID,enableFaceboxTagger:this.props.enableFaceboxTagger,enablePhotoEditing:this.props.enablePhotoEditing,productTaggerType:this.props.productTaggerType,onEditClick:this._onEditClick,showPhotoTagger:this.state.showPhotoTagger,onHideProductTaggerNux:this._onHideProductTaggerNux,onTagAdded:this._onTagAdded,onTagRemoved:this._onTagRemoved,onRemoveButtonClicked:this._onRemoveButtonClicked}));},_calculateSmallestFitSize:function k(l,m){var n=this.props,o=n.itemWidth,p=n.itemHeight;if(this.state.isSpherical&&this.state.uploading){p=this.props.upload.height;o=this.props.upload.width;}var q=Math.max(l/o,m/p);return {width:Math.round(o*q),height:Math.round(p*q)};},_generateStyle:function k(l,m,n){var o=(l.width-m)/l.width*50,p=(l.height-n)/l.height*50,q=this.props.focus.x>=50?Math.min(this.props.focus.x,50+o):Math.max(this.props.focus.x,50-o),r=this.props.focus.y>=50?Math.min(this.props.focus.y,50+p):Math.max(this.props.focus.y,50-p),s='translate(-'+q+'%, -'+r+'%)',t={position:'absolute',left:'50%',top:'50%',WebkitTransformOrigin:'0% 0%',MozTransformOrigin:'0% 0%',msTransformOrigin:'0% 0%',WebkitTransform:s,MozTransform:s,msTransform:s};if(this.props.opacity)t.opacity=this.props.opacity;return t;},_onRemoveButtonClicked:function k(){this.props.onRemoveItem&&this.props.onRemoveItem(this.props.upload.id);if(this.state.uploading){c('ReactComposerMediaUploadActions').removeMediaUpload(this.context.composerID,this.props.upload.id);}else c('ReactComposerPhotoActions').removePhoto(this.context.composerID,this.props.upload.photoID,this.props.upload.id);},_onTagRemoved:function k(l,m){c('ReactComposerPhotoActions').untagFacebox(this.context.composerID,this.props.upload.photoID,l,m);},_onTagAdded:function k(l,m,n){c('ReactComposerPhotoActions').tagFacebox(this.context.composerID,this.props.upload.photoID,l,m,n);},_onHideProductTaggerNux:function k(){},_onEditClick:function k(){}});j.contextTypes=h;f.exports=j;}),null);
__d('ReactComposerCollageVideo.react',['cx','ReactComposerCollageDragHandler','React','XUICloseButton.react','CircularProgressBar.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$ReactComposerCollageVideo2=function(r){var s=this.refs.video_element,t=this.refs.play_button;if(s.paused){s.play();t.style.display='none';}else{s.pause();t.style.display='block';}r.stopPropagation();}.bind(this),n;}l.prototype.render=function(){var m={height:this.props.containerHeight,overflow:'hidden',position:'relative',width:this.props.containerWidth},n=void 0;if(!this.props.posting)n=c('React').createElement(c('XUICloseButton.react'),{className:"_1sju",onClick:this.props.onRemoveButtonClicked,size:'medium',shade:'light'});var o=this.$ReactComposerCollageVideo1();return c('React').createElement('div',{ref:'root',className:"_1sjs _3dx6",style:m,onMouseDown:function(p){return this.props.dragHandler.onMouseDown(p);}.bind(this),onMouseUp:function(p){return this.props.dragHandler.onMouseUp(p);}.bind(this),onMouseMove:function(p){return this.props.dragHandler.onMouseMove(p);}.bind(this),onTouchStart:function(p){return this.props.dragHandler.onTouchStart(p);}.bind(this),onTouchMove:function(p){return this.props.dragHandler.onTouchMove(p);}.bind(this),onTouchEnd:function(p){return this.props.dragHandler.onTouchEnd(p);}.bind(this),onTouchCancel:function(p){return this.props.dragHandler.onTouchCancel(p);}.bind(this)},c('React').createElement('div',{onMouseDown:function p(q){return q.stopPropagation();}},n),o,c('React').createElement('div',{ref:'play_button',className:"_1oxz",onClick:this.$ReactComposerCollageVideo2,onMouseDown:function p(q){return q.stopPropagation();}}),c('React').createElement(c('CircularProgressBar.react'),{percentComplete:this.props.uploadProgress}));};l.prototype.$ReactComposerCollageVideo1=function(){return (c('React').createElement('video',{ref:'video_element',loop:true,muted:true,src:this.props.fileURL,width:this.props.width,height:this.props.height,style:this.props.style}));};l.defaultProps={width:0,height:0,style:{},posting:false};l.propTypes={width:k.number.isRequired,height:k.number.isRequired,containerWidth:k.number.isRequired,containerHeight:k.number.isRequired,dragHandler:k.instanceOf(c('ReactComposerCollageDragHandler')).isRequired,fileURL:k.string.isRequired,style:k.object.isRequired,uploadProgress:k.number.isRequired};f.exports=l;}),null);
__d('ReactComposerCollageVideoContainer.react',['ReactComposerPropsAndStoreBasedStateMixin','ReactComposerStore','ReactComposerMediaUploadActions','ReactComposerMediaUploadStore','ReactComposerCollageDragHandler','ReactComposerCollageVideo.react','React'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'ReactComposerCollageVideoContainer',mixins:[c('ReactComposerPropsAndStoreBasedStateMixin')(c('ReactComposerStore'),c('ReactComposerMediaUploadStore'))],propTypes:{upload:h.object.isRequired,itemWidth:h.number.isRequired,itemHeight:h.number.isRequired,fileURL:h.string.isRequired,dragHandler:h.instanceOf(c('ReactComposerCollageDragHandler')).isRequired,opacity:h.number,focus:h.object.isRequired,containerWidth:h.number.isRequired,containerHeight:h.number.isRequired,onRemoveItem:h.func},statics:{calculateState:function j(k,l){return {overallProgress:l.upload.progress||0};}},render:function j(){var k=this._calculateSmallestFitSize(this.props.containerWidth,this.props.containerHeight),l=this._generateStyleFromFocus(k,this.props.containerWidth,this.props.containerHeight);if(this.props.opacity)l.opacity=this.props.opacity;return (c('React').createElement('div',null,c('React').createElement(c('ReactComposerCollageVideo.react'),{ref:'container',width:k.width,height:k.height,containerWidth:this.props.containerWidth,containerHeight:this.props.containerHeight,dragHandler:this.props.dragHandler,fileURL:this.props.fileURL,style:l,uploadProgress:this.state.overallProgress,posting:this.state.posting,onRemoveButtonClicked:this._onRemoveButtonClicked})));},_calculateSmallestFitSize:function j(k,l){var m=Math.max(k/this.props.itemWidth,l/this.props.itemHeight);return {width:Math.round(this.props.itemWidth*m),height:Math.round(this.props.itemHeight*m)};},_generateStyleFromFocus:function j(k,l,m){var n=(k.width-l)/k.width*50,o=(k.height-m)/k.height*50,p=this.props.focus.x>=50?Math.min(this.props.focus.x,50+n):Math.max(this.props.focus.x,50-n),q=this.props.focus.y>=50?Math.min(this.props.focus.y,50+o):Math.max(this.props.focus.y,50-o),r='translate(-'+p+'%, -'+q+'%)';return {position:'absolute',left:'50%',top:'50%',WebkitTransformOrigin:'0% 0%',MozTransformOrigin:'0% 0%',msTransformOrigin:'0% 0%',WebkitTransform:r,MozTransform:r,msTransform:r};},_onRemoveButtonClicked:function j(){this.props.onRemoveItem&&this.props.onRemoveItem(this.props.upload.id);c('ReactComposerMediaUploadActions').removeMediaUpload(this.context.composerID,this.props.upload.id);}});f.exports=i;}),null);
__d('ReactComposerDraggableCollageItem.react',['cx','ReactComposerContextMixin','ReactComposerMediaUploadType','ReactComposerCollageVideoContainer.react','ReactComposerCollagePhotoContainer.react','ReactComposerCollageDragHandler','ReactComponentWithPureRenderMixin','React'],(function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=0,k=0,l={x:50,y:50},m=c('React').createClass({displayName:'ReactComposerDraggableCollageItem',_dragHandler:undefined,_grabbed:undefined,_scrollParent:undefined,mixins:[c('ReactComponentWithPureRenderMixin'),c('ReactComposerContextMixin')],propTypes:{upload:i.object.isRequired,itemWidth:i.number.isRequired,itemHeight:i.number.isRequired,width:i.number.isRequired,height:i.number.isRequired,isDragging:i.bool,opacity:i.number,focus:i.object.isRequired,onGrab:i.func.isRequired,onDrag:i.func.isRequired,onDrop:i.func.isRequired,onRemoveItem:i.func,enableFaceboxTagger:i.bool,enablePhotoEditing:i.bool,productTaggerType:i.string},getDefaultProps:function n(){return {width:j,height:k,focus:l,isDragging:false};},render:function n(){var o=this._dragHandler;if(!o){o=new (c('ReactComposerCollageDragHandler'))(this.props.upload.id,this.props.onGrab,this.props.onDrag,this.props.onDrop);this._dragHandler=o;}var p=(this.props.isDragging?"_5uy":'')+(' '+"_3imc");return (c('React').createElement('div',{className:p,key:this.props.upload.id,ref:'draggable_media'},this._getInnerMediaComponent(o)));},_getInnerMediaComponent:function n(o){if(this.props.upload.mediaType==c('ReactComposerMediaUploadType').VIDEO)return this._getInnerVideoComponent(o);return this._getInnerPhotoComponent(o);},_getInnerVideoComponent:function n(o){return (c('React').createElement(c('ReactComposerCollageVideoContainer.react'),{key:this.props.upload.id,upload:this.props.upload,itemWidth:this.props.itemWidth,itemHeight:this.props.itemHeight,opacity:this.props.opacity,fileURL:this.props.upload.fileURL,focus:l,containerWidth:this.props.width,containerHeight:this.props.height,dragHandler:o,onRemoveItem:this.props.onRemoveItem}));},_getInnerPhotoComponent:function n(o){return (c('React').createElement(c('ReactComposerCollagePhotoContainer.react'),{key:this.props.upload.id,upload:this.props.upload,itemWidth:this.props.itemWidth,itemHeight:this.props.itemHeight,opacity:this.props.opacity,dragHandler:o,isDragging:this.props.isDragging,focus:l,containerWidth:this.props.width,containerHeight:this.props.height,enableFaceboxTagger:this.props.enableFaceboxTagger,enablePhotoEditing:this.props.enablePhotoEditing,onRemoveItem:this.props.onRemoveItem,productTaggerType:this.props.productTaggerType}));}});f.exports=m;}),null);
__d('ReactComposerCollage.react',['ReactComposerCollagePlusButton.react','ReactComposerConfig','ReactComposerDraggableCollageItem.react','immutable','Map','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.prototype.render=function(){if(this.props.mediaUploads.size===0)return null;var l={marginLeft:5};if(!this.props.styleInfos)return null;var m=babelHelpers['extends']({},l,{position:'relative',width:this.props.width,height:this.props.height});return (c('React').createElement('div',null,c('React').createElement('div',{style:m},this.$ReactComposerCollage1()),c('React').createElement(c('ReactComposerCollagePlusButton.react'),{enableFaceboxTagger:this.props.enableFaceboxTagger,composerConfig:this.props.composerConfig})));};k.prototype.$ReactComposerCollage1=function(){var l=this.props.mediaUploads.sortBy(function(n){return n.id;}),m=[];l.forEach(function(n){var o=this.$ReactComposerCollage2(n);if(o)m.push(o);}.bind(this));return m;};k.prototype.$ReactComposerCollage2=function(l){var m=this.props.styleInfos;if(!m)return null;var n=m.get(l.id);if(!n)return null;var o=this.$ReactComposerCollage3(n),p={left:o.left,top:o.top,height:o.height,width:o.width,zIndex:o.zIndex,position:'absolute'};return (c('React').createElement('div',{style:p,key:l.id},this.$ReactComposerCollage4(l,o,n)));};k.prototype.$ReactComposerCollage3=function(l){var m=l.dragEffectPercent/100,n=1.075*m+1*(1-m),o=.9*m+1*(1-m);o=Math.round(o*100)/100;var p=Math.round(m*80)+20,q=Math.round(l.height*n),r=Math.round(l.width*n),s=babelHelpers['extends']({},l,{height:q,top:Math.round(l.centerY-q/2),width:r,left:Math.round(l.centerX-r/2),zIndex:p});if(o<1)s.opacity=o;return s;};k.prototype.$ReactComposerCollage5=function(l){var m=l.width,n=l.height;if(l.isSpherical)m=n=Math.min(m,n);return {width:m,height:n};};k.prototype.$ReactComposerCollage4=function(l,m,n){var o=Math.round(n.dragEffectPercent)>0,p=this.$ReactComposerCollage5(l);return (c('React').createElement(c('ReactComposerDraggableCollageItem.react'),{key:l.id,upload:l,itemWidth:p.width,itemHeight:p.height,width:m.width,height:m.height,opacity:m.opacity,isDragging:o,enableFaceboxTagger:this.props.enableFaceboxTagger,enablePhotoEditing:this.props.enablePhotoEditing,productTaggerType:this.props.productTaggerType,onGrab:this.props.onGrab,onDrag:this.props.onDrag,onDrop:this.props.onDrop,onRemoveItem:this.props.onRemoveItem}));};function k(){h.apply(this,arguments);}k.propTypes={styleInfos:j.instanceOf(c('Map')),mediaUploads:j.instanceOf(c('immutable').List).isRequired,enableFaceboxTagger:j.bool,enablePhotoEditing:j.bool,productTaggerType:j.string,width:j.number,height:j.number,onDrag:j.func,onDrop:j.func,onGrab:j.func,onRemoveItem:j.func,composerConfig:c('ReactComposerConfig').isRequired};f.exports=k;}),null);
__d('ReactComposerCollageAnimationUtils',[],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=Object.prototype.hasOwnProperty,i={equal:function j(k,l){return Math.abs(k-l)<.5;},isZero:function j(k){if(typeof k!=='object'||k===null)return false;var l=Object.keys(k);for(var m=0;m<l.length;m++)if(!this.equal(k[l[m]],0))return false;return true;},isEqual:function j(k,l){if(typeof k!=='object'||k===null||typeof l!=='object'||l===null)return false;var m=Object.keys(k),n=Object.keys(l);if(m.length!==n.length)return false;for(var o=0;o<m.length;o++)if(!h.call(l,m[o])||!this.equal(k[m[o]],l[m[o]]))return false;return true;}};f.exports=i;}),null);
__d('ReactComposerCollageAnimationController',['performanceNow','requestAnimationFrame','Map','Vector','ReactComposerCollageAnimationUtils'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=.1,i=2000,j=1,k={springConstant:300,dampingConstant:25},l={springConstant:300,dampingConstant:25},m={springConstant:200,dampingConstant:16},n=new (c('Map'))([['centerX',k],['centerY',k],['height',l],['width',l],['dragEffectPercent',m]]),o={centerX:true,centerY:true,height:false,width:false};function p(q,r,s,t,u,v){this.$ReactComposerCollageAnimationController7=false;this.$ReactComposerCollageAnimationController8=0;this.$ReactComposerCollageAnimationController1=q;this.$ReactComposerCollageAnimationController2=r;this.$ReactComposerCollageAnimationController3=s;this.$ReactComposerCollageAnimationController4=t;this.$ReactComposerCollageAnimationController5=u;this.$ReactComposerCollageAnimationController6=v;}p.prototype.startAnimating=function(){if(this.$ReactComposerCollageAnimationController7)return;this.$ReactComposerCollageAnimationController7=true;this.$ReactComposerCollageAnimationController8=c('performanceNow')();c('requestAnimationFrame')(function(){return this.$ReactComposerCollageAnimationController9();}.bind(this));};p.prototype.stopAnimating=function(){this.$ReactComposerCollageAnimationController7=false;};p.prototype.$ReactComposerCollageAnimationController9=function(){if(!this.$ReactComposerCollageAnimationController7)return;var q=false,r=c('performanceNow')(),s=(r-this.$ReactComposerCollageAnimationController8)/1000;s=Math.min(s,h);this.$ReactComposerCollageAnimationController8=r;var t=this.$ReactComposerCollageAnimationController1(),u=this.$ReactComposerCollageAnimationController3(),v=this.$ReactComposerCollageAnimationController5(),w=this.$ReactComposerCollageAnimationController6();t.forEach(function(x,y){var z=u.get(y)||{},aa=v.get(y);if(!aa)return;var ba=w.get(y),ca=this.$ReactComposerCollageAnimationController10(x,aa,z),da=this.$ReactComposerCollageAnimationController11(z,ca,s,ba),ea=this.$ReactComposerCollageAnimationController12(x,da,s,ba,aa);this.$ReactComposerCollageAnimationController13(x,ea,aa,z);if(!c('ReactComposerCollageAnimationUtils').isZero(da)){q=true;u.set(y,da);}if(!c('ReactComposerCollageAnimationUtils').isEqual(x,ea)){q=true;if(ba){var fa=ea.width-x.width,ga=ea.height-x.height,ha=fa*((ba.x-x.centerX)/(x.width||1)),ia=ga*((ba.y-x.centerY)/(x.height||1));ea.centerX-=ha;ea.centerY-=ia;}}t.set(y,ea);}.bind(this));if(q&&this.$ReactComposerCollageAnimationController7){this.$ReactComposerCollageAnimationController2(t);this.$ReactComposerCollageAnimationController4(u);c('requestAnimationFrame')(function(){return this.$ReactComposerCollageAnimationController9();}.bind(this));}else this.$ReactComposerCollageAnimationController7=false;};p.prototype.$ReactComposerCollageAnimationController13=function(q,r,s,t){n.forEach(function(u,v){var w=Math.abs(q[v]-r[v]),x=Math.abs(s[v]-r[v]);if(w<j&&x<.5){r[v]=s[v];t[v]=0;}});};p.prototype.$ReactComposerCollageAnimationController10=function(q,r,s){var t={};n.forEach(function(u,v){t[v]=u.springConstant*(r[v]-q[v])-u.dampingConstant*(s[v]||0);});return t;};p.prototype.$ReactComposerCollageAnimationController11=function(q,r,s,t){var u={};n.forEach(function(v,w){u[w]=t&&o[w]?0:Math.max(-i,Math.min(i,(q[w]||0)+r[w]*s));});return u;};p.prototype.$ReactComposerCollageAnimationController12=function(q,r,s,t,u){var v={};n.forEach(function(w,x){var y=q[x]+r[x]*s,z=this.$ReactComposerCollageAnimationController14(y,q[x],u[x]);v[x]=t&&o[x]?q[x]:z;}.bind(this));return v;};p.prototype.$ReactComposerCollageAnimationController14=function(q,r,s){var t=Math.abs(q-s),u=Math.abs(r-s);if(t>u){var v=u/10;return q>s?s+v:s-v;}else return q;};f.exports=p;}),null);
__d("CollageLayoutConfig",[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=4;function i(j,k){var l=arguments.length<=2||arguments[2]===undefined?h:arguments[2];"use strict";this.$CollageLayoutConfig2=l;this.$CollageLayoutConfig3=k;this.$CollageLayoutConfig5(j);}i.prototype.getItemStyleInfos=function(){"use strict";return this.$CollageLayoutConfig1;};i.prototype.getIndexForPoint=function(j,k){"use strict";var l=this.$CollageLayoutConfig1.findIndex(function(m){return (m.left<=j&&m.top<=k&&m.left+m.width>=j&&m.top+m.height>=k);});return l===-1?null:l;};i.prototype.getCalculatedHeight=function(){"use strict";return this.$CollageLayoutConfig4;};i.prototype.getSpacing=function(){"use strict";return this.$CollageLayoutConfig2;};i.prototype.getWidth=function(){"use strict";return this.$CollageLayoutConfig3;};i.prototype.$CollageLayoutConfig5=function(j){"use strict";var k=this.$CollageLayoutConfig6(j),l=this.$CollageLayoutConfig7(j),m=this.$CollageLayoutConfig2*(l-1),n=Math.ceil((this.$CollageLayoutConfig3-m)/l);this.$CollageLayoutConfig4=(n+this.$CollageLayoutConfig2)*k-this.$CollageLayoutConfig2;this.$CollageLayoutConfig1=[];j.forEach(function(o){var p={left:(n+this.$CollageLayoutConfig2)*o.x,top:(n+this.$CollageLayoutConfig2)*o.y,width:(n+this.$CollageLayoutConfig2)*o.width-this.$CollageLayoutConfig2,height:(n+this.$CollageLayoutConfig2)*o.height-this.$CollageLayoutConfig2};if(p.left+p.width>this.$CollageLayoutConfig3)p.width=this.$CollageLayoutConfig3-p.left;this.$CollageLayoutConfig1.push(p);}.bind(this));};i.prototype.$CollageLayoutConfig7=function(j){"use strict";var k=0;j.forEach(function(l){k=Math.max(k,l.x+l.width);});return k;};i.prototype.$CollageLayoutConfig6=function(j){"use strict";var k=0;j.forEach(function(l){k=Math.max(k,l.y+l.height);});return k;};f.exports=i;}),null);
__d('ReactComposerMediaAspect',['ReactComposerMediaAspectTypes'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();f.exports={fromRect:function h(i){return this._fromWidthAndHeight(i.w(),i.h());},fromDimensions:function h(i){return this._fromWidthAndHeight(i[0],i[1]);},_fromWidthAndHeight:function h(i,j){if(i>j){return c('ReactComposerMediaAspectTypes').LANDSCAPE;}else if(i<j){return c('ReactComposerMediaAspectTypes').PORTRAIT;}else return c('ReactComposerMediaAspectTypes').SQUARE;}};}),null);
__d('ReactComposerCollageLayoutModel',['regeneratorRuntime','Map','ReactComposerCollageLayoutActor','ReactComposerMediaAspect'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=[i,j].map(c('regeneratorRuntime').mark);'use strict';function i(l,m){var n,o;return c('regeneratorRuntime').wrap(function p(q){while(1)switch(q.prev=q.next){case 0:n=l.next();o=m.next();if(!(n.done||o.done)){q.next=5;break;}return q.abrupt('break',9);case 5:q.next=7;return [n.value,o.value];case 7:q.next=0;break;case 9:case 'end':return q.stop();}},h[0],this);}function j(l){var m,n,o,p,q;return c('regeneratorRuntime').wrap(function r(s){while(1)switch(s.prev=s.next){case 0:m=l,n=Array.isArray(m),o=0,m=n?m:m[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();case 1:if(!n){s.next=7;break;}if(!(o>=m.length)){s.next=4;break;}return s.abrupt('break',16);case 4:p=m[o++];s.next=11;break;case 7:o=m.next();if(!o.done){s.next=10;break;}return s.abrupt('break',16);case 10:p=o.value;case 11:q=p;s.next=14;return (q);case 14:s.next=1;break;case 16:case 'end':return s.stop();}},h[1],this);}function k(l,m){'use strict';this.$ReactComposerCollageLayoutModel1=!!(l&c('ReactComposerCollageLayoutActor').USER);this.$ReactComposerCollageLayoutModel2=!!(l&c('ReactComposerCollageLayoutActor').PAGE);this.$ReactComposerCollageLayoutModel3=[];if(m)this.addPhotoLayouts(m);}k.prototype.addPhotoLayout=function(l){'use strict';this.$ReactComposerCollageLayoutModel3.push(l);return this;};k.prototype.addPhotoLayouts=function(l){'use strict';l.forEach(function(m){return this.$ReactComposerCollageLayoutModel3.push(m);}.bind(this));return this;};k.prototype.getNumPhotoLayouts=function(){'use strict';return this.$ReactComposerCollageLayoutModel3.length;};k.prototype.getPhotoLayouts=function(){'use strict';return this.$ReactComposerCollageLayoutModel3;};k.prototype.getIsValidForPages=function(){'use strict';return this.$ReactComposerCollageLayoutModel2;};k.prototype.getIsValidForUsers=function(){'use strict';return this.$ReactComposerCollageLayoutModel1;};k.prototype.getIsValidFor=function(l){'use strict';switch(l){case c('ReactComposerCollageLayoutActor').USER:return this.getIsValidForUsers();case c('ReactComposerCollageLayoutActor').PAGE:return this.getIsValidForPages();}return false;};k.prototype.hasMatchingCollagePhotoLayoutType=function(l){'use strict';var m=c('ReactComposerMediaAspect').fromRect(this.$ReactComposerCollageLayoutModel3[0]),n=c('ReactComposerMediaAspect').fromDimensions(l);return m===n;};k.prototype.score=function(l){'use strict';var m=0;for(var n=i(j(this.getPhotoLayouts()),l.values()),o=Array.isArray(n),p=0,n=o?n:n[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var q;if(o){if(p>=n.length)break;q=n[p++];}else{p=n.next();if(p.done)break;q=p.value;}var r=q,s=r[0],t=r[1];if(!t)continue;var u=s.w(),v=s.h(),w=t[0],x=t[1],y=0;if(w===0||x===0){y=0;}else if(u*x/w>=v){var z=u*x/w;y=(z-v)/z;}else if(v*w/x>u){var aa=v*w/x;y=(aa-u)/aa;}m-=y*100;if(x===w){m-=y*5;}else if(u>v){if(w>x){m+=y*25;}else m-=y*25;}else if(u<v){if(w<x){m+=y*25;}else m-=y*25;}else if(u===v)m-=y*5;}m+=200*this.getNumPhotoLayouts();return m;};f.exports=k;}),null);
__d('ReactComposerCollageLayoutData',['ReactComposerCollageLayoutModel','ReactComposerJSONCollageLayoutData','Rect'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();'use strict';var h=[];Object.keys(c('ReactComposerJSONCollageLayoutData')).forEach(function(i){c('ReactComposerJSONCollageLayoutData')[i].forEach(function(j){h.push(new (c('ReactComposerCollageLayoutModel'))(j.validActors,j.photoLayouts.map(function(k){return new (Function.prototype.bind.apply(c('Rect'),[null].concat(k)))();})));});});f.exports=h;}),null);
__d('ReactComposerCollageLayoutSelection',['Map','FBID','Rect','ReactComposerCollageLayoutActor','ReactComposerCollageLayoutData','ReactComposerCollageLayoutModel'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();f.exports={MAX_NUM_COLS:6,MAX_NUM_ROWS:6,_getCollageLayoutsFor:function h(i){return c('ReactComposerCollageLayoutData').filter(function(j){return j.getIsValidFor(i);});},getMaxPhotosSupported:function h(){return Math.max.apply(Math,c('ReactComposerCollageLayoutData').map(function(i){return i.getNumPhotoLayouts();}));},getMaxPhotosSupportedFor:function h(i){return Math.max.apply(Math,this._getCollageLayoutsFor(i).map(function(j){return j.getNumPhotoLayouts();}));},getCollageLayout:function h(i,j){if(j===0)return this.getBestUserCollageLayout(i);var k=c('FBID').isUser(j)?this.getBestUserCollageLayout(i):this.getBestPageCollageLayout(i);return k;},getBestPageCollageLayout:function h(i){if(i.size==0)return new (c('Map'))();var j=i.values().next().value,k=Math.min(this.getMaxPhotosSupportedFor(c('ReactComposerCollageLayoutActor').PAGE),i.size),l=this._getCollageLayoutsFor(c('ReactComposerCollageLayoutActor').PAGE).filter(function(w){return w.getNumPhotoLayouts()===k;});if(!l.length)throw new Error('no valid layout for these media');var m=l.filter(function(w){return w.hasMatchingCollagePhotoLayoutType(j);});if(!m.length)throw new Error('no valid layout for these media starts with a suitable aspect');var n=m[0],o=new (c('Map'))(),p=0;for(var q=i.keys(),r=Array.isArray(q),s=0,q=r?q:q[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var t;if(r){if(s>=q.length)break;t=q[s++];}else{s=q.next();if(s.done)break;t=s.value;}var u=t,v=n[p++];if(v)o.set(u,v);}return o;},getBestUserCollageLayout:function h(i){var j=this._getCollageLayoutsFor(c('ReactComposerCollageLayoutActor').USER).filter(function(u){return u.getNumPhotoLayouts()<=i.size;});if(!j.length)throw new Error('no valid layout for these media');var k=this._bestLayoutByScore(j,i);if(!k)throw new Error('no best layout? Should not happen!');var l=new (c('Map'))(),m=0,n=k.getPhotoLayouts();for(var o=i.keys(),p=Array.isArray(o),q=0,o=p?o:o[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var r;if(p){if(q>=o.length)break;r=o[q++];}else{q=o.next();if(q.done)break;r=q.value;}var s=r,t=n[m++];if(t)l.set(s,t);}return l;},_bestLayoutByScore:function h(i,j){var k=i.map(function(n){return [n,n.score(j)];}),l=k.reduce(function(n,o){var p=n[0],q=n[1],r=o[0],s=o[1];return (q===null||s>q?[r,s]:[p,q]);},[null,null]),m=l[0];return m;}};}),null);
__d('ReactComposerCollageContainer.react',['ReactComposerConfig','ReactComposerContextMixin','ReactComposerCollage.react','ReactComposerMediaUploadActions','CollageLayoutConfig','ReactComposerCollageAnimationController','ReactComposerCollageLayoutSelection','immutable','ReactComponentWithPureRenderMixin','React','ReactDOM','Map','Vector','VelocityTracker'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=500,j=c('React').createClass({displayName:'ReactComposerCollageContainer',_orderedUploads:new (c('immutable').List)(),_width:i,_layoutConfig:null,_currentStyles:new (c('Map'))(),_targetLocations:new (c('Map'))(),_currentVelocities:new (c('Map'))(),_dragPoints:new (c('Map'))(),_velocityTrackers:new (c('Map'))(),_animationController:null,_allowLayoutChanges:true,mixins:[c('ReactComponentWithPureRenderMixin'),c('ReactComposerContextMixin')],propTypes:{containerWidth:h.number,mediaUploads:h.instanceOf(c('immutable').List).isRequired,enableFaceboxTagger:h.bool,productTaggerType:h.string,disablePhotoEditing:h.bool,showSellUploadLink:h.bool,composerConfig:c('ReactComposerConfig').isRequired},getInitialState:function k(){this._currentStyles=new (c('Map'))();return {currentStyles:new (c('Map'))()};},componentWillMount:function k(){this._updateVarsFromProps(this.props);this._animationController&&this._animationController.startAnimating();},componentWillUnmount:function k(){this._animationController&&this._animationController.stopAnimating();},componentWillReceiveProps:function k(l){this._updateVarsFromProps(l);},_getCollageItemStyles:function k(){return this._currentStyles;},_setCollageItemStyles:function k(l){this._currentStyles=l;this.setState({currentStyles:l});this.forceUpdate();},_getCollageItemVelocities:function k(){return this._currentVelocities;},_setCollageItemVelocities:function k(l){this._currentVelocities=l;},_getCollageItemDestinations:function k(){return this._targetLocations;},_getCollageItemDragPoints:function k(){return this._dragPoints;},_updateVarsFromProps:function k(l){if(!this._animationController)this._animationController=new (c('ReactComposerCollageAnimationController'))(function(){return this._getCollageItemStyles();}.bind(this),function(n){return this._setCollageItemStyles(n);}.bind(this),function(){return this._getCollageItemVelocities();}.bind(this),function(n){return this._setCollageItemVelocities(n);}.bind(this),function(){return this._getCollageItemDestinations();}.bind(this),function(){return this._getCollageItemDragPoints();}.bind(this));this._width=l.containerWidth-10;var m=l.mediaUploads.filter(function(n){return !!n.width&&!!n.height;});this._onNewOrderedUploads(m);},_onNewOrderedUploads:function k(l){this._orderedUploads=l;this._recomputeStyles();},_recomputeStyles:function k(){var l,m=this;if(this._orderedUploads.size>0){(function(){var n=[];if(m._orderedUploads.size===1){m._layoutConfig=null;n=m._getSingleItemStyleInfo(m._orderedUploads.first());}else{m._layoutConfig=m._getCollageLayoutConfig(m._orderedUploads);n=m._layoutConfig.getItemStyleInfos();}var o=new (c('Map'))(),p=m._currentStyles,q=false;m._orderedUploads.forEach(function(r,s){var t=n[s],u={centerX:t.left+t.width/2,centerY:t.top+t.height/2,width:t.width,height:t.height,dragEffectPercent:this._dragPoints.get(r.id)?100:0};o.set(r.id,u);if(!p.get(r.id)){var v=babelHelpers['extends']({},u,{width:0,height:0});p.set(r.id,v);q=true;}}.bind(m));m._targetLocations=o;if(q)m._setCollageItemStyles(p);m._animationController&&m._animationController.startAnimating();})();}else{this._layoutConfig=null;this._targetLocations=new (c('Map'))();this._currentVelocities=new (c('Map'))();}},_getSingleItemStyleInfo:function k(l){var m=[],n=this._width,o=this._width,p=l.width/l.height;if(l.isSpherical)p=1;if(p>1){n=o/p;}else o=p*n;m.push({left:0,top:0,width:o,height:n});return m;},render:function k(){if(!this._orderedUploads||!this._orderedUploads.size)return null;var l=0;if(this._layoutConfig){l=this._layoutConfig.getCalculatedHeight();}else this.state.currentStyles.forEach(function(m){l=m.height;});return (c('React').createElement(c('ReactComposerCollage.react'),{styleInfos:this.state.currentStyles,mediaUploads:this._orderedUploads,enableFaceboxTagger:this.props.enableFaceboxTagger,enablePhotoEditing:this.props.enablePhotoEditing,productTaggerType:this.props.productTaggerType,onGrab:this._onGrab,onDrag:this._onDrag,onDrop:this._onDrop,width:this._width,height:l,onRemoveItem:function(m){return this._onRemoveItem(m);}.bind(this),composerConfig:this.props.composerConfig}));},_getCollageLayout:function k(l){if(!l||l.size<2)return [];var m=this._extractDimensionDataIfValid(l);if(!m)return [];var n=c('ReactComposerCollageLayoutSelection').getCollageLayout(m,this.context.actorID);if(!n)return [];var o=[];for(var p=m.keys(),q=Array.isArray(p),r=0,p=q?p:p[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var s;if(q){if(r>=p.length)break;s=p[r++];}else{r=p.next();if(r.done)break;s=r.value;}var t=s,u=n.get(t);if(!u)return [];o.push({x:u.l,y:u.t,width:u.w(),height:u.h()});}return o;},_extractDimensionDataIfValid:function k(l){var m=true,n=new (c('Map'))();l.forEach(function(o){if(!o.width||!o.height){m=false;return;}var p=o.width,q=o.height;if(o.isSpherical)p=q;n.set(o.id,[p,q]);});return m?n:null;},_onGrab:function k(l,m){if(this._orderedUploads.size<2)return;var n=c('Vector').getElementPosition(c('ReactDOM').findDOMNode(this)),o=m.sub(n);this._dragPoints.set(l,o);this._recomputeStyles();var p=new (c('VelocityTracker'))();p.update(o.x,o.y);this._velocityTrackers.set(l,p);},_onRemoveItem:function k(l){this._currentStyles['delete'](l);this._currentVelocities['delete'](l);this._dragPoints['delete'](l);},_onDrag:function k(l,m,n){if(this._orderedUploads.size<2)return;var o=this._currentStyles,p=babelHelpers['extends']({},o.get(l));p.centerX+=n.x;p.centerY+=n.y;o.set(l,p);this._setCollageItemStyles(o);var q=c('Vector').getElementPosition(c('ReactDOM').findDOMNode(this)),r=m.sub(q);this._dragPoints.set(l,r);var s=this._velocityTrackers.get(l);s&&s.update(r.x,r.y);var t=this._orderedUploads;if(!t)return;if(!this._allowLayoutChanges){var u=true;this._dragPoints.forEach(function(y,z){if(!y)return;var aa=t.findIndex(function(da){return da.id===z;}),ba=o.get(z);if(!ba)return;var ca=this._getCollageIndex(t,ba.centerX,ba.centerY);if(ca!==aa)u=false;}.bind(this));if(u){this._allowLayoutChanges=true;}else return;}var v=t.findIndex(function(y){return y.id===l;}),w=this._getCollageIndex(t,p.centerX,p.centerY);if(w!==0&&!w)return;if(v==w&&v>=0&&w>=0)return;var x=t.splice(v,1,t.get(w)).splice(w,1,t.get(v));this._allowLayoutChanges=false;this._onNewOrderedUploads(x);},_onDrop:function k(l,m){if(this._orderedUploads.size<2)return;this._dragPoints.set(l,null);this._recomputeStyles();var n=this._velocityTrackers.get(l);this._velocityTrackers.set(l,null);var o=this._currentVelocities.get(l);if(o){o.centerX=n?n.getVelocityX():0;o.centerY=n?n.getVelocityY():0;this._currentVelocities.set(l,o);}var p=this._orderedUploads;if(!p)return;var q=p.map(function(r){return r.id;});c('ReactComposerMediaUploadActions').reorderMedias(this.context.composerID,q);},_getCollageIndex:function k(l,m,n){var o=this._getCollageLayoutConfig(l);return o&&o.getIndexForPoint(m,n);},_getCollageLayoutConfig:function k(l){var m=l.filter(function(o){return !!o.width&&!!o.height;}),n=this._getCollageLayout(m);return new (c('CollageLayoutConfig'))(n,this._width);}});f.exports=j;}),null);
__d('ReactComposerInstantMediaAttachmentSelector.react',['cx','fbt','ix','ReactComposerAttachmentSelectorContainer.react','ReactComposerAttachmentType','ReactComposerContextMixin','ReactComposerLoggingName','ComposerTargetData','ReactComponentWithPureRenderMixin','React','VideoUploadConfig'],(function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes,l=c('React').createClass({displayName:'ReactComposerInstantMediaAttachmentSelector',mixins:[c('ReactComposerContextMixin'),c('ReactComponentWithPureRenderMixin')],propTypes:{targetData:k.instanceOf(c('ComposerTargetData')).isRequired},render:function m(){var n;if(this.context.gks.use_new_text){n=i._("Photos\/Videos");}else n=i._("Photo\/Video");return (c('React').createElement(c('ReactComposerAttachmentSelectorContainer.react'),{attachmentID:c('ReactComposerAttachmentType').MEDIA,label:n,icon:j('/images/facelift/composer/icons/camera_16.png'),'data-testid':'media-attachment-selector',loggingName:c('ReactComposerLoggingName').MEDIA_TAB_SELECTOR,disableSelectAttachment:true}));}});f.exports=l;}),null);
__d('ReactComposerInstantMediaAttachmentSelectorContainer.react',['cx','ReactComposerInstantMediaAttachmentSelector.react','ReactComposerLoggingName','ReactComposerMediaFilePickerController.react','ComposerTargetData','React'],(function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;l.prototype.render=function(){'use strict';return (c('React').createElement(c('ReactComposerMediaFilePickerController.react'),babelHelpers['extends']({},this.props,{loggingName:c('ReactComposerLoggingName').MEDIA_TAB_SELECTOR,containerClassName:"_yt4"}),c('React').createElement(c('ReactComposerInstantMediaAttachmentSelector.react'),{targetData:this.props.targetData,'data-testid':'instant-media-attachment-selector'})));};function l(){'use strict';i.apply(this,arguments);}l.propTypes={disableFaceRecognition:k.bool.isRequired,mediaAcceptParam:k.shape({photos:k.string,both:k.string}).isRequired,photoLimit:k.number.isRequired,targetData:k.instanceOf(c('ComposerTargetData')).isRequired};l.defaultProps={disableFaceRecognition:false};f.exports=l;}),null);
__d('ReactComposerCrossPostToInstagramRow.react',['cx','fbt','FBToggleSwitch.react','LeftFillRightFitLayout.react','PagesComposerActions','React','XUICardSection.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();j=babelHelpers.inherits(l,c('React').PureComponent);k=j&&j.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.$ReactComposerCrossPostToInstagramRow1=function(r){c('PagesComposerActions').setInstagramCrossPosting(this.props.composerID,r);}.bind(this),n;}l.prototype.render=function(){return c('React').createElement(c('XUICardSection.react'),{className:"_1nth"},c('React').createElement(c('LeftFillRightFitLayout.react'),null,c('React').createElement('div',null,c('React').createElement('div',{className:"_1nti"}),c('React').createElement('div',{className:"_1ntj"},i._("Post this photo to Instagram?"))),c('React').createElement('div',{className:"_1ntk"},c('React').createElement(c('FBToggleSwitch.react'),{onToggle:this.$ReactComposerCrossPostToInstagramRow1}))));};f.exports=l;}),null);
__d('ReactComposerMediaAttachmentButtons.react',['cx','fbt','ReactComposerContextMixin','ReactComposerLoggingActions','ReactComposerLoggingName','ReactComposerMediaUtils','ComposerTargetData','DOMContainer.react','FileInput.react','Grid.react','Link.react','ReactComponentWithPureRenderMixin','React','VideoUploadConfig'],(function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('Grid.react').GridItem,k=c('React').PropTypes,l=c('React').createClass({displayName:'ReactComposerMediaAttachmentButtons',mixins:[c('ReactComponentWithPureRenderMixin'),c('ReactComposerContextMixin')],propTypes:{createAlbumLink:k.any,mediaAcceptParam:k.shape({photos:k.string,both:k.string}).isRequired,onFilesSelected:k.func.isRequired,showUploadPhotosButton:k.bool,targetData:k.instanceOf(c('ComposerTargetData')).isRequired},getDefaultProps:function m(){return {mediaAcceptParam:{}};},getInitialState:function m(){return {createAlbumLink:null};},componentDidMount:function m(){var n=c('React').createElement(c('DOMContainer.react'),{className:"_3mc1",display:'block'},this.props.createAlbumLink);this.setState({createAlbumLink:n});},render:function m(){var n=[];n.push(this._getUploadPhotosButton());if(this.state.createAlbumLink)n.push(c('React').createElement(j,{className:"_4l9a",key:'createAlbum'},c('React').createElement(c('Link.react'),{className:"_2709"},this.state.createAlbumLink)));return (c('React').createElement('div',{className:"_4l99"},c('React').createElement(c('Grid.react'),{className:"_2707",cols:n.length},n.filter(function(o){return o!=null;}))));},_getUploadPhotosButton:function m(){if(!this.props.showUploadPhotosButton)return null;var n=this.props.targetData.targetSupportsMultiplePhotos,o=this.props.mediaAcceptParam.both,p=void 0,q=c('VideoUploadConfig').allowMultimedia&&this.props.targetData.targetSupportsMultiMedia;if(n){if(q){p=i._("Upload Photos\/Videos");}else p=i._("Upload Photos\/Video");}else p=i._("Upload Photo\/Video");return (c('React').createElement(j,{className:"_4l9a",key:'uploadPhoto'},c('React').createElement(c('FileInput.react'),{accept:o,multiple:n,name:'composer_photo',onChange:this._onFilesSelected,onClick:this._onUploadPhotosClick,ref:'fileInput','data-testid':'media-attachment-add-photo'},c('React').createElement(c('Link.react'),{className:"_2709"},c('React').createElement('div',{className:"_270a"},p)))));},_onUploadPhotosClick:function m(){c('ReactComposerLoggingActions').mediaUploadInputClicked(this.context.composerID,c('ReactComposerLoggingName').MEDIA_ATTACHMENT_UPLOAD_BUTTON);},_onFilesSelected:function m(event){this.props.onFilesSelected(event,this.refs.fileInput.getFileInput());c('ReactComposerMediaUtils').clearInput(this.refs.fileInput.getFileInput());}});f.exports=l;}),null);
__d('ReactComposerFailedMediaUpload.react',['cx','fbt','React','Tooltip','XUIButton.react','XUICloseButton.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').PureComponent);k=j&&j.prototype;m.prototype.render=function(){var n=this.props.error.summary+': '+this.props.error.description,o=this.props.error.transient?c('React').createElement(c('XUIButton.react'),{className:"_4_e",label:i._("Retry"),onClick:this.props.onRetryClick,size:'small',use:'special'}):c('React').createElement(c('XUIButton.react'),{className:"_4_f",label:i._("Okay"),onClick:this.props.onDismissClick,size:'small'});return (c('React').createElement('div',babelHelpers['extends']({},c('Tooltip').propsFor(n),{className:"_4_g"}),c('React').createElement(c('XUICloseButton.react'),{className:"_2n25",onClick:this.props.onRemoveClick,size:'medium',shade:'light'}),c('React').createElement('p',{className:"_4_h"},i._("Error")),c('React').createElement('div',{className:"_4_i"},c('React').createElement('p',{className:"_4_j"},this.props.filename)),o));};function m(){j.apply(this,arguments);}m.propTypes={error:l.object.isRequired,filename:l.string,onDismissClick:l.func,onRemoveClick:l.func,onRetryClick:l.func,uploadID:l.string.isRequired};f.exports=m;}),null);
__d('ReactComposerFailedPhotoUploadContainer.react',['ReactComposerContextMixin','ReactComposerFailedMediaUpload.react','ReactComposerMediaUploadActions','ReactComposerMediaUploadActionType','ReactComposerPhotoUploader','ReactComposerMediaUploadStore','ReactComponentWithPureRenderMixin','React'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'ReactComposerPhotoUploadPlaceholderContainer',_uploader:undefined,mixins:[c('ReactComponentWithPureRenderMixin'),c('ReactComposerContextMixin')],propTypes:{mediaConfig:h.object.isRequired},render:function j(){return (c('React').createElement(c('ReactComposerFailedMediaUpload.react'),babelHelpers['extends']({},this.props,{onDismissClick:this._onDismissClick,onRemoveClick:this._onDismissClick,onRetryClick:this._onRetryClick})));},_onDismissClick:function j(){c('ReactComposerMediaUploadActions').removeMediaUpload(this.context.composerID,this.props.uploadID);},_onRetryClick:function j(){var k=c('ReactComposerMediaUploadStore').getMediaUpload(this.context.composerID,this.props.uploadID).fileUpload.getFile();k.manuallyRetried=true;c('ReactComposerMediaUploadActions').retryMediaUpload(this.context.composerID,c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_RETRY);if(!this._uploader)this._uploader=new (c('ReactComposerPhotoUploader'))(this.context,this.props.mediaConfig.photoLimit,{disableFaceRecognition:this.props.mediaConfig.disableFaceboxTagger});this._uploader&&this._uploader.retry(k);}});f.exports=i;}),null);
__d('ReactComposerFailedVideoXUploadContainer.react',['ReactComposerContextMixin','ReactComposerFailedMediaUpload.react','ReactComposerMediaUtils','ReactComposerMediaUploadActions','ReactComposerMediaUploadStore','ReactComponentWithPureRenderMixin','React'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'ReactComposerFailedVideoXUploadContainer',mixins:[c('ReactComponentWithPureRenderMixin'),c('ReactComposerContextMixin')],propTypes:{mediaConfig:h.object.isRequired},render:function j(){return (c('React').createElement(c('ReactComposerFailedMediaUpload.react'),babelHelpers['extends']({},this.props,{onDismissClick:this._onDismissClick,onRemoveClick:this._onDismissClick,onRetryClick:this._onRetryClick})));},_onDismissClick:function j(){c('ReactComposerMediaUploadActions').removeMediaUpload(this.context.composerID,this.props.uploadID);},_onRetryClick:function j(){var k=c('ReactComposerMediaUploadStore').getMediaUpload(this.context.composerID,this.props.uploadID).fileUpload;k.manuallyRetried=true;var l=c('ReactComposerMediaUtils').getVideoXUploader(this.context.composerID);l.uploadVideo(k);}});f.exports=i;}),null);
__d('ReactComposerNUXActionType',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=c('keyMirrorRecursive')({NUX_WAS_SHOWN:null,NUX_WAS_SEEN:null},'ReactComposerNUXActionType');}),null);
__d('ReactComposerNUXStore',['CommerceSelfServeNUXType','ReactComposerStoreBase','ReactComposerNUXActionType','AsyncRequest','Map'],(function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('ReactComposerStoreBase'));i=h&&h.prototype;function j(){'use strict';var k;i.constructor.call(this,function(){return {nuxes:new (c('Map'))()};},function(l){switch(l.type){case c('ReactComposerNUXActionType').NUX_WAS_SHOWN:k&&k.$ReactComposerNUXStore1(l);break;case c('ReactComposerNUXActionType').NUX_WAS_SEEN:k&&k.$ReactComposerNUXStore2(l);break;}});k=this;}j.prototype.hasNUXBeenSeen=function(k,l){'use strict';return this.$ReactComposerNUXStore3(k,l).seen;};j.prototype.getNUXShownPhotoID=function(k,l){'use strict';return this.$ReactComposerNUXStore3(k,l).photoID;};j.prototype.$ReactComposerNUXStore1=function(k){'use strict';var l=this.validateAction(k,['composerID','nuxType','photoID']),m=l[0],n=l[1],o=l[2],p=this.$ReactComposerNUXStore3(m,n);p.photoID=o;this.emitChange(m);};j.prototype.$ReactComposerNUXStore2=function(k){'use strict';var l=this.validateAction(k,['composerID','nuxType']),m=l[0],n=l[1],o=this.$ReactComposerNUXStore3(m,n);o.seen=true;if(n!==c('CommerceSelfServeNUXType').COMPOSER_PRODUCT_PHOTO_TAGGER_BUTTON)new (c('AsyncRequest'))('/ajax/photos/composer/mark_nux_seen.php').setData({type:n}).send();this.emitChange(m);};j.prototype.$ReactComposerNUXStore3=function(k,l){'use strict';var m=this.getComposerData(k),n=m.nuxes.get(l);if(!n){n={seen:false,photoID:null};m.nuxes.set(l,n);}return n;};f.exports=new j();}),null);
__d('ReactComposerNUXActions',['ReactComposerNUXActionType','ReactComposerDispatcher','ReactComposerNUXStore'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();c('ReactComposerNUXStore');var h={nuxWasShown:function i(j,k,l){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerNUXActionType').NUX_WAS_SHOWN,nuxType:k,photoID:l});},nuxWasSeen:function i(j,k){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerNUXActionType').NUX_WAS_SEEN,nuxType:k});}};f.exports=h;}),null);
__d('ReactComposerPhoto.react',['cx','fbt','ix','ReactComposerContextMixin','ReactComposerMediaConfig','ReactComposerPhotoTagger.react','ReactComposerPhotoThumbnail.react','ReactComposerPropsAndStoreBasedStateMixin','ReactComposerStore','CommerceProductTaggerType','Image.react','ImageBlock.react','immutable','LoadingIndicator.react','ReactComponentWithPureRenderMixin','React','ReactFragment','XUIAmbientNUX.react','XUICloseButton.react','XUIContextualDialog.react','XUIContextualDialogBody.react','XUIText.react'],(function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes,l=c('React').createClass({displayName:'ReactComposerPhoto',mixins:[c('ReactComposerContextMixin'),c('ReactComponentWithPureRenderMixin'),c('ReactComposerPropsAndStoreBasedStateMixin')(c('ReactComposerStore'))],propTypes:{canTagFromModal:k.bool,draggingPhotos:k.bool,enableFaceboxTagger:k.bool,productTaggerType:k.string,disablePhotoEditing:k.bool,faceboxes:k.instanceOf(c('immutable').Map).isRequired,isLoadingPhotoEdit:k.bool,isSpherical:k.bool,onEditClick:k.func,onHideProductTaggerNux:k.func.isRequired,onRemoveButtonClicked:k.func.isRequired,onTagAdded:k.func.isRequired,onTaggingNUXClose:k.func,onTagIntent:k.func,onTagRemoved:k.func.isRequired,originalID:k.string,photoID:k.string.isRequired,showStickersNUX:k.bool,showTaggingNUX:k.bool,thumbSrc:k.string.isRequired,fileURL:k.string},getDefaultProps:function m(){return {enableFaceboxTagger:true,productTaggerType:c('CommerceProductTaggerType').NONE,disablePhotoEditing:false};},statics:{calculateState:function m(n,o){return {posting:c('ReactComposerStore').isPosting(n)};}},_renderImage:function m(){var n=this.context.gks.local_image_display?this.props.fileURL:null;return (c('React').createElement(c('ReactComposerPhotoThumbnail.react'),{bgClassName:"_1a__",bgURL:n,height:c('ReactComposerMediaConfig').photo.thumbHeight,imgSrc:this.props.thumbSrc,width:c('ReactComposerMediaConfig').photo.thumbWidth}));},render:function m(){var n={width:c('ReactComposerMediaConfig').photo.thumbWidth,height:c('ReactComposerMediaConfig').photo.thumbHeight},o=this.props.isRecognizingFaceboxes||this.props.isLoadingPhotoEdit?c('React').createElement('div',{className:"_jff"},c('React').createElement(c('LoadingIndicator.react'),{className:"_jfg",size:'small',color:'white'})):null,p=this.props.showProductTaggerNux?"_jfc"+(this.props.isRecognizingFaceboxes?' '+"_jfd":'')+(' '+"_43p_"):"_jfc"+(this.props.isRecognizingFaceboxes?' '+"_jfd":''),q=void 0,r=void 0;if(!this.state.posting){q=c('React').createElement(c('XUICloseButton.react'),{className:"_jfe",onClick:this.props.onRemoveButtonClicked,size:'medium',shade:'light'});r=c('React').createElement(c('ReactComposerPhotoTagger.react'),{canTagFromModal:this.props.canTagFromModal,draggingPhotos:this.props.draggingPhotos,enableFaceboxTagger:this.props.enableFaceboxTagger,productTaggerType:this.props.productTaggerType,disablePhotoEditing:this.props.disablePhotoEditing,faceboxes:this.props.faceboxes,onEditClick:this.props.onEditClick,onHideProductTaggerNux:this.props.onHideProductTaggerNux,onTagIntent:this.props.onTagIntent,onTagAdded:this.props.onTagAdded,onTagRemoved:this.props.onTagRemoved,originalID:this.props.originalID,photoID:this.props.photoID,shown:this.props.showPhotoTagger,showProductTaggerNux:this.props.showProductTaggerNux});}return (c('React').createElement('span',null,c('React').createElement('div',{ref:'root',className:p,style:n},q,this._renderImage(),o,r),this.renderLayers()));},renderLayers:function m(){return c('ReactFragment').create({taggingNUX:this.props.enableFaceboxTagger?this._getTaggingNux():null,stickersNUX:this.props.disablePhotoEditing?null:this._getStickersNux()});},_getTaggingNux:function m(){return (c('React').createElement(c('XUIContextualDialog.react'),{contextRef:function(){return this.refs.root;}.bind(this),position:'below',alignment:'left',shown:this.props.showTaggingNUX,width:300},c('React').createElement(c('XUIContextualDialogBody.react'),null,c('React').createElement(c('XUICloseButton.react'),{className:"rfloat",onClick:this.props.onTaggingNUXClose}),c('React').createElement('div',null,c('React').createElement(c('XUIText.react'),{weight:'bold',display:'block'},i._("Now It's Easier to Tag Photos.")),i._("Click photos with a {tagging_badge_icon} to review tag suggestions or add, edit, and remove tags. When you post the photo, your tags will be applied.",[i.param('tagging_badge_icon',c('React').createElement(c('Image.react'),{className:"_2z-r",src:j('/images/photos/editor/tag_icon_blue.png')}))])))));},_getStickersNux:function m(){return (c('React').createElement(c('XUIAmbientNUX.react'),{alignment:'right',contextRef:function(){return this.refs.root;}.bind(this),onCloseButtonClick:this.props.onStickersNUXClose,position:'below',shown:this.props.showStickersNUX},c('React').createElement(c('ImageBlock.react'),{spacing:'medium'},c('React').createElement(c('Image.react'),{src:j('/images/photos/editor/beast.png')}),c('React').createElement('div',{className:"_21ft"},c('React').createElement('div',{className:"_21fs"},i._("New! Add Stickers!")),i._("You can now add stickers to your photos")))));}});f.exports=l;}),null);
__d('ReactComposerPhotoContainer.react',['cx','CommerceSelfServeNUXType','ReactComposerPhoto.react','ReactComposerSphericalPhoto.react','ReactComposerPhotoActions','ReactComposerPhotoStore','ReactComposerPropsAndStoreBasedStateMixin','ReactComposerNUXActions','ReactComposerNUXStore','ComposerNUXType','ReactComponentWithPureRenderMixin','React','ReactDOM','ReactComposerContextMixin'],(function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('ReactComposerContextMixin').contextTypes,j=c('React').PropTypes,k=c('React').createClass({displayName:'ReactComposerPhotoContainer',mixins:[c('ReactComponentWithPureRenderMixin'),c('ReactComposerPropsAndStoreBasedStateMixin')(c('ReactComposerNUXStore'),c('ReactComposerPhotoStore'))],propTypes:{dragHandler:j.shape({add:j.func.isRequired,remove:j.func.isRequired}),enableFaceboxTagger:j.bool,productTaggerType:j.string,disablePhotoEditing:j.bool,nuxConfig:j.object.isRequired,photoID:j.string.isRequired,sphericalPhotoID:j.string,showProductTaggerNux:j.bool,uploadID:j.string.isRequired,fileURL:j.string},statics:{beforeCalculateInitialState:function l(m,n){var o=c('ReactComposerPhotoStore').getPhoto(m,n.photoID),p=this._shouldShowStickersNUX(m,o,n.nuxConfig),q=!p&&this._shouldShowTaggingNUX(m,o,n.nuxConfig);if(p)c('ReactComposerNUXActions').nuxWasShown(m,c('ComposerNUXType').ADD_STICKERS_NUX,o.id);if(q)c('ReactComposerNUXActions').nuxWasShown(m,c('ComposerNUXType').TAGGING_FLYOUT_NUX,o.id);},calculateState:function l(m,n){var o=c('ReactComposerPhotoStore').getPhoto(m,n.photoID),p=this._shouldShowStickersNUX(m,o,n.nuxConfig),q=!p&&this._shouldShowTaggingNUX(m,o,n.nuxConfig),r=c('ReactComposerPhotoStore').getPhotoBeingTagged(m)===n.photoID,s=n.showProductTaggerNux===true&&this._shouldShowProductPhotoTaggingNUX(m);return {faceboxes:o.faceboxes,isLoadingPhotoEdit:o.isLoadingPhotoEdit,isRecognizingFaceboxes:o.isRecognizingFaceboxes,isSpherical:Boolean(o.cubestripURI),showPhotoTagger:r,showProductTaggerNux:s,showStickersNUX:p,showTaggingNUX:q,thumbSrc:o.thumbSrc};},_couldShowNUX:function l(m,n,o,p){var q=c('ReactComposerNUXStore').getNUXShownPhotoID(m,p),r=c('ReactComposerNUXStore').hasNUXBeenSeen(m,p);return (!!o[p]&&!r&&(!q||q===n.id));},_shouldShowStickersNUX:function l(m,n,o){return this._couldShowNUX(m,n,o,c('ComposerNUXType').ADD_STICKERS_NUX);},_shouldShowTaggingNUX:function l(m,n,o){return (this._couldShowNUX(m,n,o,c('ComposerNUXType').TAGGING_FLYOUT_NUX)&&n.faceboxes.size>0);},_shouldShowProductPhotoTaggingNUX:function l(m){return !c('ReactComposerNUXStore').hasNUXBeenSeen(m,c('CommerceSelfServeNUXType').COMPOSER_PRODUCT_PHOTO_TAGGER_BUTTON);}},componentDidMount:function l(){setTimeout(function(){var m=this.props.dragHandler;m&&m.add(c('ReactDOM').findDOMNode(this.refs.container));}.bind(this),0);},componentWillUnmount:function l(){setTimeout(function(){var m=this.props.dragHandler;m&&m.remove(c('ReactDOM').findDOMNode(this.refs.container));}.bind(this),0);},render:function l(){if(this.state.isSpherical||this.props.sphericalPhotoID){return (c('React').createElement(c('ReactComposerSphericalPhoto.react'),{className:"_4j47 _jfc",showEditButton:true,fileURL:this.props.fileURL,onRemoveButtonClicked:this._onRemoveButtonClicked,photoID:this.props.photoID,sphericalPhotoID:this.props.sphericalPhotoID,thumbSrc:this.state.thumbSrc,uploadID:this.props.uploadID,ref:'container'}));}else return (c('React').createElement(c('ReactComposerPhoto.react'),babelHelpers['extends']({},this.props,this.state,{onEditClick:this._onEditClick,onHideProductTaggerNux:this._onHideProductTaggerNux,onRemoveButtonClicked:this._onRemoveButtonClicked,onStickersNUXClose:this._onStickersNUXClose,onTagAdded:this._onTagAdded,onTagIntent:this._onTagIntent,onTaggingNUXClose:this._onTaggingNUXClose,onTagRemoved:this._onTagRemoved,ref:'container'})));},_onEditClick:function l(){this._onStickersNUXClose();},_onRemoveButtonClicked:function l(){c('ReactComposerPhotoActions').removePhoto(this.context.composerID,this.props.photoID,this.props.uploadID);},_onStickersNUXClose:function l(){c('ReactComposerNUXActions').nuxWasSeen(this.context.composerID,c('ComposerNUXType').ADD_STICKERS_NUX);},_onTagAdded:function l(m,n,o){c('ReactComposerPhotoActions').tagFacebox(this.context.composerID,this.props.photoID,m,n,o);},_onTaggingNUXClose:function l(){c('ReactComposerNUXActions').nuxWasSeen(this.context.composerID,c('ComposerNUXType').TAGGING_FLYOUT_NUX);},_onTagIntent:function l(){if(this.state.showTaggingNUX)this._onTaggingNUXClose();},_onTagRemoved:function l(m,n){c('ReactComposerPhotoActions').untagFacebox(this.context.composerID,this.props.photoID,m,n);},_onHideProductTaggerNux:function l(){c('ReactComposerNUXActions').nuxWasSeen(this.context.composerID,c('CommerceSelfServeNUXType').COMPOSER_PRODUCT_PHOTO_TAGGER_BUTTON);}});k.contextTypes=i;f.exports=k;}),null);
__d('ReactComposerPhotoUploadPlaceholder.react',['cx','ix','CircularProgressBar.react','ReactComposerContextMixin','ReactComposerPhotoUploadState','Image.react','LoadingIndicator.react','ProgressBar.react','ReactComponentWithPureRenderMixin','React','XUICloseButton.react'],(function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'ReactComposerPhotoUploadPlaceholder',mixins:[c('ReactComposerContextMixin'),c('ReactComponentWithPureRenderMixin')],propTypes:{onRemoveButtonClicked:j.func.isRequired,uploadID:j.string.isRequired,uploadState:j.oneOf(Object.keys(c('ReactComposerPhotoUploadState'))).isRequired,uploadProgress:j.number,isSpherical:j.bool,fileURL:j.string},render:function l(){var m=null,n=null,o=this.props.uploadState,p=o===c('ReactComposerPhotoUploadState').PHOTO_UPLOAD_RESIZE_STARTED,q=o===c('ReactComposerPhotoUploadState').PHOTO_UPLOAD_UPLOADING;if((p||q)&&!this.props.isDocument){var r="_1b01"+(p?' '+"_1b02":'')+(q?' '+"_1b03":'');m=c('React').createElement(c('CircularProgressBar.react'),{percentComplete:this.props.uploadProgress,className:r});}else n=c('React').createElement(c('LoadingIndicator.react'),{className:"_1b00",color:'white',size:'medium'});var s=void 0;if(this.props.isSpherical)s=c('React').createElement(c('Image.react'),{className:"_1az2",src:i('/images/photos/spherical/gyro-small.png'),alt:'360 Photo'});var t={};if(this.context.gks.local_image_display&&this.props.fileURL)t={backgroundImage:'url('+this.props.fileURL+')'};return (c('React').createElement('div',{className:"_50_c"+(' '+"_1a__"),style:t},c('React').createElement(c('XUICloseButton.react'),{className:"_1b04",onClick:this.props.onRemoveButtonClicked,size:'medium',shade:'dark'}),s,m,n));}});f.exports=k;}),null);
__d('ReactComposerPhotoUploadPlaceholderContainer.react',['DocumentUploadConfig','ReactComposerMediaUploadActions','ReactComposerPhotoUploadPlaceholder.react','ReactComposerMediaUploadStore','ReactComposerPropsAndStoreBasedStateMixin','ReactComponentWithPureRenderMixin','React'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'ReactComposerPhotoUploadPlaceholderContainer',mixins:[c('ReactComponentWithPureRenderMixin'),c('ReactComposerPropsAndStoreBasedStateMixin')(c('ReactComposerMediaUploadStore'))],propTypes:{uploadID:h.string.isRequired},statics:{calculateState:function j(k,l){var m=c('ReactComposerMediaUploadStore').getMediaUpload(k,l.uploadID);return {uploadProgress:m.progress,uploadState:m.state,isSpherical:m.isSpherical,isDocument:m.fileUpload&&c('DocumentUploadConfig').isSupported(m.fileUpload.getFile().type)};}},render:function j(){return (c('React').createElement(c('ReactComposerPhotoUploadPlaceholder.react'),babelHelpers['extends']({},this.props,this.state,{onRemoveButtonClicked:this._onRemoveButtonClicked})));},_onRemoveButtonClicked:function j(){c('ReactComposerMediaUploadActions').removeMediaUpload(this.context.composerID,this.props.uploadID);}});f.exports=i;}),null);
__d('ReactComposerVideoX.react',['cx','ReactComposerMediaConfig','Image.react','React','XUICloseButton.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;l.prototype.render=function(){var m={width:c('ReactComposerMediaConfig').photo.thumbWidth,height:c('ReactComposerMediaConfig').photo.thumbHeight},n="_1sjs"+(this.props.isRecognizingFaceboxes?' '+"_1sjt":''),o=void 0;if(!this.props.posting)o=c('React').createElement(c('XUICloseButton.react'),{className:"_1sju",onClick:this.props.onRemoveButtonClicked,size:'medium',shade:'light'});return (c('React').createElement('div',{ref:'root',className:n,style:m},o,c('React').createElement('div',{className:"_2v_s"}),c('React').createElement(c('Image.react'),{src:this.props.thumbSrc,width:c('ReactComposerMediaConfig').photo.thumbWidth,height:c('ReactComposerMediaConfig').photo.thumbHeight})));};function l(){i.apply(this,arguments);}l.propTypes={onRemoveButtonClicked:k.func.isRequired,thumbSrc:k.string.isRequired,posting:k.bool.isRequired};f.exports=l;}),null);
__d('ReactComposerVideoXContainer.react',['cx','ReactComposerPropsAndStoreBasedStateMixin','ReactComposerStore','ReactComposerVideoX.react','ReactComposerMediaUploadActions','ReactComposerMediaUploadStore','EventListener','generateVideoThumbnails','React','ReactDOM'],(function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=100,k=100,l=c('React').createClass({displayName:'ReactComposerVideoXContainer',mixins:[c('ReactComposerPropsAndStoreBasedStateMixin')(c('ReactComposerStore'))],_loadedmetadataListener:null,propTypes:{dragHandler:i.shape({add:i.func.isRequired,remove:i.func.isRequired}),photoID:i.string.isRequired,uploadID:i.string.isRequired,fileURL:i.string.isRequired},statics:{calculateState:function m(n,o){var p=c('ReactComposerMediaUploadStore').getMediaUpload(n.toString(),o.uploadID),q=p&&p.thumbSrc?p.thumbSrc:'/images/icons/timeline/placeholder/placeholder-movies.png';return {posting:c('ReactComposerStore').isPosting(n),thumbSrc:q};}},componentDidMount:function m(){var n=c('ReactDOM').findDOMNode(this.refs.videoPlayer);this._loadedmetadataListener=c('EventListener').listen(n,'loadedmetadata',this.generateVideoThumbnails);setTimeout(function(){var o=this.props.dragHandler;o&&o.add(c('ReactDOM').findDOMNode(this.refs.container));}.bind(this),0);},generateVideoThumbnails:function m(){var n=c('ReactDOM').findDOMNode(this.refs.videoPlayer);c('generateVideoThumbnails')(n,k,j,1).done(function(o){c('ReactComposerMediaUploadActions').setVideoThumbnail(this.context.composerID,this.props.uploadID,o.thumbnails[0].getURL());}.bind(this));},componentWillUnmount:function m(){if(this._loadedmetadataListener){this._loadedmetadataListener.remove();this._loadedmetadataListener=null;}setTimeout(function(){var n=this.props.dragHandler;n&&n.remove(c('ReactDOM').findDOMNode(this.refs.container));}.bind(this),0);},render:function m(){return (c('React').createElement('div',null,c('React').createElement(c('ReactComposerVideoX.react'),{posting:this.state.posting,thumbSrc:this.state.thumbSrc,onRemoveButtonClicked:this._onRemoveButtonClicked,ref:'container'}),c('React').createElement('video',{ref:'videoPlayer',className:"_2mpk",src:this.props.fileURL})));},_onRemoveButtonClicked:function m(){c('ReactComposerMediaUploadActions').removeMediaUpload(this.context.composerID,this.props.uploadID);}});f.exports=l;}),null);
__d('ReactComposerVideoXUploadPlaceholder.react',['cx','CircularProgressBar.react','ReactComposerPhotoUploadState','ProgressBar.react','React','XUICloseButton.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;l.prototype.render=function(){var m=null,n=this.props.uploadState,o=n===c('ReactComposerPhotoUploadState').PHOTO_UPLOAD_UPLOADING;if(o){var p="_5t36"+(o?' '+"_5t3f":'');m=c('React').createElement(c('CircularProgressBar.react'),{percentComplete:this.props.uploadProgress,className:p});}return (c('React').createElement('div',{className:"_5t3l"},c('React').createElement(c('XUICloseButton.react'),{className:"_5t3o",onClick:this.props.onRemoveButtonClicked,size:'medium',shade:'dark'}),m));};function l(){i.apply(this,arguments);}l.propTypes={onRemoveButtonClicked:k.func.isRequired,uploadID:k.string.isRequired,uploadState:k.oneOf(Object.keys(c('ReactComposerPhotoUploadState'))).isRequired,uploadProgress:k.number};f.exports=l;}),null);
__d('ReactComposerVideoXUploadPlaceholderContainer.react',['ReactComposerMediaUploadActions','ReactComposerVideoXUploadPlaceholder.react','ReactComposerMediaUploadStore','ReactComposerPropsAndStoreBasedStateMixin','ReactComponentWithPureRenderMixin','React'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'ReactComposerVideoXUploadPlaceholderContainer',mixins:[c('ReactComponentWithPureRenderMixin'),c('ReactComposerPropsAndStoreBasedStateMixin')(c('ReactComposerMediaUploadStore'))],propTypes:{uploadID:h.string.isRequired},statics:{calculateState:function j(k,l){var m=c('ReactComposerMediaUploadStore').getMediaUpload(k,l.uploadID);return {uploadProgress:m.progress,uploadState:m.state};}},render:function j(){return (c('React').createElement(c('ReactComposerVideoXUploadPlaceholder.react'),babelHelpers['extends']({},this.props,this.state,{onRemoveButtonClicked:this._onRemoveButtonClicked})));},_onRemoveButtonClicked:function j(){c('ReactComposerMediaUploadActions').removeMediaUpload(this.context.composerID,this.props.uploadID);}});f.exports=i;}),null);
__d('ReactComposerDraggableMedia.react',['cx','fbt','ReactComposerContextMixin','ReactComposerFailedPhotoUploadContainer.react','ReactComposerMediaUploadType','ReactComposerPhotoActions','ReactComposerPhotoContainer.react','ReactComposerMediaUploadActions','ReactComposerPhotoUploadPlaceholderContainer.react','ReactComposerPhotoUploadState','ReactComposerVideoXContainer.react','ReactComposerFailedVideoXUploadContainer.react','ReactComposerVideoXUploadPlaceholderContainer.react','XUIAmbientNUX.react','Draggable','ReactComponentWithPureRenderMixin','ReactLayeredComponentMixin_DEPRECATED','React','ReactDOM','SimpleNUXMessage','SimpleNUXMessageTypes','Vector','throttle'],(function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=200,l=5,m=c('ReactComposerPhotoUploadState').PHOTO_UPLOAD_DONE,n=c('React').createClass({displayName:'ReactComposerDraggableMedia',_draggable:undefined,_grabbed:undefined,_scrollParent:undefined,mixins:[c('ReactComponentWithPureRenderMixin'),c('ReactComposerContextMixin'),c('ReactLayeredComponentMixin_DEPRECATED')],propTypes:{enableFaceboxTagger:j.bool,productTaggerType:j.string,disablePhotoEditing:j.bool,mediaConfig:j.object.isRequired,upload:j.object.isRequired,nuxConfig:j.object.isRequired,showSphericalSingletonNux:j.bool,draggingPhotos:j.bool,enableMediaDragging:j.bool,index:j.number,updateComponentPosition:j.func.isRequired,onGrab:j.func.isRequired,onDrag:j.func.isRequired,onDrop:j.func.isRequired},getInitialState:function o(){return {dragging:false,showSphericalSingletonNux:false};},componentWillReceiveProps:function o(p){if(this.props.index!==p.index&&p.index!==undefined)setTimeout(this._updateComponentPosition,0);if(!this.props.showSphericalSingletonNux&&p.showSphericalSingletonNux&&!c('SimpleNUXMessage').hasUserSeenMessage(c('SimpleNUXMessageTypes').SPHERICAL_SINGLETON_NUX))this.setState({showSphericalSingletonNux:true});},componentDidUpdate:function o(p){if(this.props.enableMediaDragging&&p.upload.state!==m&&this.props.upload.state===m){this._createDraggable();}else if(p.upload.state===m&&this.props.upload.state!==m)this._draggable&&this._draggable.destroy();},componentDidMount:function o(){this._scrollParent=this._findScrollParent();if(this.props.enableMediaDragging&&this.props.upload.state===m)this._createDraggable();setTimeout(this._updateComponentPosition,0);},componentWillUnmount:function o(){this._draggable&&this._draggable.destroy();},render:function o(){var p=(this.state.dragging?"_2pkn":'')+(' '+"_2pko");return (c('React').createElement('div',{className:p,onClick:this._onClick,key:this.props.upload.photoID||this.props.upload.id,ref:'draggable_media'},this._getInnerMediaComponent()));},renderLayers:function o(){return {sphericalSingletonNux:this._sphericalSingletonNux()};},_sphericalSingletonNux:function o(){if(!this.props.showSphericalSingletonNux)return null;return c('React').createElement(c('XUIAmbientNUX.react'),{alignment:'left',contextRef:function(){return this.refs.draggable_media;}.bind(this),shown:this.state.showSphericalSingletonNux,position:'below',onCloseButtonClick:this._onSphericalSingletonNuxClose,width:'auto'},i._("Post this photo individually to view in 360\u00b0"));},_onSphericalSingletonNuxClose:function o(){this.setState({showSphericalSingletonNux:false});c('SimpleNUXMessage').markMessageSeenByUser(c('SimpleNUXMessageTypes').SPHERICAL_SINGLETON_NUX);},_getInnerMediaComponent:function o(){if(this.props.upload.mediaType==c('ReactComposerMediaUploadType').VIDEO)return this._getInnerVideoComponent();return this._getInnerPhotoComponent();},_getInnerVideoComponent:function o(){var p=this.props.upload;if(p.state===m){var q=this._getDragHandler();return (c('React').createElement('div',{'data-testid':'media-attachment-video'},c('React').createElement(c('ReactComposerVideoXContainer.react'),{dragHandler:q,key:p.photoID,photoID:p.photoID,uploadID:p.id,fileURL:p.fileURL})));}if(p.state===c('ReactComposerPhotoUploadState').PHOTO_UPLOAD_FAILED)return (c('React').createElement(c('ReactComposerFailedVideoXUploadContainer.react'),{error:p.error,filename:p.filename,key:p.id,mediaConfig:this.props.mediaConfig,uploadID:p.id}));return (c('React').createElement(c('ReactComposerVideoXUploadPlaceholderContainer.react'),{key:p.id,uploadID:p.id}));},_getInnerPhotoComponent:function o(){var p=this.props.upload;if(p.state===m){var q=this._getDragHandler();return (c('React').createElement('div',{'data-testid':'media-attachment-photo'},c('React').createElement(c('ReactComposerPhotoContainer.react'),{canTagFromModal:this.props.mediaConfig.canTagFromModal,draggingPhotos:this.props.draggingPhotos,dragHandler:q,enableFaceboxTagger:this.props.enableFaceboxTagger,productTaggerType:this.props.productTaggerType,disablePhotoEditing:this.props.disablePhotoEditing,key:p.photoID,nuxConfig:this.props.nuxConfig,originalID:p.originalPhotoID,photoID:p.photoID,showProductTaggerNux:this.props.nuxConfig.showProductTaggerNux&&this.props.index===0,sphericalPhotoID:p.sphericalPhotoID,uploadID:p.id,fileURL:p.fileURL})));}if(p.state===c('ReactComposerPhotoUploadState').PHOTO_UPLOAD_FAILED)return (c('React').createElement(c('ReactComposerFailedPhotoUploadContainer.react'),{error:p.error,filename:p.filename,key:p.id,mediaConfig:this.props.mediaConfig,uploadID:p.id}));return (c('React').createElement(c('ReactComposerPhotoUploadPlaceholderContainer.react'),{key:p.id,uploadID:p.id,fileURL:p.fileURL}));},_getDragHandler:function o(){var p=this;return {add:function q(r){p._draggable&&p._draggable.addHandle(r);},remove:function q(r){p._draggable&&p._draggable.removeHandle(r);}};},_createDraggable:function o(){this._draggable=new (c('Draggable'))(c('ReactDOM').findDOMNode(this)).setNamespace('ReactComposer').setUseAbsolute(true).setAvoidKillingEvents(true).setGutter(l).setGrabHandler(this._onGrab).setDragHandler(c('throttle')(this._onDrag,k)).setDropHandler(this._onDrop);this._updateComponentPosition();},_updateComponentPosition:function o(){var p=c('ReactDOM').findDOMNode(this),q=c('Vector').getElementPosition(p);q=this._compensateForScroll(p,q);this.props.updateComponentPosition(this.props.upload.id||this.props.upload.photoID,q,c('Vector').getElementDimensions(p));},_compensateForScroll:function o(p,q){return this._scrollParent?q.add(this._scrollParent.scrollLeft,this._scrollParent.scrollTop):q;},_findScrollParent:function o(){var p=c('ReactDOM').findDOMNode(this);if(p.closest){return p.closest('.fbScrollableAreaWrap');}else{var q=document.querySelectorAll('.fbScrollableAreaWrap');while(p&&p.nodeType===1){var r=0;while(q[r]){if(q[r]===p)return p;r++;}p=p.parentNode;}return null;}},_onGrab:function o(){if(this.state.dragging)return;this._grabbed=true;var p=c('ReactDOM').findDOMNode(this);this.props.onGrab(this.props.upload.id||this.props.upload.photoID,p);},_onDrag:function o(p){if(!this._grabbed)return;this.setState({dragging:true});var q=c('ReactDOM').findDOMNode(this);p=this._compensateForScroll(q,p);this.props.onDrag(p);},_onDrop:function o(p){this._draggable&&this._draggable.resetPosition();this.setState({dragging:false});this._grabbed=false;var q=c('ReactComposerMediaUploadActions').mediaMoved,r=c('ReactDOM').findDOMNode(this);p=this._compensateForScroll(r,p);this.props.onDrop(p,q);},_onClick:function o(){c('ReactComposerPhotoActions').setPhotoBeingTagged(this.context.composerID,this.props.upload.photoID);}});f.exports=n;}),null);
__d('ReactComposerGenericPhotoUploadLink.react',['cx','React','Link.react','joinClasses'],(function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;l.prototype.render=function(){'use strict';var m=c('joinClasses')("__9u",this.props.className);return (c('React').createElement(c('Link.react'),{className:m},this.props.children));};function l(){'use strict';i.apply(this,arguments);}l.propTypes={className:k.string};l.defaultProps={className:"__9t"};f.exports=l;}),null);
__d('ReactComposerMediaScrollableArea.react',['ReactComponentWithPureRenderMixin','TimelineMapScrollableArea','React','ReactDOM','joinClasses'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=h.oneOfType([h.string,h.number]),j=c('React').createClass({displayName:'ReactComposerMediaScrollableArea',_scrollableArea:c('TimelineMapScrollableArea'),mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{children:h.array.isRequired,getAddMoreDOM:h.func,height:i.isRequired,persistent:h.bool,photosCount:h.number,scrollbar:h.oneOf(['native','fade','nofade']).isRequired,verticalScroll:h.bool,width:i.isRequired},getDefaultProps:function k(){return {scrollbar:'native',width:'100%'};},componentDidMount:function k(){this._scrollableArea=new (c('TimelineMapScrollableArea'))(c('ReactDOM').findDOMNode(this.refs.container),{fade:this.props.scrollbar==='fade',persistent:this.props.persistent,verticalscroll:this.props.verticalScroll});this._scrollAddButtonIntoView();},componentDidUpdate:function k(l,m){if(this.props.photosCount>l.photosCount)this._scrollAddButtonIntoView();},componentWillUnmount:function k(){this._scrollableArea.destroy();},render:function k(){var l=c('joinClasses')(this.props.className,this.props.scrollbar),m={height:this.props.height,width:this.props.width},n=this.props.height-(this.props.scrollbar==='fade'?0:10),o={height:n};return (c('React').createElement('div',{className:l,ref:'container'},c('React').createElement('div',{className:'fbScrollableArea',style:m},c('React').createElement('div',{className:'fbScrollableAreaWrap'},c('React').createElement('div',{className:'fbScrollableAreaBody',style:o},c('React').createElement('div',{className:'fbScrollableAreaContent'},this.props.children))),this._getTrack())));},_getTrack:function k(){if(this.props.scrollbar==='native')return null;return (c('React').createElement('div',{className:'fbScrollableAreaTrack invisible_elem'},c('React').createElement('div',{className:'fbScrollableAreaGripper'})));},_scrollAddButtonIntoView:function k(){this.props.getAddMoreDOM&&this.props.getAddMoreDOM()&&this._scrollableArea.scrollIntoView(this.props.getAddMoreDOM());}});f.exports=j;}),null);
__d('ReactComposerMediaUploadsGrid.react',['cx','fbt','ReactComposerContextMixin','ReactComposerDraggableMedia.react','ReactComposerGenericPhotoUploadLink.react','ReactComposerLoggingActions','ReactComposerLoggingName','ReactComposerMediaScrollableArea.react','ReactComposerMediaUtils','FileInput.react','immutable','ReactComponentWithPureRenderMixin','React','ReactDOM','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=112,l=c('React').createClass({displayName:'ReactComposerMediaUploadsGrid',mixins:[c('ReactComponentWithPureRenderMixin'),c('ReactComposerContextMixin')],propTypes:{enableFaceboxTagger:j.bool,productTaggerType:j.string,disablePhotoEditing:j.bool,addMorePhotosConfig:j.shape({maxPhotos:j.number}).isRequired,mediaAcceptParam:j.string,mediaConfig:j.object.isRequired,nuxConfig:j.object.isRequired,onFilesSelected:j.func,canUploadMultiplePhotos:j.bool,uploads:j.instanceOf(c('immutable').List).isRequired,sphericalSingletonNuxUpload:j.object,onDrop:j.func,photoUploadLink:j.element,scrollableAreaHeight:j.number.isRequired,sourceIndex:j.number,targetIndex:j.number,updateComponentPosition:j.func.isRequired},getDefaultProps:function m(){return {addMorePhotosConfig:{},canUploadMultiplePhotos:false,photoUploadLink:c('React').createElement(c('ReactComposerGenericPhotoUploadLink.react'),null),scrollableAreaHeight:k,showSellUploadLink:false};},render:function m(){return (c('React').createElement('div',{className:"_kkp"},c('React').createElement('div',{className:c('joinClasses')("_kkq",this.props.className)},c('React').createElement(c('ReactComposerMediaScrollableArea.react'),{fade:true,getAddMoreDOM:this._getAddMoreDOM,height:this.props.scrollableAreaHeight,photosCount:this.props.uploads.size,scrollbar:'fade',verticalScroll:true},this.props.children,this._getComponents(),this._getAddMorePhotosButton()))));},_onAddMorePhotosClick:function m(){c('ReactComposerLoggingActions').mediaUploadInputClicked(this.context.composerID,c('ReactComposerLoggingName').MEDIA_UPLOADS_PLUS_BUTTON);},_onFilesSelected:function m(event){if(this.props.onFilesSelected){var n=this.props.onFilesSelected;n(event,this.refs.fileInput.getFileInput());}c('ReactComposerMediaUtils').clearInput(this.refs.fileInput.getFileInput());},_getAddMorePhotosButton:function m(){if(!this.props.canUploadMultiplePhotos&&this.props.uploads.size>0)return null;if(this.props.addMorePhotosConfig.maxPhotos&&this.props.uploads.size>=this.props.addMorePhotosConfig.maxPhotos)return null;return (c('React').createElement('span',{ref:'addMore',className:"_kkr"},c('React').createElement(c('FileInput.react'),{accept:this.props.mediaAcceptParam,multiple:this.props.canUploadMultiplePhotos,name:'composer_photo',onChange:this._onFilesSelected,onClick:this._onAddMorePhotosClick,ref:'fileInput',title:i._("Choose a file to upload"),'data-testid':'add-more-photos'},this.props.photoUploadLink)));},_getComponents:function m(){var n=this.props.uploads.toSeq().filter(function(p,q){return q!==this.props.sourceIndex;}.bind(this)).map(function(p,q){return this._getDraggablePhoto(p,q);}.bind(this));if(this.props.targetIndex!=null){var o=c('React').createElement('div',{key:'placeholder',className:"_kks"});n=n.splice(this.props.targetIndex,0,o);}if(this.props.sourceIndex!=null)n=n.splice(this.props.sourceIndex,0,this._getDraggablePhoto(this.props.uploads.get(this.props.sourceIndex)));return n.toArray();},_getDraggablePhoto:function m(n,o){return (c('React').createElement(c('ReactComposerDraggableMedia.react'),{enableFaceboxTagger:this.props.enableFaceboxTagger,productTaggerType:this.props.productTaggerType,disablePhotoEditing:this.props.disablePhotoEditing,key:n.id,upload:n,nuxConfig:this.props.nuxConfig,showSphericalSingletonNux:n===this.props.sphericalSingletonNuxUpload,draggingPhotos:this.props.sourceIndex!=null,enableMediaDragging:true,index:o,mediaConfig:this.props.mediaConfig,updateComponentPosition:this.props.updateComponentPosition,onGrab:this.props.onGrab,onDrag:this.props.onDrag,onDrop:this.props.onDrop}));},_getAddMoreDOM:function m(){return c('ReactDOM').findDOMNode(this.refs.addMore);}});f.exports=l;}),null);
__d('ReactComposerMediaUploadsGridContainer.react',['ReactComposerContextMixin','ReactComposerMediaUploadsGrid.react','Locale','ReactComponentWithPureRenderMixin','React','ReactDOM','Rect','Vector'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'ReactComposerMediaUploadsGridContainer',_componentsPosition:{},mixins:[c('ReactComponentWithPureRenderMixin'),c('ReactComposerContextMixin')],propTypes:{photoUploadLink:h.element,enableFaceboxTagger:h.bool,productTaggerType:h.string,disablePhotoEditing:h.bool,showSellUploadLink:h.bool},getInitialState:function j(){return {rtl:c('Locale').isRTL(),sourceIndex:null,targetIndex:null,uploads:this.props.uploads,sphericalSingletonNuxUpload:null};},componentWillReceiveProps:function j(k){if(this.state.uploads!==k.uploads){var l=k.uploads.toSeq().filter(function(m){return m.canShowSphericalSingletonNux;}).first();this.setState({uploads:k.uploads,sphericalSingletonNuxUpload:l});}},render:function j(){return (c('React').createElement(c('ReactComposerMediaUploadsGrid.react'),babelHelpers['extends']({},this.props,{onGrab:this._onGrab,onDrag:this._onDrag,onDrop:this._onDrop,sourceIndex:this.state.sourceIndex,targetIndex:this.state.targetIndex,updateComponentPosition:this._updateComponentPosition,uploads:this.state.uploads,sphericalSingletonNuxUpload:this.state.sphericalSingletonNuxUpload})));},_onGrab:function j(k,l){var m=this.state.uploads.findIndex(function(n){return n.id===k;});this.setState({sourceIndex:m,targetIndex:m});},_onDrag:function j(k){var l=c('Vector').getElementPosition(c('ReactDOM').findDOMNode(this));k=k.sub(l);this.setState({targetIndex:this._getTargetID(k)});},_onDrop:function j(k,l){this._onDrag(k);var m=this.state.sourceIndex,n=this.state.targetIndex;if(m==null||n==null)return;if(m!==n){var o=this.state.uploads;o=o.splice(m,1).splice(n,0,o.get(m));this.setState({uploads:o});l(this.context.composerID,m,n);}this._endDrag();},_endDrag:function j(){this.setState({sourceIndex:null,targetIndex:null});},_getTargetID:function j(k){var l=this.state.uploads,m=this.state.rtl?function(r,s){return r.right>=s.x;}:function(r,s){return r.left<=s.x;};for(var n=l.size-1;n>=0;n--){var o=l.get(n),p=o.id,q=this._componentsPosition[p];if(m(q,k))return n;}return 0;},_updateComponentPosition:function j(k,l,m){var n=new (c('Rect'))(c('ReactDOM').findDOMNode(this));this._componentsPosition[k]={left:l.x-n.l,right:l.x-n.l+m.x};}});f.exports=i;}),null);
__d('ReactComposerVideoUploadPlaceholder.react',['cx','ix','ReactComposerPropsAndStoreBasedStateMixin','ReactComposerStore','Image.react','ReactComponentWithPureRenderMixin','React','XUICloseButton.react'],(function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'ReactComposerVideoUploadPlaceholder',mixins:[c('ReactComponentWithPureRenderMixin'),c('ReactComposerPropsAndStoreBasedStateMixin')(c('ReactComposerStore'))],propTypes:{onRemoveClick:j.func},statics:{calculateState:function l(m,n){return {posting:c('ReactComposerStore').isPosting(m)};}},render:function l(){var m="_2oe _5ip5",n="_3ew _5iph",o=this.state.posting?null:c('React').createElement(c('XUICloseButton.react'),{className:"_5ipi",onClick:this.props.onRemoveClick,shade:'light',size:'medium'});return (c('React').createElement('div',{className:m},o,c('React').createElement(c('Image.react'),{className:n,src:i('images/icons/timeline/placeholder/placeholder-movies.png')})));}});f.exports=k;}),null);
__d('ReactComposerVideoUploadPlaceholderContainer.react',['ReactComposerContextMixin','ReactComposerVideoUploadActions','ReactComposerVideoUploadPlaceholder.react','ReactComponentWithPureRenderMixin','React'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('React').createClass({displayName:'ReactComposerVideoUploadPlaceholderContainer',mixins:[c('ReactComponentWithPureRenderMixin'),c('ReactComposerContextMixin')],render:function i(){return (c('React').createElement(c('ReactComposerVideoUploadPlaceholder.react'),{onRemoveClick:this._onRemoveClick}));},_onRemoveClick:function i(){c('ReactComposerVideoUploadActions').remove(this.context.composerID);}});f.exports=h;}),null);
__d('ReactComposerVideoUploadProgressBar.react',['cx','DOMContainer.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;l.prototype.render=function(){return (c('React').createElement('div',{className:"_4340"},c('React').createElement(c('DOMContainer.react'),null,this.props.progressBar)));};function l(){i.apply(this,arguments);}l.propTypes={progressBar:k.instanceOf(HTMLElement).isRequired};f.exports=l;}),null);
__d('ReactComposerMediaAttachment.react',['cx','fbt','BootloadOnRender.react','ReactComposerAttachmentType','ReactComposerConfig','ReactComposerContextMixin','ReactComposerDragDropPromptContainer.react','ReactComposerMediaAttachmentButtons.react','ReactComposerCollageContainer.react','ReactComposerMediaUploadsGridContainer.react','ReactComposerProfilePhotoBlock.react','ReactComposerStatusAttachmentMentionsInputWithTagExpansionContainer.react','ReactComposerCrossPostToInstagramRow.react','ReactComposerStatusFooterContainer.react','ReactComposerTaggerSummaryContainer.react','ReactComposerVideoUploadPlaceholderContainer.react','ReactComposerVideoUploadProgressBar.react','JSResource','LazyComponent.react','ReactComposerStatusUtils','immutable','React','ReactDOM'],(function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'ReactComposerMediaAttachment',_clientWidth:0,mixins:[c('ReactComposerContextMixin')],propTypes:{additionalTaggers:j.arrayOf(j.shape({button:j.element.isRequired,container:j.element.isRequired})),additionalFooterActions:j.arrayOf(j.element),config:c('ReactComposerConfig').isRequired,createAlbumLink:j.any,handlePastedText:j.func,onFilesSelected:j.func.isRequired,onMentionsInputChange:j.func,onMentionsInputFocus:j.func,onPasteFiles:j.func,shouldScrollComposerContent:j.bool,shouldShowCanvasSelector:j.bool,shouldShowCarouselURLInputArea:j.bool,shouldShowCollageUploadLayout:j.bool,shouldShowPreview:j.bool,slideshowDialogOpen:j.bool,isSlideshowSelected:j.bool,postButtonModule:j.func,uploads:j.instanceOf(c('immutable').List).isRequired,video:j.object,videoUploadsCount:j.number,photoUploadsCount:j.number,sphericalPhotoUploadsCount:j.number},render:function l(){var m=this.props.config.attachmentsConfig[c('ReactComposerAttachmentType').MEDIA],n=this.props.uploads.size>0&&!this.props.slideshowDialogOpen||!!this.props.video||m.canUploadPhoto&&!this.props.createAlbumLink||this.props.shouldShowCanvasSelector||this.props.shouldShowCarouselURLInputArea||this.props.shouldShowPreview||this.props.isSlideshowSelected,o=null;if(m.ComposerMediaAttachmentButtonsWithOptions){var p=m.ComposerMediaAttachmentButtonsWithOptions;o=c('React').createElement(p,{carouselConfig:m.carouselConfig,createAlbumLink:this.props.createAlbumLink,mediaAcceptParam:this.props.config.mediaAcceptParam,onFilesSelected:this.props.onFilesSelected,showCanvasEntryPoint:m.showCanvasEntryPoint,showCarouselEntryPoint:m.showCarouselEntryPoint,showPhotoAlbumEntryPoint:m.showPhotoAlbumEntryPoint,showSlideshowEntryPoint:m.showSlideshowEntryPoint,showUploadPhotosButton:m.canUploadPhoto,slideshowConfig:m.slideshowConfig,targetData:this.props.config.targetData});}else o=c('React').createElement(c('ReactComposerMediaAttachmentButtons.react'),{showUploadPhotosButton:m.canUploadPhoto,createAlbumLink:this.props.createAlbumLink,mediaAcceptParam:this.props.config.mediaAcceptParam,onFilesSelected:this.props.onFilesSelected,targetData:this.props.config.targetData});return (n?this._getMediaContent():c('React').createElement('div',null,c('React').createElement(c('ReactComposerDragDropPromptContainer.react'),{root:this,config:this.props.config}),o));},componentDidMount:function l(){var m=c('ReactDOM').findDOMNode(this);this._clientWidth=m?m.clientWidth:0;var n=this.props.config.attachmentsConfig[c('ReactComposerAttachmentType').STATUS];if(n)c('ReactComposerStatusUtils').handleMarkdownPreview(this.context.composerID,this.context.targetID,n.markdownPreviewAttachment);},_getMediaContent:function l(){var m=this.props.config.attachmentsConfig[c('ReactComposerAttachmentType').MEDIA],n=this.props.config.attachmentsConfig[c('ReactComposerAttachmentType').STATUS],o=void 0;if(this.props.shouldShowPreview){var p=m.ComposerAttachmentPreviewContainer,q=c('React').createElement(p,null);if(this.props.shouldShowCanvasSelector){var r=m.canvasConfig.TypeaheadContainer;o=c('React').createElement('div',null,q,c('React').createElement(r,{config:m.canvasConfig}));}else o=q;}else if(this.props.shouldShowCarouselURLInputArea){var s=m.carouselConfig.PhotoCarouselUtils;o=s.getPhotoCarouselMediaContent(m.carouselConfig,this.props.config.nuxConfig);}else if(this.props.shouldShowCanvasSelector){var t=m.canvasConfig,u=t.TypeaheadContainer;o=c('React').createElement(u,{config:t});}else if(this.props.isSlideshowSelected){var v=m.slideshowConfig.thumbnailViewContainer;o=c('React').createElement(v,{maxSelectedImages:m.slideshowConfig.maxPhotoNum,mediaAcceptParam:this.props.config.mediaAcceptParam.photos,pageID:m.slideshowConfig.pageID,showAudioRedesign:m.slideshowConfig.showAudioRedesign,showAudioSelector:m.slideshowConfig.showAudioSelector,showStorylineMood:m.slideshowConfig.showStorylineMood,onFilesSelected:this.props.onFilesSelected});}else if(this.props.video){o=c('React').createElement('div',null,c('React').createElement(c('ReactComposerVideoUploadPlaceholderContainer.react'),null),c('React').createElement(c('ReactComposerVideoUploadProgressBar.react'),{progressBar:this.props.videoProgressBar}));}else{var w='mediaAcceptParam' in m&&'both' in m.mediaAcceptParam?m.mediaAcceptParam.both:null;o=c('React').createElement(c('ReactComposerMediaUploadsGridContainer.react'),{enableFaceboxTagger:!m.disableFaceboxTagger,productTaggerType:m.productTaggerType,disablePhotoEditing:m.disablePhotoEditing,mediaConfig:m,mediaAcceptParam:w,nuxConfig:this.props.config.nuxConfig,onFilesSelected:this.props.onFilesSelected,canUploadMultiplePhotos:this.props.config.targetData.targetSupportsMultiplePhotos&&this.props.sphericalPhotoUploadsCount===0,uploads:this.props.uploads});}var x=c('React').createElement(c('ReactComposerStatusAttachmentMentionsInputWithTagExpansionContainer.react'),{config:this.props.config,handlePastedText:this.props.handlePastedText,onFocus:this.props.onMentionsInputFocus,onChange:this.props.onMentionsInputChange,onPasteFiles:this.props.onPasteFiles,placeholder:this._getInputPlaceholder()}),y=this.props.shouldShowCollageUploadLayout&&this.props.uploads.size<=5?c('React').createElement(c('ReactComposerCollageContainer.react'),{containerWidth:this._clientWidth,mediaUploads:this.props.uploads,enableFaceboxTagger:!m.disableFaceboxTagger,enablePhotoEditing:!m.disablePhotoEditing,productTaggerType:m.productTaggerType,composerConfig:this.props.config}):null;if(y)o=null;var z=n.multilingualStatus,aa=n.multilingualStatus?c('React').createElement(z,null):null,ba=c('React').createElement('div',null,x,aa);if(n.showProfilePic)ba=c('React').createElement(c('ReactComposerProfilePhotoBlock.react'),{profilePhotoBadge:n.customProfilePhoto,profilePicSrc:n.profilePicSrc,profileURI:n.profileURI},ba);var ca=n?n.markdownPreviewAttachment:null,da=null;if(ca){var ea=ca.container;da=c('React').createElement(ea,{prettify:ca.prettify});}var fa=n.donateButtonConfig,ga=null;if(fa){var ha=fa.donateButtonContainer;ga=c('React').createElement(ha,{charityName:fa.charityName,fundraiserCampaignId:fa.fundraiserCampaignId});}var ia=null;if(n.topicFeedsTagger){var ja=n.topicFeedsTagger,ka=ja.container;ia=c('React').createElement(ka,{composerFeedID:ja.composerFeedID,photoAutoTaggingDelay:ja.photoAutoTaggingDelay,photoPollingDuration:ja.photoPollingDuration,photoPollingInterval:ja.photoPollingInterval,showNux:ja.showNux,textAutoTaggingDelay:ja.textAutoTaggingDelay,darkLaunch:ja.darkLaunch});}var la=!this.props.shouldShowCarouselURLInputArea&&!this.props.isSlideshowSelected,ma=null,na=n.aymtTipConfig;if(na&&na.isEligible)ma=c('React').createElement(c('BootloadOnRender.react'),{loader:c('JSResource')('ReactComposerAYMTTip.react').__setRef('ReactComposerMediaAttachment.react'),placeholder:c('React').createElement('div',null),component:c('React').createElement(c('LazyComponent.react'),{pageID:na.pageID,minLength:na.minContentLength})});var oa=null;if(this.props.config.instagramCrossPostingEnabled&&this.props.uploads.size==1&&!this.props.videoUploadsCount)oa=c('React').createElement(c('ReactComposerCrossPostToInstagramRow.react'),{composerID:this.context.composerID});return (c('React').createElement('div',{'data-testid':'media-attachment'},c('React').createElement(c('ReactComposerDragDropPromptContainer.react'),{root:this,config:this.props.config}),c('React').createElement('div',{className:this.props.shouldScrollComposerContent?"_1w_g":''},ba,da,ga,c('React').createElement(c('ReactComposerTaggerSummaryContainer.react'),null),o,y,ia,ma,oa),c('React').createElement(c('ReactComposerStatusFooterContainer.react'),{additionalTaggers:this.props.additionalTaggers,additionalFooterActions:this.props.additionalFooterActions,attachmentsConfig:this.props.config.attachmentsConfig,audienceXHP:this.props.config.audienceXHP,config:this.props.config,isCameraIconEnabled:la,locationTaggerPlaceholder:this._getLocationTaggerPlaceholder(),mediaAcceptParam:this.props.config.mediaAcceptParam,peopleTaggerPlaceholder:this._getPeopleTaggerPlaceholder(),postButtonModule:this.props.postButtonModule,taggersConfig:this.props.config.taggersConfig,targetData:this.props.config.targetData})));},_getLocationTaggerPlaceholder:function l(){if(this.props.video)return i._("Where was this taken?");if(this.props.uploads.size>1)return i._("Where were these photos taken?");if(this.props.uploads.size===1)return i._("Where was this photo taken?");return null;},_getPeopleTaggerPlaceholder:function l(){if(!!this.props.video||this.props.uploads.size>0)return i._("Who were you with?");return null;},_getInputPlaceholder:function l(){var m=this.props.config.attachmentsConfig[c('ReactComposerAttachmentType').MEDIA];if(this.props.video||this.props.uploads.size===1&&this.props.videoUploadsCount===1){return i._("Say something about this video...");}else if(this.props.isSlideshowSelected){return i._("Say something about this slideshow...");}else if(this.props.uploads.size>1){if(this.props.photoUploadsCount===0){return i._("Say something about these videos...");}else if(this.props.videoUploadsCount===0){if(this.props.sphericalPhotoUploadsCount===this.props.photoUploadsCount){return i._("Say something about these 360 photos...");}else return i._("Say something about these photos...");}else return i._("Say something about these media...");}else if(this.props.shouldShowCarouselURLInputArea||this.props.shouldShowPreview){var n=m.carouselConfig.PhotoCarouselUtils;return n.getInputPlaceHolder(m.carouselConfig,this.props.shouldShowPreview);}else if(this.props.sphericalPhotoUploadsCount){return i._("Say something about this 360 photo...");}else return i._("Say something about this photo...");}});f.exports=k;}),null);
__d('ReactComposerCanvasStore',['ReactComposerCanvasActionType','ReactComposerStoreBase'],(function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('ReactComposerStoreBase'));i=h&&h.prototype;function j(){'use strict';var k;i.constructor.call(this,function(){return {shouldShowCanvasSelector:false};},function(l){switch(l.type){case c('ReactComposerCanvasActionType').SHOW_CANVAS_SELECTOR:k&&k.$ReactComposerCanvasStore1(l);break;case c('ReactComposerCanvasActionType').HIDE_CANVAS_SELECTOR:k&&k.$ReactComposerCanvasStore2(l);break;default:break;}});k=this;}j.prototype.$ReactComposerCanvasStore1=function(k){'use strict';var l=k.composerID,m=this.getComposerData(l);m.shouldShowCanvasSelector=true;this.emitChange(l);};j.prototype.$ReactComposerCanvasStore2=function(k){'use strict';var l=k.composerID,m=this.getComposerData(l);m.shouldShowCanvasSelector=false;this.emitChange(l);};j.prototype.shouldShowCanvasSelector=function(k){'use strict';return this.getComposerData(k).shouldShowCanvasSelector;};f.exports=new j();}),null);
__d('ReactComposerVideoUploader',['invariant','ReactComposerActions','ComposerEntryPointRef','ReactComposerPostUtilsCore','ReactComposerVideoUploadActions','ReactComposerVideoUploadStore','Arbiter','DOM','DOMClone','ErrorDialog','QE','React','ReactDOM','Run','SubscriptionsHandler','UserAgent','VideoUploadProcessingDialog.react','VideoUploadFile'],(function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=b.URL||b.webkitURL||{};function j(k){this.$ReactComposerVideoUploader3=k;this.$ReactComposerVideoUploader2=new (c('SubscriptionsHandler'))();!this.$ReactComposerVideoUploader3.composerID?h(0):void 0;!this.$ReactComposerVideoUploader3.container?h(0):void 0;!this.$ReactComposerVideoUploader3.progressBarInstance?h(0):void 0;!this.$ReactComposerVideoUploader3.uploader?h(0):void 0;this.$ReactComposerVideoUploader5=k.uploader;this.$ReactComposerVideoUploader1=k.composerID;this.$ReactComposerVideoUploader2.addSubscriptions(this.$ReactComposerVideoUploader5.subscribe('post-failed',this.$ReactComposerVideoUploader6.bind(this)),this.$ReactComposerVideoUploader5.subscribe('post-finished',this.$ReactComposerVideoUploader7.bind(this)),this.$ReactComposerVideoUploader5.subscribe('upload-failed',this.$ReactComposerVideoUploader8.bind(this)),this.$ReactComposerVideoUploader5.subscribe('upload-finished',this.$ReactComposerVideoUploader9.bind(this)));c('Run').onLeave(function(){return this.$ReactComposerVideoUploader5.abandon();}.bind(this));c('Run').onUnload(function(){return this.$ReactComposerVideoUploader5.abandon();}.bind(this));}j.prototype.upload=function(k,l){this.$ReactComposerVideoUploader4=l;var m=c('VideoUploadFile').fromFileInput(k);this.$ReactComposerVideoUploader5.upload(m);};j.prototype.uploadFromFile=function(k,l){var m=k.getFile();if(m&&i.createObjectURL)l.fileURL=i.createObjectURL(m);this.$ReactComposerVideoUploader4=l;this.$ReactComposerVideoUploader5.upload(k);};j.prototype.destroy=function(){this.$ReactComposerVideoUploader2.release();};j.prototype.$ReactComposerVideoUploader10=function(k){if(k)c('ErrorDialog').show(k.error_summary,k.error_description);this.$ReactComposerVideoUploader3.progressBarInstance.reset();this.$ReactComposerVideoUploader5.abandon();c('ReactComposerActions').postError(this.$ReactComposerVideoUploader1,null);};j.prototype.$ReactComposerVideoUploader6=function(k,l){this.$ReactComposerVideoUploader10(l);};j.prototype.$ReactComposerVideoUploader7=function(k,l){c('ReactComposerPostUtilsCore').handlePostSucceeded(this.$ReactComposerVideoUploader1);if(this.$ReactComposerVideoUploader3.composerEntryPointRef===c('ComposerEntryPointRef').TIMELINE)c('QE').logExposure('www_optimistic_video_post');if(this.$ReactComposerVideoUploader3.shouldShowOptimisticVideoPost&&this.$ReactComposerVideoUploader3.composerEntryPointRef===c('ComposerEntryPointRef').TIMELINE){c('Arbiter').inform('videoUpload/complete',{videoID:l.video_id,isToUserProfile:true,videoFileURL:l.fileURL});}else c('ReactDOM').render(c('React').createElement(c('VideoUploadProcessingDialog.react'),{videoID:l.video_id,show:true}),this.$ReactComposerVideoUploader3.container);this.$ReactComposerVideoUploader3.onPostSuccess&&this.$ReactComposerVideoUploader3.onPostSuccess();};j.prototype.$ReactComposerVideoUploader8=function(k,l){this.$ReactComposerVideoUploader10(l);var m=c('ReactComposerVideoUploadStore').getVideo(this.$ReactComposerVideoUploader1);if(c('UserAgent').isBrowser('IE')){var n=c('DOMClone').deepClone(m.input);c('DOM').replace(m.input,n);}else m.input.value='';c('ReactComposerVideoUploadActions').remove(this.$ReactComposerVideoUploader1);};j.prototype.$ReactComposerVideoUploader9=function(){this.$ReactComposerVideoUploader5.post(this.$ReactComposerVideoUploader4);this.$ReactComposerVideoUploader3.onUploadSuccess&&this.$ReactComposerVideoUploader3.onUploadSuccess();};f.exports=j;}),null);
__d('ReactComposerMediaAttachmentContainer.react',['invariant','ReactComposerAttachmentActions','ReactComposerAttachmentType','ReactComposerCanvasStore','ReactComposerConfig','ReactComposerLoggingName','ReactComposerMediaAttachment.react','ReactComposerMediaUploadType','ReactComposerMediaAttachmentStore','ReactComposerMediaUtils','ReactComposerPhotoCarouselStore','ReactComposerMediaUploadActions','ReactComposerMediaUploadStore','ReactComposerPhotoUploader','ReactComposerPropsAndStoreBasedStateMixin','ReactComposerScrapedAttachmentStore','ReactComposerSlideshowActions','ReactComposerSlideshowStore','ReactComposerStatusUtils','ReactComposerTaggerActions','ReactComposerTaggerStore','ReactComposerTaggerType','ReactComposerVideoUploadActions','ReactComposerVideoUploader','ReactComposerVideoUploadStore','PUWMethods','React','ReactDOM','SubscriptionsHandler','URLScraper'],(function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'ComposerMediaAttachmentContainer',_uploader:undefined,_videoUploader:undefined,_subscriptions:c('SubscriptionsHandler'),mixins:[c('ReactComposerPropsAndStoreBasedStateMixin')(c('ReactComposerCanvasStore'),c('ReactComposerMediaAttachmentStore'),c('ReactComposerPhotoCarouselStore'),c('ReactComposerMediaUploadStore'),c('ReactComposerScrapedAttachmentStore'),c('ReactComposerSlideshowStore'),c('ReactComposerTaggerStore'),c('ReactComposerVideoUploadStore'))],propTypes:{additionalTaggers:i.arrayOf(i.shape({button:i.element.isRequired,container:i.element.isRequired})),config:c('ReactComposerConfig').isRequired},statics:{calculateState:function k(l,m){var n=c('ReactComposerMediaUploadStore').getUploadsOfType(l,c('ReactComposerMediaUploadType').PHOTO),o=c('ReactComposerMediaUploadStore').getUploadsOfType(l,c('ReactComposerMediaUploadType').VIDEO),p=c('ReactComposerMediaUploadStore').getUploads(l),q=m.config.attachmentsConfig[c('ReactComposerAttachmentType').MEDIA],r=n.filter(function(s){return s.isSpherical!==false;}).size;return {createAlbumLink:c('ReactComposerMediaAttachmentStore').getCreateAlbumLink(l),shouldShowCanvasSelector:c('ReactComposerCanvasStore').shouldShowCanvasSelector(l),shouldShowCarouselURLInputArea:c('ReactComposerPhotoCarouselStore').shouldShowURLEditArea(l),shouldShowPreview:c('ReactComposerScrapedAttachmentStore').getMarkup(l)!==null,shouldShowCollageUploadLayout:q.shouldShowCollageUploadLayout,shouldScrollComposerContent:q.shouldScrollComposerContent,slideshowDialogOpen:c('ReactComposerSlideshowStore').shouldShowSlideshowDialog(l),isSlideshowSelected:c('ReactComposerSlideshowStore').isSlideshowSelected(l),selectedTagger:c('ReactComposerTaggerStore').getSelectedTagger(l),uploads:p,photoUploadsCount:n.size,sphericalPhotoUploadsCount:r,videoUploadsCount:o.size,video:c('ReactComposerVideoUploadStore').getVideo(l),videoProgressBar:c('ReactComposerMediaAttachmentStore').getVideoProgressBar(l),videoProgressBarInstance:c('ReactComposerMediaAttachmentStore').getVideoProgressBarInstance(l),videoUploader:c('ReactComposerMediaAttachmentStore').getVideoUploader(l)};}},componentWillMount:function k(){this._subscriptions=new (c('SubscriptionsHandler'))();var l=this.props.config.attachmentsConfig[c('ReactComposerAttachmentType').MEDIA];this._uploader=new (c('ReactComposerPhotoUploader'))(this.context,l.photoLimit,{disableFaceRecognition:l.disableFaceboxTagger});var m=c('ReactComposerMediaUtils').subscribeToImageEdit(this.context.composerID,this._uploader);this._subscriptions.addSubscriptions(m);},componentDidMount:function k(){var l=this.props.config.attachmentsConfig[c('ReactComposerAttachmentType').MEDIA];this._videoUploader=new (c('ReactComposerVideoUploader'))({composerID:this.context.composerID,container:c('ReactDOM').findDOMNode(this.refs.videoContainer),progressBarInstance:this.state.videoProgressBarInstance,uploader:this.state.videoUploader,shouldShowOptimisticVideoPost:l.shouldShowOptimisticVideoPost,composerEntryPointRef:this.context.composerType});c('ReactComposerVideoUploadActions').setUploader(this.context.composerID,this._videoUploader);},componentWillUnmount:function k(){this._videoUploader&&this._videoUploader.destroy();this._subscriptions&&this._subscriptions.release();},componentWillUpdate:function k(l,m){m=m||{};var n=this.state.uploads.size>0||!!this.state.video,o=m.uploads.size>0||!!m.video,p=this.props.config.attachmentsConfig[c('ReactComposerAttachmentType').STATUS],q=this.props.config.attachmentsConfig[c('ReactComposerAttachmentType').MEDIA];if((q.returnToStatusIfNoUploads||this.currentStateHasUploads)&&!o&&!this.state.slideshowDialogOpen){c('ReactComposerAttachmentActions').selectAttachment(this.context.composerID,c('ReactComposerAttachmentType').STATUS,true);if(c('ReactComposerSlideshowStore').isSlideshowSelected(this.context.composerID))c('ReactComposerSlideshowActions').hideSlideshowEditField(this.context.composerID);}},render:function k(){return (c('React').createElement('div',null,c('React').createElement(c('ReactComposerMediaAttachment.react'),babelHelpers['extends']({},this.props,{createAlbumLink:this.state.createAlbumLink,isSlideshowSelected:this.state.isSlideshowSelected,shouldShowCanvasSelector:this.state.shouldShowCanvasSelector,shouldShowCarouselURLInputArea:this.state.shouldShowCarouselURLInputArea,shouldShowCollageUploadLayout:this.state.shouldShowCollageUploadLayout,shouldScrollComposerContent:this.state.shouldScrollComposerContent,shouldShowPreview:this.state.shouldShowPreview,slideshowDialogOpen:this.state.slideshowDialogOpen,onFilesSelected:this._onFilesSelected,onMentionsInputChange:this._onMentionsInputChange,onMentionsInputFocus:this._onMentionsInputFocus,onPasteFiles:this._onPasteFiles,handlePastedText:this._handlePastedText,postButtonModule:this.props.postButtonModule,uploads:this.state.uploads,videoUploadsCount:this.state.videoUploadsCount,photoUploadsCount:this.state.photoUploadsCount,sphericalPhotoUploadsCount:this.state.sphericalPhotoUploadsCount,video:this.state.video,videoProgressBar:this.state.videoProgressBar})),c('React').createElement('div',{ref:'videoContainer'})));},_onFilesSelected:function k(event,l){var m=c('ReactComposerMediaUtils').handleSpecialMediaUpload(event,l,this.props.config.attachmentsConfig[c('ReactComposerAttachmentType').MEDIA],this.context);if(m)return;var n=event.target?event.target:l.getInput();!this._uploader?h(0):void 0;c('ReactComposerMediaUtils').uploadPhotosOrVideoFromTarget(this.context.composerID,n,this._uploader,this.props.config.targetData.targetSupportsMultiplePhotos,this.props.config.targetData.targetSupportsMultiMedia);},_onMentionsInputFocus:function k(){if(this.state.selectedTagger!==null&&this.state.selectedTagger!==c('ReactComposerTaggerType').PEOPLE)c('ReactComposerTaggerActions').selectTaggerWithoutAutofocus(this.context.composerID,c('ReactComposerLoggingName').MENTIONS_INPUT_FOCUS,c('ReactComposerTaggerType').PEOPLE);},_onPasteFiles:function k(l){c('ReactComposerStatusUtils').uploadPastedFile(this.context.composerID,l[0],this._uploader);c('ReactComposerMediaUploadActions').photosSelect(this.context.composerID,1,c('PUWMethods').COPYPASTE);},_handlePastedText:function k(l,m){var n=this.props.config.attachmentsConfig[c('ReactComposerAttachmentType').MEDIA],o=c('ReactComposerPhotoCarouselStore').shouldShowURLEditArea(this.context.composerID);if(n.carouselConfig&&o&&n.carouselConfig.ComposerPhotoCarouselPlaceHolder)c('ReactComposerStatusUtils').scrapeLink(this.context.composerID,this.context.targetID,l,this.context.composerType,this.context.actorID,c('ReactComposerLoggingName').LINK_PASTED);return false;},_onMentionsInputChange:function k(l){var m=this.props.config.attachmentsConfig[c('ReactComposerAttachmentType').MEDIA],n=c('ReactComposerPhotoCarouselStore').shouldShowURLEditArea(this.context.composerID);if(!m.carouselConfig||!n)return;if(m.carouselConfig.ComposerPhotoCarouselPlaceHolder){var o=l.getCurrentContent().getPlainText();if(!c('URLScraper').trigger(o))c('ReactComposerStatusUtils').scrapeLink(this.context.composerID,this.context.targetID,o,this.context.composerType,this.context.actorID,c('ReactComposerLoggingName').INLINE_COMPOSER);}}});f.exports=j;}),null);
__d('ReactComposerVideoCopyrightDialog.react',['fbt','LayerHideOnEscape','React','XUIButton.react','XUIDialog.react','XUIDialogBody.react','XUIDialogFooter.react'],(function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;function l(){var m,n;'use strict';for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$ReactComposerVideoCopyrightDialog1=function(){this.props.onCancel&&this.props.onCancel();}.bind(this),this.$ReactComposerVideoCopyrightDialog2=function(){this.props.onCancel&&this.props.onCancel();}.bind(this),n;}l.prototype.componentDidMount=function(){'use strict';this.refs.dialog.layer.subscribe('hide',this.$ReactComposerVideoCopyrightDialog1);};l.prototype.render=function(){'use strict';return c('React').createElement(c('XUIDialog.react'),{ref:'dialog',shown:this.props.shown,width:500,layerHideOnBlur:false,behaviors:{LayerHideOnEscape:c('LayerHideOnEscape')},key:'dialog'},c('React').createElement(c('XUIDialogBody.react'),null,h._("Please confirm that the content you are uploading does not infringe upon the intellectual property rights of any third party and that you have secured all rights necessary to copy, display and publicly perform the uploaded content (including any musical compositions or sound recordings included in the content) on Facebook.")),c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIButton.react'),{use:'confirm',onClick:this.props.onConfirm,label:h._("Confirm")}),c('React').createElement(c('XUIButton.react'),{onClick:this.props.onCancel,label:h._("Cancel")})));};l.propTypes={shown:k.bool,onConfirm:k.func,onCancel:k.func};f.exports=l;}),null);
__d('ReactComposerMediaAttachmentPostButton.react',['fbt','ReactComposerConfig','ReactComposerPostButtonContainer.react','ReactComposerVideoCopyrightDialog.react','React','ReactFragment','XUIContextualDialog.react','XUIContextualDialogBody.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.state={copyrightDialogShown:false},this.renderLayers=function(){return c('ReactFragment').create({limitDialog:c('React').createElement(c('XUIContextualDialog.react'),{alignment:'right',contextRef:function(){return this.refs.post;}.bind(this),position:'below',shown:this.props.limitExceeded,width:300},c('React').createElement(c('XUIContextualDialogBody.react'),null,h._("You can only add {number} photos at a time",[h.param('number',this.props.photoLimit)]))),copyrightDialog:c('React').createElement(c('ReactComposerVideoCopyrightDialog.react'),{shown:this.state.copyrightDialogShown,onCancel:this.$ReactComposerMediaAttachmentPostButton1,onConfirm:this.$ReactComposerMediaAttachmentPostButton2})});}.bind(this),this.$ReactComposerMediaAttachmentPostButton3=function(){if(this.props.showCopyrightDialogOnPost){this.setState({copyrightDialogShown:true});return false;}if(this.props.onClick){this.props.onClick();return false;}return true;}.bind(this),this.$ReactComposerMediaAttachmentPostButton1=function(){this.setState({copyrightDialogShown:false});}.bind(this),this.$ReactComposerMediaAttachmentPostButton2=function(){this.setState({copyrightDialogShown:false});this.props.onClick&&this.props.onClick();}.bind(this),n;}l.prototype.render=function(){return c('React').createElement('span',null,c('React').createElement(c('ReactComposerPostButtonContainer.react'),{config:this.props.config,forceDisabled:this.props.disabled,onClickPreprocess:this.$ReactComposerMediaAttachmentPostButton3,label:this.props.label,ref:'post'}),this.renderLayers());};l.propTypes={config:c('ReactComposerConfig').isRequired,disabled:k.bool,limitExceeded:k.bool,onClick:k.func,photoLimit:k.number.isRequired,showCopyrightDialogOnPost:k.bool,label:k.string};l.defaultProps={disabled:false,limitExceeded:false,showCopyrightDialogOnPost:false};f.exports=l;}),null);
__d('ReactComposerMediaEagerAttachment.react',['ReactComposerAttachmentActions','ReactComposerAttachmentType','ReactComposerAttachmentBodyMixin','ReactComposerConfig','ReactComposerMediaAttachmentActions','ReactComposerMediaAttachmentContainer.react','ReactComposerStatusActions','ReactComposerTaggerActions','React'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'ReactComposerMediaEagerAttachment',mixins:[c('ReactComposerAttachmentBodyMixin')()],propTypes:{config:c('ReactComposerConfig').isRequired,postButtonModule:h.func.isRequired},statics:{attachmentID:c('ReactComposerAttachmentType').MEDIA},componentWillMount:function j(){var k=this.props.config.attachmentsConfig[c('ReactComposerAttachmentType').MEDIA].bootstrapData;c('ReactComposerTaggerActions').updateTaggersSource(this.context.composerID,k.taggersSource);c('ReactComposerStatusActions').setMentionsSource(this.context.composerID,k.mentionsSource);c('ReactComposerMediaAttachmentActions').setConfig(this.context.composerID,k);c('ReactComposerAttachmentActions').setInitialized(this.context.composerID,c('ReactComposerAttachmentType').MEDIA);},renderX:function j(){return c('React').createElement(c('ReactComposerMediaAttachmentContainer.react'),this.props);}});f.exports=i;}),null);
__d('ReactComposerMediaPostButtonContainerMixin',['ReactComposerActions','ReactComposerAttachmentType','ReactComposerConfig','ReactComposerConstants','ReactComposerContextMixin','ReactComposerMediaAttachmentPostButton.react','ReactComposerMediaUploadStore','ReactComposerOptimisticPostingActions','ReactComposerOptimisticPostingStore','ReactComposerPhotoStore','ReactComposerPostUtils','ReactComposerPropsAndStoreBasedStateMixin','ReactComposerStore','ReactComposerVideoUploadStore','ReactComponentWithPureRenderMixin','React'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i={mixins:[c('ReactComposerContextMixin'),c('ReactComposerPropsAndStoreBasedStateMixin')(c('ReactComposerMediaUploadStore'),c('ReactComposerOptimisticPostingStore'),c('ReactComposerPhotoStore'),c('ReactComposerStore'),c('ReactComposerVideoUploadStore')),c('ReactComponentWithPureRenderMixin')],propTypes:{config:c('ReactComposerConfig').isRequired,onClickPreprocess:h.func,label:h.string},statics:{calculateState:function j(k,l,m){var n=l.config.attachmentsConfig[c('ReactComposerAttachmentType').MEDIA],o=c('ReactComposerPhotoStore').isLimitExceeded(k,n.photoLimit),p=m.gks[c('ReactComposerConstants').GK_VIDEO_COPYRIGHT]&&!!c('ReactComposerVideoUploadStore').getVideo(k),q=c('ReactComposerVideoUploadStore').getVideo(k)&&c('ReactComposerStore').isPosting(k),r=c('ReactComposerMediaUploadStore').isUploading(k)||c('ReactComposerPhotoStore').isRecognizing(k)||q,s=m.gks.optimisticPosting?o:c('ReactComposerPostUtils').isPostButtonDisabled(k,n.photoLimit);return {limitExceeded:o,isUploading:r,disabled:s,isOptimisticallyPosting:c('ReactComposerOptimisticPostingStore').isOptimisticallyPosting(k),showCopyrightDialogOnPost:p};}},componentDidUpdate:function j(){if(this.state.isOptimisticallyPosting&&!this.state.isUploading)this._startPost();},render:function j(){var k=this.props.config.attachmentsConfig[c('ReactComposerAttachmentType').MEDIA].photoLimit;return (c('React').createElement(c('ReactComposerMediaAttachmentPostButton.react'),{disabled:this.state.disabled,limitExceeded:this.state.limitExceeded,onClick:this._onClick,photoLimit:k,showCopyrightDialogOnPost:this.state.showCopyrightDialogOnPost,config:this.props.config,label:this.props.label}));},_onClick:function j(){if(this.props.onClickPreprocess)if(!this.props.onClickPreprocess())return;if(this.context.gks.optimisticPosting){if(this.state.isUploading){c('ReactComposerOptimisticPostingActions').startOptimisticallyPosting(this.context.composerID);}else this._startPost();}else this._startPost();},_startPost:function j(){c('ReactComposerActions').postStarted(this.context.composerID,{actorID:this.context.actorID,config:this.props.config,targetID:this.context.targetID});}};f.exports=i;}),null);
__d('ReactComposerCreateNoteController.react',['ReactComposerContextMixin','AsyncRequest','Bootloader','React','XNotesComposerController'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'ReactComposerCreateNoteController',mixins:[c('ReactComposerContextMixin')],propTypes:{onClick:h.func},render:function j(){return (c('React').createElement('span',{onClick:this._onClick},this.props.children));},_onClick:function j(event){c('Bootloader').loadModules(["AsyncDialog"],function(k){var l=c('XNotesComposerController').getURIBuilder().getURI(),m=new (c('AsyncRequest'))(l).setMethod('POST').setStatusElement(this.context.composerID);k.send(m);}.bind(this),'ReactComposerCreateNoteController.react');this.props.onClick&&this.props.onClick(event);}});f.exports=i;}),null);
__d('ReactComposerNotesAttachmentSelector.react',['fbt','ix','ReactComposerAttachmentSelectorContainer.react','ReactComposerAttachmentType','ReactComposerCreateNoteController.react','ReactComposerLoggingName','ReactComponentWithPureRenderMixin','React'],(function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'ReactComposerNotesAttachmentSelector',mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{label:j.string},getDefaultProps:function l(){return {label:h._("Write Note")};},render:function l(){return (c('React').createElement(c('ReactComposerCreateNoteController.react'),null,c('React').createElement(c('ReactComposerAttachmentSelectorContainer.react'),{attachmentID:c('ReactComposerAttachmentType').NOTES,label:this.props.label,icon:i('/images/litestand/composer/icons/note.png'),onSelected:this._onSelected,loggingName:c('ReactComposerLoggingName').NOTES_TAB_SELECTOR})));}});f.exports=k;}),null);
__d('ReactComposerSessionMetricsActions',['ReactComposerDispatcher','ReactComposerSessionMetricsActionTypes','ReactComposerSessionMetricsStore'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();c('ReactComposerSessionMetricsStore');var h={keystroke:function i(j){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerSessionMetricsActionTypes').KEYSTROKE});},paste:function i(j){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerSessionMetricsActionTypes').PASTE});}};f.exports=h;}),null);
__d('ReactComposerPromptsActions',['ReactComposerDispatcher','ReactComposerPromptsActionTypes','ReactComposerPromptsStore'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();c('ReactComposerPromptsStore');h.prototype.setMinutiaeData=function(i,j){'use strict';c('ReactComposerDispatcher').dispatch({composerID:i,type:c('ReactComposerPromptsActionTypes').SET_MINUTIAE_DATA,minutiaeData:j});};h.prototype.setPromptData=function(i,j){'use strict';c('ReactComposerDispatcher').dispatch({composerID:i,type:c('ReactComposerPromptsActionTypes').SET_PROMPT_DATA,promptData:j});};h.prototype.setPromptXHP=function(i,j){'use strict';c('ReactComposerDispatcher').dispatch({composerID:i,type:c('ReactComposerPromptsActionTypes').SET_PROMPT_XHP,promptXHP:j});};function h(){'use strict';}f.exports=new h();}),null);
__d('ReactComposerPromptsLoggingActionTypes',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=c('keyMirrorRecursive')({SET_SELECTED_MEME:null},'ReactComposerPromptsLoggingActionTypes');}),null);
__d("XReactFeedComposerXPromptDismissController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/prompts\/dismiss\/",{user_action:{type:"Enum",enumType:1},prompt_id:{type:"String"},prompt_type:{type:"String"},prompt_tracking_string:{type:"String"},prompt_state:{type:"String"},composer_session_id:{type:"String"}});}),null);
__d('ReactComposerPromptsLoggingStore',['ReactComposerActionTypes','ReactComposerPromptsLoggingActionTypes','ReactComposerPromptsStore','ReactComposerStoreBase','ReactComposerTaggerStore','ReactComposerTaggerType','ComposerXSessionIDs','AsyncRequest','MemePickerLogger','XReactFeedComposerXPromptDismissController','PromptsInteractionsEventNames'],(function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('ReactComposerStoreBase'));i=h&&h.prototype;function j(){'use strict';var k;i.constructor.call(this,function(){return {};},function(l){k&&k.handler(l);});k=this;}j.prototype.handler=function(k){'use strict';switch(k.type){case c('ReactComposerActionTypes').POST_STARTED:this.$ReactComposerPromptsLoggingStore1(k);break;case c('ReactComposerPromptsLoggingActionTypes').SET_SELECTED_MEME:this.$ReactComposerPromptsLoggingStore2(k);break;default:}};j.prototype.$ReactComposerPromptsLoggingStore1=function(k){'use strict';var l=this.validateAction(k,'composerID'),m=this.$ReactComposerPromptsLoggingStore3(l);m&&this.$ReactComposerPromptsLoggingStore4(m,l);var n=this.$ReactComposerPromptsLoggingStore5(l);if(n)c('MemePickerLogger').logMemePosted(n);};j.prototype.$ReactComposerPromptsLoggingStore3=function(k){'use strict';if(this.$ReactComposerPromptsLoggingStore5(k))return c('PromptsInteractionsEventNames').POST_PROMPT;if(c('ReactComposerPromptsStore').getMinutiaeData(k))if(this.$ReactComposerPromptsLoggingStore6(k)){return c('PromptsInteractionsEventNames').POST_WITHOUT_PROMPT;}else return c('PromptsInteractionsEventNames').POST_PROMPT;return null;};j.prototype.$ReactComposerPromptsLoggingStore6=function(k){'use strict';var l=c('ReactComposerPromptsStore').getMinutiaeData(k);if(!l)return false;return this.$ReactComposerPromptsLoggingStore7(k,l)||this.$ReactComposerPromptsLoggingStore8(k,l);};j.prototype.$ReactComposerPromptsLoggingStore7=function(k,l){'use strict';var m=c('ReactComposerTaggerStore').getTaggerData(k,c('ReactComposerTaggerType').ACTIVITY),n=l[c('ReactComposerTaggerType').ACTIVITY];if(!n||!n.action||!n.object)return false;if(!m||!m.action||!m.object)return true;return m.action.getUniqueID()!==n.action.getUniqueID()||m.object.getUniqueID()!==n.object.getUniqueID();};j.prototype.$ReactComposerPromptsLoggingStore8=function(k,l){'use strict';var m=c('ReactComposerTaggerStore').getTaggerData(k,c('ReactComposerTaggerType').LOCATION),n=l[c('ReactComposerTaggerType').LOCATION];if(!n||!n.place)return false;if(!m||!m.place)return true;return m.place.getUniqueID()!==n.place.getUniqueID();};j.prototype.$ReactComposerPromptsLoggingStore2=function(k){'use strict';var l=this.validateAction(k,['composerID','selectedMeme']),m=l[0],n=l[1],o=this.getComposerData(m);o.selectedMeme=n;};j.prototype.$ReactComposerPromptsLoggingStore5=function(k){'use strict';return this.getComposerData(k).selectedMeme;};j.prototype.$ReactComposerPromptsLoggingStore4=function(event,k){'use strict';var l=c('ReactComposerPromptsStore').getPromptData(k);if(!l)return;new (c('AsyncRequest'))().setURI(c('XReactFeedComposerXPromptDismissController').getURIBuilder().getURI()).setData({user_action:event,prompt_id:l.promptID,prompt_type:l.promptType,prompt_tracking_string:l.trackingString,composer_session_id:c('ComposerXSessionIDs').getSessionID(k)}).send();};f.exports=new j();}),null);
__d('ReactComposerStatusPrompt.react',['ReactComposerEvents','ReactComposerPrefillStore','ReactComposerPromptsActions','ReactComposerPromptsStore','ReactComposerPropsAndStoreBasedStateMixin','Arbiter','DOMContainer.react','React','ReactComposerPromptsLoggingStore'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();c('ReactComposerPromptsLoggingStore');var h=c('React').createClass({displayName:'ReactComposerStatusPrompt',_prefillSubscription:undefined,mixins:[c('ReactComposerPropsAndStoreBasedStateMixin')(c('ReactComposerPromptsStore'))],statics:{calculateState:function i(j,k){return {promptXHP:c('ReactComposerPromptsStore').getPromptXHP(j)};}},getDefaultProps:function i(){return {hidePrompt:false};},componentWillMount:function i(){this._prefillSubscription=c('Arbiter').subscribe(c('ReactComposerEvents').SET_PREFILL_DATA+this.context.composerID,this._handlePrefill);},componentWillUnmount:function i(){this._prefillSubscription&&this._prefillSubscription.unsubscribe();this._prefillSubscription=null;},render:function i(){if(this.props.hidePrompt||!this.state.promptXHP)return null;return (c('React').createElement(c('DOMContainer.react'),null,this.state.promptXHP));},_handlePrefill:function i(){var j=c('ReactComposerPrefillStore').getAndEraseField(this.context.composerID,'prompt');if(j)c('ReactComposerPromptsActions').setPromptXHP(this.context.composerID,j);}});f.exports=h;}),null);
__d('ReactComposerStatusAttachment.react',['cx','ReactComposerAttachmentPreviewContainer.react','ReactComposerAttachmentType','ReactComposerBootloaderPropTypes','ReactComposerConfig','ReactComposerContextMixin','ReactComposerDragDropPromptContainer.react','ReactComposerEvents','ReactComposerPrefillConfig','ReactComposerProfilePhotoBlock.react','ReactComposerSessionMetricsActions','ReactComposerStatusAttachmentMentionsInputWithTagExpansionContainer.react','ReactComposerStatusFooterContainer.react','ReactComposerStatusPrompt.react','ReactComposerTaggerSummaryContainer.react','ReactComposerTaggerSummaryPlaceholder.react','Arbiter','emptyFunction','ReactComposerStatusActions','ReactComposerPrefillMentionsInput','DraftModifier','EditorState','ReactInputSelection','SelectionState','React'],(function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();c('ReactComposerStatusActions');c('ReactComposerPrefillMentionsInput');c('DraftModifier');c('EditorState');c('ReactInputSelection');c('SelectionState');var i=c('React').PropTypes,j=c('React').createClass({displayName:'ReactComposerStatusAttachment',mixins:[c('ReactComposerContextMixin')],propTypes:{additionalTaggers:i.arrayOf(i.shape({button:i.element.isRequired,container:i.element.isRequired})),additionalFooterActions:i.arrayOf(i.element),bootloader:c('ReactComposerBootloaderPropTypes'),config:c('ReactComposerConfig').isRequired,isActive:i.bool,onFocus:i.func,onMentionsInputChange:i.func,onPasteFiles:i.func,handlePastedText:i.func,onPostIntent:i.func,placeholder:i.string.isRequired,postButtonModule:i.func,prefillConfig:c('ReactComposerPrefillConfig')},componentDidMount:function k(){if(this.props.isActive)this.refs.mentionsInput.focus();},render:function k(){var l;if(this.props.isActive||this.props.config.showExpandedComposer)l=c('React').createElement(c('ReactComposerStatusFooterContainer.react'),{additionalTaggers:this.props.additionalTaggers,additionalFooterActions:this.props.additionalFooterActions,attachmentsConfig:this.props.config.attachmentsConfig,audienceXHP:this.props.config.audienceXHP,bootloader:this.props.bootloader,config:this.props.config,mediaAcceptParam:this.props.config.mediaAcceptParam,postButtonModule:this.props.postButtonModule,prefillConfig:this.props.prefillConfig,taggersConfig:this.props.config.taggersConfig,targetData:this.props.config.targetData});var m=this.props.isActive?c('React').createElement(c('ReactComposerTaggerSummaryContainer.react'),null):c('React').createElement(c('ReactComposerTaggerSummaryPlaceholder.react'),null),n=this.props.config.attachmentsConfig[c('ReactComposerAttachmentType').STATUS],o=n.multilingualStatus,p=n.multilingualStatus&&this.props.isActive?c('React').createElement(o,null):null,q=n.markdownPreviewAttachment,r=null;if(q&&this.props.isActive){var s=q.container;r=c('React').createElement(s,{prettify:q.prettify});}var t=n.donateButtonConfig,u=null;if(t){var v=t.donateButtonContainer;u=c('React').createElement(v,{charityName:t.charityName,fundraiserCampaignId:t.fundraiserCampaignId});}var w=c('React').createElement(c('ReactComposerStatusAttachmentMentionsInputWithTagExpansionContainer.react'),{config:this.props.config,onChange:this.props.onMentionsInputChange,onFocus:this.props.onFocus,onPasteFiles:this.props.onPasteFiles,handlePastedText:this.props.handlePastedText,onPostIntent:this.props.onPostIntent,placeholder:this.props.placeholder,prefillConfig:this.props.prefillConfig,ref:'mentionsInput'}),x=c('React').createElement('div',{onKeyDown:this._onKeyDown,onPaste:this._onPaste},w,p);if(n.showProfilePic){var y=n.redirect?c('emptyFunction'):function(){c('Arbiter').inform(c('ReactComposerEvents').ACTIVATE_ATTACHMENT+this.context.composerID);}.bind(this);x=c('React').createElement(c('ReactComposerProfilePhotoBlock.react'),{profileName:n.profileName,profilePhotoBadge:n.customProfilePhoto,profilePicSrc:n.profilePicSrc,profileURI:n.profileURI,currentProfileBadgeURI:n.currentProfileBadgeURI,profileBadgeNUX:n.customProfilePhotoNux,onClick:y},x);}var z=null;if(n.topicFeedsTagger&&this.props.isActive){var aa=n.topicFeedsTagger,ba=aa.container;z=c('React').createElement(ba,{composerFeedID:aa.composerFeedID,photoAutoTaggingDelay:aa.photoAutoTaggingDelay,photoPollingDuration:aa.photoPollingDuration,photoPollingInterval:aa.photoPollingInterval,showNux:aa.showNux,textAutoTaggingDelay:aa.textAutoTaggingDelay,topicLimit:aa.topicLimit,darkLaunch:aa.darkLaunch});}return (c('React').createElement('div',{className:this.props.className},c('React').createElement(c('ReactComposerDragDropPromptContainer.react'),{root:this,config:this.props.config}),c('React').createElement('div',{className:n.shouldScrollComposerContent?"_1w_g":''},x,c('React').createElement(c('ReactComposerAttachmentPreviewContainer.react'),null),m,c('React').createElement(c('ReactComposerStatusPrompt.react'),{hidePrompt:this.props.isActive}),r),u,z,l));},_onKeyDown:function k(l){c('ReactComposerSessionMetricsActions').keystroke(this.context.composerID);},_onPaste:function k(l){c('ReactComposerSessionMetricsActions').paste(this.context.composerID);}});f.exports=j;}),null);
__d('ReactComposerStatusAttachmentContainer.react',['ReactComposerAttachmentActions','ReactComposerAttachmentStore','ReactComposerAttachmentType','ReactComposerContextMixin','ReactComposerLocationAttachmentActions','ReactComposerLoggingName','ReactComposerPhotoUploader','ReactComposerPropsAndStoreBasedStateMixin','ReactComposerScrapedAttachmentActions','ReactComposerStatusAttachment.react','ReactComposerStatusStore','ReactComposerTaggerActions','ReactComposerTaggerStore','ReactComposerStatusAttachmentFocusStore','ReactComposerStatusUtils','React','URLScraper'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'ReactComposerStatusAttachmentContainer',_uploader:undefined,mixins:[c('ReactComposerContextMixin'),c('ReactComposerPropsAndStoreBasedStateMixin')(c('ReactComposerAttachmentStore'),c('ReactComposerStatusStore'),c('ReactComposerTaggerStore'),c('ReactComposerStatusAttachmentFocusStore'))],propTypes:{scrapeLinkOnInit:h.bool},getDefaultProps:function j(){return {scrapeLinkOnInit:true};},statics:{calculateState:function j(k,l){var m=c('ReactComposerAttachmentStore').isSelectedAttachmentActive(k),n=c('ReactComposerStatusAttachmentFocusStore').isInputFocused(k);return {isActive:m||n};}},componentWillMount:function j(){var k=this.props.config.attachmentsConfig[c('ReactComposerAttachmentType').MEDIA];this._uploader=new (c('ReactComposerPhotoUploader'))(this.context,k.photoLimit,{disableFaceRecognition:k.disableFaceboxTagger});},componentDidMount:function j(){var k=this.props.config.attachmentsConfig[c('ReactComposerAttachmentType').STATUS];c('ReactComposerScrapedAttachmentActions').enabled(this.context.composerID,k.canScrapeShare);c('ReactComposerLocationAttachmentActions').enabled(this.context.composerID,k.canAttachLocation);if(this.props.scrapeLinkOnInit){var l=c('ReactComposerStatusStore').getMessageText(this.context.composerID);if(l)c('ReactComposerStatusUtils').scrapeLink(this.context.composerID,this.context.targetID,l,this.context.composerType,this.context.actorID,c('ReactComposerLoggingName').INLINE_COMPOSER);}},render:function j(){return (c('React').createElement(c('ReactComposerStatusAttachment.react'),babelHelpers['extends']({},this.props,this.state,{config:this.props.config,onFocus:this._onFocus,onMentionsInputChange:this._onMentionsInputChange,onPasteFiles:this._onPasteFiles,handlePastedText:this._handlePastedText,placeholder:this.props.placeholder,postButtonModule:this.props.postButtonModule})));},_onFocus:function j(){c('ReactComposerAttachmentActions').selectAttachment(this.context.composerID,c('ReactComposerAttachmentType').STATUS,true);c('ReactComposerTaggerActions').deselectCurrentTagger(this.context.composerID,c('ReactComposerLoggingName').INLINE_COMPOSER);},_onMentionsInputChange:function j(k){var l=k.getCurrentContent().getPlainText();if(!c('URLScraper').trigger(l))c('ReactComposerStatusUtils').scrapeLink(this.context.composerID,this.context.targetID,l,this.context.composerType,this.context.actorID,c('ReactComposerLoggingName').INLINE_COMPOSER);},_onPasteFiles:function j(k){c('ReactComposerAttachmentActions').selectAttachment(this.context.composerID,c('ReactComposerAttachmentType').MEDIA,true);c('ReactComposerStatusUtils').uploadPastedFile(this.context.composerID,k[0],this._uploader);},_handlePastedText:function j(k,l){c('ReactComposerStatusUtils').scrapeLink(this.context.composerID,this.context.targetID,k,this.context.composerType,this.context.actorID,c('ReactComposerLoggingName').LINK_PASTED);return false;}});f.exports=i;}),null);
__d('ReactComposerStatusEagerAttachment.react',['fbt','ReactComposerAttachmentActions','ReactComposerAttachmentType','ReactComposerAttachmentBodyMixin','ReactComposerConfig','ReactComposerPrefillConfig','ReactComposerStatusActions','ReactComposerStatusAttachmentContainer.react','ReactComposerTaggerActions','Arbiter','React'],(function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'ReactComposerStatusEagerAttachment',mixins:[c('ReactComposerAttachmentBodyMixin')()],propTypes:{config:c('ReactComposerConfig').isRequired,postButtonModule:i.func.isRequired,selected:i.bool,prefillConfig:c('ReactComposerPrefillConfig')},getDefaultProps:function k(){return {placeholder:h._(["What's on your mind?","2340e43c54f5a3de9ca7fc0a7efc2cae"])};},statics:{attachmentID:c('ReactComposerAttachmentType').STATUS},componentWillMount:function k(){var l=this.props.config.attachmentsConfig[c('ReactComposerAttachmentType').STATUS].bootstrapData;c('ReactComposerTaggerActions').updateTaggersSource(this.context.composerID,l.taggersSource);c('ReactComposerStatusActions').setMentionsSource(this.context.composerID,l.mentionsSource);c('ReactComposerStatusActions').setTypeaheadReporter(this.context.composerID,l.typeaheadReporter);c('ReactComposerAttachmentActions').setInitialized(this.context.composerID,c('ReactComposerAttachmentType').STATUS);},componentDidMount:function k(){c('Arbiter').inform('ReactComposerStatusEagerAttachment/mounted',this.context.composerID,c('Arbiter').BEHAVIOR_STATE);},renderX:function k(){return c('React').createElement(c('ReactComposerStatusAttachmentContainer.react'),this.props);}});f.exports=j;}),null);
__d('ReactComposerFeedStore',['ReactComposerActionStore','ReactComposerMediaConfig','ReactComposerPostUtils','Bootloader'],(function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('ReactComposerActionStore'));i=h&&h.prototype;function j(){'use strict';i.constructor.call(this);}j.prototype.__onPostStarted=function(k){'use strict';var l=this.validateAction(k,'composerID');c('ReactComposerPostUtils').post({actorID:k.actorID,composerConfig:k.config,composerID:l,targetID:k.targetID});c('Bootloader').loadModules(["ReactComposerMagicTagSurvey"],function(m){return (m.loadSurvey(l));},'ReactComposerFeedStore');};j.prototype.__canPost=function(k){'use strict';return !c('ReactComposerPostUtils').isPostButtonDisabled(k.composerID,c('ReactComposerMediaConfig').photo.limit);};j.prototype.__onPostSucceeded=function(k){'use strict';var l=this.validateAction(k,'composerID');c('Bootloader').loadModules(["ReactComposerFeedSurvey"],function(m){return (m.onPostSucceeded(l));},'ReactComposerFeedStore');};f.exports=new j();}),null);
__d('ReactComposerFeedMediaPostButtonContainer.react',['ReactComposerContextMixin','ReactComposerFeedStore','ReactComposerMediaPostButtonContainerMixin','React'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('React').createClass({displayName:'ReactComposerFeedMediaPostButtonContainer',mixins:[c('ReactComposerContextMixin'),c('ReactComposerMediaPostButtonContainerMixin')],componentDidMount:function i(){c('ReactComposerFeedStore').registerComposerID(this.context.composerID);}});f.exports=h;}),null);
__d('ReactComposerFeedPostButtonContainer.react',['ReactComposerContextMixin','ReactComposerFeedStore','ReactComposerPostButtonContainerMixin','React'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('React').createClass({displayName:'ReactComposerFeedPostButtonContainer',mixins:[c('ReactComposerContextMixin'),c('ReactComposerPostButtonContainerMixin')],componentDidMount:function i(){c('ReactComposerFeedStore').registerComposerID(this.context.composerID);}});f.exports=h;}),null);
__d('ReactComposerDraftLoad',['ReactComposerAttachmentActions','ReactComposerDraftStore','ReactComposerPrefillUtils'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={loadDraft:function i(j){var k=c('ReactComposerDraftStore').getTheDraft(j);k&&c('ReactComposerPrefillUtils').prefill(j,k);if(k&&k.selectedAttachment)c('ReactComposerAttachmentActions').selectAttachment(j,k.selectedAttachment,true);}};f.exports=h;}),null);
__d('ReactComposerDraftController.react',['ReactComposerContextMixin','ReactComposerDraftDelete','ReactComposerDraftLoad','ReactComposerDraftRetrieve','ReactComposerEvents','Arbiter','React','SubscriptionsHandler'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('React').createClass({displayName:'ReactComposerDraftController',_subscriptionsHandler:undefined,mixins:[c('ReactComposerContextMixin')],componentWillMount:function i(){this._subscriptionsHandler=new (c('SubscriptionsHandler'))();this._subscriptionsHandler.addSubscriptions(c('Arbiter').subscribe(c('ReactComposerEvents').POST_SUCCEEDED+this.context.composerID,function(){return c('ReactComposerDraftDelete').deleteDraft(this.context.actorID);}.bind(this)));},componentWillUnmount:function i(){this._subscriptionsHandler&&this._subscriptionsHandler.release();},render:function i(){return this.props.children;},setUpInitTrigger:function i(){this._subscriptionsHandler.addSubscriptions(c('Arbiter').subscribe(c('ReactComposerEvents').LOAD_DRAFT+this.context.composerID,this.init));},init:function i(){c('ReactComposerDraftRetrieve').retrieveDraft(this.context.actorID,this.context.composerID);c('ReactComposerDraftLoad').loadDraft(this.context.composerID);}});f.exports=h;}),null);
__d('ReactComposerHeader.react',['cx','ReactComposerHeaderCore.react','ReactComposerHeaderProps','CurrentUser','ReactComponentWithPureRenderMixin','React','TooltipLink.react','joinClasses'],(function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').createClass({displayName:'ReactComposerHeader',mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:c('ReactComposerHeaderProps').propTypes,getDefaultProps:c('ReactComposerHeaderProps').getDefaultProps,render:function j(){return (c('React').createElement(c('ReactComposerHeaderCore.react'),babelHelpers['extends']({className:c('joinClasses')(this.props.className,(c('React').Children.count(this.props.attachmentSelectors)>3?"_1fu5":'')+(c('React').Children.count(this.props.attachmentSelectors)<3?' '+"_tqc":''))},this.props),this.props.rightChild));}});f.exports=i;}),null);
__d('ReactFeedComposerX.react',['cx','fbt','ReactComposer.react','ReactComposerAttachmentActions','ReactComposerAttachmentType','ReactComposerBodyContainer.react','ReactComposerConfig','ReactComposerContextConfig','ReactComposerContextProviderMixin','ReactComposerDraftController.react','ReactComposerDraftRetrieve','ReactComposerEvents','ReactComposerFeedBootloader','ReactComposerFeedMediaPostButtonContainer.react','ReactComposerFeedPostButtonContainer.react','ReactComposerHeader.react','ReactComposerAlbumAttachmentSelector.react','ReactComposerInstantMediaAttachmentSelectorContainer.react','ReactComposerLiveVideoAttachmentSelector.react','ReactComposerLiveVideoLazyAttachment.react','ReactComposerLiveVideoPreviewButton.react','ReactComposerMediaAttachmentSelector.react','ReactComposerMediaEagerAttachment.react','ReactComposerNotesAttachmentSelector.react','ReactComposerPrefillConfig','ReactComposerPrefillUtils','ReactComposerQAndAAttachmentSelector.react','ReactComposerQAndALazyAttachment.react','ReactComposerStatusEagerAttachment.react','Arbiter','LitestandComposer','React'],(function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('React').createClass({displayName:'ReactFeedComposerX',mixins:[c('ReactComposerContextProviderMixin')],propTypes:{contextConfig:c('ReactComposerContextConfig').isRequired,config:c('ReactComposerConfig').isRequired,prefillConfig:c('ReactComposerPrefillConfig')},componentWillMount:function k(){this.props.prefillConfig&&c('ReactComposerPrefillUtils').prefill(this.props.contextConfig.composerID,this.props.prefillConfig);},componentDidMount:function k(){c('LitestandComposer').initComposer(this.props.contextConfig.composerID);var l=this.props.prefillConfig;if(l&&l.selectedAttachment){c('ReactComposerAttachmentActions').selectAttachment(this.props.contextConfig.composerID,l.selectedAttachment,l.shouldActivateSelectedAttachment);if(l.shouldActivateSelectedAttachment)c('Arbiter').inform(c('ReactComposerEvents').ACTIVATE_ATTACHMENT+this.props.contextConfig.composerID);}var m=this.props.config.attachmentsConfig[c('ReactComposerAttachmentType').STATUS];if(m.loadDraft)if(m.autoPrefillDraft){this.refs.draftController.init();}else this.refs.draftController.setUpInitTrigger();},render:function k(){var l=this.props.prefillConfig,m=l&&l.selectedAttachment?l.selectedAttachment:c('ReactComposerAttachmentType').STATUS,n=this._getAttachmentComponents(m),o=n[0],p=n[1],q=c('React').createElement(c('ReactComposer.react'),{className:"_5n2b",loggingConfig:this.props.config.loggingConfig},c('React').createElement(c('ReactComposerHeader.react'),{attachmentSelectors:o,showDelimiter:true,truncateSelectorText:true}),c('React').createElement(c('ReactComposerBodyContainer.react'),{expanded:this.props.config.showExpandedComposer},p)),r=this.props.config.attachmentsConfig[c('ReactComposerAttachmentType').STATUS];if(r.loadDraft)q=c('React').createElement(c('ReactComposerDraftController.react'),{ref:'draftController'},q);return q;},_getAttachmentComponents:function k(l){var m=this.props.config.attachmentsConfig,n=[],o=[];if(m[c('ReactComposerAttachmentType').STATUS].enabled)o.push(this._getStatusAttachment(l===c('ReactComposerAttachmentType').STATUS));o.push(this._getMediaAttachment(l===c('ReactComposerAttachmentType').MEDIA));n.push(this._getMediaAttachmentSelector());if(m[c('ReactComposerAttachmentType').LIVE_VIDEO].enabled){n.push(this._getLiveVideoSelector());o.push(this._getLiveVideoAttachment(l===c('ReactComposerAttachmentType').LIVE_VIDEO));}if(m[c('ReactComposerAttachmentType').ALBUM].enabled&&!m[c('ReactComposerAttachmentType').ALBUM].suppressSelector)n.push(this._getAlbumAttachmentSelector());if(m[c('ReactComposerAttachmentType').NOTES].enabled&&!m[c('ReactComposerAttachmentType').NOTES].suppressSelector)n.push(this._getNotesAttachmentSelector());if(m[c('ReactComposerAttachmentType').QANDA].enabled){if(!m[c('ReactComposerAttachmentType').QANDA].suppressSelector)n.push(this._getQAndAAttachmentSelector());o.push(this._getQAndAAttachment());}return [n,o];},_getStatusAttachment:function k(l){var m=this.props.config.attachmentsConfig[c('ReactComposerAttachmentType').STATUS].placeholderText;if(c('ReactComposerDraftRetrieve').hasDraft(this.props.contextConfig.actorID))m=i._("Continue creating your post...");return (c('React').createElement(c('ReactComposerStatusEagerAttachment.react'),{key:'status',config:this.props.config,prefillConfig:this.props.prefillConfig,selected:l,postButtonModule:c('ReactComposerFeedPostButtonContainer.react'),placeholder:m}));},_getAlbumAttachmentSelector:function k(){return (c('React').createElement(c('ReactComposerAlbumAttachmentSelector.react'),{key:'album',createAlbumLink:this.props.config.attachmentsConfig[c('ReactComposerAttachmentType').ALBUM].createAlbumLink}));},_getNotesAttachmentSelector:function k(){return (c('React').createElement(c('ReactComposerNotesAttachmentSelector.react'),{key:'notes'}));},_getQAndAAttachmentSelector:function k(){return (c('React').createElement(c('ReactComposerQAndAAttachmentSelector.react'),{key:'qanda'}));},_getQAndAAttachment:function k(){return (c('React').createElement(c('ReactComposerQAndALazyAttachment.react'),{key:'qanda',config:this.props.config,bootloader:c('ReactComposerFeedBootloader')}));},_getMediaAttachmentSelector:function k(){var l=this.props.config.attachmentsConfig[c('ReactComposerAttachmentType').MEDIA];if(l.openFileBrowserImmediately)return (c('React').createElement(c('ReactComposerInstantMediaAttachmentSelectorContainer.react'),{key:'media',disableFaceRecognition:l.disableFaceboxTagger,mediaAcceptParam:this.props.config.mediaAcceptParam,photoLimit:l.photoLimit,targetData:this.props.config.targetData,mediaConfig:l}));return (c('React').createElement(c('ReactComposerMediaAttachmentSelector.react'),{key:'media',label:i._("Add Photos\/Video")}));},_getMediaAttachment:function k(l){return (c('React').createElement(c('ReactComposerMediaEagerAttachment.react'),{key:'media',config:this.props.config,postButtonModule:c('ReactComposerFeedMediaPostButtonContainer.react'),selected:l}));},_getLiveVideoSelector:function k(){return (c('React').createElement(c('ReactComposerLiveVideoAttachmentSelector.react'),{key:'live_video'}));},_getLiveVideoAttachment:function k(l){return (c('React').createElement(c('ReactComposerLiveVideoLazyAttachment.react'),{key:'live_video',config:this.props.config,postButtonModule:c('ReactComposerLiveVideoPreviewButton.react'),selected:l}));}});f.exports=j;}),null);
__d('ReactFeedComposerXBootloader',['csx','ReactComposerAttachmentActions','ReactComposerAttachmentType','ReactComposerInit','ReactComposerLoggingName','ReactComposerPromptsStore','ReactFeedComposerX.react','Arbiter','AsyncRequest','Bootloader','ComposerEntryPointRef','CSS','DOM','Event','ReactInputSelection','SubscriptionsHandler','XReactComposerLoggingODSController','$','getActiveElement'],(function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=void 0,j={_inputDOM:HTMLElement,bootload:function k(l,m){var n=c('$')('feedx_container'),o=c('DOM').find(n,"._559p"),p=c('CSS').hasClass(o,'async_saving');if(p){i=new (c('SubscriptionsHandler'))();i.addSubscriptions(c('Event').listen(o,'success',function(){this._bootloadImpl(l,n,m);}.bind(this)),c('Event').listen(o,'error',function(){this._bootloadImpl(l,n,m);}.bind(this)));}else this._bootloadImpl(l,n,m);},_bootloadImpl:function k(l,m,n){n.config.audienceXHP=this._getXHPToReactNode(m,"._ej0");var o=c('DOM').scry(m,"._21h7")[0];if(!o)o=c('DOM').find(m,"._4d6h");var p=c('DOM').scry(o,'input[name="composer_photo[]"]')[0],q=c('ReactComposerAttachmentType').STATUS;if(p){this._inputDOM=p;c('Event').listen(this._inputDOM,'change',function(){if(this._inputDOM.files&&this._inputDOM.files.length>0){this._uploadExistingFiles(this._inputDOM.files,l,n);c('ReactComposerAttachmentActions').selectAttachment(l,c('ReactComposerAttachmentType').MEDIA,true,c('ReactComposerLoggingName').MEDIA_TAB_SELECTOR);}}.bind(this));if(p.files&&p.files.length>0){q=c('ReactComposerAttachmentType').MEDIA;this._uploadExistingFiles(p.files,l,n);}}n.prefillConfig=Object.assign(n.prefillConfig,this._appendPrefillConfig(m,l,q));c('ReactComposerInit').init(c('ReactFeedComposerX.react'),n,m);var r=c('XReactComposerLoggingODSController').getURIBuilder().setString('event','bootload_done').setEnum('composer_type',c('ComposerEntryPointRef').FEEDX).getURI();new (c('AsyncRequest'))(r).send();i&&i.release();c('Arbiter').inform('ReactFeedComposerXBootloader/bootload/'+l);},_appendPrefillConfig:function k(l,m){var n=arguments.length<=2||arguments[2]===undefined?c('ReactComposerAttachmentType').STATUS:arguments[2],o=c('DOM').find(l,"._3en1"),p=c('getActiveElement')()==o||c('CSS').hasClass(c('DOM').find(l,'.focus_target'),'child_was_focused'),q={text:o.value},r=this._getXHPToReactNode(l,"._1sek"),s=c('ReactComposerPromptsStore').getMinutiaeData(m);return {mentionsInput:{textWithEntities:q,selection:c('ReactInputSelection').getSelection(o)},selectedAttachment:n,shouldActivateSelectedAttachment:p||!!s,prompt:r,taggersData:s};},_getXHPToReactNode:function k(l,m){var n=c('DOM').scry(l,m);if(n.length===0)return null;var o=n[0],p=o.cloneNode(true);o.parentNode.replaceChild(p,o);return o;},_uploadExistingFiles:function k(l,m,n){var o=n.config.attachmentsConfig[c('ReactComposerAttachmentType').MEDIA];c('Bootloader').loadModules(["ReactComposerMediaUtils","ReactComposerPhotoUploader"],function(p,q){return (p.uploadPhotosOrVideo(m,Array.prototype.slice.call(l),new q(n.contextConfig,o.photoLimit,{disableFaceRecognition:o.disableFaceboxTagger}),n.config.targetData.targetSupportsMultiplePhotos,n.config.targetData.targetSupportsMultiMedia));},'ReactFeedComposerXBootloader');}};f.exports=j;}),null);